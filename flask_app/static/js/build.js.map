{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./flask_app/static/js/buildMenu.js","webpack:///./flask_app/static/js/game.js","webpack:///./flask_app/static/js/materials/Atmosphere.js","webpack:///./flask_app/static/js/materials/atmosphere.js","webpack:///./flask_app/static/js/materials/noise.js","webpack:///./flask_app/static/js/materials/planetMaterial.js","webpack:///./flask_app/static/js/objects/planet.js","webpack:///./flask_app/static/js/objects/star.js","webpack:///./flask_app/static/js/shaders/atmosphere.js","webpack:///./flask_app/static/js/shaders/noise.js","webpack:///./flask_app/static/js/ui.js","webpack:///./node_modules/three/build/three.module.js","webpack:///./src/main-dev.js"],"names":["setupBuildMenu","gameInstance","window","buildMenu","document","getElementById","buildMenuContent","querySelector","structures","type","name","desc","cost","resources","research_points","population","icon","iconColor","faction_materials","blue_material","red_material","green_material","selectedPlanet","showForPlanet","planet","console","log","error","currentResources","gameState","html","forEach","researchPoints","materials","blue","red","green","playerFaction","USER_INFO","faction","canAfford","structure","itemClass","costClass","costString","costJSON","JSON","stringify","innerHTML","querySelectorAll","button","addEventListener","handleBuildClick","style","display","event","currentTarget","structureType","getAttribute","parse","e","classList","contains","showNotification","buildStructure","userData","planetData","planetId","id","Math","random","toString","substr","mining_facilities","research_outposts","colony_bases","orbital_structures","push","built","Date","toISOString","addStructure","updateResourceDisplay","saveGame","hide","message","notification","createElement","className","textContent","body","appendChild","setTimeout","opacity","parentNode","removeChild","THREE","OrbitControls","Planet","Star","GameUI","ShipBuilder","seed","playerPosition","x","y","z","planets","stars","ships","fighters","capital_ships","MassGravity","loadingScreen","progressBar","loadingProgress","gameSettings","orbitSpeedFactor","miningRate","miningInterval","socket","Promise","all","loadGame","loadGameSettings","then","initComponents","initScene","initAudio","initInteraction","initUI","setListeners","hideLoadingScreen","render","catch","isTransitioning","response","fetch","settings","json","orbit_speed_factor","mining_rate","mining_interval","progress","min","width","updateLoadingProgress","userResponse","userId","userError","warn","data","Object","keys","length","resourcesValue","undefined","floor","researchPointsValue","populationValue","blueMaterial","redMaterial","greenMaterial","camera","position","solar","children","child","isStar","starData","orbits","orbit","isPlanet","distance","orbitDistance","period","orbitalPeriod","tilt","orbitTilt","angle","rotation","emit","method","headers","result","success","updated_data","showSaveNotification","top","left","transform","background","color","padding","borderRadius","zIndex","transition","renderer","WebGLRenderer","antialias","setClearColor","Color","setPixelRatio","devicePixelRatio","setSize","innerWidth","innerHeight","shadowMap","enabled","container","domElement","scene","Scene","PerspectiveCamera","pos","set","controls","enableDamping","dampingFactor","maxDistance","rotateSpeed","clock","Clock","timeScale","raycaster","Raycaster","mouse","Vector2","selectedObject","clickCount","clickTimer","doubleClickDelay","isZoomedIn","zoomedPlanet","backgroundMusic","Audio","loop","volume","targetMusicVolume","isMusicMuted","playBackgroundMusic","play","fadeStep","fadeInterval","fadeInInterval","setInterval","clearInterval","max","ambientLight","AmbientLight","add","addSkybox","Object3D","solarCenter","Vector3","solarRadius","restoreSolarSystem","generateSolarSystem","calculateSolarSystemBounds","maxDistanceSq","center","count","distSq","lengthSq","worldPos","getWorldPosition","divideScalar","sqrt","ui","shipBuilder","massGravity","buildMenuUI","requestResourceUpdate","handleDoubleClick","bind","detail","clearTimeout","onDoubleClick","clientX","clientY","setFromCamera","intersects","intersectObjects","zoomToFullSolarSystem","planetToZoom","i","object","parent","zoomToPlanet","isBackgroundClick","startPos","clone","planetPos","planetRadius","geometry","parameters","radius","targetDirection","normalize","targetPos","multiplyScalar","duration","startTime","now","animate","elapsed","smoothProgress","updatedPlanetPos","target","copy","newTargetPos","lerpVectors","lookAt","update","requestAnimationFrame","selectObject","isSelectable","targetDistance","animateCameraMove","originalControlsState","targetPoint","newTarget","selected","loader","CubeTextureLoader","setPath","textureCube","load","starConfig","temperature","luminosity","star","planetConfig","minerals","energy","water","orbitContainer","currentAngle","PI","pow","Array","isArray","rng","seededRandom","starNames","planetNames","glowColor","numPlanets","planetTypes","planetType","planetColor","hasAtmosphere","atmosphereColor","rotationSpeed","cloudSpeed","initialAngle","amount","fontSize","s","hashString","sin","str","hash","char","charCodeAt","onWindowResize","aspect","updateProjectionMatrix","delta","getDelta","texLoader","TextureLoader","cloudTex","Atmosphere","params","noiseFunctions","vertexShader","fragmentShader","material","ShaderMaterial","uniforms","time","value","pointTexture","replace","blending","NormalBlending","depthWrite","transparent","BufferGeometry","verts","uvs","sizes","particles","r","thickness","p","minSize","minParticleSize","maxSize","maxParticleSize","size","setAttribute","Float32BufferAttribute","Points","createNoiseMaterial","options","scale","offset","vertex","fragment","PlanetMaterialGenerator","textureCache","Map","directoryHandle","fileSystemAccessRequested","initFileSystemAccess","climateZones","colors","land","Infinity","maxCacheSize","showDirectoryPicker","storedHandle","getStoredDirectoryHandle","mode","requestPermission","resolve","reject","request","indexedDB","open","onupgradeneeded","db","objectStoreNames","createObjectStore","keyPath","onsuccess","transaction","store","objectStore","getRequest","get","handle","onerror","putRequest","put","startIn","suggestedName","storeDirectoryHandle","distanceFromSun","hasOcean","oceanLevel","climateZone","getClimateZone","seedNum","parseFloat","cacheKey","toFixed","has","cachedData","textures","generateTextures","emissiveColor","emissiveIntensity","MeshPhysicalMaterial","map","diffuse","normalMap","normal","normalScale","displacementMap","height","displacementScale","roughnessMap","roughness","metalness","clearcoat","clearcoatRoughness","envMapIntensity","emissive","mainMaterial","oceanMaterial","zone","oceanColor","parseInt","transmission","waveTexture","generateOceanNormalMap","heightMap","generateHeightMap","diffuseMap","generateDiffuseMap","generateNormalMap","generateRoughnessMap","oldestKey","next","delete","saveTexturesToDisk","requestFileSystemAccess","saveTextureToDisk","getTextureFilename","source","textureName","canvas","userDirHandle","getDirectoryHandle","create","fileHandle","getFileHandle","blob","toBlob","writable","createWritable","write","close","file","getFile","img","Image","src","URL","createObjectURL","onload","ctx","getContext","drawImage","texture","CanvasTexture","wrapS","RepeatWrapping","wrapT","key","cleanKey","startsWith","substring","workingSize","fillStyle","fillRect","imageData","getImageData","nx","ny","phi","atan2","theta","fbm","cos","index","putImageData","finalCanvas","finalCtx","heightCanvas","heightCtx","heightData","landColor","waterColor","snowColor","beachColor","snowAmounts","snowAmount","depthFactor","depthColor","g","b","landHeightFactor","terrainColor","snowBlendFactor","lerp","variation","beachBlendFactor","strength","x1","x2","y1","y2","centerIndex","leftIndex","rightIndex","topIndex","bottomIndex","centerHeight","leftHeight","rightHeight","topHeight","bottomHeight","dx","dy","isWater","noise2D","wave1","wave2","wave3","octaves","amplitude","maxOctaves","noise3D","X","Y","Z","u","fade","v","w","A","AA","AB","B","BA","BB","grad","t","a","h","atmosphereScale","determineClimateType","climate","createPlanet","createAtmosphere","orbitalsContainer","SphereGeometry","computeTangents","planetParams","getPlanetParamsForClimate","dirToSun","lightDirection","getVertexShader","getFragmentShader","planetMesh","Mesh","castShadow","receiveShadow","sharpness","persistence","lacunarity","undulation","ambientIntensity","diffuseIntensity","specularIntensity","shininess","lightColor","bumpStrength","bumpOffset","color1","color2","color3","color4","color5","transition2","transition3","transition4","transition5","blend12","blend23","blend34","blend45","atmosphereParams","getAtmosphereParamsForClimate","atmosphere","density","speed","orbitRadius","orbitSpeed","BoxGeometry","MeshStandardMaterial","orbitAngle","performance","createStarGlowMaterial","coeficient","power","side","FrontSide","AdditiveBlending","glowScale","createGlow","createLight","MeshBasicMaterial","starMesh","innerGeometry","innerMaterial","innerMesh","outerGeometry","outerMaterial","BackSide","outerMesh","light","PointLight","shadow","mapSize","near","far","fillLight","find","intensity","atmosphereShader","noiseShader","game","uiContainer","detailPanel","addStyles","head","showDetailPanel","resourcesElement","show","focusCameraOn","hideDetailPanel","structureColors","structureNames","hasShipFacilities","shipButton","shipMenu","planetObject","resourcesNeeded","getStructureCost","newResourceAmount","miningFacilitiesElement","currentFacilities","saveGameData","costs","objectPos","objectRadius","direction","subVectors","controlsEnabled","REVISION","MOUSE","LEFT","MIDDLE","RIGHT","ROTATE","DOLLY","PAN","TOUCH","DOLLY_PAN","DOLLY_ROTATE","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","DoubleSide","TwoPassDoubleSide","NoBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping","CustomToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedInt248Type","AlphaFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","RGB_BPTC_SIGNED_Format","RGB_BPTC_UNSIGNED_Format","RED_RGTC1_Format","SIGNED_RED_RGTC1_Format","RED_GREEN_RGTC2_Format","SIGNED_RED_GREEN_RGTC2_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","NormalAnimationBlendMode","AdditiveAnimationBlendMode","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","NoColorSpace","SRGBColorSpace","LinearSRGBColorSpace","DisplayP3ColorSpace","LinearDisplayP3ColorSpace","LinearTransfer","SRGBTransfer","Rec709Primaries","P3Primaries","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","NeverCompare","LessCompare","EqualCompare","LessEqualCompare","GreaterCompare","NotEqualCompare","GreaterEqualCompare","AlwaysCompare","StaticDrawUsage","DynamicDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","GLSL1","GLSL3","_SRGBAFormat","WebGLCoordinateSystem","WebGPUCoordinateSystem","EventDispatcher","listener","_listeners","listeners","indexOf","listenerArray","splice","array","slice","l","call","_lut","_seed","DEG2RAD","RAD2DEG","generateUUID","d0","d1","d2","d3","uuid","toLowerCase","clamp","euclideanModulo","n","m","mapLinear","a1","a2","b1","b2","inverseLerp","damp","lambda","dt","exp","pingpong","abs","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","imul","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","ceil","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","q","c","order","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","denormalize","constructor","Float32Array","Uint32Array","Uint16Array","Uint8Array","Int32Array","Int16Array","Int8Array","Error","round","MathUtils","prototype","isVector2","scalar","elements","minVal","maxVal","trunc","denominator","dot","acos","distanceToSquared","alpha","v1","v2","attribute","getX","getY","Symbol","iterator","Matrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","isMatrix3","te","me","xAxis","yAxis","zAxis","setFromMatrix3Column","multiplyMatrices","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","d","f","t11","t12","t13","det","detInv","tmp","matrix4","setFromMatrix4","invert","transpose","tx","ty","sx","sy","cx","cy","premultiply","_m3","makeScale","makeRotation","makeTranslation","matrix","fromArray","arrayNeedsUint32","TYPED_ARRAYS","Uint8ClampedArray","Float64Array","getTypedArray","buffer","createElementNS","createCanvasElement","_cache","warnOnce","LINEAR_SRGB_TO_LINEAR_DISPLAY_P3","LINEAR_DISPLAY_P3_TO_LINEAR_SRGB","COLOR_SPACES","transfer","primaries","toReference","fromReference","convertSRGBToLinear","convertLinearToSRGB","applyMatrix3","SUPPORTED_WORKING_COLOR_SPACES","Set","ColorManagement","_workingColorSpace","legacyMode","workingColorSpace","colorSpace","convert","sourceColorSpace","targetColorSpace","sourceToReference","targetFromReference","fromWorkingColorSpace","toWorkingColorSpace","getPrimaries","getTransfer","SRGBToLinear","LinearToSRGB","_canvas","ImageUtils","image","test","HTMLCanvasElement","context","ImageData","toDataURL","HTMLImageElement","ImageBitmap","_sourceId","Source","isSource","defineProperty","version","meta","isRootObject","images","output","url","isDataTexture","serializeImage","getDataURL","from","_textureId","Texture","DEFAULT_IMAGE","mapping","DEFAULT_MAPPING","magFilter","minFilter","format","anisotropy","DEFAULT_ANISOTROPY","isTexture","mipmaps","channel","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","onUpdate","isRenderTargetTexture","needsPMREMUpdate","setUvTransform","needsUpdate","metadata","generator","toJSON","wrap","dispatchEvent","uv","encoding","Vector4","isVector4","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","RenderTarget","isRenderTarget","depth","scissor","scissorTest","viewport","assign","depthBuffer","stencilBuffer","depthTexture","samples","dispose","WebGLRenderTarget","isWebGLRenderTarget","DataArrayTexture","isDataArrayTexture","wrapR","WebGLArrayRenderTarget","isWebGLArrayRenderTarget","Data3DTexture","isData3DTexture","WebGL3DRenderTarget","isWebGL3DRenderTarget","WebGLMultipleRenderTargets","isWebGLMultipleRenderTargets","il","Quaternion","isQuaternion","_x","_y","_z","_w","_onChangeCallback","quaternion","euler","_order","c1","c3","s1","s3","axis","halfAngle","trace","vFrom","vTo","Number","EPSILON","step","angleTo","slerp","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","qb","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","qa","u1","sqrt1u1","sqrtu1","u2","u3","toArray","callback","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","z1","w1","dir","sqrSin","len","tDir","isVector3","applyQuaternion","_quaternion$4","setFromEuler","setFromAxisAngle","qx","qy","qz","qw","ix","iy","iz","iw","applyMatrix4","matrixWorldInverse","projectionMatrix","projectionMatrixInverse","matrixWorld","crossVectors","ax","ay","az","bx","by","bz","planeNormal","_vector$b","projectOnVector","sub","dz","setFromSphericalCoords","sinPhiRadius","setFromCylindricalCoords","setFromMatrixColumn","sz","Box3","isBox3","makeEmpty","expandByPoint","_vector$a","fromBufferAttribute","points","halfSize","precise","expandByObject","box","isEmpty","addVectors","point","vector","addScalar","updateWorldMatrix","boundingBox","computeBoundingBox","_box$3","union","attributes","sphere","clampPoint","plane","constant","triangle","getCenter","_center","_extents","_v0$2","_v1$7","_v2$4","_f0","_f1","_f2","axes","satForAxes","_triangleNormal","distanceTo","getSize","_points","setFromPoints","equals","_testAxis","v0","extents","j","p0","p1","p2","_box$2","_v1$6","_v2$3","Sphere","optionalCenter","maxRadiusSq","radiusSum","intersectsSphere","distanceToPoint","deltaLengthSq","expandByScalar","getMaxScaleOnAxis","addScaledVector","setLength","_vector$9","_segCenter","_segDir","_diff","_edge1","_edge2","_normal$1","Ray","origin","ray","at","directionDistance","distanceSqToPoint","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","tca","radius2","thc","t0","t1","distanceToPlane","distToPoint","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","isNaN","intersectBox","backfaceCulling","DdN","sign","DdQxE2","DdE1xQ","cross","QdN","transformDirection","Matrix4","n14","n24","n34","n41","n42","n43","n44","isMatrix4","scaleX","_v1$5","scaleY","scaleZ","af","bf","ce","cf","de","df","ac","ad","bc","bd","compose","_zero","_one","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","t14","scaleXSq","scaleYSq","scaleZSq","yx","zx","zy","z2","wx","wy","wz","determinant","_m1$2","invSX","invSY","invSZ","setFromRotationMatrix","right","bottom","coordinateSystem","zInv","_matrix","_quaternion$3","Euler","DEFAULT_ORDER","isEuler","asin","makeRotationFromQuaternion","newOrder","setFromQuaternion","Layers","mask","layers","_object3DId","_v1$4","_q1","_m1$1","_target","_position$3","_scale$2","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","isObject3D","DEFAULT_UP","onRotationChange","onQuaternionChange","_onChange","defineProperties","configurable","enumerable","modelViewMatrix","normalMatrix","DEFAULT_MATRIX_AUTO_UPDATE","matrixWorldNeedsUpdate","matrixWorldAutoUpdate","DEFAULT_MATRIX_WORLD_AUTO_UPDATE","visible","frustumCulled","renderOrder","animations","updateMatrix","decompose","multiply","rotateOnAxis","translateOnAxis","setFromMatrixPosition","isCamera","isLight","extractRotation","arguments","remove","getObjectByProperty","childResult","getObjectsByProperty","concat","traverse","traverseVisible","traverseAncestors","force","updateMatrixWorld","updateParents","updateChildren","geometries","shapes","skeletons","nodes","isInstancedMesh","instanceMatrix","instanceColor","serialize","library","element","isScene","isColor","environment","isMesh","isLine","isPoints","shape","isSkinnedMesh","bindMode","bindMatrix","skeleton","uuids","animation","extractFromCache","cache","values","recursive","_v0$1","_v1$3","_v2$2","_v3$1","_vab","_vac","_vbc","_vap","_vbp","_vcp","warnedGetUV","Triangle","i0","i1","i2","getNormal","setFromCoplanarPoints","getBarycoord","uv1","uv2","uv3","getInterpolation","v3","containsPoint","isFrontFacing","intersectsTriangle","d4","vc","d5","d6","vb","va","denom","targetLengthSq","dot00","dot01","dot02","dot11","dot12","invDenom","p3","setScalar","_materialId","Material","isMaterial","vertexColors","alphaHash","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaToCoverage","premultipliedAlpha","forceSinglePass","toneMapped","_alphaTest","onBeforeCompile","newValue","currentValue","getHex","sheen","sheenColor","sheenRoughness","specular","specularColor","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","iridescence","iridescenceIOR","iridescenceThicknessRange","iridescenceMap","iridescenceThicknessMap","anisotropyRotation","anisotropyMap","matcap","alphaMap","lightMap","lightMapIntensity","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMapType","displacementBias","metalnessMap","emissiveMap","specularMap","specularIntensityMap","specularColorMap","envMap","combine","reflectivity","refractionRatio","gradientMap","transmissionMap","thicknessMap","attenuationDistance","attenuationColor","sizeAttenuation","linewidth","dashSize","gapSize","alphaTest","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","flatShading","fog","srcPlanes","dstPlanes","_colorKeywords","_hslA","_hslB","hue2rgb","setHex","setStyle","setRGB","hex","handleAlpha","string","exec","components","setHSL","charAt","setColorName","copySRGBToLinear","copyLinearToSRGB","_color","hue","saturation","lightness","getHSL","NAMES","isMeshBasicMaterial","setValues","_tables","_generateTables","ArrayBuffer","floatView","uint32View","baseTable","shiftTable","mantissaTable","exponentTable","offsetTable","toHalfFloat","val","fromHalfFloat","DataUtils","_vector$8","_vector2$1","BufferAttribute","itemSize","normalized","TypeError","isBufferAttribute","usage","updateRange","gpuType","index1","index2","setXY","setXYZ","applyNormalMatrix","component","onUploadCallback","Int8BufferAttribute","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Int16BufferAttribute","Uint16BufferAttribute","Int32BufferAttribute","Uint32BufferAttribute","Float16BufferAttribute","isFloat16BufferAttribute","Float64BufferAttribute","_id$2","_m1","_obj","_offset","_box$1","_boxMorphTargets","_vector$7","isBufferGeometry","morphAttributes","morphTargetsRelative","groups","boundingSphere","drawRange","start","materialIndex","getNormalMatrix","tangent","computeBoundingSphere","makeRotationX","makeRotationY","makeRotationZ","negate","translate","morphAttributesPosition","isGLBufferAttribute","setFromBufferAttribute","morphAttribute","jl","indices","positions","normals","nVertices","hasAttribute","tangents","tan1","tan2","vA","vB","vC","uvA","uvB","uvC","sdir","tdir","handleTriangle","isFinite","group","tmp2","n2","handleVertex","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","normalizeNormals","convertBufferAttribute","array2","isInterleavedBufferAttribute","stride","geometry2","newAttribute","morphArray","addGroup","hasMorphAttributes","attributeArray","setIndex","_inverseMatrix$3","_ray$3","_sphere$5","_sphereHitAt","_vA$1","_vB$1","_vC$1","_tempA","_morphA","_uvA$1","_uvB$1","_uvC$1","_normalA","_normalB","_normalC","_intersectionPoint","_intersectionPointWorld","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","ml","String","morphPosition","morphInfluences","influence","recast","intersectSphere","intersectsBox","_computeIntersections","rayLocalSpace","intersection","groupMaterial","end","checkGeometryIntersection","faceIndex","face","checkIntersection","intersect","intersectTriangle","getVertexPosition","widthSegments","heightSegments","depthSegments","scope","vertices","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","property","mergeUniforms","merged","cloneUniformsGroups","getUnlitUniformColorSpace","getRenderTarget","outputColorSpace","UniformsUtils","merge","default_vertex","default_fragment","isShaderMaterial","defines","uniformsGroups","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","glslVersion","uniform","Camera","fov","isPerspectiveCamera","zoom","focus","view","filmGauge","filmOffset","focalLength","vExtentSlope","getFilmHeight","atan","tan","fullWidth","fullHeight","offsetX","offsetY","skew","getFilmWidth","makePerspective","CubeCamera","renderTarget","activeMipmapLevel","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","cameras","updateCoordinateSystem","currentRenderTarget","currentActiveCubeFace","getActiveCubeFace","currentActiveMipmapLevel","getActiveMipmapLevel","currentXrEnabled","xr","setRenderTarget","CubeTexture","isCubeTexture","WebGLCubeRenderTarget","isWebGLCubeRenderTarget","shader","tEquirect","mesh","currentMinFilter","stencil","clear","_vector1","_vector2","_normalMatrix","Plane","isPlane","setFromNormalAndCoplanarPoint","inverseNormalLength","line","startSign","endSign","intersectsPlane","optionalNormalMatrix","referencePoint","coplanarPoint","_sphere$4","_vector$6","Frustum","p4","p5","planes","frustum","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","sprite","negRadius","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","frame","stop","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","createBuffer","bufferType","bindBuffer","bufferData","FLOAT","HALF_FLOAT","UNSIGNED_SHORT","SHORT","UNSIGNED_INT","INT","BYTE","UNSIGNED_BYTE","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","bufferSubData","subarray","deleteBuffer","cached","elementSize","PlaneGeometry","width_half","height_half","segment_width","segment_height","alphahash_fragment","alphahash_pars_fragment","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","alphatest_pars_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","iridescence_fragment","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","colorspace_fragment","colorspace_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_fragment","lights_lambert_pars_fragment","lights_pars_begin","envmap_physical_pars_fragment","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphcolor_vertex","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normal_pars_fragment","normal_pars_vertex","normal_vertex","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","iridescence_pars_fragment","opaque_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","transmission_fragment","transmission_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","worldpos_vertex","vertex$h","fragment$h","vertex$g","fragment$g","vertex$f","fragment$f","vertex$e","fragment$e","vertex$d","fragment$d","vertex$c","fragment$c","vertex$b","fragment$b","vertex$a","fragment$a","vertex$9","fragment$9","vertex$8","fragment$8","vertex$7","fragment$7","vertex$6","fragment$6","vertex$5","fragment$5","vertex$4","fragment$4","vertex$3","fragment$3","vertex$2","fragment$2","vertex$1","fragment$1","ShaderChunk","background_vert","background_frag","backgroundCube_vert","backgroundCube_frag","cube_vert","cube_frag","depth_vert","depth_frag","distanceRGBA_vert","distanceRGBA_frag","equirect_vert","equirect_frag","linedashed_vert","linedashed_frag","meshbasic_vert","meshbasic_frag","meshlambert_vert","meshlambert_frag","meshmatcap_vert","meshmatcap_frag","meshnormal_vert","meshnormal_frag","meshphong_vert","meshphong_frag","meshphysical_vert","meshphysical_frag","meshtoon_vert","meshtoon_frag","points_vert","points_frag","shadow_vert","shadow_frag","sprite_vert","sprite_frag","UniformsLib","mapTransform","alphaMapTransform","specularmap","specularMapTransform","envmap","flipEnvMap","ior","aomap","aoMapTransform","lightmap","lightMapTransform","bumpmap","bumpMapTransform","normalmap","normalMapTransform","displacementmap","displacementMapTransform","emissivemap","emissiveMapTransform","metalnessmap","metalnessMapTransform","roughnessmap","roughnessMapTransform","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotLightMap","spotShadowMap","spotLightMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","ltc_1","ltc_2","uvTransform","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","backgroundIntensity","backgroundCube","backgroundBlurriness","cube","tCube","tFlip","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","physical","clearcoatMapTransform","clearcoatNormalMapTransform","clearcoatRoughnessMapTransform","iridescenceMapTransform","iridescenceThicknessMinimum","iridescenceThicknessMaximum","iridescenceThicknessMapTransform","sheenColorMap","sheenColorMapTransform","sheenRoughnessMap","sheenRoughnessMapTransform","transmissionMapTransform","transmissionSamplerSize","transmissionSamplerMap","thicknessMapTransform","specularColorMapTransform","specularIntensityMapTransform","anisotropyVector","anisotropyMapTransform","_rgb","WebGLBackground","cubemaps","cubeuvmaps","state","objects","clearColor","clearAlpha","planeMesh","boxMesh","currentBackground","currentBackgroundVersion","currentTonemapping","renderList","forceClear","usePMREM","setClear","environmentBlendMode","getEnvironmentBlendMode","autoClear","autoClearColor","autoClearDepth","autoClearStencil","deleteAttribute","onBeforeRender","copyPosition","toneMapping","enableAll","unshift","getRGB","getClearColor","getClearAlpha","setClearAlpha","WebGLBindingStates","maxVertexAttributes","getParameter","MAX_VERTEX_ATTRIBS","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","forceUpdate","setup","program","updateBuffers","getBindingState","bindVertexArrayObject","saveCache","ELEMENT_ARRAY_BUFFER","setupVertexAttributes","createVertexArrayObject","createVertexArray","createVertexArrayOES","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","programMap","stateMap","newAttributes","enabledAttributes","attributeDivisors","cachedAttributes","geometryAttributes","attributesNum","programAttributes","getAttributes","programAttribute","location","cachedAttribute","geometryAttribute","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","integer","vertexAttribIPointer","isInstancedBufferGeometry","materialDefaultAttributeValues","isInstancedInterleavedBuffer","locationSize","_maxInstanceCount","ARRAY_BUFFER","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","reset","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","resetDefaultState","WebGLBufferRenderer","info","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","WebGL2RenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","floatVertexTextures","maxSamples","MAX_SAMPLES","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","numPlanes","numIntersection","init","enableLocalClipping","beginShadows","projectPlanes","endShadows","setGlobalState","setState","useCache","materialProperties","resetGlobalState","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLCubeMaps","mapTextureMapping","cubemap","fromEquirectangularTexture","onTextureDispose","removeEventListener","OrthographicCamera","isOrthographicCamera","scaleW","scaleH","makeOrthographic","LOD_MIN","EXTRA_LOD_SIGMA","_flatCamera","_clearColor","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_renderer","_pingPongRenderTarget","_lodMax","_cubeSize","_lodPlanes","_sizeLods","_sigmas","_blurMaterial","_cubemapMaterial","_equirectMaterial","_compileMaterial","sigma","_setSize","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","equirectangular","_fromTexture","_getCubemapMaterial","_getEquirectMaterial","_dispose","cubeSize","log2","outputTarget","_setViewport","_textureToCubeUV","_createRenderTarget","_createPlanes","sizeLods","lodPlanes","sigmas","_getBlurShader","tmpMesh","compile","cubeCamera","upSign","forwardSign","originalAutoClear","backgroundMaterial","backgroundBox","useSolidColor","col","poleAxis","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","STANDARD_DEVIATIONS","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","weights","sum","weight","outputSize","lodMax","lod","totalLods","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","fill","shaderMaterial","_getCommonVertexShader","WebGLCubeUVMaps","cubeUVmaps","pmremGenerator","isEquirectMap","isCubeMap","fromEquirectangular","fromCubemap","isCubeTextureComplete","cubemapUV","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","memory","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","instanceCount","TRIANGLES","LINES","LINE_STRIP","LINE_LOOP","POINTS","programs","autoReset","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","morphTextures","morph","workInfluences","objectInfluences","morphTargetsCount","entry","disposeTexture","hasMorphPosition","hasMorphNormals","hasMorphColors","morphTargets","morphNormals","morphColors","vertexDataCount","vertexDataStride","morphTarget","morphNormal","morphColor","morphInfluencesSum","morphBaseInfluence","getUniforms","setValue","influences","sort","MAX_SAFE_INTEGER","WebGLObjects","updateMap","buffergeometry","hasEventListener","onInstancedMeshDispose","instancedMesh","emptyTexture","emptyArrayTexture","empty3dTexture","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","copyArray","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueV1i","uniform1i","setValueV2i","uniform2i","uniform2iv","setValueV3i","uniform3i","uniform3iv","setValueV4i","uniform4i","uniform4iv","setValueV1ui","uniform1ui","setValueV2ui","uniform2ui","uniform2uiv","setValueV3ui","uniform3ui","uniform3uiv","setValueV4ui","uniform4ui","uniform4uiv","setValueT1","unit","setTexture2D","setValueT3D1","setTexture3D","setValueT6","setTextureCube","setValueT2DArray1","setTexture2DArray","getSingularSetter","setValueV1fArray","uniform1fv","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV1uiArray","uniform1uiv","setValueV2uiArray","setValueV3uiArray","setValueV4uiArray","setValueT1Array","units","setValueT3DArray","setValueT6Array","setValueT2DArrayArray","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","StructuredUniform","seq","RePathPart","addUniform","uniformObject","parseUniform","path","pathLength","lastIndex","match","matchEnd","idIsIndex","subscript","WebGLUniforms","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","WebGLShader","createShader","shaderSource","compileShader","programIdCount","handleSource","errorLine","split","lines2","to","join","getEncodingComponents","workingPrimaries","encodingPrimaries","gamutMapping","getShaderErrors","status","getShaderParameter","COMPILE_STATUS","errors","getShaderInfoLog","trim","errorMatches","toUpperCase","getShaderSource","getTexelEncodingFunction","functionName","getToneMappingFunction","toneMappingName","generateExtensions","chunks","extensionDerivatives","envMapCubeUVHeight","normalMapTangentSpace","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","filterEmptyLine","generateDefines","fetchAttributeLocations","ACTIVE_ATTRIBUTES","getActiveAttrib","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","getAttribLocation","replaceLightNums","numSpotLightCoords","numSpotLightShadows","numSpotLightMaps","numSpotLightShadowsWithMaps","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","shaderChunkMap","include","newInclude","unrollLoopPattern","unrollLoops","loopReplacer","snippet","generatePrecision","precisionstring","generateShadowMapTypeDefine","shadowMapTypeDefine","shadowMapType","generateEnvMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapModeDefine","envMapModeDefine","generateEnvMapBlendingDefine","envMapBlendingDefine","generateCubeUVSize","imageHeight","maxMip","texelHeight","texelWidth","WebGLProgram","envMapCubeUVSize","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","versionString","isRawShaderMaterial","shaderType","shaderName","instancing","instancingColor","useFog","fogExp2","normalMapObjectSpace","mapUv","alphaMapUv","lightMapUv","aoMapUv","emissiveMapUv","bumpMapUv","normalMapUv","displacementMapUv","metalnessMapUv","roughnessMapUv","anisotropyMapUv","clearcoatMapUv","clearcoatNormalMapUv","clearcoatRoughnessMapUv","iridescenceMapUv","iridescenceThicknessMapUv","sheenColorMapUv","sheenRoughnessMapUv","specularMapUv","specularColorMapUv","specularIntensityMapUv","transmissionMapUv","thicknessMapUv","vertexTangents","vertexAlphas","vertexUv1s","vertexUv2s","vertexUv3s","pointsUvs","skinning","morphTextureStride","doubleSided","flipSided","shadowMapEnabled","numLightProbes","useLegacyLights","decodeVideoTexture","opaque","useDepthPacking","depthPacking","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","onShaderError","vertexErrors","fragmentErrors","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","cachedUniforms","destroy","deleteProgram","usedTimes","_id$1","WebGLShaderCache","shaderCache","materialCache","vertexShaderStage","_getShaderStage","fragmentShaderStage","materialShaders","_getShaderCacheForMaterial","shaderStage","code","stage","WebGLShaderStage","WebGLPrograms","_programLayers","_customShaders","IS_WEBGL2","SUPPORTS_VERTEX_TEXTURES","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","getChannel","getParameters","shadows","isMeshStandardMaterial","customVertexShaderID","customFragmentShaderID","getVertexShaderID","getFragmentShaderID","IS_INSTANCEDMESH","HAS_MAP","HAS_MATCAP","HAS_ENVMAP","HAS_AOMAP","HAS_LIGHTMAP","HAS_BUMPMAP","HAS_NORMALMAP","HAS_DISPLACEMENTMAP","HAS_EMISSIVEMAP","HAS_METALNESSMAP","HAS_ROUGHNESSMAP","HAS_ANISOTROPY","HAS_CLEARCOAT","HAS_IRIDESCENCE","HAS_SHEEN","HAS_TRANSMISSION","HAS_ANISOTROPYMAP","HAS_CLEARCOATMAP","HAS_CLEARCOAT_NORMALMAP","HAS_CLEARCOAT_ROUGHNESSMAP","HAS_IRIDESCENCEMAP","HAS_IRIDESCENCE_THICKNESSMAP","HAS_SHEEN_COLORMAP","HAS_SHEEN_ROUGHNESSMAP","HAS_SPECULARMAP","HAS_SPECULAR_COLORMAP","HAS_SPECULAR_INTENSITYMAP","HAS_TRANSMISSIONMAP","HAS_THICKNESSMAP","HAS_GRADIENTMAP","HAS_ALPHAMAP","HAS_ALPHATEST","HAS_ALPHAHASH","HAS_EXTENSIONS","HAS_ATTRIBUTE_UV1","HAS_ATTRIBUTE_UV2","HAS_ATTRIBUTE_UV3","isXRRenderTarget","supportsVertexTextures","isFogExp2","directional","spot","rectArea","hemi","_useLegacyLights","isVideoTexture","customProgramCacheKey","getProgramCacheKey","getProgramCacheKeyParameters","getProgramCacheKeyBooleans","morphAttributeCount","disableAll","enable","acquireProgram","pl","preexistingProgram","releaseProgram","pop","releaseShaderCache","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","transmissive","getNextRenderItem","renderItem","customOpaqueSort","customTransparentSort","finish","WebGLRenderLists","lists","renderCallDepth","listArray","list","UniformsCache","halfWidth","halfHeight","ShadowUniformsCache","nextVersion","shadowCastingAndTexturingLightsFirst","lightA","lightB","WebGLLights","shadowCache","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","numSpotMaps","ambient","probe","directionalShadow","spotShadow","rectAreaLTC1","rectAreaLTC2","pointShadow","vector3","matrix42","numSpotShadowsWithMaps","scaleFactor","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","isSpotLight","penumbra","updateMatrices","isRectAreaLight","isPointLight","isHemisphereLight","LTC_FLOAT_1","LTC_FLOAT_2","LTC_HALF_1","LTC_HALF_2","setupView","identity","WebGLRenderState","lightsArray","shadowsArray","pushLight","pushShadow","shadowLight","setupLights","setupLightsView","WebGLRenderStates","renderStates","renderStateArray","renderState","isMeshDepthMaterial","isMeshDistanceMaterial","WebGLShadowMap","_objects","_capabilities","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterial","_distanceMaterial","_materialCache","_maxTextureSize","shadowMaterialVertical","VSM_SAMPLES","shadow_pass","resolution","shadowMaterialHorizontal","HORIZONTAL_PASS","fullScreenTri","fullScreenMesh","autoUpdate","_previousType","activeCubeFace","_state","setBlending","setTest","setScissorTest","toVSM","fromVSM","shadowFrameExtents","getFrameExtents","pars","viewportCount","getViewportCount","vp","getViewport","getFrustum","renderObject","isPointLightShadow","VSMPass","blurSamples","mapPass","renderBufferDirect","getDepthMaterial","customMaterial","customDistanceMaterial","customDepthMaterial","keyA","keyB","materialsForVariant","cachedMaterial","shadowCamera","intersectsObject","k","kl","depthMaterial","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","disable","depthMask","setFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","setOp","stencilOp","clearStencil","colorBuffer","uboBindings","uboProgramMap","enabledCapabilities","currentBoundFramebuffers","currentDrawbuffers","defaultDrawbuffers","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","glVersion","VERSION","currentTextureSlot","currentBoundTextures","scissorParam","SCISSOR_BOX","viewportParam","VIEWPORT","currentScissor","currentViewport","createTexture","dimensions","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_3D","TEXTURE_2D_ARRAY","texImage3D","RGBA","texImage2D","emptyTextures","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","setFlipSided","setCullFace","CULL_FACE","bindFramebuffer","framebuffer","DRAW_FRAMEBUFFER","FRAMEBUFFER","COLOR_ATTACHMENT0","BACK","drawBuffersWEBGL","useProgram","equationToGL","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","MIN","MAX","MIN_EXT","MAX_EXT","factorToGL","ZERO","ONE","SRC_COLOR","SRC_ALPHA","SRC_ALPHA_SATURATE","DST_COLOR","DST_ALPHA","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","ONE_MINUS_DST_COLOR","ONE_MINUS_DST_ALPHA","BLEND","blendFuncSeparate","blendFunc","blendEquationSeparate","setMaterial","frontFaceCW","setPolygonOffset","SAMPLE_ALPHA_TO_COVERAGE","frontFace","CW","CCW","cullFace","FRONT","FRONT_AND_BACK","setLineWidth","lineWidth","factor","POLYGON_OFFSET_FILL","SCISSOR_TEST","activeTexture","webglSlot","TEXTURE0","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","apply","compressedTexImage3D","texSubImage2D","texSubImage3D","compressedTexSubImage2D","compressedTexSubImage3D","texStorage2D","texStorage3D","updateUBOMapping","uniformsGroup","blockIndex","getUniformBlockIndex","uniformBlockBinding","__bindingPointIndex","KEEP","READ_FRAMEBUFFER","WebGLTextures","_gl","utils","multisampledRTTExt","supportsInvalidateFramebuffer","navigator","userAgent","_videoTextures","_sources","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","isPowerOfTwo$1","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","getInternalFormat","internalFormatName","glFormat","glType","forceLinearTransfer","RED","R32F","R16F","R8","RED_INTEGER","R8UI","R16UI","R32UI","R8I","R16I","R32I","RG","RG32F","RG16F","RG8","RGBA32F","RGBA16F","SRGB8_ALPHA8","RGBA8","UNSIGNED_SHORT_4_4_4_4","RGBA4","UNSIGNED_SHORT_5_5_5_1","RGB5_A1","getMipLevels","isFramebufferTexture","isCompressedTexture","filterFallback","LINEAR","deallocateTexture","onRenderTargetDispose","deallocateRenderTarget","textureProperties","__webglInit","webglTextures","__cacheKey","deleteTexture","__webglTexture","renderTargetProperties","__webglFramebuffer","level","deleteFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","attachmentProperties","textureUnits","resetTextureUnits","textureUnit","getTextureCacheKey","slot","updateVideoTexture","__version","complete","uploadTexture","uploadCubeTexture","wrappingToGL","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","filterToGL","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","compareToGL","setTextureParameters","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_WRAP_R","compareFunction","TEXTURE_COMPARE_MODE","COMPARE_REF_TO_TEXTURE","TEXTURE_COMPARE_FUNC","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","initTexture","forceUpload","textureCacheKey","isCompressedArrayTexture","sourceProperties","texturePrimaries","unpackConversion","NONE","BROWSER_DEFAULT_WEBGL","pixelStorei","UNPACK_FLIP_Y_WEBGL","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","UNPACK_COLORSPACE_CONVERSION_WEBGL","verifyColorSpace","glInternalFormat","mipmap","useTexStorage","allocateMemory","levels","isDepthTexture","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT24","DEPTH24_STENCIL8","DEPTH_COMPONENT16","DEPTH_STENCIL","isCompressed","cubeImage","mipmapImage","setupFrameBufferTexture","attachment","textureTarget","__hasExternalTextures","useMultisampledRTT","framebufferTexture2DMultisampleEXT","getRenderTargetSamples","TEXTURE_CUBE_MAP_NEGATIVE_Z","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","RENDERBUFFER","renderbufferStorageMultisampleEXT","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","__autoAllocateDepthBuffer","createRenderbuffer","rebindTextures","colorTexture","setupRenderTarget","isMultipleRenderTargets","createFramebuffer","glTextureType","updateRenderTargetMipmap","updateMultisampleRenderTarget","COLOR_BUFFER_BIT","invalidationArray","depthStyle","ignoreDepthValues","__ignoreDepthValues","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","invalidateFramebuffer","blitFramebuffer","__useRenderToTexture","sRGBToLinear","WebGLUtils","HALF_FLOAT_OES","ALPHA","LUMINANCE","LUMINANCE_ALPHA","SRGB_ALPHA_EXT","RG_INTEGER","RGBA_INTEGER","COMPRESSED_SRGB_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_SRGB8_ETC2","COMPRESSED_RGB8_ETC2","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_RGBA_ASTC_4x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR","COMPRESSED_RGBA_ASTC_5x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR","COMPRESSED_RGBA_ASTC_5x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR","COMPRESSED_RGBA_ASTC_6x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR","COMPRESSED_RGBA_ASTC_6x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR","COMPRESSED_RGBA_ASTC_8x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR","COMPRESSED_RGBA_ASTC_8x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR","COMPRESSED_RGBA_ASTC_8x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR","COMPRESSED_RGBA_ASTC_10x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR","COMPRESSED_RGBA_ASTC_10x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR","COMPRESSED_RGBA_ASTC_10x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR","COMPRESSED_RGBA_ASTC_10x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR","COMPRESSED_RGBA_ASTC_12x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR","COMPRESSED_RGBA_ASTC_12x12_KHR","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_RGBA_BPTC_UNORM_EXT","COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT","COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT","COMPRESSED_RED_RGTC1_EXT","COMPRESSED_SIGNED_RED_RGTC1_EXT","COMPRESSED_RED_GREEN_RGTC2_EXT","COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT","UNSIGNED_INT_24_8","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","isArrayCamera","Group","isGroup","_moveEvent","WebXRController","_targetRay","_grip","_hand","joints","inputState","pinching","hasLinearVelocity","linearVelocity","hasAngularVelocity","angularVelocity","inputSource","hand","inputjoint","_getHandJoint","referenceSpace","inputPose","gripPose","handPose","targetRay","grip","session","visibilityState","jointPose","getJointPose","joint","jointRadius","indexTip","thumbTip","distanceToPinch","threshold","handedness","gripSpace","getPose","targetRaySpace","jointName","DepthTexture","WebXRManager","framebufferScaleFactor","referenceSpaceType","foveation","customReferenceSpace","pose","glBinding","glProjLayer","glBaseLayer","xrFrame","getContextAttributes","initialRenderTarget","newRenderTarget","controllers","controllerInputSources","cameraL","cameraR","cameraXR","_currentDepthNear","_currentDepthFar","cameraAutoUpdate","isPresenting","getController","controller","getTargetRaySpace","getControllerGrip","getGripSpace","getHand","getHandSpace","onSessionEvent","controllerIndex","onSessionEnd","onInputSourcesChange","disconnect","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setReferenceSpace","space","getBaseLayer","getBinding","getFrame","getSession","setSession","xrCompatible","makeXRCompatible","layerInit","XRWebGLLayer","updateRenderState","baseLayer","framebufferWidth","framebufferHeight","depthFormat","depthType","glDepthFormat","projectionlayerInit","colorFormat","XRWebGLBinding","createProjectionLayer","textureWidth","textureHeight","setFoveation","requestReferenceSpace","removed","added","connect","cameraLPos","cameraRPos","setProjectionFromUnion","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","translateX","translateZ","near2","far2","left2","right2","top2","bottom2","updateCamera","depthNear","depthFar","updateUserCamera","getCamera","getFoveation","fixedFoveation","onAnimationFrameCallback","getViewerPose","views","setRenderTargetFramebuffer","cameraXRNeedsUpdate","glSubImage","getViewSubImage","setRenderTargetTextures","depthStencilTexture","detectedPlanes","WebGLMaterials","refreshTransformUniform","refreshFogUniforms","isFog","refreshMaterialUniforms","pixelRatio","transmissionRenderTarget","refreshUniformsCommon","isMeshLambertMaterial","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","refreshUniformsStandard","isMeshPhysicalMaterial","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDistance","isMeshNormalMaterial","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","WebGLUniformsGroups","updateList","allocatedBindingPoints","maxBindingPoints","MAX_UNIFORM_BUFFER_BINDINGS","webglProgram","prepareUniformsGroup","onUniformsGroupsDispose","updateBufferData","bindingPointIndex","allocateBindingPointIndex","__size","UNIFORM_BUFFER","bindBufferBase","__cache","hasUniformChanged","__offset","arrayOffset","getUniformSize","__data","storage","tempValues","cachedObjects","cachedObject","chunkSize","chunkOffset","infos","boundary","remainingSizeInChunk","preserveDrawingBuffer","powerPreference","failIfMajorPerformanceCaveat","isWebGLRenderer","_alpha","uintClearColor","intClearColor","currentRenderList","currentRenderState","renderListStack","renderStateStack","sortObjects","_outputColorSpace","toneMappingExposure","_this","_isContextLost","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentMaterialId","_currentCamera","_currentViewport","_currentScissor","_currentScissorTest","_currentClearColor","_currentClearAlpha","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clippingEnabled","_localClippingEnabled","_transmissionRenderTarget","_projScreenMatrix","_vector3","_emptyScene","overrideMaterial","getTargetPixelRatio","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","onContextCreationError","isWebGL1Renderer","shift","WebGLRenderingContext","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","initGLContext","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","setTransparentSort","bits","isIntegerFormat","targetFormat","targetType","isUnsignedType","clearBufferuiv","COLOR","clearBufferiv","onXRSessionStart","onXRSessionEnd","preventDefault","infoAutoReset","shadowMapAutoUpdate","shadowMapNeedsUpdate","statusMessage","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReferences","setProgram","rangeFactor","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","maxInstanceCount","prepare","getProgram","material2","self","setFromProjectionMatrix","projectObject","camera2","renderScene","onAfterRender","isLOD","intersectsSprite","opaqueObjects","transmissiveObjects","transparentObjects","renderTransmissionPass","renderObjects","currentToneMapping","renderTargetNeedsUpdate","currentSide","lightsStateVersion","programCacheKey","updateCommonMaterialProperties","onBuild","needsLights","materialNeedsLights","progUniforms","uniformsList","seqWithValue","needsProgramChange","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","setOptional","boneTexture","computeBoneTexture","boneTextureSize","isMeshGouraudMaterial","markUniformsLightsNeedsUpdate","upload","defaultFramebuffer","__useDefaultFramebuffer","useDefaultFramebuffer","isRenderTarget3D","framebufferBound","layer","framebufferTextureLayer","readRenderTargetPixels","activeCubeFaceIndex","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","halfFloatSupportedByExt","IMPLEMENTATION_COLOR_READ_TYPE","readPixels","copyFramebufferToTexture","levelScale","copyTexSubImage2D","copyTextureToTexture","srcTexture","dstTexture","copyTextureToTexture3D","sourceBox","glTarget","unpackRowLen","UNPACK_ROW_LENGTH","unpackImageHeight","UNPACK_IMAGE_HEIGHT","unpackSkipPixels","UNPACK_SKIP_PIXELS","unpackSkipRows","UNPACK_SKIP_ROWS","unpackSkipImages","UNPACK_SKIP_IMAGES","resetState","__THREE_DEVTOOLS__","CustomEvent","drawingBufferColorSpace","unpackColorSpace","WebGL1Renderer","FogExp2","Fog","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","setUsage","_vector$5","InterleavedBufferAttribute","interleavedBuffer","interleavedBuffers","_geometry","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA","_vB","_vC","_uvA","_uvB","_uvC","Sprite","float32Array","setFromMatrixScale","transformVertex","vertexPosition","mvPosition","_v1$2","_v2$1","LOD","_currentLevel","addLevel","hysteresis","levelDistance","getObjectForDistance","raycast","_basePosition","_skinIndex","_skinWeight","_matrix4","_vertex","_sphere$3","_inverseMatrix$2","_ray$2","SkinnedMesh","bindMatrixInverse","applyBoneTransform","calculateInverses","skinWeight","manhattanLength","setXYZW","skinIndex","getComponent","boneIndex","bones","boneInverses","Bone","isBone","DataTexture","_offsetMatrix","_identityMatrix","Skeleton","boneMatrices","inverse","bone","boneInverse","InstancedBufferAttribute","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_box3","_identity","_mesh","_sphere$2","InstancedMesh","setMatrixAt","getMatrixAt","raycastTimes","instanceId","linecap","linejoin","_start$1","_end$1","_inverseMatrix$1","_ray$1","_sphere$1","Line","lineDistances","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distanceSqToSegment","_start","_end","LineSegments","LineLoop","_inverseMatrix","_ray","_sphere","_position$2","testPoint","rayPointDistanceSq","intersectPoint","closestPointToPoint","distanceToRay","VideoTexture","video","updateVideo","requestVideoFrameCallback","hasVideoFrameCallback","readyState","HAVE_CURRENT_DATA","FramebufferTexture","CompressedTexture","CompressedArrayTexture","CompressedCubeTexture","isCompressedCubeTexture","isCanvasTexture","Curve","arcLengthDivisions","optionalTarget","getUtoTmapping","getPoint","divisions","getPointAt","lengths","getLengths","cacheArcLengths","current","last","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","t2","pt1","pt2","getTangent","segments","closed","binormals","vec","mat","getTangentAt","MAX_VALUE","tz","makeRotationAxis","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","t3","px","py","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","isCubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","LineCurve","isLineCurve","LineCurve3","isLineCurve3","QuadraticBezierCurve","isQuadraticBezierCurve","QuadraticBezierCurve3","isQuadraticBezierCurve3","SplineCurve","isSplineCurve","Curves","freeze","__proto__","CurvePath","curves","autoClose","curve","startPoint","endPoint","lineType","getLength","curveLengths","getCurveLengths","diff","lens","cacheLengths","sums","pts","getPoints","fromJSON","Path","currentPoint","moveTo","lineTo","aCPx","aCPy","aCP1x","aCP1y","aCP2x","aCP2y","npts","absarc","absellipse","firstPoint","lastPoint","LatheGeometry","phiStart","phiLength","initNormals","inverseSegments","curNormal","prevNormal","base","CapsuleGeometry","capSegments","radialSegments","CircleGeometry","thetaStart","thetaLength","segment","CylinderGeometry","radiusTop","radiusBottom","openEnded","indexArray","generateTorso","generateCap","slope","indexRow","sinTheta","cosTheta","centerIndexStart","centerIndexEnd","ConeGeometry","PolyhedronGeometry","vertexBuffer","uvBuffer","subdivide","applyRadius","generateUVs","computeVertexNormals","getVertexByIndex","subdivideFace","cols","aj","bj","rows","pushVertex","azimuth","inclination","correctUVs","correctSeam","centroid","azi","correctUV","details","DodecahedronGeometry","_v0","_v1$1","_normal","_triangle","EdgesGeometry","thresholdAngle","precisionPoints","thresholdDot","indexAttr","getIndex","positionAttr","indexCount","indexArr","vertKeys","hashes","edgeData","jNext","vecHash0","vecHash1","reverseHash","index0","Shape","holes","holesPts","getPointsHoles","hole","Earcut","triangulate","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","prev","minX","minY","maxX","maxY","invSize","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minZ","zOrder","maxZ","prevZ","nextZ","locallyInside","isValidDiagonal","splitPolygon","queue","getLeftmost","compareX","eliminateHole","bridge","findHoleBridge","bridgeReverse","hx","hy","mx","my","tanMin","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","intersectsPolygon","middleInside","q1","q2","o1","o2","o3","o4","onSegment","num","inside","Node","an","bp","ShapeUtils","contour","faces","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","verticesArray","uvArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","extrudePts","extrudeByPath","splineTube","binormal","position2","getSpacedPoints","computeFrenetFrames","shapePoints","extractPoints","reverse","isClockWise","hl","ahole","triangulateShape","scalePt2","pt","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","bs","vert","buildLidFaces","buildSideFaces","f3","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","toJSON$1","geometryShapes","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","IcosahedronGeometry","OctahedronGeometry","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","radiusStep","thetaSegmentLevel","ShapeGeometry","indexOffset","shapeVertices","shapeHoles","shapeHole","thetaEnd","grid","verticesRow","uOffset","TetrahedronGeometry","TorusGeometry","tube","tubularSegments","arc","TorusKnotGeometry","P1","P2","T","N","calculatePositionOnCurve","cu","su","quOverP","cs","TubeGeometry","frames","P","generateBufferData","generateSegment","generateIndices","WireframeGeometry","edges","o","ol","isUniqueEdge","hash1","hash2","Geometries","RawShaderMaterial","_anisotropy","_clearcoat","_iridescence","_sheen","_transmission","convertArray","forceClone","isTypedArray","isView","DataView","getKeyframeOrder","times","compareTime","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","referenceOffset","referenceValueSize","createInterpolant","isInterpolantFactoryMethodGLTFCubicSpline","targetOffset","targetValueSize","referenceValue","startIndex","endIndex","interpolant","evaluate","resultBuffer","referenceQuat","numTimes","valueStart","multiplyQuaternionsFlat","valueEnd","blendMode","AnimationUtils","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","DefaultSettings_","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","copySampleValue_","t1global","mid","intervalChanged_","interpolate_","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","getSettings_","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","LinearInterpolant","offset1","offset0","weight1","weight0","DiscreteInterpolant","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","factoryMethod","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","timeOffset","endTime","nKeys","valid","prevTime","currTime","smoothInterpolation","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","trackType","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","slerpFlat","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","validate","optimize","jsonTracks","frameTime","parseKeyframeTrack","clipTracks","morphTargetSequence","noLoop","numMorphTargets","objectOrClipArray","clipArray","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","CreateFromMorphTargetSequence","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","getTrackTypeForValueTypeName","typeName","Cache","files","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","removeHandler","getHandler","global","DefaultLoadingManager","Loader","manager","crossOrigin","withCredentials","resourcePath","requestHeader","DEFAULT_MATERIAL_NAME","loading","HttpError","FileLoader","req","Request","Headers","credentials","mimeType","responseType","ReadableStream","getReader","callbacks","reader","contentLength","total","lengthComputable","loaded","stream","readData","read","done","byteLength","ProgressEvent","enqueue","Response","statusText","arrayBuffer","text","parser","DOMParser","parseFromString","re","label","decoder","TextDecoder","decode","finally","AnimationLoader","setRequestHeader","setWithCredentials","CompressedTextureLoader","setResponseType","loadTexture","texDatas","mipmapCount","isCubemap","ImageLoader","onImageLoad","removeEventListeners","onImageError","urls","setCrossOrigin","DataTextureLoader","texData","Light","HemisphereLight","_projScreenMatrix$1","_lightPositionWorld$1","_lookTarget$1","LightShadow","_frameExtents","_viewportCount","_viewports","shadowMatrix","viewportIndex","SpotLightShadow","isSpotLightShadow","SpotLight","_lightPositionWorld","_lookTarget","PointLightShadow","_cubeDirections","_cubeUps","DirectionalLightShadow","isDirectionalLightShadow","DirectionalLight","RectAreaLight","SphericalHarmonics3","isSphericalHarmonics3","coeff","shBasis","LightProbe","MaterialLoader","getTexture","createMaterialFromType","materialLib","LoaderUtils","fromCharCode","decodeURIComponent","escape","lastIndexOf","InstancedBufferGeometry","BufferGeometryLoader","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","getArrayBuffer","typedArray","bufferAttribute","bufferAttributeConstr","drawcalls","offsets","ObjectLoader","extractUrlBase","loadAsync","parseAsync","parseAnimations","parseShapes","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseSkeletons","bindSkeletons","hasImages","parseImagesAsync","bufferGeometryLoader","setTextures","loadImage","deserializeImage","imageArray","currentUrl","deserializedImage","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","isInteger","objectAnimations","ImageBitmapLoader","isImageBitmapLoader","createImageBitmap","fetchOptions","res","colorSpaceConversion","imageBitmap","_context","AudioContext","webkitAudioContext","AudioLoader","bufferCopy","decodeAudioData","audioBuffer","handleError","_eyeRight","_eyeLeft","_projectionMatrix","StereoCamera","eyeSep","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","autoStart","oldTime","elapsedTime","running","getElapsedTime","newTime","_position$1","_quaternion$1","_scale$1","_orientation$1","AudioListener","gain","createGain","destination","timeDelta","_clock","setTargetAtTime","currentTime","positionX","linearRampToValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setPosition","setOrientation","getInput","autoplay","detune","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","_connected","filters","audioNode","mediaElement","createMediaElementSource","mediaStream","createMediaStreamSource","delay","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","getOutput","getFilters","setFilters","_position","_quaternion","_scale","_orientation","PositionalAudio","panner","createPanner","panningModel","refDistance","rolloffFactor","distanceModel","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getByteFrequencyData","getFrequencyData","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accuIndex","currentWeight","mix","weightAdditive","originalValueOffset","getValue","targetIndex","workOffset","_RESERVED_CHARS_RE","_reservedRe","RegExp","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","unbind","rootNode","node","findNode","nodeName","_getValue_unbound","_setValue_unbound","targetObject","resolvedProperty","propertyIndex","dest","targetArray","sourceArray","objectName","_getValue_unavailable","_setValue_unavailable","objectIndex","nodeProperty","versioning","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","bindingType","BindingType","Direct","ArrayElement","HasFromToArray","EntireArray","GetterByBindingType","SetterByBindingTypeAndVersioning","root","isAnimationObjectGroup","matches","results","lastDot","getBoneByName","searchNodeSubtree","childNode","subTreeNode","_getValue_direct","_getValue_array","_getValue_arrayElement","_getValue_toArray","_setValue_direct","_setValue_direct_setNeedsUpdate","_setValue_direct_setMatrixWorldNeedsUpdate","_setValue_array","_setValue_array_setNeedsUpdate","_setValue_array_setMatrixWorldNeedsUpdate","_setValue_arrayElement","_setValue_arrayElement_setNeedsUpdate","_setValue_arrayElement_setMatrixWorldNeedsUpdate","_setValue_fromArray","_setValue_fromArray_setNeedsUpdate","_setValue_fromArray_setMatrixWorldNeedsUpdate","AnimationObjectGroup","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","inUse","bindingsPerObject","indicesByUUID","paths","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","lastObject","indicesByPath","lastBindingsIndex","lastBindings","lastBindingsPath","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","_isActiveAction","_scheduleFading","fadeOutAction","warp","fadeOut","fadeIn","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","fadeInAction","crossFadeFrom","weightInterpolant","_takeBackControlInterpolant","action","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","_root","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","accumulateAdditive","accumulate","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","_controlInterpolantsResultBuffer","AnimationMixer","_initMemoryManager","_accuIndex","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","_bindAction","knownActions","_addInactiveAction","_lendBinding","saveOriginalState","_lendAction","restoreOriginalState","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","__cacheIndex","lastActiveInterpolant","optionalRoot","clipObject","findByName","existingAction","newAction","nActions","_update","timeInSeconds","actionsToRemove","_removeInactiveAction","Uniform","_id","UniformsGroup","isUniformsGroup","uniformsSource","InstancedInterleavedBuffer","GLBufferAttribute","coords","unproject","intersectObject","ascSort","Spherical","other","EPS","setFromCartesianCoords","Cylindrical","_vector$4","Box2","isBox2","_startP","_startEnd","Line3","clampToLine","startEnd2","startEnd_startP","closestPointToPointParameter","_vector$3","SpotLightHelper","cone","coneLength","coneWidth","_vector$2","_boneMatrix","_matrixWorldInv","SkeletonHelper","getBoneList","isSkeletonHelper","boneList","PointLightHelper","sphereSize","_vector$1","_color1","_color2","HemisphereLightHelper","rotateY","GridHelper","PolarGridHelper","sectors","rings","_v1","_v2","_v3","DirectionalLightHelper","lightPlane","targetLine","_vector","_camera","CameraHelper","pointMap","addLine","addPoint","colorFrustum","colorCone","colorUp","colorTarget","colorCross","setColors","colorAttribute","setPoint","_box","BoxHelper","setFromObject","Box3Helper","PlaneHelper","positions2","_axis","_lineGeometry","_coneGeometry","ArrowHelper","headLength","headWidth","setDirection","AxesHelper","xAxisColor","yAxisColor","zAxisColor","ShapePath","subPaths","currentPath","quadraticCurveTo","bezierCurveTo","splineThru","isCCW","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","tmpHoles","revision","__THREE__"],"mappings":"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B,W,CAAAA,W,SAAaurD,W,CAAAA,W,SAAav/J,K,CAAAA,K,SAAOspJ,a,CAAAA,a,SAAe3F,Y,CAAAA,Y,SAAc2B,a,CAAAA,a,SAAezB,W,CAAAA,W,SAAa8b,U,CAAAA,U,SAAY3jJ,Q,CAAAA,Q,SAAU2L,iB,CAAAA,iB,SAAmBnI,c,CAAAA,c,SAAgBowG,I,CAAAA,I,SAAM6mB,oB,CAAAA,oB,SAAsBilB,I,CAAAA,I,SAAMz3H,I,CAAAA,I,SAAMg7H,U,CAAAA,U,SAAYrkJ,W,CAAAA,W,SAAamkJ,S,CAAAA,S,SAAWl/G,e,CAAAA,e,SAAiBn2C,c,CAAAA,c,SAAgBi3I,oB,CAAAA,oB,SAAsBr9H,Q,CAAAA,Q,SAAU21H,K,CAAAA,K,SAAO3tF,M,CAAAA,M,SAAQ4yG,Y,CAAAA,Y,SAAc7rJ,a,CAAAA,a,SAAe6pH,e,CAAAA,e,SAAiBvE,gB,CAAAA,gB,SAAkB31G,iB,CAAAA,iB,SAAmBq6G,c,CAAAA,c,SAAgB55G,mB,CAAAA,mB,SAAqBtjB,K,CAAAA,K,SAAOrB,K,CAAAA,K,SAAO44I,kB,CAAAA,kB,SAAoBpgH,e,CAAAA,e,SAAiBm9F,sB,CAAAA,sB,SAAwBC,qB,CAAAA,qB,SAAuBF,iB,CAAAA,iB,SAAmB+pB,uB,CAAAA,uB,SAAyBjgB,Y,CAAAA,Y,SAAc5wE,U,CAAAA,U,SAAYtqC,qB,CAAAA,qB,SAAuBC,qB,CAAAA,qB,SAAuBwrC,W,CAAAA,W,SAAapoD,iB,CAAAA,iB,SAAmB+c,uB,CAAAA,uB,SAAyBi2G,gB,CAAAA,gB,SAAkBE,iB,CAAAA,iB,SAAmBya,gB,CAAAA,gB,SAAkB/zH,Y,CAAAA,Y,SAAcC,a,CAAAA,a,SAAeC,iB,CAAAA,iB,SAAmBH,Y,CAAAA,Y,SAAcy0G,K,CAAAA,K,SAAO6F,S,CAAAA,S,SAAWz5G,c,CAAAA,c,SAAgBiC,iB,CAAAA,iB,SAAmBu6G,gB,CAAAA,gB,SAAkB++B,W,CAAAA,W,SAAal+H,a,CAAAA,a,SAAeL,gB,CAAAA,gB,SAAkB6yF,W,CAAAA,W,SAAaquB,iB,CAAAA,iB,SAAmBz+F,S,CAAAA,S,SAAW92B,kB,CAAAA,kB,SAAoBE,sB,CAAAA,sB,SAAwByxH,qB,CAAAA,qB,SAAuBn2H,W,CAAAA,W,SAAaC,kB,CAAAA,kB,SAAoBoyF,Y,CAAAA,Y,SAAcipC,gB,CAAAA,gB,SAAkBme,sB,CAAAA,sB,SAAwB/oB,mB,CAAAA,mB,SAAqB5sH,mB,CAAAA,mB,SAAqB22G,oB,CAAAA,oB,SAAsBj/G,U,CAAAA,U,SAAYiB,c,CAAAA,c,SAAgBE,c,CAAAA,c,SAAgBwJ,gB,CAAAA,gB,SAAkBN,gB,CAAAA,gB,SAAkBG,gB,CAAAA,gB,SAAkB80G,a,CAAAA,a,SAAerJ,Y,CAAAA,Y,SAAcnsG,Y,CAAAA,Y,SAAcpI,U,CAAAA,U,SAAY4H,gB,CAAAA,gB,SAAkB5G,gC,CAAAA,gC,SAAkCC,gC,CAAAA,gC,SAAkC4sB,K,CAAAA,K,SAAOrkB,e,CAAAA,e,SAAiB06G,e,CAAAA,e,SAAiByV,U,CAAAA,U,SAAY95F,sB,CAAAA,sB,SAAwB32C,sB,CAAAA,sB,SAAwB62C,sB,CAAAA,sB,SAAwB19B,S,CAAAA,S,SAAWsoG,G,CAAAA,G,SAAKD,O,CAAAA,O,SAASuH,kB,CAAAA,kB,SAAoBn4G,S,CAAAA,S,SAAWm0C,O,CAAAA,O,SAASwrG,iB,CAAAA,iB,SAAmBtwI,K,CAAAA,K,SAAOC,K,CAAAA,K,SAAOd,c,CAAAA,c,SAAgBpI,Y,CAAAA,Y,SAAcsI,mB,CAAAA,mB,SAAqBvI,iB,CAAAA,iB,SAAmB+H,uB,CAAAA,uB,SAAyBF,kB,CAAAA,kB,SAAoBk0I,U,CAAAA,U,SAAYppD,K,CAAAA,K,SAAOtwF,a,CAAAA,a,SAAe06H,e,CAAAA,e,SAAiB8e,qB,CAAAA,qB,SAAuB7xB,mB,CAAAA,mB,SAAqB4X,iB,CAAAA,iB,SAAmBtF,W,CAAAA,W,SAAatmH,U,CAAAA,U,SAAY5O,kB,CAAAA,kB,SAAoBE,sB,CAAAA,sB,SAAwBynG,wB,CAAAA,wB,SAA0BowB,uB,CAAAA,uB,SAAyBoa,0B,CAAAA,0B,SAA4BhqC,a,CAAAA,a,SAAe/vE,oB,CAAAA,oB,SAAsBE,oB,CAAAA,oB,SAAsBL,mB,CAAAA,mB,SAAqBn9B,O,CAAAA,O,SAASyoG,iB,CAAAA,iB,SAAmBO,0B,CAAAA,0B,SAA4B0lB,W,CAAAA,W,SAAarrH,mB,CAAAA,mB,SAAqBC,iB,CAAAA,iB,SAAmBC,iB,CAAAA,iB,SAAmB+B,e,CAAAA,e,SAAiBN,a,CAAAA,a,SAAessH,a,CAAAA,a,SAAe9mB,G,CAAAA,G,SAAKyN,a,CAAAA,a,SAAehsF,M,CAAAA,M,SAAQjmB,W,CAAAA,W,SAAarI,S,CAAAA,S,SAAWuI,gB,CAAAA,gB,SAAkBtI,c,CAAAA,c,SAAgB8H,oB,CAAAA,oB,SAAsBF,e,CAAAA,e,SAAiBo1H,K,CAAAA,K,SAAO2B,U,CAAAA,U,SAAYtuB,I,CAAAA,I,SAAMoqC,K,CAAAA,K,SAAOxuE,iB,CAAAA,iB,SAAmBurC,S,CAAAA,S,SAAWE,U,CAAAA,U,SAAYxrC,kB,CAAAA,kB,SAAoB+kC,Q,CAAAA,Q,SAAUD,Y,CAAAA,Y,SAAclqG,yB,CAAAA,yB,SAA2BV,c,CAAAA,c,SAAgBzE,Y,CAAAA,Y,SAAcyxH,iB,CAAAA,iB,SAAmBrxH,wB,CAAAA,wB,SAA0BF,yB,CAAAA,yB,SAA2BC,wB,CAAAA,wB,SAA0BF,yB,CAAAA,yB,SAA2BgF,oB,CAAAA,oB,SAAsBnG,iB,CAAAA,iB,SAAmBsG,c,CAAAA,c,SAAgBoyH,M,CAAAA,M,SAAQ6F,W,CAAAA,W,SAAalH,c,CAAAA,c,SAAgBxyH,Q,CAAAA,Q,SAAUE,Y,CAAAA,Y,SAAcD,U,CAAAA,U,SAAYzC,oB,CAAAA,oB,SAAsBD,e,CAAAA,e,SAAiBxF,K,CAAAA,K,SAAO84B,Q,CAAAA,Q,SAAUyoG,c,CAAAA,c,SAAgBpwH,S,CAAAA,S,SAAWoB,O,CAAAA,O,SAASia,O,CAAAA,O,SAAS5qB,W,CAAAA,W,SAAa5H,I,CAAAA,I,SAAM+C,iB,CAAAA,iB,SAAmBsxE,iB,CAAAA,iB,SAAmBC,oB,CAAAA,oB,SAAsBE,mB,CAAAA,mB,SAAqBG,kB,CAAAA,kB,SAAoBJ,kB,CAAAA,kB,SAAoBE,iB,CAAAA,iB,SAAmB7+E,oB,CAAAA,oB,SAAsBuM,oB,CAAAA,oB,SAAsBuyE,gB,CAAAA,gB,SAAkB/sE,W,CAAAA,W,SAAaqC,sB,CAAAA,sB,SAAwBf,Y,CAAAA,Y,SAAc3B,gB,CAAAA,gB,SAAkB0B,iB,CAAAA,iB,SAAmBiB,a,CAAAA,a,SAAeI,yB,CAAAA,yB,SAA2BF,0B,CAAAA,0B,SAA4BC,yB,CAAAA,yB,SAA2BF,0B,CAAAA,0B,SAA4B4G,Y,CAAAA,Y,SAActI,U,CAAAA,U,SAAY8H,gB,CAAAA,gB,SAAkBlJ,U,CAAAA,U,SAAYiI,Y,CAAAA,Y,SAAclG,a,CAAAA,a,SAAeuF,wB,CAAAA,wB,SAA0B7d,c,CAAAA,c,SAAgBsgB,e,CAAAA,e,SAAiBpI,a,CAAAA,a,SAAe4H,mB,CAAAA,mB,SAAqBstH,mB,CAAAA,mB,SAAqB11I,Q,CAAAA,Q,SAAUogJ,Y,CAAAA,Y,SAAcv5H,oB,CAAAA,oB,SAAsB0jH,kB,CAAAA,kB,SAAoBhrH,S,CAAAA,S,SAAWM,sB,CAAAA,sB,SAAwBE,sB,CAAAA,sB,SAAwBJ,sB,CAAAA,sB,SAAwBF,sB,CAAAA,sB,SAAwBgvD,kB,CAAAA,kB,SAAoBnnD,W,CAAAA,W,SAAa9I,Y,CAAAA,Y,SAAcC,gB,CAAAA,gB,SAAkB6wD,c,CAAAA,c,SAAgBoqD,I,CAAAA,I,SAAMj8H,iB,CAAAA,iB,SAAmBgwD,K,CAAAA,K,SAAOyE,a,CAAAA,a,SAAe+rG,W,CAAAA,W,SAAa/iJ,U,CAAAA,U,SAAY4gJ,gB,CAAAA,gB,SAAkBtyJ,M,CAAAA,M,SAAQ+iF,c,CAAAA,c,SAAgB+vE,e,CAAAA,e,SAAiBhgC,kB,CAAAA,kB,SAAoBkrB,e,CAAAA,e,SAAiBmE,e,CAAAA,e,SAAiB9C,a,CAAAA,a,SAAe7wB,oB,CAAAA,oB,SAAsBE,qB,CAAAA,qB,SAAuBt7F,U,CAAAA,U,SAAYi5G,uB,CAAAA,uB,SAAyBF,2B,CAAAA,2B,SAA6BnwH,sB,CAAAA,sB,SAAwBF,gB,CAAAA,gB,SAAkB9H,Q,CAAAA,Q,SAAUmJ,gB,CAAAA,gB,SAAkB3D,U,CAAAA,U,SAAYS,iB,CAAAA,iB,SAAmBuB,sB,CAAAA,sB,SAAwBH,qB,CAAAA,qB,SAAuBC,qB,CAAAA,qB,SAAuBC,qB,CAAAA,qB,SAAuBE,sB,CAAAA,sB,SAAwBC,sB,CAAAA,sB,SAAwBb,oB,CAAAA,oB,SAAsBC,oB,CAAAA,oB,SAAsBC,oB,CAAAA,oB,SAAsBC,oB,CAAAA,oB,SAAsBC,oB,CAAAA,oB,SAAsBC,oB,CAAAA,oB,SAAsBC,oB,CAAAA,oB,SAAsBC,oB,CAAAA,oB,SAAsBO,gB,CAAAA,gB,SAAkBf,oB,CAAAA,oB,SAAsBH,wB,CAAAA,wB,SAA0BD,wB,CAAAA,wB,SAA0BL,qB,CAAAA,qB,SAAuBC,qB,CAAAA,qB,SAAuBC,qB,CAAAA,qB,SAAuBuB,sB,CAAAA,sB,SAAwBC,wB,CAAAA,wB,SAA0BnB,e,CAAAA,e,SAAiBC,e,CAAAA,e,SAAiBJ,uB,CAAAA,uB,SAAyBD,uB,CAAAA,uB,SAAyBJ,oB,CAAAA,oB,SAAsBH,Q,CAAAA,Q,SAAUC,e,CAAAA,e,SAAiB6pH,iB,CAAAA,iB,SAAmB7lG,G,CAAAA,G,SAAKnpC,S,CAAAA,S,SAAWgpB,e,CAAAA,e,SAAiBq3H,a,CAAAA,a,SAAer7H,S,CAAAA,S,SAAWC,gB,CAAAA,gB,SAAkBxC,mB,CAAAA,mB,SAAqBoa,Y,CAAAA,Y,SAAc5pB,c,CAAAA,c,SAAgBmW,gB,CAAAA,gB,SAAkBtI,uB,CAAAA,uB,SAAyBqrH,Y,CAAAA,Y,SAAc/kH,6B,CAAAA,6B,SAA+BF,uB,CAAAA,uB,SAAyBwB,c,CAAAA,c,SAAgBK,Y,CAAAA,Y,SAAc5pB,K,CAAAA,K,SAAO09D,W,CAAAA,W,SAAagG,S,CAAAA,S,SAAWn5D,c,CAAAA,c,SAAgBykF,c,CAAAA,c,SAAgB0yC,K,CAAAA,K,SAAO6L,a,CAAAA,a,SAAe+zB,S,CAAAA,S,SAAW76B,U,CAAAA,U,SAAY3hH,S,CAAAA,S,SAAW0sG,Q,CAAAA,Q,SAAU0sC,c,CAAAA,c,SAAgB3tC,W,CAAAA,W,SAAa/2F,M,CAAAA,M,SAAQsP,M,CAAAA,M,SAAQtvB,c,CAAAA,c,SAAgBmjJ,S,CAAAA,S,SAAWxb,mB,CAAAA,mB,SAAqBvmB,W,CAAAA,W,SAAa6lB,S,CAAAA,S,SAAWkd,e,CAAAA,e,SAAiB3uC,M,CAAAA,M,SAAQ//B,c,CAAAA,c,SAAgB/sE,c,CAAAA,c,SAAgBM,sB,CAAAA,sB,SAAwBR,c,CAAAA,c,SAAgB6J,e,CAAAA,e,SAAiBN,e,CAAAA,e,SAAiBG,e,CAAAA,e,SAAiBk6H,Y,CAAAA,Y,SAAc75H,e,CAAAA,e,SAAiBN,e,CAAAA,e,SAAiBG,e,CAAAA,e,SAAiB0sH,mB,CAAAA,mB,SAAqB52H,gB,CAAAA,gB,SAAkBJ,mB,CAAAA,mB,SAAqBd,K,CAAAA,K,SAAO4I,qB,CAAAA,qB,SAAuB4kH,mB,CAAAA,mB,SAAqB1zG,O,CAAAA,O,SAASvwB,a,CAAAA,a,SAAekkI,a,CAAAA,a,SAAeI,iB,CAAAA,iB,SAAmBt3F,Q,CAAAA,Q,SAAUhuB,mB,CAAAA,mB,SAAqBD,qB,CAAAA,qB,SAAuBD,iB,CAAAA,iB,SAAmBkmH,Y,CAAAA,Y,SAAc3tH,iB,CAAAA,iB,SAAmBsC,S,CAAAA,S,SAAW6+B,qB,CAAAA,qB,SAAuBE,qB,CAAAA,qB,SAAuBL,oB,CAAAA,oB,SAAsBC,2B,CAAAA,2B,SAA6B25G,O,CAAAA,O,SAASE,a,CAAAA,a,SAAer8F,W,CAAAA,W,SAAanU,a,CAAAA,a,SAAe9mC,gB,CAAAA,gB,SAAkBU,kB,CAAAA,kB,SAAoBL,e,CAAAA,e,SAAiBG,qB,CAAAA,qB,SAAuBC,qB,CAAAA,qB,SAAuBN,iB,CAAAA,iB,SAAmB7D,Y,CAAAA,Y,SAAcngB,O,CAAAA,O,SAAS2B,O,CAAAA,O,SAAS25B,O,CAAAA,O,SAASk8G,mB,CAAAA,mB,SAAqBhkB,Y,CAAAA,Y,SAAcjH,c,CAAAA,c,SAAgBvuF,mB,CAAAA,mB,SAAqBJ,sB,CAAAA,sB,SAAwBxS,qB,CAAAA,qB,SAAuBmjC,qB,CAAAA,qB,SAAuBrwB,0B,CAAAA,0B,SAA4BX,iB,CAAAA,iB,SAAmBp/B,a,CAAAA,a,SAAesyG,U,CAAAA,U,SAAYplF,sB,CAAAA,sB,SAAwBijH,iB,CAAAA,iB,SAAmB3mH,gB,CAAAA,gB,SAAkBF,mB,CAAAA,mB,SAAqB1G,U,CAAAA,U,SAAY2G,e,CAAAA,e,SAAiBsB,a,CAAAA,a,SAAemC,Y,CAAAA,Y,SAAc4K,mB,CAAAA,mB,SAAqB7N,Y,CAAAA,Y;;;;;;;;;;;;;;AC/xkDrwN;;IAAYrwB,K;;AACZ;;AAOA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAfA;AAJA;AAKA9F,OAAO8F,KAAP,GAAeA,KAAf;AACA9F,OAAO+F,aAAP;;AAEA;;;AAaAxE,QAAQC,GAAR,CAAY,kCAAZ,E","file":"build.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// Build menu handler\r\nexport function setupBuildMenu(gameInstance) {\r\n    // Make this function available globally\r\n    window.setupBuildMenu = setupBuildMenu;\r\n    const buildMenu = document.getElementById('build-menu');\r\n    const buildMenuContent = document.querySelector('.build-menu-content');\r\n    \r\n    // Define structure types and costs\r\n    const structures = [\r\n        {\r\n            type: 'mining',\r\n            name: 'Mining Station',\r\n            desc: 'Extracts minerals from the planet',\r\n            cost: {\r\n                resources: 100,\r\n                research_points: 50,\r\n                population: 20\r\n            },\r\n            icon: 'M',\r\n            iconColor: 'rgba(255, 200, 0, 0.5)'\r\n        },\r\n        {\r\n            type: 'research',\r\n            name: 'Research Outpost',\r\n            desc: 'Generates research points',\r\n            cost: {\r\n                resources: 150,\r\n                research_points: 0,\r\n                population: 30\r\n            },\r\n            icon: 'R',\r\n            iconColor: 'rgba(0, 200, 255, 0.5)'\r\n        },\r\n        {\r\n            type: 'colony',\r\n            name: 'Colony Base',\r\n            desc: 'Allows population growth',\r\n            cost: {\r\n                resources: 200,\r\n                research_points: 100,\r\n                population: 50\r\n            },\r\n            icon: 'C',\r\n            iconColor: 'rgba(0, 255, 100, 0.5)'\r\n        },\r\n        {\r\n            type: 'defense',\r\n            name: 'Defense Platform',\r\n            desc: 'Defends against enemy attacks',\r\n            cost: {\r\n                resources: 180,\r\n                research_points: 80,\r\n                population: 40\r\n            },\r\n            icon: 'D',\r\n            iconColor: 'rgba(255, 50, 0, 0.5)'\r\n        },\r\n        {\r\n            type: 'fighter_hangar',\r\n            name: 'Fighter Hangar',\r\n            desc: 'Orbital facility to build fighter ships',\r\n            cost: {\r\n                resources: 500,\r\n                research_points: 300,\r\n                population: 100,\r\n                faction_materials: true // Only requires materials from player's faction\r\n            },\r\n            icon: 'F',\r\n            iconColor: 'rgba(100, 150, 255, 0.5)'\r\n        },\r\n        {\r\n            type: 'shipyard',\r\n            name: 'Capital Shipyard',\r\n            desc: 'Massive orbital structure for capital ships',\r\n            cost: {\r\n                resources: 1000,\r\n                research_points: 800,\r\n                population: 200,\r\n                blue_material: 100,\r\n                red_material: 100,\r\n                green_material: 100\r\n            },\r\n            icon: 'S',\r\n            iconColor: 'rgba(200, 100, 255, 0.5)'\r\n        }\r\n    ];\r\n    \r\n    // Track selected planet\r\n    let selectedPlanet = null;\r\n    \r\n    // Show build menu for a planet\r\n    function showForPlanet(planet) {\r\n        console.log(\"showForPlanet called with:\", planet);\r\n        \r\n        if (!planet) {\r\n            console.error(\"Cannot show build menu: no planet provided\");\r\n            return;\r\n        }\r\n        \r\n        selectedPlanet = planet;\r\n        \r\n        // Get current resources\r\n        const currentResources = gameInstance.gameState.resources || 0;\r\n        \r\n        // Create HTML for build menu\r\n        let html = '';\r\n        \r\n        structures.forEach(structure => {\r\n            // Check if player can afford all resources\r\n            const resources = gameInstance.gameState.resources || 0;\r\n            const researchPoints = gameInstance.gameState.research_points || 0;\r\n            const population = gameInstance.gameState.population || 0;\r\n            const materials = gameInstance.gameState.materials || { blue: 0, red: 0, green: 0 };\r\n            const playerFaction = window.USER_INFO ? window.USER_INFO.faction : 'blue';\r\n            \r\n            // Check base resources\r\n            let canAfford = resources >= structure.cost.resources &&\r\n                           researchPoints >= structure.cost.research_points &&\r\n                           population >= structure.cost.population;\r\n                           \r\n            // Check faction materials if needed\r\n            if (structure.cost.faction_materials && playerFaction) {\r\n                canAfford = canAfford && materials[playerFaction] >= 50; // Require 50 of player's faction material\r\n            }\r\n            \r\n            // Check all materials if needed (for capital shipyard)\r\n            if (structure.cost.blue_material) {\r\n                canAfford = canAfford && \r\n                           materials.blue >= structure.cost.blue_material &&\r\n                           materials.red >= structure.cost.red_material &&\r\n                           materials.green >= structure.cost.green_material;\r\n            }\r\n            \r\n            const itemClass = canAfford ? 'build-menu-item' : 'build-menu-item disabled';\r\n            const costClass = canAfford ? 'build-menu-item-cost' : 'build-menu-item-cost insufficient';\r\n            \r\n            // Build cost string\r\n            let costString = `${structure.cost.resources} resources, ${structure.cost.research_points} research, ${structure.cost.population} population`;\r\n            \r\n            // Add material costs if any\r\n            if (structure.cost.faction_materials) {\r\n                costString += `, ${50} ${playerFaction} materials`;\r\n            }\r\n            \r\n            if (structure.cost.blue_material) {\r\n                costString += `, ${structure.cost.blue_material} blue, ${structure.cost.red_material} red, ${structure.cost.green_material} green materials`;\r\n            }\r\n            \r\n            // Create JSON string of cost object for data attribute\r\n            const costJSON = JSON.stringify(structure.cost);\r\n            \r\n            html += `\r\n                <div class=\"${itemClass}\" data-type=\"${structure.type}\" data-cost='${costJSON}'>\r\n                    <div class=\"build-menu-item-icon\" style=\"background-color: ${structure.iconColor};\">${structure.icon}</div>\r\n                    <div class=\"build-menu-item-details\">\r\n                        <div class=\"build-menu-item-name\">${structure.name}</div>\r\n                        <div class=\"build-menu-item-desc\">${structure.desc}</div>\r\n                        <div class=\"${costClass}\">Cost: ${costString}</div>\r\n                    </div>\r\n                </div>\r\n            `;\r\n        });\r\n        \r\n        // Update build menu content\r\n        buildMenuContent.innerHTML = html;\r\n        \r\n        // Add event listeners to build buttons\r\n        buildMenuContent.querySelectorAll('.build-menu-item').forEach(button => {\r\n            button.addEventListener('click', handleBuildClick);\r\n        });\r\n        \r\n        // Show the menu\r\n        buildMenu.style.display = 'block';\r\n    }\r\n    \r\n    // Handle build button clicks\r\n    function handleBuildClick(event) {\r\n        const button = event.currentTarget;\r\n        const structureType = button.getAttribute('data-type');\r\n        let cost;\r\n        \r\n        try {\r\n            cost = JSON.parse(button.getAttribute('data-cost'));\r\n        } catch (e) {\r\n            console.error(\"Error parsing cost data:\", e);\r\n            return;\r\n        }\r\n        \r\n        // Check if button is disabled\r\n        if (button.classList.contains('disabled')) {\r\n            showNotification(`Not enough resources to build ${structureType} station.`, 'error');\r\n            return;\r\n        }\r\n        \r\n        // Build the structure\r\n        buildStructure(structureType, cost);\r\n    }\r\n    \r\n    // Build a structure on the selected planet\r\n    function buildStructure(type, cost) {\r\n        if (!selectedPlanet) {\r\n            console.error(\"No planet selected for building\");\r\n            return;\r\n        }\r\n        \r\n        // Get current resources\r\n        const currentResources = gameInstance.gameState.resources || 0;\r\n        const researchPoints = gameInstance.gameState.research_points || 0;\r\n        const population = gameInstance.gameState.population || 0;\r\n        const materials = gameInstance.gameState.materials || { blue: 0, red: 0, green: 0 };\r\n        const playerFaction = window.USER_INFO ? window.USER_INFO.faction : 'blue';\r\n        \r\n        // Check if player has enough of all resources\r\n        if (currentResources < cost.resources) {\r\n            showNotification(`Not enough resources to build ${type} station.`, 'error');\r\n            return;\r\n        }\r\n        \r\n        if (researchPoints < cost.research_points) {\r\n            showNotification(`Not enough research points to build ${type} station.`, 'error');\r\n            return;\r\n        }\r\n        \r\n        if (population < cost.population) {\r\n            showNotification(`Not enough population to build ${type} station.`, 'error');\r\n            return;\r\n        }\r\n        \r\n        // Check faction materials if needed\r\n        if (cost.faction_materials && playerFaction) {\r\n            if (materials[playerFaction] < 50) {\r\n                showNotification(`Not enough ${playerFaction} materials to build ${type}.`, 'error');\r\n                return;\r\n            }\r\n        }\r\n        \r\n        // Check all materials if needed (for capital shipyard)\r\n        if (cost.blue_material) {\r\n            if (materials.blue < cost.blue_material || \r\n                materials.red < cost.red_material || \r\n                materials.green < cost.green_material) {\r\n                showNotification(`Not enough faction materials to build ${type}.`, 'error');\r\n                return;\r\n            }\r\n        }\r\n        \r\n        console.log(`Building ${type} on ${selectedPlanet.userData.planetData.name}`);\r\n        \r\n        // Deduct costs\r\n        gameInstance.gameState.resources -= cost.resources;\r\n        gameInstance.gameState.research_points -= cost.research_points;\r\n        gameInstance.gameState.population -= cost.population;\r\n        \r\n        // Deduct faction materials if needed\r\n        if (cost.faction_materials && playerFaction) {\r\n            gameInstance.gameState.materials[playerFaction] -= 50;\r\n        }\r\n        \r\n        // Deduct all materials if needed\r\n        if (cost.blue_material) {\r\n            gameInstance.gameState.materials.blue -= cost.blue_material;\r\n            gameInstance.gameState.materials.red -= cost.red_material;\r\n            gameInstance.gameState.materials.green -= cost.green_material;\r\n        }\r\n        \r\n        // Update structure counts based on type\r\n        const planetId = selectedPlanet.userData.id || selectedPlanet.id || Math.random().toString(36).substr(2, 9);\r\n        \r\n        // Update mining facilities count if needed\r\n        if (type === 'mining') {\r\n            if (!gameInstance.gameState.mining_facilities) {\r\n                gameInstance.gameState.mining_facilities = {};\r\n            }\r\n            if (!gameInstance.gameState.mining_facilities[planetId]) {\r\n                gameInstance.gameState.mining_facilities[planetId] = 0;\r\n            }\r\n            gameInstance.gameState.mining_facilities[planetId]++;\r\n        }\r\n        \r\n        // Update research outposts if needed\r\n        if (type === 'research') {\r\n            if (!gameInstance.gameState.research_outposts) {\r\n                gameInstance.gameState.research_outposts = {};\r\n            }\r\n            if (!gameInstance.gameState.research_outposts[planetId]) {\r\n                gameInstance.gameState.research_outposts[planetId] = 0;\r\n            }\r\n            gameInstance.gameState.research_outposts[planetId]++;\r\n        }\r\n        \r\n        // Update colony bases if needed\r\n        if (type === 'colony') {\r\n            if (!gameInstance.gameState.colony_bases) {\r\n                gameInstance.gameState.colony_bases = {};\r\n            }\r\n            if (!gameInstance.gameState.colony_bases[planetId]) {\r\n                gameInstance.gameState.colony_bases[planetId] = 0;\r\n            }\r\n            gameInstance.gameState.colony_bases[planetId]++;\r\n        }\r\n        \r\n        // Update orbital structures if building hangars or shipyards\r\n        if (type === 'fighter_hangar' || type === 'shipyard') {\r\n            const planetId = selectedPlanet.userData.id || selectedPlanet.id || Math.random().toString(36).substr(2, 9);\r\n            if (!gameInstance.gameState.orbital_structures) {\r\n                gameInstance.gameState.orbital_structures = {};\r\n            }\r\n            if (!gameInstance.gameState.orbital_structures[planetId]) {\r\n                gameInstance.gameState.orbital_structures[planetId] = [];\r\n            }\r\n            gameInstance.gameState.orbital_structures[planetId].push({\r\n                type: type,\r\n                built: new Date().toISOString()\r\n            });\r\n            \r\n            // Show special notification for orbital structures\r\n            if (type === 'fighter_hangar') {\r\n                showNotification(`Fighter Hangar built! You can now construct fighter ships.`);\r\n            } else if (type === 'shipyard') {\r\n                showNotification(`Capital Shipyard built! You can now construct capital ships.`);\r\n            }\r\n        }\r\n        \r\n        // Try to add structure to the planet\r\n        if (typeof selectedPlanet.addStructure === 'function') {\r\n            selectedPlanet.addStructure(type);\r\n        } else {\r\n            // Update planet data anyway so UI shows the new structure\r\n            if (!selectedPlanet.userData.planetData.structures) {\r\n                selectedPlanet.userData.planetData.structures = [];\r\n            }\r\n            selectedPlanet.userData.planetData.structures.push({ type });\r\n        }\r\n        \r\n        // Show notification\r\n        showNotification(`Built ${type} station on ${selectedPlanet.userData.planetData.name}`);\r\n        \r\n        // Update game state\r\n        gameInstance.updateResourceDisplay();\r\n        gameInstance.saveGame();\r\n        \r\n        // Refresh the build menu\r\n        showForPlanet(selectedPlanet);\r\n    }\r\n    \r\n    // Hide the build menu\r\n    function hide() {\r\n        buildMenu.style.display = 'none';\r\n        selectedPlanet = null;\r\n    }\r\n    \r\n    // Show a notification\r\n    function showNotification(message, type = 'info') {\r\n        const notification = document.createElement('div');\r\n        notification.className = `notification ${type === 'error' ? 'error' : ''}`;\r\n        notification.textContent = message;\r\n        document.body.appendChild(notification);\r\n        \r\n        // Remove after a delay\r\n        setTimeout(() => {\r\n            notification.style.opacity = '0';\r\n            setTimeout(() => {\r\n                if (notification.parentNode) {\r\n                    document.body.removeChild(notification);\r\n                }\r\n            }, 500);\r\n        }, 3000);\r\n    }\r\n    \r\n    // Return public interface\r\n    return {\r\n        showForPlanet,\r\n        hide\r\n    };\r\n}","// Check for global THREE first, if it exists, use it\r\nconst THREE = window.THREE || {};\r\n// Get OrbitControls from global if available\r\nconst OrbitControls = window.OrbitControls || {};\r\n\r\n// Import modules as needed\r\nimport { Planet } from './objects/planet.js';\r\nimport { Star } from './objects/star.js';\r\nimport { GameUI } from './ui.js';\r\nimport { ShipBuilder } from './shipBuilder.js';\r\n\r\n// Make imported classes globally available\r\nwindow.Planet = Planet;\r\nwindow.Star = Star;\r\nwindow.GameUI = GameUI;\r\nwindow.ShipBuilder = ShipBuilder;\r\n\r\n// Game state management\r\nlet gameState = {\r\n    seed: \"default\",\r\n    playerPosition: { x: 0, y: 0, z: 400 },\r\n    planets: [],\r\n    stars: [],\r\n    resources: 500, // Start with some initial resources to enable building\r\n    research_points: 0, // Research points\r\n    population: 0, // Population\r\n    mining_facilities: {},\r\n    research_outposts: {},\r\n    colony_bases: {},\r\n    materials: {\r\n        blue: 0,\r\n        red: 0,\r\n        green: 0\r\n    },\r\n    orbital_structures: {}, // For fighter hangars and shipyards\r\n    ships: {\r\n        fighters: 0,\r\n        capital_ships: 0\r\n    }\r\n};\r\n\r\n// Make gameState global for easier access from all modules\r\nwindow.gameState = gameState;\r\n\r\n// Main game class\r\nclass MassGravity {\r\n    constructor() {\r\n        // Initialize loading UI\r\n        this.loadingScreen = document.getElementById('loading-screen');\r\n        this.progressBar = document.getElementById('progress-bar');\r\n        this.loadingProgress = 0;\r\n        \r\n        // Game settings\r\n        this.gameSettings = {\r\n            orbitSpeedFactor: 0.00001, // Default value, will be updated from server\r\n            miningRate: 5,             // Default value, will be updated from server\r\n            miningInterval: 60         // Default value in seconds, will be updated from server\r\n        };\r\n        \r\n        // Store reference to gameState\r\n        this.gameState = gameState;\r\n        \r\n        // Store socket reference for easy access\r\n        this.socket = window.socket;\r\n        \r\n        // Set up save button handler\r\n        //document.getElementById('save-game').addEventListener('click', () => this.saveGame());\r\n        \r\n        // Try to load game data and settings first\r\n        Promise.all([\r\n            this.loadGame(),\r\n            this.loadGameSettings()\r\n        ]).then(() => {\r\n            this.initComponents();\r\n            this.initScene();\r\n            this.initAudio();\r\n            this.initInteraction();\r\n            this.initUI();\r\n            this.setListeners();\r\n            this.hideLoadingScreen();\r\n            this.render();\r\n        }).catch(error => {\r\n            console.error(\"Error initializing game:\", error);\r\n            this.hideLoadingScreen();\r\n        });\r\n        \r\n        // Flag to prevent click handling during camera transitions\r\n        this.isTransitioning = false;\r\n    }\r\n    \r\n    async loadGameSettings() {\r\n        try {\r\n            const response = await fetch('/api/game_settings');\r\n            const settings = await response.json();\r\n            \r\n            console.log(\"Game settings loaded:\", settings);\r\n            \r\n            if (settings.orbit_speed_factor) {\r\n                this.gameSettings.orbitSpeedFactor = settings.orbit_speed_factor;\r\n                console.log(\"Using orbital speed factor:\", this.gameSettings.orbitSpeedFactor);\r\n            }\r\n            \r\n            if (settings.mining_rate) {\r\n                this.gameSettings.miningRate = settings.mining_rate;\r\n                console.log(\"Using mining rate:\", this.gameSettings.miningRate);\r\n            }\r\n            \r\n            if (settings.mining_interval) {\r\n                this.gameSettings.miningInterval = settings.mining_interval;\r\n                console.log(\"Using mining interval:\", this.gameSettings.miningInterval);\r\n            }\r\n            \r\n        } catch (error) {\r\n            console.error(\"Error loading game settings:\", error);\r\n            // Use defaults if settings can't be loaded\r\n        }\r\n    }\r\n    \r\n    updateLoadingProgress(progress) {\r\n        this.loadingProgress = Math.min(100, progress);\r\n        this.progressBar.style.width = `${this.loadingProgress}%`;\r\n    }\r\n    \r\n    hideLoadingScreen() {\r\n        this.loadingScreen.style.opacity = 0;\r\n        setTimeout(() => {\r\n            this.loadingScreen.style.display = 'none';\r\n        }, 500);\r\n    }\r\n    \r\n    async loadGame() {\r\n        this.updateLoadingProgress(10);\r\n        \r\n        try {\r\n            // Get current user info for material caching\r\n            const userResponse = await fetch('/api/user_info');\r\n            let userId = 'default';\r\n            \r\n            try {\r\n                const userData = await userResponse.json();\r\n                userId = userData.id || 'default';\r\n                console.log(\"User identified for texture caching:\", userId);\r\n            } catch (userError) {\r\n                console.warn(\"Could not get user info for texture caching:\", userError);\r\n            }\r\n            \r\n            // Load game data\r\n            const response = await fetch('/api/load_game');\r\n            const data = await response.json();\r\n            \r\n            if (Object.keys(data).length > 0) {\r\n                // Add userId to game state for material caching\r\n                data.userId = userId;\r\n                \r\n                gameState = data;\r\n                window.gameState = gameState; // Update global reference\r\n                this.gameState = gameState; // Update instance reference\r\n                console.log(\"Game loaded successfully\");\r\n                \r\n                // Update the resource display\r\n                this.updateResourceDisplay();\r\n            } else {\r\n                console.log(\"No saved game found, starting new game\");\r\n                \r\n                // Still set userId for new games\r\n                gameState.userId = userId;\r\n                window.gameState = gameState;\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error loading game:\", error);\r\n        }\r\n        \r\n        this.updateLoadingProgress(30);\r\n    }\r\n    \r\n    updateResourceDisplay() {\r\n        // Update resource counters in the UI\r\n        const resourcesValue = document.getElementById('resources-value');\r\n        if (resourcesValue && gameState.resources !== undefined) {\r\n            resourcesValue.textContent = Math.floor(gameState.resources);\r\n        }\r\n        \r\n        // Update research points\r\n        const researchPointsValue = document.getElementById('research-points-value');\r\n        if (researchPointsValue && gameState.research_points !== undefined) {\r\n            researchPointsValue.textContent = Math.floor(gameState.research_points);\r\n        }\r\n        \r\n        // Update population\r\n        const populationValue = document.getElementById('population-value');\r\n        if (populationValue && gameState.population !== undefined) {\r\n            populationValue.textContent = Math.floor(gameState.population);\r\n        }\r\n        \r\n        // Update faction materials\r\n        if (gameState.materials) {\r\n            // Blue materials\r\n            const blueMaterial = document.getElementById('blue-material-value');\r\n            if (blueMaterial && gameState.materials.blue !== undefined) {\r\n                blueMaterial.textContent = Math.floor(gameState.materials.blue);\r\n            }\r\n            \r\n            // Red materials\r\n            const redMaterial = document.getElementById('red-material-value');\r\n            if (redMaterial && gameState.materials.red !== undefined) {\r\n                redMaterial.textContent = Math.floor(gameState.materials.red);\r\n            }\r\n            \r\n            // Green materials\r\n            const greenMaterial = document.getElementById('green-material-value');\r\n            if (greenMaterial && gameState.materials.green !== undefined) {\r\n                greenMaterial.textContent = Math.floor(gameState.materials.green);\r\n            }\r\n        }\r\n    }\r\n    \r\n    async saveGame() {\r\n        try {\r\n            // Update gameState with current data\r\n            gameState.playerPosition = {\r\n                x: this.camera.position.x,\r\n                y: this.camera.position.y,\r\n                z: this.camera.position.z\r\n            };\r\n            \r\n            // Add game objects data\r\n            gameState.planets = [];\r\n            gameState.stars = [];\r\n            \r\n            // Save star data\r\n            this.solar.children.forEach(child => {\r\n                if (child.userData.isStar) {\r\n                    const starData = {\r\n                        position: {\r\n                            x: child.position.x,\r\n                            y: child.position.y,\r\n                            z: child.position.z\r\n                        },\r\n                        data: child.userData.starData\r\n                    };\r\n                    gameState.stars.push(starData);\r\n                }\r\n            });\r\n            \r\n            // Save planet data from orbital containers\r\n            if (this.orbits) {\r\n                this.orbits.forEach(orbit => {\r\n                    // Find the planet in the orbit container\r\n                    let planet = null;\r\n                    orbit.children.forEach(child => {\r\n                        if (child.userData && child.userData.isPlanet) {\r\n                            planet = child;\r\n                        }\r\n                    });\r\n                    \r\n                    if (planet) {\r\n                        const planetData = {\r\n                            position: {\r\n                                x: planet.position.x,\r\n                                y: planet.position.y,\r\n                                z: planet.position.z\r\n                            },\r\n                            orbit: {\r\n                                distance: orbit.userData.orbitDistance,\r\n                                period: orbit.userData.orbitalPeriod,\r\n                                tilt: orbit.userData.orbitTilt,\r\n                                angle: orbit.rotation.y\r\n                            },\r\n                            data: planet.userData.planetData\r\n                        };\r\n                        gameState.planets.push(planetData);\r\n                    }\r\n                });\r\n            }\r\n            \r\n            // Use Socket.IO to save the game\r\n            if (window.socket) {\r\n                console.log(\"Saving game via Socket.IO\");\r\n                window.socket.emit('save_game', gameState);\r\n            } else {\r\n                console.warn(\"Socket.IO not available, falling back to HTTP API\");\r\n                \r\n                // Fallback to HTTP API\r\n                const response = await fetch('/api/save_game', {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Content-Type': 'application/json'\r\n                    },\r\n                    body: JSON.stringify(gameState)\r\n                });\r\n                \r\n                const result = await response.json();\r\n                if (result.success) {\r\n                    console.log(\"Game saved successfully via HTTP API\");\r\n                    \r\n                    // If server returned updated data (after mining calculations), use it\r\n                    if (result.updated_data) {\r\n                        console.log(\"Received updated game data from server\");\r\n                        gameState = result.updated_data;\r\n                        window.gameState = gameState; // Update global reference\r\n                        this.gameState = gameState; // Update instance reference\r\n                        this.updateResourceDisplay();\r\n                    }\r\n                    \r\n                    // Show notification\r\n                    this.showSaveNotification();\r\n                }\r\n            }\r\n        } catch (error) {\r\n            console.error(\"Error saving game:\", error);\r\n        }\r\n    }\r\n    \r\n    // Helper method to show save notification\r\n    showSaveNotification() {\r\n        const notification = document.createElement('div');\r\n        notification.textContent = 'Game saved';\r\n        notification.style.position = 'absolute';\r\n        notification.style.top = '10px';\r\n        notification.style.left = '50%';\r\n        notification.style.transform = 'translateX(-50%)';\r\n        notification.style.background = 'rgba(46, 204, 113, 0.8)';\r\n        notification.style.color = 'white';\r\n        notification.style.padding = '10px';\r\n        notification.style.borderRadius = '5px';\r\n        notification.style.zIndex = '1000';\r\n        document.body.appendChild(notification);\r\n        setTimeout(() => {\r\n            notification.style.opacity = '0';\r\n            notification.style.transition = 'opacity 0.5s';\r\n            setTimeout(() => {\r\n                document.body.removeChild(notification);\r\n            }, 500);\r\n        }, 2000);\r\n    }\r\n    \r\n    saveGameData() {\r\n        // Wrapper around saveGame for UI class to use\r\n        this.saveGame();\r\n    }\r\n    \r\n    initComponents() {\r\n        this.updateLoadingProgress(40);\r\n        \r\n        // Set up renderer\r\n        this.renderer = new THREE.WebGLRenderer({ antialias: true });\r\n        this.renderer.setClearColor(new THREE.Color(0x000000), 1);\r\n        this.renderer.setPixelRatio(window.devicePixelRatio);\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n        this.renderer.shadowMap.enabled = true;\r\n        \r\n        // Add renderer to DOM\r\n        const container = document.getElementById('game-container');\r\n        container.appendChild(this.renderer.domElement);\r\n        \r\n        this.updateLoadingProgress(50);\r\n        \r\n        // Set up scene and camera\r\n        this.scene = new THREE.Scene();\r\n        this.camera = new THREE.PerspectiveCamera(\r\n            45, \r\n            window.innerWidth / window.innerHeight, \r\n            1, \r\n            10000\r\n        );\r\n        \r\n        // Restore camera position from saved game or use default\r\n        const pos = gameState.playerPosition || { x: 0, y: 0, z: 400 };\r\n        this.camera.position.set(pos.x, pos.y, pos.z);\r\n        \r\n        // Set up controls\r\n        this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n        this.controls.enableDamping = true;\r\n        this.controls.dampingFactor = 0.05;\r\n        this.controls.maxDistance = 1000;\r\n        this.controls.rotateSpeed = 0.8;\r\n        \r\n        this.updateLoadingProgress(60);\r\n        \r\n        // Set up clock for animations\r\n        this.clock = new THREE.Clock();\r\n        this.timeScale = 1.0;\r\n        \r\n        // For object selection\r\n        this.raycaster = new THREE.Raycaster();\r\n        this.mouse = new THREE.Vector2();\r\n        this.selectedObject = null;\r\n        \r\n        // For double click detection\r\n        this.clickCount = 0;\r\n        this.clickTimer = null;\r\n        this.doubleClickDelay = 300; // ms\r\n        \r\n        // Zoomed state tracking\r\n        this.isZoomedIn = false;\r\n        this.zoomedPlanet = null;\r\n    }\r\n    \r\n    initAudio() {\r\n        // Initialize background music\r\n        this.backgroundMusic = new Audio('/static/assets/music/track01.mp3');\r\n        this.backgroundMusic.loop = true;\r\n        this.backgroundMusic.volume = 0; // Start with volume at 0 for fade-in\r\n        this.targetMusicVolume = 0.7; // Default maximum volume\r\n        this.isMusicMuted = false;\r\n        \r\n        // Set a timeout to start playing music 15 seconds after initialization\r\n        setTimeout(() => {\r\n            this.playBackgroundMusic();\r\n        }, 15000);\r\n    }\r\n    \r\n    playBackgroundMusic() {\r\n        // Start playing the music\r\n        this.backgroundMusic.play().catch(e => {\r\n            console.warn('Could not autoplay music. User interaction may be required:', e);\r\n        });\r\n        \r\n        // Fade in the volume gradually\r\n        let volume = 0;\r\n        const fadeStep = 0.01; // How much to increase volume each step\r\n        const fadeInterval = 100; // Milliseconds between each volume change\r\n        \r\n        this.fadeInInterval = setInterval(() => {\r\n            if (volume < this.targetMusicVolume) {\r\n                volume += fadeStep;\r\n                this.backgroundMusic.volume = volume;\r\n            } else {\r\n                clearInterval(this.fadeInInterval);\r\n                this.fadeInInterval = null;\r\n            }\r\n        }, fadeInterval);\r\n    }\r\n    \r\n    setMusicVolume(volume) {\r\n        // Set a new target volume (0.0 to 1.0)\r\n        this.targetMusicVolume = Math.max(0, Math.min(1, volume));\r\n        \r\n        // If not in the middle of a fade, set volume immediately\r\n        if (!this.fadeInInterval) {\r\n            this.backgroundMusic.volume = this.isMusicMuted ? 0 : this.targetMusicVolume;\r\n        }\r\n    }\r\n    \r\n    toggleMusicMute() {\r\n        this.isMusicMuted = !this.isMusicMuted;\r\n        \r\n        if (this.isMusicMuted) {\r\n            // Store current volume and set to 0\r\n            this.backgroundMusic.volume = 0;\r\n        } else {\r\n            // Restore volume\r\n            this.backgroundMusic.volume = this.targetMusicVolume;\r\n        }\r\n        \r\n        return this.isMusicMuted;\r\n    }\r\n    \r\n    initScene() {\r\n        this.updateLoadingProgress(70);\r\n        \r\n        // Add ambient light with increased intensity\r\n        const ambientLight = new THREE.AmbientLight(0x404040, 0.8);\r\n        this.scene.add(ambientLight);\r\n        \r\n        // Add a skybox\r\n        this.addSkybox();\r\n        \r\n        // Generate solar system\r\n        this.solar = new THREE.Object3D();\r\n        this.scene.add(this.solar);\r\n        \r\n        // Initialize orbits array\r\n        this.orbits = [];\r\n        \r\n        // Calculate solar system center and bounds\r\n        this.solarCenter = new THREE.Vector3(0, 0, 0);\r\n        this.solarRadius = 500; // Default value, will be updated\r\n        \r\n        // If we have saved game data, restore it\r\n        if (gameState.stars && gameState.stars.length > 0 || gameState.planets && gameState.planets.length > 0) {\r\n            this.restoreSolarSystem();\r\n        } else {\r\n            // Otherwise generate a new system\r\n            this.generateSolarSystem(gameState.seed || Math.random().toString());\r\n        }\r\n        \r\n        // Calculate the solar system bounds\r\n        this.calculateSolarSystemBounds();\r\n        \r\n        this.updateLoadingProgress(90);\r\n    }\r\n    \r\n    calculateSolarSystemBounds() {\r\n        // Find the furthest object from the center\r\n        let maxDistanceSq = 0;\r\n        let center = new THREE.Vector3();\r\n        \r\n        // Count number of objects\r\n        let count = 0;\r\n        \r\n        // Check stars\r\n        this.solar.children.forEach(child => {\r\n            if (child.userData && child.userData.isStar) {\r\n                center.add(child.position);\r\n                count++;\r\n                \r\n                const distSq = child.position.lengthSq();\r\n                if (distSq > maxDistanceSq) {\r\n                    maxDistanceSq = distSq;\r\n                }\r\n            }\r\n        });\r\n        \r\n        // Check planets in orbits\r\n        if (this.orbits) {\r\n            this.orbits.forEach(orbit => {\r\n                orbit.children.forEach(child => {\r\n                    if (child.userData && child.userData.isPlanet) {\r\n                        // Use world position for calculations\r\n                        const worldPos = new THREE.Vector3();\r\n                        child.getWorldPosition(worldPos);\r\n                        \r\n                        center.add(worldPos);\r\n                        count++;\r\n                        \r\n                        const distSq = worldPos.lengthSq();\r\n                        if (distSq > maxDistanceSq) {\r\n                            maxDistanceSq = distSq;\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        \r\n        // Calculate center\r\n        if (count > 0) {\r\n            center.divideScalar(count);\r\n            this.solarCenter = center;\r\n        }\r\n        \r\n        // Calculate radius with 20% padding\r\n        this.solarRadius = Math.sqrt(maxDistanceSq) * 1.2;\r\n        \r\n        // Make sure we have a minimum radius\r\n        this.solarRadius = Math.max(this.solarRadius, 400);\r\n    }\r\n    \r\n    initUI() {\r\n        this.ui = new GameUI(this);\r\n        this.shipBuilder = new ShipBuilder(this);\r\n        \r\n        // Make the game instance available globally for ShipBuilder\r\n        window.massGravity = this;\r\n        \r\n        // We're using window.buildMenuUI which is set up in game.html\r\n        console.log(\"initUI - window.buildMenuUI available:\", !!window.buildMenuUI);\r\n        \r\n        // Update resource display\r\n        this.updateResourceDisplay();\r\n        \r\n        // Request initial resource update from server\r\n        this.requestResourceUpdate();\r\n    }\r\n    \r\n    initInteraction() {\r\n        // We're only using double-click for selection now\r\n        this.renderer.domElement.addEventListener('click', this.handleDoubleClick.bind(this), false);\r\n        \r\n        // Listen for build structure events\r\n        document.addEventListener('build-structure', (event) => {\r\n            if (this.selectedObject && this.selectedObject.userData.isPlanet) {\r\n                const { type, cost } = event.detail;\r\n                this.ui.buildStructure(type, this.selectedObject);\r\n            }\r\n        });\r\n    }\r\n    \r\n    handleDoubleClick(event) {\r\n        // If we're in the middle of a camera transition, ignore double clicks\r\n        if (this.isTransitioning) return;\r\n        \r\n        this.clickCount++;\r\n        \r\n        if (this.clickCount === 1) {\r\n            this.clickTimer = setTimeout(() => {\r\n                this.clickCount = 0;\r\n            }, this.doubleClickDelay);\r\n        } else if (this.clickCount === 2) {\r\n            clearTimeout(this.clickTimer);\r\n            this.clickCount = 0;\r\n            \r\n            // Handle double click\r\n            this.onDoubleClick(event);\r\n        }\r\n    }\r\n    \r\n    onDoubleClick(event) {\r\n        // Calculate mouse position in normalized device coordinates\r\n        const mouse = new THREE.Vector2(\r\n            (event.clientX / window.innerWidth) * 2 - 1,\r\n            -(event.clientY / window.innerHeight) * 2 + 1\r\n        );\r\n        \r\n        // Update the picking ray with the camera and mouse position\r\n        this.raycaster.setFromCamera(mouse, this.camera);\r\n        \r\n        // Calculate objects intersecting the picking ray\r\n        const intersects = this.raycaster.intersectObjects(this.scene.children, true);\r\n        \r\n        // If we're already zoomed in on a planet, zoom out regardless of where we click\r\n        if (this.isZoomedIn) {\r\n            this.zoomToFullSolarSystem();\r\n            return;\r\n        }\r\n        \r\n        // If not zoomed in, look for a planet to zoom to\r\n        let planetToZoom = null;\r\n        \r\n        for (let i = 0; i < intersects.length; i++) {\r\n            // Traverse up the parent chain to find a planet\r\n            let object = intersects[i].object;\r\n            let planet = null;\r\n            \r\n            while (object.parent && !planet) {\r\n                if (object.userData && object.userData.isPlanet) {\r\n                    planet = object;\r\n                    break;\r\n                }\r\n                object = object.parent;\r\n            }\r\n            \r\n            if (planet) {\r\n                planetToZoom = planet;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        if (planetToZoom) {\r\n            // Zoom to the planet\r\n            this.zoomToPlanet(planetToZoom);\r\n        } else if (this.isBackgroundClick(intersects)) {\r\n            // If clicked on background, zoom out to see whole system\r\n            this.zoomToFullSolarSystem();\r\n        }\r\n    }\r\n    \r\n    zoomToPlanet(planet) {\r\n        // Flag that we're zooming to a planet to prevent further interactions\r\n        this.isTransitioning = true;\r\n        \r\n        // Store the current camera position\r\n        const startPos = this.camera.position.clone();\r\n        \r\n        // Store the planet and orbit for continuous tracking during render\r\n        this.isZoomedIn = true;\r\n        this.zoomedPlanet = planet;\r\n        \r\n        // Get accurate world position of the planet\r\n        const planetPos = new THREE.Vector3();\r\n        planet.getWorldPosition(planetPos);\r\n        \r\n        // Ensure we have a valid radius (checking planet's mesh - typically the first child)\r\n        let planetRadius = 1;\r\n        if (planet.children && planet.children.length > 0 && \r\n            planet.children[0].geometry && planet.children[0].geometry.parameters) {\r\n            planetRadius = planet.children[0].geometry.parameters.radius || 1;\r\n        }\r\n        \r\n        // Set viewing distance based on planet size (larger distance for better view)\r\n        const distance = planetRadius * 5;\r\n        \r\n        // Calculate a nice viewing angle slightly above and to the side of the orbital plane\r\n        const targetDirection = new THREE.Vector3(0.7, 0.4, 0.8).normalize();\r\n        \r\n        // Calculate target position based on planet position\r\n        const targetPos = planetPos.clone().add(\r\n            targetDirection.multiplyScalar(distance)\r\n        );\r\n        \r\n        // Use a longer animation duration for smoother transition\r\n        const duration = 1800; // ms\r\n        const startTime = Date.now();\r\n        \r\n        // Disable controls during transition\r\n        this.controls.enabled = false;\r\n        \r\n        // Animation function\r\n        const animate = () => {\r\n            const now = Date.now();\r\n            const elapsed = now - startTime;\r\n            const progress = Math.min(elapsed / duration, 1);\r\n            \r\n            // Smooth easing function for natural motion\r\n            const smoothProgress = progress < 0.5 \r\n                ? 2 * progress * progress \r\n                : -1 + (4 - 2 * progress) * progress;\r\n            \r\n            // Get fresh planet position in case it's moving in orbit\r\n            const updatedPlanetPos = new THREE.Vector3();\r\n            planet.getWorldPosition(updatedPlanetPos);\r\n            \r\n            // Set controls target to planet position\r\n            this.controls.target.copy(updatedPlanetPos);\r\n            \r\n            // Calculate camera position relative to updated planet position\r\n            const newTargetPos = updatedPlanetPos.clone().add(\r\n                targetDirection.clone().multiplyScalar(distance)\r\n            );\r\n            \r\n            // Move camera smoothly\r\n            this.camera.position.lerpVectors(startPos, newTargetPos, smoothProgress);\r\n            \r\n            // Keep camera looking at planet\r\n            this.camera.lookAt(updatedPlanetPos);\r\n            \r\n            // Update OrbitControls\r\n            this.controls.update();\r\n            \r\n            if (progress < 1) {\r\n                requestAnimationFrame(animate);\r\n            } else {\r\n                // Animation complete\r\n                this.controls.enabled = true;\r\n                this.isTransitioning = false;\r\n                \r\n                // Make a final camera position adjustment to ensure proper view\r\n                this.camera.position.copy(newTargetPos);\r\n                this.controls.target.copy(updatedPlanetPos);\r\n                this.controls.update();\r\n                \r\n                // Select the planet for UI\r\n                this.selectedObject = planet;\r\n                this.ui.selectObject(planet);\r\n                \r\n                console.log(\"Camera zoom complete, looking at:\", updatedPlanetPos);\r\n            }\r\n        };\r\n        \r\n        animate();\r\n    }\r\n    \r\n    isBackgroundClick(intersects) {\r\n        // Check if the click is on a planet or star\r\n        for (let i = 0; i < intersects.length; i++) {\r\n            let object = intersects[i].object;\r\n            \r\n            // Traverse up the parent chain to find any selectable object\r\n            while (object.parent && !object.userData.isSelectable) {\r\n                object = object.parent;\r\n            }\r\n            \r\n            if (object.userData.isSelectable) {\r\n                return false; // This is a planet or star, not background\r\n            }\r\n        }\r\n        \r\n        return true; // No selectable objects found, this is background\r\n    }\r\n    \r\n    zoomToFullSolarSystem() {\r\n        // Store the current camera position\r\n        const startPos = this.camera.position.clone();\r\n        \r\n        // Determine a good position to view the entire solar system\r\n        const targetDirection = new THREE.Vector3(1, 0.5, 1).normalize();\r\n        const targetDistance = this.solarRadius * 1.5;\r\n        const targetPos = this.solarCenter.clone().add(\r\n            targetDirection.multiplyScalar(targetDistance)\r\n        );\r\n        \r\n        // Animate to the new position\r\n        this.animateCameraMove(startPos, targetPos, this.solarCenter);\r\n        \r\n        // Clear zoomed in state\r\n        this.isZoomedIn = false;\r\n        this.zoomedPlanet = null;\r\n        \r\n        // Clear any selected object\r\n        this.selectedObject = null;\r\n        if (this.ui) {\r\n            this.ui.selectObject(null);\r\n        }\r\n        \r\n        // Hide ship builder menu if it exists\r\n        if (this.shipBuilder) {\r\n            this.shipBuilder.hide();\r\n        }\r\n    }\r\n    \r\n    animateCameraMove(startPos, targetPos, lookAt = null) {\r\n        // Set the transitioning flag to prevent interaction during animation\r\n        this.isTransitioning = true;\r\n        \r\n        const camera = this.camera;\r\n        const duration = 1000; // ms\r\n        const startTime = Date.now();\r\n        \r\n        // Store the original controls enabled state and settings\r\n        const originalControlsState = {\r\n            enabled: this.controls.enabled,\r\n            target: this.controls.target.clone()\r\n        };\r\n        \r\n        // Temporarily disable controls during animation\r\n        this.controls.enabled = false;\r\n        \r\n        const targetPoint = lookAt || targetPos;\r\n        \r\n        const animate = () => {\r\n            const now = Date.now();\r\n            const elapsed = now - startTime;\r\n            const progress = Math.min(elapsed / duration, 1);\r\n            \r\n            // Use a smoothstep function for easing\r\n            const smoothProgress = progress * progress * (3 - 2 * progress);\r\n            \r\n            // Interpolate position\r\n            camera.position.lerpVectors(startPos, targetPos, smoothProgress);\r\n            \r\n            // Interpolate target point for orbit controls\r\n            if (lookAt) {\r\n                const newTarget = new THREE.Vector3();\r\n                newTarget.lerpVectors(originalControlsState.target, lookAt, smoothProgress);\r\n                this.controls.target.copy(newTarget);\r\n                \r\n                // Look at the interpolated target\r\n                camera.lookAt(newTarget);\r\n            }\r\n            \r\n            if (progress < 1) {\r\n                requestAnimationFrame(animate);\r\n            } else {\r\n                // Animation complete\r\n                // Set the final position and target\r\n                camera.position.copy(targetPos);\r\n                if (lookAt) {\r\n                    this.controls.target.copy(lookAt);\r\n                    camera.lookAt(lookAt);\r\n                }\r\n                \r\n                // Re-enable controls\r\n                this.controls.enabled = originalControlsState.enabled;\r\n                \r\n                // Update the controls to ensure they're working correctly\r\n                this.controls.update();\r\n                \r\n                // Reset transitioning flag\r\n                this.isTransitioning = false;\r\n            }\r\n        };\r\n        \r\n        animate();\r\n    }\r\n    \r\n    onMouseClick(event) {\r\n        // If we're in the middle of a camera transition, ignore clicks\r\n        if (this.isTransitioning) return;\r\n        \r\n        // If double click is detected, don't handle as a single click\r\n        if (this.clickCount === 1) return;\r\n        \r\n        // Calculate mouse position in normalized device coordinates\r\n        this.mouse.x = (event.clientX / window.innerWidth) * 2 - 1;\r\n        this.mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;\r\n        \r\n        // Update the picking ray with the camera and mouse position\r\n        this.raycaster.setFromCamera(this.mouse, this.camera);\r\n        \r\n        // Calculate objects intersecting the picking ray\r\n        const intersects = this.raycaster.intersectObjects(this.scene.children, true);\r\n        \r\n        // Find the first selectable object\r\n        let selected = null;\r\n        \r\n        for (let i = 0; i < intersects.length; i++) {\r\n            // Traverse up the parent chain to find the root object\r\n            let object = intersects[i].object;\r\n            while (object.parent && !object.userData.isSelectable) {\r\n                object = object.parent;\r\n            }\r\n            \r\n            if (object.userData.isSelectable) {\r\n                selected = object;\r\n                break;\r\n            }\r\n        }\r\n        \r\n        // Handle selection\r\n        if (selected) {\r\n            this.selectedObject = selected;\r\n            this.ui.selectObject(selected);\r\n        } else {\r\n            // Clear selection\r\n            this.selectedObject = null;\r\n            this.ui.selectObject(null);\r\n        }\r\n    }\r\n    \r\n    addSkybox() {\r\n        // Create a skybox using a CubeTextureLoader\r\n        const loader = new THREE.CubeTextureLoader();\r\n        loader.setPath('/static/assets/skybox/');\r\n        \r\n        const textureCube = loader.load([\r\n            'right.jpg', 'left.jpg',\r\n            'top.jpg', 'bottom.jpg',\r\n            'front.jpg', 'back.jpg'\r\n        ]);\r\n        \r\n        this.scene.background = textureCube;\r\n    }\r\n    \r\n    restoreSolarSystem() {\r\n        // Restore stars first\r\n        if (gameState.stars) {\r\n            gameState.stars.forEach(starData => {\r\n                if (!starData || !starData.data) {\r\n                    console.warn('Invalid star data found in game state');\r\n                    return;\r\n                }\r\n\r\n                // Create default data if any properties are missing\r\n                const starConfig = {\r\n                    name: starData.data.name || 'Unknown Star',\r\n                    type: starData.data.type || 'Main Sequence',\r\n                    temperature: starData.data.temperature || 5500,\r\n                    luminosity: starData.data.luminosity || 1.0\r\n                };\r\n                \r\n                const star = new Star(starConfig);\r\n                \r\n                // Use position from saved data or default\r\n                const pos = starData.position || { x: 0, y: 0, z: 0 };\r\n                star.position.set(pos.x, pos.y, pos.z);\r\n                \r\n                this.solar.add(star);\r\n            });\r\n        }\r\n        \r\n        // Restore planets with orbits\r\n        if (gameState.planets) {\r\n            gameState.planets.forEach(planetData => {\r\n                if (!planetData || !planetData.data) {\r\n                    console.warn('Invalid planet data found in game state');\r\n                    return;\r\n                }\r\n\r\n                // Create default data if any properties are missing\r\n                const planetConfig = {\r\n                    name: planetData.data.name || 'Unknown Planet',\r\n                    type: planetData.data.type || 'Terrestrial',\r\n                    resources: planetData.data.resources || { minerals: 50, energy: 50, water: 50 }\r\n                };\r\n                \r\n                const planet = new Planet(planetConfig);\r\n                \r\n                // Create orbit container\r\n                const orbitContainer = new THREE.Object3D();\r\n                this.solar.add(orbitContainer);\r\n                \r\n                // Set orbit properties\r\n                let orbitDistance = 100;\r\n                let orbitalPeriod = 0.001;\r\n                let orbitTilt = 0;\r\n                let currentAngle = 0;\r\n                \r\n                // Use saved orbit data if available\r\n                if (planetData.orbit) {\r\n                    orbitDistance = planetData.orbit.distance || 100;\r\n                    orbitalPeriod = planetData.orbit.period || 0.001;\r\n                    orbitTilt = planetData.orbit.tilt || 0;\r\n                    currentAngle = planetData.orbit.angle || 0;\r\n                } else {\r\n                    // Calculate basic orbit from position\r\n                    const pos = planetData.position || { x: 100, y: 0, z: 0 };\r\n                    orbitDistance = Math.sqrt(pos.x * pos.x + pos.z * pos.z);\r\n                    \r\n                    // Give it a random angle instead of syncing to time\r\n                    currentAngle = Math.random() * Math.PI * 2;\r\n                    \r\n                    // Calculate period based on distance using the orbit speed factor from settings\r\n                    orbitalPeriod = Math.sqrt(Math.pow(orbitDistance, 3)) * this.gameSettings.orbitSpeedFactor;\r\n                }\r\n                \r\n                // Position planet in orbit\r\n                planet.position.x = orbitDistance;\r\n                \r\n                // Apply orbit tilt and angle\r\n                orbitContainer.rotation.x = orbitTilt;\r\n                orbitContainer.rotation.y = currentAngle;\r\n                \r\n                // Store orbit data\r\n                orbitContainer.userData = {\r\n                    orbitalPeriod: orbitalPeriod,\r\n                    orbitDistance: orbitDistance,\r\n                    orbitTilt: orbitTilt\r\n                };\r\n                \r\n                // Add planet to orbit container\r\n                orbitContainer.add(planet);\r\n                this.orbits.push(orbitContainer);\r\n                \r\n                // Add any saved structures to the planet\r\n                if (planetData.data.structures && Array.isArray(planetData.data.structures) && planetData.data.structures.length > 0) {\r\n                    planetData.data.structures.forEach(structure => {\r\n                        if (structure && structure.type) {\r\n                            planet.addStructure(structure.type);\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        }\r\n    }\r\n    \r\n    generateSolarSystem(seed) {\r\n        // Use a simple random function with seed\r\n        const rng = this.seededRandom(seed);\r\n        \r\n        // Star names\r\n        const starNames = [\r\n            \"Sol\", \"Proxima\", \"Sirius\", \"Alpha Centauri\", \"Vega\", \r\n            \"Rigel\", \"Betelgeuse\", \"Antares\", \"Arcturus\", \"Pollux\"\r\n        ];\r\n        \r\n        // Planet names\r\n        const planetNames = [\r\n            \"Terra\", \"Novus\", \"Ares\", \"Aquarius\", \"Hyperion\", \r\n            \"Kronos\", \"Atlas\", \"Helios\", \"Orion\", \"Thetis\",\r\n            \"Gaia\", \"Calypso\", \"Triton\", \"Proteus\", \"Dione\"\r\n        ];\r\n        \r\n        // Create star\r\n        const star = new Star({\r\n            radius: 20 + rng() * 20,\r\n            name: starNames[Math.floor(rng() * starNames.length)],\r\n            color: new THREE.Color(\r\n                0.9 + rng() * 0.1,\r\n                0.6 + rng() * 0.3,\r\n                0.2 + rng() * 0.2\r\n            ),\r\n            glowColor: new THREE.Color(\r\n                0.9 + rng() * 0.1,\r\n                0.7 + rng() * 0.3,\r\n                0.3 + rng() * 0.2\r\n            )\r\n        });\r\n        this.solar.add(star);\r\n        \r\n        // Create planets\r\n        const numPlanets = 3 + Math.floor(rng() * 5);\r\n        \r\n        for (let i = 0; i < numPlanets; i++) {\r\n            // Generate random planet attributes\r\n            const planetRadius = 5 + rng() * 10;\r\n            \r\n            // Random planet type and appearance\r\n            const planetTypes = [\"Terrestrial\", \"Gas Giant\", \"Ice Giant\", \"Desert\", \"Ocean\"];\r\n            const planetType = planetTypes[Math.floor(rng() * planetTypes.length)];\r\n            \r\n            let planetColor;\r\n            let hasAtmosphere = true;\r\n            let atmosphereColor;\r\n            \r\n            // Set appearance based on type\r\n            switch (planetType) {\r\n                case \"Terrestrial\":\r\n                    planetColor = new THREE.Color(\r\n                        0.2 + rng() * 0.3,\r\n                        0.4 + rng() * 0.4,\r\n                        0.2 + rng() * 0.3\r\n                    );\r\n                    atmosphereColor = new THREE.Color(0x00b3ff);\r\n                    break;\r\n                case \"Gas Giant\":\r\n                    planetColor = new THREE.Color(\r\n                        0.6 + rng() * 0.3,\r\n                        0.6 + rng() * 0.3,\r\n                        0.5 + rng() * 0.3\r\n                    );\r\n                    atmosphereColor = new THREE.Color(\r\n                        0.6 + rng() * 0.3,\r\n                        0.6 + rng() * 0.3,\r\n                        0.7 + rng() * 0.3\r\n                    );\r\n                    break;\r\n                case \"Ice Giant\":\r\n                    planetColor = new THREE.Color(\r\n                        0.4 + rng() * 0.2,\r\n                        0.5 + rng() * 0.3,\r\n                        0.7 + rng() * 0.3\r\n                    );\r\n                    atmosphereColor = new THREE.Color(0x88ccff);\r\n                    break;\r\n                case \"Desert\":\r\n                    planetColor = new THREE.Color(\r\n                        0.7 + rng() * 0.3,\r\n                        0.6 + rng() * 0.3,\r\n                        0.4 + rng() * 0.2\r\n                    );\r\n                    atmosphereColor = new THREE.Color(0xffcc88);\r\n                    break;\r\n                case \"Ocean\":\r\n                    planetColor = new THREE.Color(\r\n                        0.1 + rng() * 0.2,\r\n                        0.3 + rng() * 0.3,\r\n                        0.6 + rng() * 0.4\r\n                    );\r\n                    atmosphereColor = new THREE.Color(0x0088ff);\r\n                    break;\r\n            }\r\n            \r\n            // Random resources\r\n            const resources = {\r\n                minerals: rng() * 100,\r\n                energy: rng() * 100,\r\n                water: rng() * 100\r\n            };\r\n            \r\n            // Create the planet\r\n            const planet = new Planet({\r\n                radius: planetRadius,\r\n                name: planetNames[i % planetNames.length] + \" \" + (i + 1),\r\n                type: planetType,\r\n                color: planetColor,\r\n                atmosphereColor: atmosphereColor,\r\n                hasAtmosphere: hasAtmosphere,\r\n                resources: resources,\r\n                rotationSpeed: 0.0001, // Very slow rotation\r\n                cloudSpeed: 0.0005 // Very slow cloud rotation\r\n            });\r\n            \r\n            // Calculate orbit properties\r\n            const orbitDistance = 80 + i * 50 + rng() * 20;\r\n            \r\n            // Create orbit container\r\n            const orbitContainer = new THREE.Object3D();\r\n            this.solar.add(orbitContainer);\r\n            \r\n            // Calculate orbital period based on distance (using Kepler's third law as inspiration)\r\n            // Slower periods for further planets\r\n            // Use the orbit speed factor from settings\r\n            const orbitalPeriod = Math.sqrt(Math.pow(orbitDistance, 3)) * this.gameSettings.orbitSpeedFactor;\r\n            \r\n            // Give each planet a random starting position\r\n            const initialAngle = rng() * Math.PI * 2;\r\n            \r\n            // Position planet at the correct distance\r\n            planet.position.x = orbitDistance;\r\n            \r\n            // Add slight tilt to orbit\r\n            const orbitTilt = (rng() - 0.5) * 0.2;\r\n            orbitContainer.rotation.x = orbitTilt;\r\n            \r\n            // Set initial position with random angle\r\n            orbitContainer.rotation.y = initialAngle;\r\n            \r\n            // Store orbit data for animation\r\n            orbitContainer.userData = {\r\n                orbitalPeriod: orbitalPeriod,\r\n                orbitDistance: orbitDistance,\r\n                orbitTilt: orbitTilt,\r\n                initialAngle: initialAngle\r\n            };\r\n            \r\n            orbitContainer.add(planet);\r\n            this.orbits.push(orbitContainer);\r\n        }\r\n    }\r\n    \r\n    // Request resource update via Socket.IO\r\n    requestResourceUpdate() {\r\n        if (window.socket) {\r\n            window.socket.emit('request_update');\r\n        }\r\n    }\r\n    \r\n    // Show mining notification\r\n    showMiningNotification(amount) {\r\n        const notification = document.createElement('div');\r\n        notification.textContent = `Mining facilities generated ${Math.floor(amount)} resources`;\r\n        notification.style.position = 'absolute';\r\n        notification.style.top = '40px'; // Position below other notifications\r\n        notification.style.left = '50%';\r\n        notification.style.transform = 'translateX(-50%)';\r\n        notification.style.background = 'rgba(255,204,0,0.7)';\r\n        notification.style.color = 'white';\r\n        notification.style.padding = '8px 12px';\r\n        notification.style.borderRadius = '5px';\r\n        notification.style.zIndex = '1000';\r\n        notification.style.fontSize = '14px';\r\n        document.body.appendChild(notification);\r\n        \r\n        // Remove after a delay\r\n        setTimeout(() => {\r\n            notification.style.opacity = '0';\r\n            notification.style.transition = 'opacity 0.5s';\r\n            setTimeout(() => {\r\n                if (notification.parentNode) {\r\n                    document.body.removeChild(notification);\r\n                }\r\n            }, 500);\r\n        }, 3000);\r\n    }\r\n    \r\n    // Simple seeded random function\r\n    seededRandom(seed) {\r\n        let s = this.hashString(seed);\r\n        return function() {\r\n            s = Math.sin(s) * 10000;\r\n            return s - Math.floor(s);\r\n        };\r\n    }\r\n    \r\n    hashString(str) {\r\n        let hash = 0;\r\n        for (let i = 0; i < str.length; i++) {\r\n            const char = str.charCodeAt(i);\r\n            hash = ((hash << 5) - hash) + char;\r\n            hash = hash & hash; // Convert to 32bit integer\r\n        }\r\n        return hash;\r\n    }\r\n    \r\n    setListeners() {\r\n        // Handle window resize\r\n        window.addEventListener('resize', () => this.onWindowResize());\r\n        \r\n        // Update resource display periodically without generating anything\r\n        setInterval(() => this.updateResourceDisplay(), 5000);\r\n        \r\n        // Set up socket listeners for WebSocket events\r\n        if (window.socket) {\r\n            // Ensure socket connection doesn't get garbage collected\r\n            this.socket = window.socket;\r\n        }\r\n        \r\n        this.updateLoadingProgress(100);\r\n    }\r\n    \r\n    onWindowResize() {\r\n        this.camera.aspect = window.innerWidth / window.innerHeight;\r\n        this.camera.updateProjectionMatrix();\r\n        this.renderer.setSize(window.innerWidth, window.innerHeight);\r\n    }\r\n    \r\n    render() {\r\n        requestAnimationFrame(() => this.render());\r\n        \r\n        // Update controls\r\n        this.controls.update();\r\n        \r\n        // Get delta time for animations\r\n        const delta = this.clock.getDelta() * this.timeScale * 1000;\r\n        \r\n        // Animate planetary orbits\r\n        if (this.orbits) {\r\n            this.orbits.forEach(orbit => {\r\n                if (orbit.userData && orbit.userData.orbitalPeriod) {\r\n                    // Rotate orbit based on period - use the orbital period which is calculated using the admin setting\r\n                    // Apply an extreme slowdown factor to make orbits nearly imperceptible in real-time\r\n                    // Divide by a billion to make it a million times slower\r\n                    orbit.rotation.y += (Math.PI * 2) / (orbit.userData.orbitalPeriod * 1000000000) * delta;\r\n                }\r\n            });\r\n        }\r\n        \r\n        // Update camera if we're focused on a planet\r\n        if (this.isZoomedIn && this.zoomedPlanet) {\r\n            // Get the current world position of the planet\r\n            const planetPos = new THREE.Vector3();\r\n            this.zoomedPlanet.getWorldPosition(planetPos);\r\n            \r\n            // Update the controls target to follow the planet\r\n            this.controls.target.copy(planetPos);\r\n            \r\n            // Look at the planet\r\n            this.camera.lookAt(planetPos);\r\n            \r\n            // Update controls\r\n            this.controls.update();\r\n        }\r\n        \r\n        // Resource generation now happens server-side via WebSockets\r\n        \r\n        // Animate planet and star objects\r\n        if (this.solar) {\r\n            // Animate stars\r\n            this.solar.children.forEach(object => {\r\n                if (object.animate) {\r\n                    object.animate(delta);\r\n                }\r\n            });\r\n            \r\n            // Animate planets in orbits\r\n            if (this.orbits) {\r\n                this.orbits.forEach(orbit => {\r\n                    orbit.children.forEach(child => {\r\n                        if (child.animate) {\r\n                            child.animate(delta);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        }\r\n        \r\n        // Render scene\r\n        this.renderer.render(this.scene, this.camera);\r\n    }\r\n}\r\n\r\n// Export for testing\r\nexport { MassGravity };\r\n\r\n// Make MassGravity globally available\r\nwindow.MassGravity = MassGravity;\r\n\r\n// Initialize the game when the page is fully loaded\r\nwindow.addEventListener('DOMContentLoaded', () => {\r\n    try {\r\n        console.log(\"Initializing MassGravity game\");\r\n        const gameInstance = new MassGravity();\r\n        // Make the game instance globally accessible\r\n        window.massGravity = gameInstance;\r\n    } catch (e) {\r\n        console.error(\"Error initializing game:\", e);\r\n    }\r\n});","import * as THREE from 'three';\r\n\r\nconst texLoader = new THREE.TextureLoader();\r\nconst cloudTex = texLoader.load('/static/img/cloud.png');\r\n\r\nexport class Atmosphere extends THREE.Points {\r\n  constructor(params) {\r\n    super();\r\n\r\n    this.params = params;\r\n\r\n    const noiseFunctions = document.getElementById('noise-functions').innerHTML;\r\n    const vertexShader = document.getElementById('atmosphere-vert-shader').innerHTML;\r\n    const fragmentShader = document.getElementById('atmosphere-frag-shader').innerHTML;\r\n\r\n    this.material = new THREE.ShaderMaterial({\r\n      uniforms: {\r\n        time: { value: 0 },\r\n        pointTexture: { value: cloudTex },\r\n        ...params\r\n      },\r\n      vertexShader,\r\n      fragmentShader: fragmentShader.replace(\r\n        'void main() {',\r\n        `${noiseFunctions}\r\n         void main() {`\r\n      ),\r\n      blending: THREE.NormalBlending,\r\n      depthWrite: false,\r\n      transparent: true\r\n    });\r\n\r\n    this.update();\r\n  }\r\n\r\n  update(time) {\r\n    if (this.material && this.material.uniforms && this.material.uniforms.time) {\r\n      this.material.uniforms.time.value = time || 0;\r\n    }\r\n    \r\n    if (!this.geometry) {\r\n      const geometry = new THREE.BufferGeometry();\r\n      \r\n      const verts = [];\r\n      const uvs = [];\r\n      const sizes = [];\r\n      \r\n      // Sample points within the atmosphere\r\n      for(let i = 0; i < this.params.particles.value; i++) {\r\n        let r = Math.random() * this.params.thickness.value + this.params.radius.value;\r\n\r\n        // Pick a random point within a cube of size [-1, 1]\r\n        // This approach works better than parameterizing the spherical coordinates\r\n        // since it doesn't have the issue of particles being bunched at the poles\r\n        const p = new THREE.Vector3(\r\n          2 * Math.random() - 1,\r\n          2 * Math.random() - 1,\r\n          2 * Math.random() - 1\r\n        );\r\n\r\n        // Project onto the surface of a sphere\r\n        p.normalize();\r\n        p.multiplyScalar(r);\r\n\r\n        const minSize = this.params.minParticleSize.value;\r\n        const maxSize = this.params.maxParticleSize.value;\r\n        const size = Math.random() * (maxSize - minSize) + minSize;\r\n\r\n        verts.push(p.x, p.y, p.z);\r\n        uvs.push(0.5, 0.5);\r\n        sizes.push(size);\r\n      }\r\n\r\n      geometry.setAttribute('position', new THREE.Float32BufferAttribute(verts, 3));\r\n      geometry.setAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2));\r\n      geometry.setAttribute('size', new THREE.Float32BufferAttribute(sizes, 1));\r\n\r\n      this.geometry = geometry;\r\n    }\r\n  }\r\n}","import * as THREE from 'three';\r\n\r\nconst texLoader = new THREE.TextureLoader();\r\nconst cloudTex = texLoader.load('/static/img/cloud.png');\r\n\r\nexport class Atmosphere extends THREE.Points {\r\n  constructor(params) {\r\n    super();\r\n\r\n    this.params = params;\r\n\r\n    const noiseFunctions = document.getElementById('noise-functions').innerHTML;\r\n    const vertexShader = document.getElementById('atmosphere-vert-shader').innerHTML;\r\n    const fragmentShader = document.getElementById('atmosphere-frag-shader').innerHTML;\r\n\r\n    this.material = new THREE.ShaderMaterial({\r\n      uniforms: {\r\n        time: { value: 0 },\r\n        pointTexture: { value: cloudTex },\r\n        ...params\r\n      },\r\n      vertexShader,\r\n      fragmentShader: fragmentShader.replace(\r\n        'void main() {',\r\n        `${noiseFunctions}\r\n         void main() {`\r\n      ),\r\n      blending: THREE.NormalBlending,\r\n      depthWrite: false,\r\n      transparent: true\r\n    });\r\n\r\n    this.update();\r\n  }\r\n\r\n  update(time) {\r\n    if (this.material && this.material.uniforms && this.material.uniforms.time) {\r\n      this.material.uniforms.time.value = time || 0;\r\n    }\r\n    \r\n    if (!this.geometry) {\r\n      const geometry = new THREE.BufferGeometry();\r\n      \r\n      const verts = [];\r\n      const uvs = [];\r\n      const sizes = [];\r\n      \r\n      // Sample points within the atmosphere\r\n      for(let i = 0; i < this.params.particles.value; i++) {\r\n        let r = Math.random() * this.params.thickness.value + this.params.radius.value;\r\n\r\n        // Pick a random point within a cube of size [-1, 1]\r\n        // This approach works better than parameterizing the spherical coordinates\r\n        // since it doesn't have the issue of particles being bunched at the poles\r\n        const p = new THREE.Vector3(\r\n          2 * Math.random() - 1,\r\n          2 * Math.random() - 1,\r\n          2 * Math.random() - 1\r\n        );\r\n\r\n        // Project onto the surface of a sphere\r\n        p.normalize();\r\n        p.multiplyScalar(r);\r\n\r\n        const minSize = this.params.minParticleSize.value;\r\n        const maxSize = this.params.maxParticleSize.value;\r\n        const size = Math.random() * (maxSize - minSize) + minSize;\r\n\r\n        verts.push(p.x, p.y, p.z);\r\n        uvs.push(0.5, 0.5);\r\n        sizes.push(size);\r\n      }\r\n\r\n      geometry.setAttribute('position', new THREE.Float32BufferAttribute(verts, 3));\r\n      geometry.setAttribute('uv', new THREE.Float32BufferAttribute(uvs, 2));\r\n      geometry.setAttribute('size', new THREE.Float32BufferAttribute(sizes, 1));\r\n\r\n      this.geometry = geometry;\r\n    }\r\n  }\r\n}","import * as THREE from 'three';\r\nimport { noiseShader } from '../shaders/noise.js';\r\n\r\nexport function createNoiseMaterial(options = {}) {\r\n    return new THREE.ShaderMaterial({\r\n        uniforms: options.uniforms || {\r\n            time: { type: \"f\", value: 1.0 },\r\n            scale: { type: \"v2\", value: new THREE.Vector2(1, 1) },\r\n            offset: { type: \"v2\", value: new THREE.Vector2(0, 0) }\r\n        },\r\n        vertexShader: noiseShader.vertex,\r\n        fragmentShader: noiseShader.fragment\r\n    });\r\n}","import * as THREE from 'three';\r\nimport { createNoiseMaterial } from './noise.js';\r\n\r\n/**\r\n * PlanetMaterialGenerator \r\n * \r\n * This class generates and caches planet materials and textures.\r\n * \r\n * Caching implementation notes:\r\n * 1. In-memory cache: All generated textures and materials are cached in memory\r\n *    using a Map (this.textureCache) for the current session.\r\n * \r\n * 2. Persistent cache: Textures are stored as PNG files on the user's hard drive\r\n *    using the browser's File System Access API.\r\n * \r\n * 3. File System Structure:\r\n *    - Each user gets a directory named with their userId\r\n *    - Each texture type (diffuse, normal, height, roughness) is stored as a separate PNG\r\n *    - Filenames follow the pattern: {climate}-{seed}-{hasOcean}-{oceanLevel}-{type}.png\r\n * \r\n * 4. Storage Process:\r\n *    - When a new texture is generated, it's saved to the user's directory\r\n *    - On load, we check if the texture files exist before generating new ones\r\n *    - Materials are recreated from the cached textures\r\n */\r\nexport class PlanetMaterialGenerator {\r\n    constructor() {\r\n        // Create texture cache for storing generated materials in memory\r\n        this.textureCache = new Map();\r\n        \r\n        // File system directory handle for persistent storage\r\n        this.directoryHandle = null;\r\n        \r\n        // Flag to track if we've requested file system access\r\n        this.fileSystemAccessRequested = false;\r\n        \r\n        // Initialize the file system access\r\n        this.initFileSystemAccess();\r\n\r\n        // Define climate zones based on distance from sun\r\n        this.climateZones = [\r\n            { name: 'desert', maxDistance: 50, colors: { land: 0xd9a282, water: 0x2389da } },\r\n            { name: 'tropical', maxDistance: 100, colors: { land: 0x73bf45, water: 0x1e88e5 } },\r\n            { name: 'temperate', maxDistance: 200, colors: { land: 0x538d22, water: 0x1565c0 } },\r\n            { name: 'arctic', maxDistance: 300, colors: { land: 0xd8e4ff, water: 0x0d47a1 } },\r\n            { name: 'ice', maxDistance: Infinity, colors: { land: 0xffffff, water: 0x82b1ff } }\r\n        ];\r\n        \r\n        // Set up cache limit to prevent memory issues\r\n        this.maxCacheSize = 25; // Maximum number of entries in the in-memory cache\r\n    }\r\n    \r\n    /**\r\n     * Initialize file system access for texture storage\r\n     */\r\n    async initFileSystemAccess() {\r\n        // Only attempt if the File System Access API is available\r\n        if (!window.showDirectoryPicker) {\r\n            console.warn(\"File System Access API not available in this browser. Falling back to memory-only caching.\");\r\n            return;\r\n        }\r\n        \r\n        try {\r\n            // Check if we have a stored directory handle\r\n            const storedHandle = await this.getStoredDirectoryHandle();\r\n            \r\n            if (storedHandle) {\r\n                // Verify we still have permission to use this handle\r\n                const options = { mode: 'readwrite' };\r\n                if (await storedHandle.requestPermission(options) === 'granted') {\r\n                    this.directoryHandle = storedHandle;\r\n                    console.log(\"Restored file system access to texture cache directory\");\r\n                    return;\r\n                }\r\n            }\r\n            \r\n            // We'll request file system access when the user first generates a planet\r\n            console.log(\"Will request file system access when generating first planet\");\r\n        } catch (e) {\r\n            console.warn(\"Error initializing file system access:\", e);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Get stored directory handle from IndexedDB\r\n     */\r\n    async getStoredDirectoryHandle() {\r\n        return new Promise((resolve, reject) => {\r\n            // Open IndexedDB\r\n            const request = indexedDB.open('PlanetTextureCache', 1);\r\n            \r\n            request.onupgradeneeded = () => {\r\n                const db = request.result;\r\n                // Create object store for directory handles if it doesn't exist\r\n                if (!db.objectStoreNames.contains('directoryHandles')) {\r\n                    db.createObjectStore('directoryHandles', { keyPath: 'id' });\r\n                }\r\n            };\r\n            \r\n            request.onsuccess = () => {\r\n                const db = request.result;\r\n                const transaction = db.transaction('directoryHandles', 'readonly');\r\n                const store = transaction.objectStore('directoryHandles');\r\n                \r\n                const getRequest = store.get('textureDirectory');\r\n                \r\n                getRequest.onsuccess = () => {\r\n                    resolve(getRequest.result ? getRequest.result.handle : null);\r\n                };\r\n                \r\n                getRequest.onerror = () => {\r\n                    console.error(\"Error getting directory handle from IndexedDB:\", getRequest.error);\r\n                    reject(getRequest.error);\r\n                };\r\n            };\r\n            \r\n            request.onerror = () => {\r\n                console.error(\"Error opening IndexedDB:\", request.error);\r\n                reject(request.error);\r\n            };\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Store directory handle in IndexedDB for future sessions\r\n     * @param {FileSystemDirectoryHandle} handle - Directory handle to store\r\n     */\r\n    async storeDirectoryHandle(handle) {\r\n        return new Promise((resolve, reject) => {\r\n            // Open IndexedDB\r\n            const request = indexedDB.open('PlanetTextureCache', 1);\r\n            \r\n            request.onupgradeneeded = () => {\r\n                const db = request.result;\r\n                // Create object store for directory handles if it doesn't exist\r\n                if (!db.objectStoreNames.contains('directoryHandles')) {\r\n                    db.createObjectStore('directoryHandles', { keyPath: 'id' });\r\n                }\r\n            };\r\n            \r\n            request.onsuccess = () => {\r\n                const db = request.result;\r\n                const transaction = db.transaction('directoryHandles', 'readwrite');\r\n                const store = transaction.objectStore('directoryHandles');\r\n                \r\n                const putRequest = store.put({\r\n                    id: 'textureDirectory',\r\n                    handle: handle\r\n                });\r\n                \r\n                putRequest.onsuccess = () => {\r\n                    console.log(\"Saved directory handle to IndexedDB\");\r\n                    resolve();\r\n                };\r\n                \r\n                putRequest.onerror = () => {\r\n                    console.error(\"Error saving directory handle to IndexedDB:\", putRequest.error);\r\n                    reject(putRequest.error);\r\n                };\r\n            };\r\n            \r\n            request.onerror = () => {\r\n                console.error(\"Error opening IndexedDB:\", request.error);\r\n                reject(request.error);\r\n            };\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Request file system access from the user if we don't have it already\r\n     */\r\n    async requestFileSystemAccess() {\r\n        if (this.fileSystemAccessRequested) {\r\n            return this.directoryHandle;\r\n        }\r\n        \r\n        this.fileSystemAccessRequested = true;\r\n        \r\n        if (!window.showDirectoryPicker) {\r\n            console.warn(\"File System Access API not available. Using memory-only caching.\");\r\n            return null;\r\n        }\r\n        \r\n        try {\r\n            // Show folder picker UI to user\r\n            console.log(\"Requesting file system access for texture storage...\");\r\n            const directoryHandle = await window.showDirectoryPicker({\r\n                id: 'planetTextures',\r\n                mode: 'readwrite',\r\n                startIn: 'documents',\r\n                suggestedName: 'MassGravity-PlanetTextures'\r\n            });\r\n            \r\n            // Store the directory handle for future use\r\n            this.directoryHandle = directoryHandle;\r\n            await this.storeDirectoryHandle(directoryHandle);\r\n            \r\n            console.log(\"Obtained file system access for texture storage\");\r\n            return directoryHandle;\r\n        } catch (e) {\r\n            console.warn(\"User denied file system access or error occurred:\", e);\r\n            return null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Generate material for a planet based on distance from sun\r\n     * @param {Object} options - Planet generation options\r\n     * @param {number} options.distanceFromSun - Distance from the sun\r\n     * @param {number} options.radius - Planet radius\r\n     * @param {number} options.seed - Random seed for consistent generation\r\n     * @param {boolean} options.hasOcean - Whether the planet has oceans\r\n     * @param {number} options.oceanLevel - Ocean level (0-1)\r\n     * @param {string} options.userId - User ID for texture caching\r\n     * @returns {Promise<Object>} Materials and textures for the planet\r\n     */\r\n    generatePlanetMaterial(options) {\r\n        // Set defaults\r\n        const distanceFromSun = options.distanceFromSun || 100;\r\n        const radius = options.radius || 10;\r\n        const seed = options.seed || Math.random() * 1000;\r\n        const hasOcean = options.hasOcean !== undefined ? options.hasOcean : true;\r\n        const oceanLevel = options.oceanLevel !== undefined ? options.oceanLevel : 0.65;\r\n        const userId = options.userId || 'default';\r\n        \r\n        // Determine climate zone based on distance\r\n        const climateZone = this.getClimateZone(distanceFromSun);\r\n        \r\n        // Ensure seed is a number\r\n        const seedNum = typeof seed === 'number' ? seed : parseFloat(seed);\r\n        \r\n        // Create a user-specific cache key for planet materials\r\n        const cacheKey = `mat-${userId}-${climateZone.name}-${seedNum.toFixed(2)}-${hasOcean?1:0}-${oceanLevel.toFixed(2)}`;\r\n        \r\n        // Check memory cache first\r\n        if (this.textureCache.has(cacheKey) && this.textureCache.get(cacheKey) !== null) {\r\n            console.log(`Using cached material for ${cacheKey} from memory`);\r\n            const cachedData = this.textureCache.get(cacheKey);\r\n            return cachedData;\r\n        }\r\n        \r\n        console.log(`Generating new material for ${cacheKey}`);\r\n        \r\n        // Generate textures\r\n        const textures = this.generateTextures({\r\n            seed,\r\n            radius,\r\n            climateZone,\r\n            hasOcean,\r\n            oceanLevel,\r\n            userId\r\n        });\r\n\r\n        // Create the main planet material with emissive based on climate\r\n        let emissiveColor;\r\n        let emissiveIntensity = 0.15;\r\n        \r\n        // Adjust emissive color based on climate type to enhance visibility\r\n        switch(climateZone.name) {\r\n            case 'desert':\r\n                emissiveColor = new THREE.Color(0x553311); // Warm glow for desert\r\n                emissiveIntensity = 0.2;\r\n                break;\r\n            case 'tropical':\r\n                emissiveColor = new THREE.Color(0x225522); // Green glow for tropical\r\n                emissiveIntensity = 0.15;\r\n                break;\r\n            case 'temperate':\r\n                emissiveColor = new THREE.Color(0x224433); // Blue-green glow for temperate\r\n                emissiveIntensity = 0.12;\r\n                break;\r\n            case 'arctic':\r\n                emissiveColor = new THREE.Color(0x334455); // Blue glow for arctic\r\n                emissiveIntensity = 0.1;\r\n                break;\r\n            case 'ice':\r\n                emissiveColor = new THREE.Color(0x445566); // Blue-white glow for ice\r\n                emissiveIntensity = 0.08;\r\n                break;\r\n            default:\r\n                emissiveColor = new THREE.Color(0x333333);\r\n        }\r\n        \r\n        // Use MeshPhysicalMaterial for more realistic appearance\r\n        const material = new THREE.MeshPhysicalMaterial({\r\n            map: textures.diffuse,\r\n            normalMap: textures.normal,\r\n            normalScale: new THREE.Vector2(1.0, 1.0),\r\n            displacementMap: textures.height,\r\n            displacementScale: radius * 0.05,\r\n            roughnessMap: textures.roughness,\r\n            roughness: 0.85,\r\n            metalness: 0.1,\r\n            clearcoat: 0.1,\r\n            clearcoatRoughness: 0.4,\r\n            envMapIntensity: 1.0,\r\n            emissive: emissiveColor,\r\n            emissiveIntensity: emissiveIntensity\r\n        });\r\n\r\n        // Ocean material disabled for now\r\n        const result = {\r\n            mainMaterial: material,\r\n            oceanMaterial: null, // Ocean rendering disabled\r\n            textures,\r\n            climateZone\r\n        };\r\n        \r\n        // Cache the complete material result (not just textures)\r\n        this.textureCache.set(cacheKey, result);\r\n        \r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * Get appropriate climate zone based on distance from sun\r\n     * @param {number} distance \r\n     * @returns {Object} Climate zone data\r\n     */\r\n    getClimateZone(distance) {\r\n        // Find the appropriate climate zone based on distance\r\n        for (const zone of this.climateZones) {\r\n            if (distance <= zone.maxDistance) {\r\n                return zone;\r\n            }\r\n        }\r\n        return this.climateZones[this.climateZones.length - 1]; // Default to last zone\r\n    }\r\n\r\n    /**\r\n     * Create a procedural ocean material\r\n     * @param {Object} climateZone \r\n     * @param {number} radius \r\n     * @returns {THREE.Material} Ocean material\r\n     */\r\n    createOceanMaterial(climateZone, radius) {\r\n        const oceanColor = new THREE.Color(parseInt(climateZone.colors.water));\r\n        \r\n        // Create custom water material with animated waves\r\n        const oceanMaterial = new THREE.MeshPhysicalMaterial({\r\n            color: oceanColor,\r\n            roughness: 0.1,\r\n            metalness: 0.1,\r\n            transmission: 0.6, // Lower transmission for better visibility\r\n            thickness: 0.5,\r\n            clearcoat: 1.0,\r\n            clearcoatRoughness: 0.25,\r\n            envMapIntensity: 1.5, // Enhance reflections\r\n            emissive: new THREE.Color(oceanColor).multiplyScalar(0.2), // Slight self-illumination\r\n            emissiveIntensity: 0.1\r\n        });\r\n\r\n        // Add normal map for waves\r\n        const waveTexture = this.generateOceanNormalMap();\r\n        oceanMaterial.normalMap = waveTexture;\r\n        oceanMaterial.normalScale = new THREE.Vector2(0.15, 0.15);\r\n        \r\n        return oceanMaterial;\r\n    }\r\n\r\n    /**\r\n     * Generate all textures needed for a planet\r\n     * @param {Object} options\r\n     * @returns {Object} Generated textures\r\n     */\r\n    generateTextures(options) {\r\n        const { seed, climateZone, hasOcean, oceanLevel, userId = 'default' } = options;\r\n        \r\n        // Ensure the seed is treated as a number for cache key\r\n        const seedNum = typeof seed === 'number' ? seed : parseFloat(seed);\r\n        \r\n        // Create cache key for textures\r\n        const cacheKey = `tex-${climateZone.name}-${seedNum.toFixed(2)}-${hasOcean?1:0}-${oceanLevel.toFixed(2)}`;\r\n        \r\n        // Check memory cache first (fastest)\r\n        if (this.textureCache.has(cacheKey) && this.textureCache.get(cacheKey) !== null) {\r\n            console.log(`Using cached textures for ${cacheKey} from memory`);\r\n            return this.textureCache.get(cacheKey);\r\n        }\r\n        \r\n        console.log(`Generating new textures for ${cacheKey}`);\r\n        \r\n        // Create new textures with smaller size for better performance\r\n        const size = 256; // Use 256 for better performance\r\n        \r\n        // Generate heightmap first as it's the base for the other maps\r\n        const heightMap = this.generateHeightMap(size, seedNum);\r\n        \r\n        // Generate other maps based on the heightmap\r\n        const diffuseMap = this.generateDiffuseMap(size, heightMap, climateZone, hasOcean, oceanLevel);\r\n        const normalMap = this.generateNormalMap(size, heightMap);\r\n        const roughnessMap = this.generateRoughnessMap(size, heightMap, hasOcean, oceanLevel);\r\n        \r\n        const textures = {\r\n            diffuse: diffuseMap,\r\n            normal: normalMap,\r\n            height: heightMap,\r\n            roughness: roughnessMap\r\n        };\r\n        \r\n        // Cache the results in memory\r\n        this.textureCache.set(cacheKey, textures);\r\n        \r\n        // If memory cache is too large, remove oldest entries\r\n        if (this.textureCache.size > this.maxCacheSize) {\r\n            const oldestKey = this.textureCache.keys().next().value;\r\n            console.log(`Memory cache full, removing oldest entry: ${oldestKey}`);\r\n            this.textureCache.delete(oldestKey);\r\n        }\r\n        \r\n        // Try to save to disk - but don't wait for it\r\n        this.saveTexturesToDisk(userId, cacheKey, textures);\r\n        \r\n        return textures;\r\n    }\r\n    \r\n    /**\r\n     * Save textures to disk in the background (non-blocking)\r\n     * @param {string} userId - User ID\r\n     * @param {string} cacheKey - Cache key for the textures\r\n     * @param {Object} textures - Texture objects to save\r\n     */\r\n    saveTexturesToDisk(userId, cacheKey, textures) {\r\n        // Schedule saving for later, after the planet is rendered\r\n        setTimeout(() => {\r\n            // Request file system access if needed\r\n            this.requestFileSystemAccess().then(directoryHandle => {\r\n                if (!directoryHandle) return;\r\n                \r\n                // Save each texture\r\n                this.saveTextureToDisk(\r\n                    userId, \r\n                    this.getTextureFilename(cacheKey, 'diffuse'),\r\n                    textures.diffuse.source.data\r\n                );\r\n                \r\n                this.saveTextureToDisk(\r\n                    userId, \r\n                    this.getTextureFilename(cacheKey, 'normal'),\r\n                    textures.normal.source.data\r\n                );\r\n                \r\n                this.saveTextureToDisk(\r\n                    userId, \r\n                    this.getTextureFilename(cacheKey, 'height'),\r\n                    textures.height.source.data\r\n                );\r\n                \r\n                this.saveTextureToDisk(\r\n                    userId, \r\n                    this.getTextureFilename(cacheKey, 'roughness'),\r\n                    textures.roughness.source.data\r\n                );\r\n                \r\n                console.log(`Saved all textures for ${cacheKey} to disk`);\r\n            });\r\n        }, 0);\r\n    }\r\n    \r\n    /**\r\n     * Save texture to disk\r\n     * @param {string} userId - User ID to organize directories\r\n     * @param {string} textureName - Filename to save\r\n     * @param {HTMLCanvasElement} canvas - Canvas with texture image\r\n     * @returns {Promise<boolean>} - Whether the save was successful\r\n     */\r\n    async saveTextureToDisk(userId, textureName, canvas) {\r\n        // Make sure we have file system access\r\n        if (!this.directoryHandle && !await this.requestFileSystemAccess()) {\r\n            console.warn(\"Cannot save texture: no file system access\");\r\n            return false;\r\n        }\r\n        \r\n        try {\r\n            // Create user directory if it doesn't exist\r\n            let userDirHandle;\r\n            try {\r\n                userDirHandle = await this.directoryHandle.getDirectoryHandle(userId, { create: true });\r\n            } catch (e) {\r\n                console.error(`Could not create/access directory for user ${userId}:`, e);\r\n                return false;\r\n            }\r\n            \r\n            // Create texture file\r\n            const fileHandle = await userDirHandle.getFileHandle(textureName, { create: true });\r\n            \r\n            // Convert canvas to blob\r\n            const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\r\n            \r\n            // Write blob to file\r\n            const writable = await fileHandle.createWritable();\r\n            await writable.write(blob);\r\n            await writable.close();\r\n            \r\n            console.log(`Saved texture ${textureName} for user ${userId}`);\r\n            return true;\r\n        } catch (e) {\r\n            console.error(`Error saving texture ${textureName}:`, e);\r\n            return false;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Load texture from disk\r\n     * @param {string} userId - User ID to look in\r\n     * @param {string} textureName - Filename to load\r\n     * @returns {Promise<THREE.Texture|null>} - Loaded texture or null if not found\r\n     */\r\n    async loadTextureFromDisk(userId, textureName) {\r\n        // Make sure we have file system access\r\n        if (!this.directoryHandle) {\r\n            console.warn(\"Cannot load texture: no file system access\");\r\n            return null;\r\n        }\r\n        \r\n        try {\r\n            // Get user directory\r\n            let userDirHandle;\r\n            try {\r\n                userDirHandle = await this.directoryHandle.getDirectoryHandle(userId);\r\n            } catch (e) {\r\n                console.log(`No directory for user ${userId} found`);\r\n                return null;\r\n            }\r\n            \r\n            // Get file\r\n            let fileHandle;\r\n            try {\r\n                fileHandle = await userDirHandle.getFileHandle(textureName);\r\n            } catch (e) {\r\n                console.log(`Texture ${textureName} not found for user ${userId}`);\r\n                return null;\r\n            }\r\n            \r\n            // Read file\r\n            const file = await fileHandle.getFile();\r\n            \r\n            // Create image element and load the blob\r\n            const img = new Image();\r\n            img.src = URL.createObjectURL(file);\r\n            \r\n            // Wait for image to load\r\n            await new Promise(resolve => {\r\n                img.onload = resolve;\r\n                img.onerror = () => {\r\n                    console.error(`Error loading texture image ${textureName}`);\r\n                    resolve();\r\n                };\r\n            });\r\n            \r\n            // Create canvas and draw image\r\n            const canvas = document.createElement('canvas');\r\n            canvas.width = img.width;\r\n            canvas.height = img.height;\r\n            const ctx = canvas.getContext('2d');\r\n            ctx.drawImage(img, 0, 0);\r\n            \r\n            // Create THREE.js texture\r\n            const texture = new THREE.CanvasTexture(canvas);\r\n            texture.wrapS = THREE.RepeatWrapping;\r\n            texture.wrapT = THREE.RepeatWrapping;\r\n            \r\n            console.log(`Loaded texture ${textureName} for user ${userId}`);\r\n            return texture;\r\n        } catch (e) {\r\n            console.error(`Error loading texture ${textureName}:`, e);\r\n            return null;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Generate filename for a texture\r\n     * @param {string} key - Cache key\r\n     * @param {string} type - Texture type (diffuse, normal, height, roughness)\r\n     * @returns {string} Filename for the texture\r\n     */\r\n    getTextureFilename(key, type) {\r\n        // Remove the \"tex-\" prefix from the key\r\n        const cleanKey = key.startsWith('tex-') ? key.substring(4) : key;\r\n        return `${cleanKey}-${type}.png`;\r\n    }\r\n\r\n    /**\r\n     * Generate height map using noise functions\r\n     * @param {number} size - Texture size\r\n     * @param {number} seed - Random seed\r\n     * @returns {THREE.Texture} Height map texture\r\n     */\r\n    generateHeightMap(size, seed) {\r\n        // Use smaller size for better performance\r\n        const workingSize = Math.min(size, 256); // Maximum 256x256 for heightmap performance\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = workingSize;\r\n        canvas.height = workingSize;\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        // Fill with black background\r\n        ctx.fillStyle = 'black';\r\n        ctx.fillRect(0, 0, workingSize, workingSize);\r\n        \r\n        const imageData = ctx.getImageData(0, 0, workingSize, workingSize);\r\n        const data = imageData.data;\r\n        \r\n        // Use optimized algorithm with fewer detail points and fewer noise octaves\r\n        for (let y = 0; y < workingSize; y++) {\r\n            for (let x = 0; x < workingSize; x++) {\r\n                const nx = x / workingSize - 0.5;\r\n                const ny = y / workingSize - 0.5;\r\n                \r\n                // Convert to spherical coordinates\r\n                const phi = Math.atan2(ny, nx);\r\n                const theta = Math.sqrt(nx * nx + ny * ny) * Math.PI;\r\n                \r\n                // Generate height using layered noise with fewer octaves\r\n                let height = this.fbm(\r\n                    Math.cos(phi) * Math.sin(theta) + seed,\r\n                    Math.sin(phi) * Math.sin(theta) + seed,\r\n                    Math.cos(theta) + seed,\r\n                    4 // Reduced from 6 to 4 octaves\r\n                );\r\n                \r\n                // Normalize height (0-1)\r\n                height = (height + 1) * 0.5;\r\n                \r\n                // Add some continentality - make higher elevations more common\r\n                height = Math.pow(height, 1.2);\r\n                \r\n                const index = (y * workingSize + x) * 4;\r\n                const value = Math.floor(height * 255);\r\n                \r\n                data[index] = value;     // R\r\n                data[index + 1] = value; // G\r\n                data[index + 2] = value; // B\r\n                data[index + 3] = 255;   // A\r\n            }\r\n        }\r\n        \r\n        ctx.putImageData(imageData, 0, 0);\r\n        \r\n        // If we need to upscale to the requested size\r\n        if (workingSize < size) {\r\n            const finalCanvas = document.createElement('canvas');\r\n            finalCanvas.width = size;\r\n            finalCanvas.height = size;\r\n            const finalCtx = finalCanvas.getContext('2d');\r\n            \r\n            // Use the built-in canvas scaling to upscale\r\n            finalCtx.drawImage(canvas, 0, 0, size, size);\r\n            canvas.width = size;\r\n            canvas.height = size;\r\n            ctx.drawImage(finalCanvas, 0, 0);\r\n        }\r\n        \r\n        const texture = new THREE.CanvasTexture(canvas);\r\n        texture.wrapS = THREE.RepeatWrapping;\r\n        texture.wrapT = THREE.RepeatWrapping;\r\n        \r\n        return texture;\r\n    }\r\n\r\n    /**\r\n     * Generate diffuse map (color texture) based on heightmap\r\n     * @param {number} size - Texture size\r\n     * @param {THREE.Texture} heightMap - Height map texture\r\n     * @param {Object} climateZone - Climate zone data\r\n     * @param {boolean} hasOcean - Whether planet has ocean\r\n     * @param {number} oceanLevel - Ocean level (0-1)\r\n     * @returns {THREE.Texture} Diffuse map texture\r\n     */\r\n    generateDiffuseMap(size, heightMap, climateZone, hasOcean, oceanLevel) {\r\n        // Need to get height data from the height map\r\n        const heightCanvas = document.createElement('canvas');\r\n        heightCanvas.width = size;\r\n        heightCanvas.height = size;\r\n        const heightCtx = heightCanvas.getContext('2d');\r\n        \r\n        // Draw the height map to the canvas\r\n        heightCtx.drawImage(heightMap.source.data, 0, 0);\r\n        const heightData = heightCtx.getImageData(0, 0, size, size).data;\r\n        \r\n        // Create color map\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = size;\r\n        canvas.height = size;\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        const imageData = ctx.getImageData(0, 0, size, size);\r\n        const data = imageData.data;\r\n        \r\n        // Get color values from climate zone - ensure proper conversion to THREE.Color\r\n        const landColor = new THREE.Color(parseInt(climateZone.colors.land));\r\n        const waterColor = new THREE.Color(parseInt(climateZone.colors.water));\r\n        \r\n        // Pre-calculate common elevation bands for better performance\r\n        const snowColor = new THREE.Color(0xffffff);\r\n        const beachColor = new THREE.Color(0xd2b48c); // Sandy color\r\n        \r\n        // Pre-calculate snow amounts by climate type for better performance\r\n        const snowAmounts = {\r\n            'ice': 0.8,\r\n            'arctic': 0.6,\r\n            'temperate': 0.3,\r\n            'tropical': 0.1,\r\n            'desert': 0\r\n        };\r\n        const snowAmount = snowAmounts[climateZone.name] || 0;\r\n        \r\n        // Batch process pixels for better performance \r\n        for (let y = 0; y < size; y++) {\r\n            for (let x = 0; x < size; x++) {\r\n                const index = (y * size + x) * 4;\r\n                \r\n                // Get height value (0-1)\r\n                const height = heightData[index] / 255;\r\n                \r\n                // Determine if this is water or land with a simple comparison\r\n                if (hasOcean && height < oceanLevel) {\r\n                    // Water pixel - simplified calculation for performance\r\n                    const depthFactor = height / oceanLevel; // 0 at deepest, 1 at shore\r\n                    \r\n                    // Create a copy of the water color to modify\r\n                    const depthColor = new THREE.Color(climateZone.colors.water);\r\n                    \r\n                    // Darken deep water\r\n                    depthColor.multiplyScalar(0.5 + 0.5 * depthFactor);\r\n                    \r\n                    // Convert THREE.js color (0-1) to RGB (0-255)\r\n                    data[index] = Math.floor(depthColor.r * 255);       // R\r\n                    data[index + 1] = Math.floor(depthColor.g * 255);   // G\r\n                    data[index + 2] = Math.floor(depthColor.b * 255);   // B\r\n                } else {\r\n                    // Land pixel - properly use THREE.js color objects\r\n                    // Calculate normalized land height\r\n                    const landHeightFactor = hasOcean ? \r\n                        (height - oceanLevel) / (1 - oceanLevel) : height;\r\n                    \r\n                    // Create a new color for this pixel, starting with the land color\r\n                    let terrainColor = new THREE.Color(climateZone.colors.land);\r\n                    \r\n                    // Apply different colors based on elevation\r\n                    if (landHeightFactor > 0.8) {\r\n                        // Snow caps - mix with white based on climate zone\r\n                        let snowAmount = snowAmounts[climateZone.name] || 0;\r\n                        let snowBlendFactor = snowAmount * (landHeightFactor - 0.8) * 5;\r\n                        \r\n                        // Use THREE.js lerp for proper color blending\r\n                        terrainColor.lerp(snowColor, snowBlendFactor);\r\n                    } else if (landHeightFactor > 0.4) {\r\n                        // Mid elevations - add variations\r\n                        // Use a simple noise approximation\r\n                        const variation = ((Math.sin(x * 0.1) + Math.sin(y * 0.1)) * 0.05);\r\n                        \r\n                        // Adjust color with variation\r\n                        terrainColor.r = Math.max(0, Math.min(1, terrainColor.r * (1 + variation)));\r\n                        terrainColor.g = Math.max(0, Math.min(1, terrainColor.g * (1 + variation)));\r\n                        terrainColor.b = Math.max(0, Math.min(1, terrainColor.b * (1 + variation)));\r\n                    } else {\r\n                        // Lower elevations - mix with sand/beach color\r\n                        const beachBlendFactor = Math.min(1, Math.max(0, 1 - landHeightFactor * 2.5));\r\n                        \r\n                        // Use THREE.js lerp for proper color blending\r\n                        terrainColor.lerp(beachColor, beachBlendFactor);\r\n                    }\r\n                    \r\n                    // Convert THREE.js color (0-1) to RGB (0-255)\r\n                    data[index] = Math.floor(terrainColor.r * 255);       // R\r\n                    data[index + 1] = Math.floor(terrainColor.g * 255);   // G\r\n                    data[index + 2] = Math.floor(terrainColor.b * 255);   // B\r\n                }\r\n                \r\n                data[index + 3] = 255; // A\r\n            }\r\n        }\r\n        \r\n        ctx.putImageData(imageData, 0, 0);\r\n        \r\n        const texture = new THREE.CanvasTexture(canvas);\r\n        texture.wrapS = THREE.RepeatWrapping;\r\n        texture.wrapT = THREE.RepeatWrapping;\r\n        \r\n        return texture;\r\n    }\r\n\r\n    /**\r\n     * Generate normal map based on heightmap\r\n     * @param {number} size - Texture size\r\n     * @param {THREE.Texture} heightMap - Height map texture\r\n     * @returns {THREE.Texture} Normal map texture\r\n     */\r\n    generateNormalMap(size, heightMap) {\r\n        // Need to get height data from the height map\r\n        const heightCanvas = document.createElement('canvas');\r\n        heightCanvas.width = size;\r\n        heightCanvas.height = size;\r\n        const heightCtx = heightCanvas.getContext('2d');\r\n        \r\n        // Draw the height map to the canvas\r\n        heightCtx.drawImage(heightMap.source.data, 0, 0);\r\n        const heightData = heightCtx.getImageData(0, 0, size, size).data;\r\n        \r\n        // Create normal map\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = size;\r\n        canvas.height = size;\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        const imageData = ctx.getImageData(0, 0, size, size);\r\n        const data = imageData.data;\r\n        \r\n        const strength = 2.0; // Normal map strength\r\n        \r\n        // Calculate normal vectors using Sobel operator\r\n        for (let y = 0; y < size; y++) {\r\n            for (let x = 0; x < size; x++) {\r\n                const index = (y * size + x) * 4;\r\n                \r\n                // Get heights of surrounding pixels\r\n                const x1 = (x - 1 + size) % size;\r\n                const x2 = (x + 1) % size;\r\n                const y1 = (y - 1 + size) % size;\r\n                const y2 = (y + 1) % size;\r\n                \r\n                const centerIndex = (y * size + x) * 4;\r\n                const leftIndex = (y * size + x1) * 4;\r\n                const rightIndex = (y * size + x2) * 4;\r\n                const topIndex = (y1 * size + x) * 4;\r\n                const bottomIndex = (y2 * size + x) * 4;\r\n                \r\n                // Get height values\r\n                const centerHeight = heightData[centerIndex] / 255;\r\n                const leftHeight = heightData[leftIndex] / 255;\r\n                const rightHeight = heightData[rightIndex] / 255;\r\n                const topHeight = heightData[topIndex] / 255;\r\n                const bottomHeight = heightData[bottomIndex] / 255;\r\n                \r\n                // Calculate partial derivatives\r\n                const dx = (rightHeight - leftHeight) * strength;\r\n                const dy = (bottomHeight - topHeight) * strength;\r\n                \r\n                // Calculate normal vector\r\n                const normal = new THREE.Vector3(-dx, -dy, 1.0).normalize();\r\n                \r\n                // Convert normal to RGB values (0-1 -> 0-255)\r\n                // Normal maps store x in R, y in G, z in B\r\n                // Also transform from [-1,1] to [0,1] range\r\n                data[index] = Math.floor((normal.x * 0.5 + 0.5) * 255);     // R\r\n                data[index + 1] = Math.floor((normal.y * 0.5 + 0.5) * 255); // G\r\n                data[index + 2] = Math.floor((normal.z * 0.5 + 0.5) * 255); // B\r\n                data[index + 3] = 255;                                     // A\r\n            }\r\n        }\r\n        \r\n        ctx.putImageData(imageData, 0, 0);\r\n        \r\n        const texture = new THREE.CanvasTexture(canvas);\r\n        texture.wrapS = THREE.RepeatWrapping;\r\n        texture.wrapT = THREE.RepeatWrapping;\r\n        \r\n        return texture;\r\n    }\r\n\r\n    /**\r\n     * Generate roughness map\r\n     * @param {number} size - Texture size\r\n     * @param {THREE.Texture} heightMap - Height map texture\r\n     * @param {boolean} hasOcean - Whether planet has ocean\r\n     * @param {number} oceanLevel - Ocean level (0-1)\r\n     * @returns {THREE.Texture} Roughness map texture\r\n     */\r\n    generateRoughnessMap(size, heightMap, hasOcean, oceanLevel) {\r\n        // Need to get height data from the height map\r\n        const heightCanvas = document.createElement('canvas');\r\n        heightCanvas.width = size;\r\n        heightCanvas.height = size;\r\n        const heightCtx = heightCanvas.getContext('2d');\r\n        \r\n        // Draw the height map to the canvas\r\n        heightCtx.drawImage(heightMap.source.data, 0, 0);\r\n        const heightData = heightCtx.getImageData(0, 0, size, size).data;\r\n        \r\n        // Create roughness map\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = size;\r\n        canvas.height = size;\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        const imageData = ctx.getImageData(0, 0, size, size);\r\n        const data = imageData.data;\r\n        \r\n        // Generate roughness values\r\n        for (let y = 0; y < size; y++) {\r\n            for (let x = 0; x < size; x++) {\r\n                const index = (y * size + x) * 4;\r\n                \r\n                // Get height value (0-1)\r\n                const height = heightData[index] / 255;\r\n                \r\n                // Determine if this is water or land\r\n                const isWater = hasOcean && height < oceanLevel;\r\n                \r\n                let roughness;\r\n                \r\n                if (isWater) {\r\n                    // Water has low roughness\r\n                    roughness = 0.1;\r\n                    \r\n                    // Slightly vary roughness near shores\r\n                    if (height > oceanLevel - 0.05) {\r\n                        roughness = 0.2; // More roughness for shallow water\r\n                    }\r\n                } else {\r\n                    // Land has variable roughness based on elevation\r\n                    const landHeightFactor = (height - (hasOcean ? oceanLevel : 0)) / \r\n                                             (1 - (hasOcean ? oceanLevel : 0));\r\n                    \r\n                    if (landHeightFactor > 0.8) {\r\n                        // High mountains - very rough\r\n                        roughness = 0.9;\r\n                    } else if (landHeightFactor > 0.4) {\r\n                        // Mid elevations - medium roughness\r\n                        roughness = 0.7;\r\n                        \r\n                        // Add variations based on noise\r\n                        const variation = this.noise2D(x/size * 15, y/size * 15) * 0.2;\r\n                        roughness = Math.max(0.5, Math.min(0.8, roughness + variation));\r\n                    } else {\r\n                        // Beaches and lowlands - less rough\r\n                        roughness = 0.5;\r\n                    }\r\n                }\r\n                \r\n                // Store roughness value\r\n                const value = Math.floor(roughness * 255);\r\n                data[index] = value;     // R\r\n                data[index + 1] = value; // G\r\n                data[index + 2] = value; // B\r\n                data[index + 3] = 255;   // A\r\n            }\r\n        }\r\n        \r\n        ctx.putImageData(imageData, 0, 0);\r\n        \r\n        const texture = new THREE.CanvasTexture(canvas);\r\n        texture.wrapS = THREE.RepeatWrapping;\r\n        texture.wrapT = THREE.RepeatWrapping;\r\n        \r\n        return texture;\r\n    }\r\n\r\n    /**\r\n     * Generate normal map for ocean waves\r\n     * @returns {THREE.Texture} Ocean normal map texture\r\n     */\r\n    generateOceanNormalMap() {\r\n        const size = 512;\r\n        const canvas = document.createElement('canvas');\r\n        canvas.width = size;\r\n        canvas.height = size;\r\n        const ctx = canvas.getContext('2d');\r\n        \r\n        const imageData = ctx.getImageData(0, 0, size, size);\r\n        const data = imageData.data;\r\n        \r\n        // Generate normal map with wave patterns\r\n        for (let y = 0; y < size; y++) {\r\n            for (let x = 0; x < size; x++) {\r\n                const index = (y * size + x) * 4;\r\n                \r\n                // Generate wave pattern using multiple noise octaves\r\n                const nx = x / size * 8;\r\n                const ny = y / size * 8;\r\n                \r\n                // Create wave normal\r\n                const wave1 = Math.sin(nx * 5 + ny * 3) * 0.2;\r\n                const wave2 = Math.sin(nx * 13 + ny * 7) * 0.1;\r\n                const wave3 = this.noise2D(nx, ny) * 0.05;\r\n                \r\n                const dx = wave1 + wave2 + wave3;\r\n                const dy = wave1 + wave2 + wave3;\r\n                \r\n                // Calculate normal vector\r\n                const normal = new THREE.Vector3(-dx, -dy, 1.0).normalize();\r\n                \r\n                // Convert normal to RGB values (0-1 -> 0-255)\r\n                data[index] = Math.floor((normal.x * 0.5 + 0.5) * 255);     // R\r\n                data[index + 1] = Math.floor((normal.y * 0.5 + 0.5) * 255); // G\r\n                data[index + 2] = Math.floor((normal.z * 0.5 + 0.5) * 255); // B\r\n                data[index + 3] = 255;                                     // A\r\n            }\r\n        }\r\n        \r\n        ctx.putImageData(imageData, 0, 0);\r\n        \r\n        const texture = new THREE.CanvasTexture(canvas);\r\n        texture.wrapS = THREE.RepeatWrapping;\r\n        texture.wrapT = THREE.RepeatWrapping;\r\n        \r\n        return texture;\r\n    }\r\n\r\n    /**\r\n     * Fractional Brownian Motion - layered noise function\r\n     * @param {number} x \r\n     * @param {number} y \r\n     * @param {number} z \r\n     * @param {number} octaves \r\n     * @returns {number} Noise value\r\n     */\r\n    fbm(x, y, z, octaves) {\r\n        let value = 0;\r\n        let amplitude = 0.5;\r\n        \r\n        // Use fewer octaves for better performance\r\n        const maxOctaves = Math.min(octaves, 4); // Limit to 4 octaves max\r\n        \r\n        for (let i = 0; i < maxOctaves; i++) {\r\n            value += amplitude * this.noise3D(x, y, z);\r\n            x *= 2.0;\r\n            y *= 2.0;\r\n            z *= 2.0;\r\n            amplitude *= 0.5;\r\n        }\r\n        \r\n        return value;\r\n    }\r\n\r\n    /**\r\n     * Simplex noise in 2D\r\n     * @param {number} x \r\n     * @param {number} y \r\n     * @returns {number} Noise value\r\n     */\r\n    noise2D(x, y) {\r\n        // Convert to 3D noise by setting z to a constant\r\n        return this.noise3D(x, y, 1.5);\r\n    }\r\n\r\n    /**\r\n     * Simplex noise in 3D - based on the existing noise shader\r\n     * @param {number} x \r\n     * @param {number} y \r\n     * @param {number} z \r\n     * @returns {number} Noise value\r\n     */\r\n    noise3D(x, y, z) {\r\n        const p = [151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180];\r\n        \r\n        // Permutation table duplicated to avoid overflow\r\n        for (let i = 0; i < 256; i++) {\r\n            p[256 + i] = p[i];\r\n        }\r\n        \r\n        // Find unit grid cell containing point\r\n        const X = Math.floor(x) & 255;\r\n        const Y = Math.floor(y) & 255;\r\n        const Z = Math.floor(z) & 255;\r\n        \r\n        // Get relative xyz coordinates of point within cell\r\n        x -= Math.floor(x);\r\n        y -= Math.floor(y);\r\n        z -= Math.floor(z);\r\n        \r\n        // Compute fade curves for each of x, y, z\r\n        const u = this.fade(x);\r\n        const v = this.fade(y);\r\n        const w = this.fade(z);\r\n        \r\n        // Hash coordinates of the 8 cube corners\r\n        const A = p[X] + Y;\r\n        const AA = p[A] + Z;\r\n        const AB = p[A + 1] + Z;\r\n        const B = p[X + 1] + Y;\r\n        const BA = p[B] + Z;\r\n        const BB = p[B + 1] + Z;\r\n        \r\n        // And add blended results from 8 corners of cube\r\n        return this.lerp(w, this.lerp(v, this.lerp(u, this.grad(p[AA], x, y, z),\r\n                                      this.grad(p[BA], x-1, y, z)),\r\n                              this.lerp(u, this.grad(p[AB], x, y-1, z),\r\n                                      this.grad(p[BB], x-1, y-1, z))),\r\n                      this.lerp(v, this.lerp(u, this.grad(p[AA+1], x, y, z-1),\r\n                                      this.grad(p[BA+1], x-1, y, z-1)),\r\n                              this.lerp(u, this.grad(p[AB+1], x, y-1, z-1),\r\n                                      this.grad(p[BB+1], x-1, y-1, z-1))));\r\n    }\r\n\r\n    // Helper functions for noise\r\n    fade(t) { \r\n        return t * t * t * (t * (t * 6 - 15) + 10); \r\n    }\r\n    \r\n    lerp(t, a, b) { \r\n        return a + t * (b - a); \r\n    }\r\n    \r\n    grad(hash, x, y, z) {\r\n        // Convert low 4 bits of hash code into 12 gradient directions\r\n        const h = hash & 15;\r\n        const u = h < 8 ? x : y;\r\n        const v = h < 4 ? y : h == 12 || h == 14 ? x : z;\r\n        return ((h & 1) == 0 ? u : -u) + ((h & 2) == 0 ? v : -v);\r\n    }\r\n}","import * as THREE from 'three';\r\nimport { Atmosphere } from '../materials/Atmosphere.js';\r\nimport { noiseShader } from '../shaders/noise.js';\r\n\r\nexport class Planet {\r\n    constructor(options = {}) {\r\n        this.options = {\r\n            radius: options.radius || 10,\r\n            detail: options.detail || 32,\r\n            color: options.color || new THREE.Color(0x44ff44),\r\n            atmosphereColor: options.atmosphereColor || new THREE.Color(0x00b3ff),\r\n            atmosphereScale: options.atmosphereScale || 1.15,\r\n            cloudSpeed: options.cloudSpeed || 0.0005,\r\n            rotationSpeed: options.rotationSpeed || 0.0001,\r\n            name: options.name || \"Unnamed Planet\",\r\n            type: options.type || \"Terrestrial\",\r\n            resources: options.resources || {\r\n                minerals: Math.random() * 100,\r\n                energy: Math.random() * 100,\r\n                water: Math.random() * 100\r\n            },\r\n            hasAtmosphere: options.hasAtmosphere !== undefined ? options.hasAtmosphere : true,\r\n            distanceFromSun: options.distanceFromSun || 100,\r\n            seed: options.seed || Math.random() * 1000,\r\n            hasOcean: options.hasOcean !== undefined ? options.hasOcean : true,\r\n            oceanLevel: options.oceanLevel || 0.65\r\n        };\r\n\r\n        // Calculate climate type based on distance from sun\r\n        this.determineClimateType();\r\n\r\n        // Create container for the planet\r\n        this.container = new THREE.Object3D();\r\n        this.container.userData = {\r\n            isSelectable: true,\r\n            isPlanet: true,\r\n            planetData: {\r\n                name: this.options.name,\r\n                type: this.options.type,\r\n                climate: this.options.climate,\r\n                resources: this.options.resources,\r\n                structures: [] // Will store orbital structures\r\n            }\r\n        };\r\n\r\n        // Create the planet\r\n        this.createPlanet();\r\n        \r\n        // Add atmosphere if needed\r\n        if (this.options.hasAtmosphere) {\r\n            this.createAtmosphere();\r\n        }\r\n        \r\n        // Container for orbital structures\r\n        this.orbitalsContainer = new THREE.Object3D();\r\n        this.container.add(this.orbitalsContainer);\r\n\r\n        // Add animate method to the container\r\n        this.container.animate = (delta) => this.animate(delta);\r\n        \r\n        // Add building method to the container\r\n        this.container.addStructure = (type) => this.addStructure(type);\r\n        \r\n        return this.container;\r\n    }\r\n\r\n    determineClimateType() {\r\n        // Determine climate zone based on distance from sun\r\n        const distance = this.options.distanceFromSun;\r\n        \r\n        if (distance <= 50) {\r\n            this.options.climate = 'desert';\r\n        } else if (distance <= 100) {\r\n            this.options.climate = 'tropical';\r\n        } else if (distance <= 200) {\r\n            this.options.climate = 'temperate';\r\n        } else if (distance <= 300) {\r\n            this.options.climate = 'arctic';\r\n        } else {\r\n            this.options.climate = 'ice';\r\n        }\r\n        \r\n        console.log(`Planet at distance ${distance} has climate: ${this.options.climate}`);\r\n        \r\n        // Adjust planet features based on climate\r\n        if (this.options.climate === 'desert') {\r\n            this.options.hasOcean = false;\r\n            this.options.oceanLevel = 0;\r\n            this.options.hasAtmosphere = this.options.hasAtmosphere && Math.random() > 0.3; // 30% chance of no atmosphere\r\n        } else if (this.options.climate === 'ice') {\r\n            this.options.oceanLevel = 0.4; // Less water, more ice\r\n        }\r\n    }\r\n\r\n    createPlanet() {\r\n        // Create geometry with higher detail\r\n        const geometry = new THREE.SphereGeometry(\r\n            1, // Base radius of 1 (will be scaled by shader)\r\n            Math.max(64, this.options.detail), // Higher resolution\r\n            Math.max(64, this.options.detail)\r\n        );\r\n        geometry.computeTangents(); // Needed for normal mapping\r\n\r\n        // Set up planet parameters based on climate\r\n        const planetParams = this.getPlanetParamsForClimate();\r\n        \r\n        // Set light direction based on position from sun (assuming sun at origin)\r\n        // Calculate direction from planet position to origin (sun)\r\n        const dirToSun = new THREE.Vector3();\r\n        \r\n        // Since we don't know the planet's final position yet (it will be placed in orbit),\r\n        // use the distanceFromSun to approximate direction\r\n        // This is simplified - in reality we would need the actual planet position relative to the sun\r\n        const angle = Math.random() * Math.PI * 2; // Random angle around sun\r\n        dirToSun.set(\r\n            -Math.cos(angle), // X component pointing toward sun\r\n            0.5, // Slight Y angle for better lighting\r\n            -Math.sin(angle)  // Z component pointing toward sun\r\n        );\r\n        \r\n        planetParams.lightDirection.value.copy(dirToSun.normalize());\r\n\r\n        const material = new THREE.ShaderMaterial({\r\n            uniforms: planetParams,\r\n            vertexShader: this.getVertexShader(),\r\n            fragmentShader: this.getFragmentShader(),\r\n        });\r\n\r\n        // Create main planet mesh\r\n        this.planetMesh = new THREE.Mesh(geometry, material);\r\n        this.planetMesh.scale.set(\r\n            this.options.radius,\r\n            this.options.radius,\r\n            this.options.radius\r\n        );\r\n        this.planetMesh.castShadow = true;\r\n        this.planetMesh.receiveShadow = true;\r\n        this.container.add(this.planetMesh);\r\n\r\n        // Apply random rotation\r\n        this.planetMesh.rotation.x = Math.random() * Math.PI;\r\n        this.planetMesh.rotation.y = Math.random() * Math.PI;\r\n        this.planetMesh.rotation.z = Math.random() * Math.PI;\r\n    }\r\n\r\n    getPlanetParamsForClimate() {\r\n        // Define base planet parameters that work for procedural generation\r\n        const params = {\r\n            type: { value: 2 }, // Ridged noise for mountains\r\n            radius: { value: 1.0 }, // Base radius of 1 (scaled by mesh)\r\n            amplitude: { value: 0.1 }, // Height of terrain features\r\n            sharpness: { value: 2.0 }, // Sharpness of features\r\n            offset: { value: 0.0 }, // Offset of terrain\r\n            period: { value: 0.8 }, // Period of noise\r\n            persistence: { value: 0.5 }, // How much each octave contributes\r\n            lacunarity: { value: 2.0 }, // How frequency increases per octave\r\n            octaves: { value: 8 }, // Number of noise layers\r\n            undulation: { value: 0.0 }, // Additional wave pattern\r\n            ambientIntensity: { value: 0.3 }, // Ambient light - increased\r\n            diffuseIntensity: { value: 1.2 }, // Diffuse light - increased\r\n            specularIntensity: { value: 0.7 }, // Specular highlights - increased\r\n            shininess: { value: 10.0 }, // Surface shininess\r\n            lightDirection: { value: new THREE.Vector3(-1, 0.5, 1).normalize() }, // Light direction - adjusted\r\n            lightColor: { value: new THREE.Color(0xffffff) }, // Light color\r\n            bumpStrength: { value: 0.5 }, // Bump mapping strength\r\n            bumpOffset: { value: 0.0 }, // Bump mapping offset\r\n            // Default terrain colors\r\n            color1: { value: new THREE.Color(0.1, 0.1, 0.6) }, // Deep color (water or lowlands)\r\n            color2: { value: new THREE.Color(0.1, 0.4, 0.2) }, // Intermediate color\r\n            color3: { value: new THREE.Color(0.4, 0.4, 0.2) }, // High color\r\n            color4: { value: new THREE.Color(0.6, 0.6, 0.6) }, // Mountain color\r\n            color5: { value: new THREE.Color(1.0, 1.0, 1.0) }, // Peak color (snow)\r\n            transition2: { value: 0.1 }, // Transition height to color2\r\n            transition3: { value: 0.25 }, // Transition height to color3\r\n            transition4: { value: 0.5 }, // Transition height to color4\r\n            transition5: { value: 0.7 }, // Transition height to color5\r\n            blend12: { value: 0.05 }, // Blend width for transition 1-2\r\n            blend23: { value: 0.05 }, // Blend width for transition 2-3\r\n            blend34: { value: 0.05 }, // Blend width for transition 3-4\r\n            blend45: { value: 0.05 }  // Blend width for transition 4-5\r\n        };\r\n\r\n        // Adjust parameters based on climate type\r\n        switch (this.options.climate) {\r\n            case 'desert':\r\n                // Desert planets: reddish, less water, more rugged terrain\r\n                params.type.value = 2; // Ridged noise for dunes and mountains\r\n                params.amplitude.value = 0.15; // Higher amplitude for more dramatic terrain\r\n                params.sharpness.value = 3.0; // Sharper features\r\n                params.color1.value = new THREE.Color(0.6, 0.4, 0.2); // Sandy base\r\n                params.color2.value = new THREE.Color(0.7, 0.5, 0.3); // Mid-level sand\r\n                params.color3.value = new THREE.Color(0.55, 0.35, 0.2); // Rocky areas\r\n                params.color4.value = new THREE.Color(0.4, 0.3, 0.2); // Mountain rock\r\n                params.color5.value = new THREE.Color(0.3, 0.2, 0.1); // Mountain peaks\r\n                params.transition2.value = 0.1;\r\n                params.transition3.value = 0.3;\r\n                params.transition4.value = 0.5;\r\n                params.transition5.value = 0.7;\r\n                break;\r\n                \r\n            case 'tropical':\r\n                // Tropical planets: green, blue water\r\n                params.type.value = 2; // Ridged noise for varied terrain\r\n                params.amplitude.value = 0.12;\r\n                params.sharpness.value = 2.2;\r\n                params.color1.value = new THREE.Color(0.0, 0.2, 0.5); // Deep blue water\r\n                params.color2.value = new THREE.Color(0.8, 0.7, 0.5); // Beach sand\r\n                params.color3.value = new THREE.Color(0.1, 0.6, 0.2); // Lush greens\r\n                params.color4.value = new THREE.Color(0.4, 0.4, 0.2); // Mountain base\r\n                params.color5.value = new THREE.Color(0.8, 0.8, 0.8); // Mountain peaks\r\n                params.transition2.value = this.options.oceanLevel;\r\n                params.transition3.value = this.options.oceanLevel + 0.05;\r\n                params.transition4.value = 0.6;\r\n                params.transition5.value = 0.75;\r\n                break;\r\n                \r\n            case 'temperate':\r\n                // Temperate planets: blues, greens, snow caps\r\n                params.type.value = 2; // Ridged noise for terrain\r\n                params.amplitude.value = 0.12;\r\n                params.color1.value = new THREE.Color(0.1, 0.2, 0.5); // Deep blue water\r\n                params.color2.value = new THREE.Color(0.7, 0.7, 0.5); // Beach/shore\r\n                params.color3.value = new THREE.Color(0.2, 0.4, 0.1); // Forests/grasslands\r\n                params.color4.value = new THREE.Color(0.5, 0.4, 0.3); // Mountains\r\n                params.color5.value = new THREE.Color(0.9, 0.9, 0.9); // Snow peaks\r\n                params.transition2.value = this.options.oceanLevel;\r\n                params.transition3.value = this.options.oceanLevel + 0.04;\r\n                params.transition4.value = 0.5;\r\n                params.transition5.value = 0.65;\r\n                break;\r\n                \r\n            case 'arctic':\r\n                // Arctic planets: whites, blues, some vegetation\r\n                params.type.value = 2; // Ridged noise for terrain\r\n                params.amplitude.value = 0.1;\r\n                params.color1.value = new THREE.Color(0.1, 0.2, 0.4); // Deep blue water\r\n                params.color2.value = new THREE.Color(0.6, 0.6, 0.7); // Ice coastline\r\n                params.color3.value = new THREE.Color(0.4, 0.5, 0.4); // Sparse vegetation\r\n                params.color4.value = new THREE.Color(0.7, 0.7, 0.7); // Rocky mountains\r\n                params.color5.value = new THREE.Color(0.95, 0.95, 0.95); // Snow\r\n                params.transition2.value = this.options.oceanLevel;\r\n                params.transition3.value = this.options.oceanLevel + 0.03;\r\n                params.transition4.value = 0.4;\r\n                params.transition5.value = 0.55;\r\n                break;\r\n                \r\n            case 'ice':\r\n                // Ice planets: mostly whites and pale blues\r\n                params.type.value = 2; // Ridged noise for terrain\r\n                params.amplitude.value = 0.08; // Less dramatic terrain\r\n                params.color1.value = new THREE.Color(0.2, 0.3, 0.5); // Deep blue ice water\r\n                params.color2.value = new THREE.Color(0.7, 0.8, 0.9); // Light blue ice\r\n                params.color3.value = new THREE.Color(0.8, 0.85, 0.9); // Pale blue snow\r\n                params.color4.value = new THREE.Color(0.9, 0.9, 0.95); // Snow\r\n                params.color5.value = new THREE.Color(1.0, 1.0, 1.0); // Pure snow\r\n                params.transition2.value = this.options.oceanLevel;\r\n                params.transition3.value = this.options.oceanLevel + 0.02;\r\n                params.transition4.value = 0.3;\r\n                params.transition5.value = 0.5;\r\n                break;\r\n                \r\n            default:\r\n                // Default temperate planet colors and parameters\r\n                params.transition2.value = this.options.oceanLevel;\r\n                params.transition3.value = this.options.oceanLevel + 0.01;\r\n                break;\r\n        }\r\n\r\n        // If no ocean is present, adjust the transitions\r\n        if (!this.options.hasOcean) {\r\n            // Start with lowest terrain color\r\n            params.color1.value = params.color3.value;\r\n            // Move all transitions down\r\n            params.transition2.value = 0.05;\r\n            params.transition3.value = 0.25;\r\n            params.transition4.value = 0.5;\r\n        }\r\n\r\n        return params;\r\n    }\r\n\r\n    getVertexShader() {\r\n        return `\r\n        ${noiseShader}\r\n        \r\n        uniform int type;\r\n        uniform float radius;\r\n        uniform float amplitude;\r\n        uniform float sharpness;\r\n        uniform float offset;\r\n        uniform float period;\r\n        uniform float persistence;\r\n        uniform float lacunarity;\r\n        uniform int octaves;\r\n        uniform float undulation;\r\n        uniform float bumpStrength;\r\n        uniform float bumpOffset;\r\n        \r\n        varying vec3 vNormal;\r\n        varying vec3 vPosition;\r\n        varying float vDisplacement;\r\n        varying vec2 vUv;\r\n        \r\n        void main() {\r\n            vUv = uv;\r\n            vec3 transformed = position;\r\n            vNormal = normalize(normal);\r\n            \r\n            float pX = vNormal.x * period;\r\n            float pY = vNormal.y * period;\r\n            float pZ = vNormal.z * period;\r\n            \r\n            float displacement = 0.0;\r\n            \r\n            if (type == 1) {\r\n                // FBM Fractal Noise\r\n                displacement = fbm(vec3(pX, pY, pZ), octaves, persistence, lacunarity);\r\n                displacement = pow(abs(displacement), sharpness) * amplitude + offset;\r\n            } \r\n            else if (type == 2) {\r\n                // Ridged Multifractal Noise (better for mountains)\r\n                float signal = fbm(vec3(pX, pY, pZ), octaves, persistence, lacunarity);\r\n                signal = 1.0 - abs(signal);\r\n                signal = pow(signal, sharpness);\r\n                displacement = signal * amplitude + offset;\r\n            }\r\n            else if (type == 3) {\r\n                // Swiss Turbulence\r\n                float signal = 1.0 - abs(fbm(vec3(pX, pY, pZ), octaves, persistence, lacunarity));\r\n                signal = signal * signal;\r\n                displacement = signal * amplitude + offset;\r\n            }\r\n            else if (type == 4) {\r\n                // Billowy noise - good for clouds\r\n                float signal = abs(fbm(vec3(pX, pY, pZ), octaves, persistence, lacunarity));\r\n                displacement = signal * amplitude + offset;\r\n            }\r\n            else {\r\n                // Type 0 or any other - smooth basic noise\r\n                displacement = fbm(vec3(pX, pY, pZ), octaves, persistence, lacunarity) * amplitude + offset;\r\n            }\r\n            \r\n            // Add undulation for additional interest (optional wave pattern)\r\n            if (undulation > 0.0) {\r\n                float wave = sin(vNormal.y * 10.0) * cos(vNormal.x * 10.0) * undulation;\r\n                displacement += wave;\r\n            }\r\n            \r\n            // Apply displacement along the vertex normal\r\n            transformed += vNormal * displacement;\r\n            \r\n            // Save the displacement value for use in the fragment shader\r\n            vDisplacement = displacement;\r\n            \r\n            // Pass the position\r\n            vPosition = transformed;\r\n            \r\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(transformed, 1.0);\r\n        }\r\n        `;\r\n    }\r\n\r\n    getFragmentShader() {\r\n        return `\r\n        uniform float ambientIntensity;\r\n        uniform float diffuseIntensity;\r\n        uniform float specularIntensity;\r\n        uniform float shininess;\r\n        uniform vec3 lightDirection;\r\n        uniform vec3 lightColor;\r\n        uniform float bumpStrength;\r\n        uniform float bumpOffset;\r\n        \r\n        uniform vec3 color1;\r\n        uniform vec3 color2;\r\n        uniform vec3 color3;\r\n        uniform vec3 color4;\r\n        uniform vec3 color5;\r\n        uniform float transition2;\r\n        uniform float transition3;\r\n        uniform float transition4;\r\n        uniform float transition5;\r\n        uniform float blend12;\r\n        uniform float blend23;\r\n        uniform float blend34;\r\n        uniform float blend45;\r\n        \r\n        varying vec3 vNormal;\r\n        varying vec3 vPosition;\r\n        varying float vDisplacement;\r\n        varying vec2 vUv;\r\n        \r\n        // Function to blend between two colors using a smooth step\r\n        vec3 smoothBlend(vec3 color1, vec3 color2, float threshold, float smoothness, float value) {\r\n            float t = smoothstep(threshold - smoothness, threshold + smoothness, value);\r\n            return mix(color1, color2, t);\r\n        }\r\n        \r\n        // Bump mapping function for normal perturbation\r\n        vec3 perturbNormal(vec3 normal, float displacement) {\r\n            // This is a simple normal perturbation based on the displacement\r\n            // For more accurate results, we'd calculate actual derivatives\r\n            float bump = bumpStrength * displacement + bumpOffset;\r\n            vec3 bumpedNormal = normal + vec3(cos(bump * 20.0) * 0.01, \r\n                                             sin(bump * 20.0) * 0.01, \r\n                                             cos(bump * 15.0) * 0.01);\r\n            return normalize(bumpedNormal);\r\n        }\r\n        \r\n        void main() {\r\n            // Normalize vectors for lighting\r\n            vec3 normal = normalize(vNormal);\r\n            vec3 light = normalize(lightDirection);\r\n            \r\n            // Apply simple bump mapping based on displacement\r\n            normal = perturbNormal(normal, vDisplacement);\r\n            \r\n            // Lighting calculations\r\n            float nDotL = max(dot(normal, light), 0.0);\r\n            \r\n            // Ambient\r\n            vec3 ambient = lightColor * ambientIntensity;\r\n            \r\n            // Diffuse\r\n            vec3 diffuse = lightColor * diffuseIntensity * nDotL;\r\n            \r\n            // Specular (Blinn-Phong)\r\n            vec3 viewDir = normalize(-vPosition); // assuming camera at origin\r\n            vec3 halfDir = normalize(light + viewDir);\r\n            float specAngle = max(dot(normal, halfDir), 0.0);\r\n            float specular = pow(specAngle, shininess) * specularIntensity;\r\n            \r\n            // Color based on displacement value\r\n            vec3 terrainColor;\r\n            \r\n            // Multi-color terrain with smooth transitions\r\n            if (vDisplacement < transition2) {\r\n                terrainColor = smoothBlend(color1, color2, transition2, blend12, vDisplacement);\r\n            } \r\n            else if (vDisplacement < transition3) {\r\n                terrainColor = smoothBlend(color2, color3, transition3, blend23, vDisplacement);\r\n            }\r\n            else if (vDisplacement < transition4) {\r\n                terrainColor = smoothBlend(color3, color4, transition4, blend34, vDisplacement);\r\n            }\r\n            else {\r\n                terrainColor = smoothBlend(color4, color5, transition5, blend45, vDisplacement);\r\n            }\r\n            \r\n            // Combine lighting with terrain color\r\n            vec3 finalColor = terrainColor * (ambient + diffuse) + lightColor * specular;\r\n            \r\n            // Output final color\r\n            gl_FragColor = vec4(finalColor, 1.0);\r\n        }\r\n        `;\r\n    }\r\n\r\n    createAtmosphere() {\r\n        // Set atmosphere parameters based on climate\r\n        const atmosphereParams = this.getAtmosphereParamsForClimate();\r\n        \r\n        // Create atmosphere\r\n        const atmosphere = new Atmosphere(atmosphereParams);\r\n        this.atmosphere = atmosphere;\r\n        this.container.add(atmosphere);\r\n    }\r\n\r\n    getAtmosphereParamsForClimate() {\r\n        // Base atmosphere parameters\r\n        const params = {\r\n            particles: 4000,\r\n            minParticleSize: 50,\r\n            maxParticleSize: 100,\r\n            radius: this.options.radius + 0.5,\r\n            thickness: 1.5,\r\n            density: 0.2,\r\n            opacity: 0.35,\r\n            scale: 8,\r\n            color: new THREE.Color(0xffffff),\r\n            speed: 0.03,\r\n            lightDirection: { value: new THREE.Vector3(1, 1, 1).normalize() }\r\n        };\r\n\r\n        // Customize atmosphere based on climate\r\n        switch (this.options.climate) {\r\n            case 'desert':\r\n                // Thin, reddish atmosphere for desert planets\r\n                params.particles = 2000;\r\n                params.color = new THREE.Color(0xff8866);\r\n                params.thickness = 1.1;\r\n                params.opacity = 0.2;\r\n                params.density = 0.1;\r\n                break;\r\n            case 'tropical':\r\n                // Thick, blue-green atmosphere\r\n                params.particles = 6000;\r\n                params.color = new THREE.Color(0x66ffee);\r\n                params.thickness = 1.7;\r\n                params.opacity = 0.4;\r\n                params.density = 0.3;\r\n                break;\r\n            case 'temperate':\r\n                // Blue atmosphere, earth-like\r\n                params.particles = 4000;\r\n                params.color = new THREE.Color(0x88aaff);\r\n                params.thickness = 1.5;\r\n                params.opacity = 0.35;\r\n                params.density = 0.25;\r\n                break;\r\n            case 'arctic':\r\n                // Pale blue, thinner atmosphere\r\n                params.particles = 3000;\r\n                params.color = new THREE.Color(0xaaccff);\r\n                params.thickness = 1.3;\r\n                params.opacity = 0.3;\r\n                params.density = 0.2;\r\n                break;\r\n            case 'ice':\r\n                // Very pale, thin atmosphere\r\n                params.particles = 2000;\r\n                params.color = new THREE.Color(0xccddff);\r\n                params.thickness = 1.2;\r\n                params.opacity = 0.25;\r\n                params.density = 0.15;\r\n                break;\r\n        }\r\n\r\n        // If a custom atmosphere color was specified, use it\r\n        if (this.options.atmosphereColor) {\r\n            params.color = this.options.atmosphereColor;\r\n        }\r\n\r\n        return params;\r\n    }\r\n\r\n    addStructure(type) {\r\n        // Create orbital structure based on type\r\n        let structure;\r\n        let orbitRadius = this.options.radius * 1.8; // Base orbit radius\r\n        let orbitSpeed = 0.00005; // Very slow orbit speed\r\n        let color, scale;\r\n        \r\n        // Configure structure based on type\r\n        switch(type) {\r\n            case 'mining':\r\n                color = 0xffcc00; // Gold color for mining\r\n                scale = 0.15;\r\n                orbitRadius = this.options.radius * 1.6;\r\n                break;\r\n            case 'research':\r\n                color = 0x00ccff; // Blue for research\r\n                scale = 0.2;\r\n                orbitRadius = this.options.radius * 2.0;\r\n                break;\r\n            case 'colony':\r\n                color = 0x00ff44; // Green for colony\r\n                scale = 0.25;\r\n                orbitRadius = this.options.radius * 2.4;\r\n                break;\r\n            case 'defense':\r\n                color = 0xff3300; // Red for defense\r\n                scale = 0.18;\r\n                orbitRadius = this.options.radius * 1.8;\r\n                break;\r\n            default:\r\n                color = 0xffffff;\r\n                scale = 0.15;\r\n        }\r\n        \r\n        // Create simple cube structure for now\r\n        const geometry = new THREE.BoxGeometry(\r\n            this.options.radius * scale,\r\n            this.options.radius * scale,\r\n            this.options.radius * scale\r\n        );\r\n        \r\n        const material = new THREE.MeshStandardMaterial({\r\n            color: color,\r\n            metalness: 0.8,\r\n            roughness: 0.2,\r\n            emissive: color,\r\n            emissiveIntensity: 0.2\r\n        });\r\n        \r\n        structure = new THREE.Mesh(geometry, material);\r\n        structure.castShadow = true;\r\n        structure.receiveShadow = true;\r\n        \r\n        // Create orbit container\r\n        const orbitContainer = new THREE.Object3D();\r\n        orbitContainer.add(structure);\r\n        \r\n        // Position structure at orbit distance\r\n        structure.position.x = orbitRadius;\r\n        \r\n        // Randomize initial position in orbit\r\n        orbitContainer.rotation.y = Math.random() * Math.PI * 2;\r\n        orbitContainer.rotation.x = (Math.random() - 0.5) * 0.3; // Slight tilt to orbit\r\n        \r\n        // Store orbital data\r\n        orbitContainer.userData = {\r\n            type: type,\r\n            orbitSpeed: orbitSpeed\r\n        };\r\n        \r\n        // Add to orbitals container\r\n        this.orbitalsContainer.add(orbitContainer);\r\n        \r\n        // Add to planet data for saving\r\n        this.container.userData.planetData.structures.push({\r\n            type: type,\r\n            orbitRadius: orbitRadius,\r\n            orbitAngle: orbitContainer.rotation.y,\r\n            orbitTilt: orbitContainer.rotation.x,\r\n            scale: scale,\r\n            color: color\r\n        });\r\n        \r\n        return orbitContainer;\r\n    }\r\n\r\n    animate(delta) {\r\n        // Rotate planet - 100x slower rotation\r\n        if (this.planetMesh) {\r\n            this.planetMesh.rotation.y += this.options.rotationSpeed * delta * 0.01;\r\n        }\r\n        \r\n        // Animate atmosphere if present - 100x slower rotation\r\n        if (this.atmosphere) {\r\n            this.atmosphere.rotation.y += this.options.cloudSpeed * 0.005 * delta; // reduced by 100x\r\n            this.atmosphere.update(performance.now() * 0.001);\r\n        }\r\n        \r\n        // Animate orbital structures - keeping orbital speed the same\r\n        if (this.orbitalsContainer) {\r\n            this.orbitalsContainer.children.forEach(orbit => {\r\n                orbit.rotation.y += orbit.userData.orbitSpeed * delta;\r\n            });\r\n        }\r\n    }\r\n}","import * as THREE from 'three';\r\nimport { atmosphereShader } from '../shaders/atmosphere.js';\r\n\r\n// Create material for atmosphere\r\nfunction createStarGlowMaterial() {\r\n    return new THREE.ShaderMaterial({\r\n        uniforms: {\r\n            coeficient: {\r\n                type: \"f\",\r\n                value: 0.5\r\n            },\r\n            power: {\r\n                type: \"f\",\r\n                value: 2.0\r\n            },\r\n            glowColor: {\r\n                type: \"c\",\r\n                value: new THREE.Color('red')\r\n            }\r\n        },\r\n        vertexShader: atmosphereShader.vertex,\r\n        fragmentShader: atmosphereShader.fragment,\r\n        side: THREE.FrontSide,\r\n        blending: THREE.AdditiveBlending,\r\n        transparent: true,\r\n        depthWrite: false\r\n    });\r\n}\r\n\r\nexport class Star {\r\n    constructor(options = {}) {\r\n        this.options = {\r\n            radius: options.radius || 30,\r\n            detail: options.detail || 32,\r\n            color: options.color || new THREE.Color(0xFFC65C),\r\n            glowColor: options.glowColor || new THREE.Color(0xFFC65C),\r\n            glowScale: options.glowScale || 1.15,\r\n            rotationSpeed: options.rotationSpeed || 0.0005,\r\n            name: options.name || \"Unnamed Star\",\r\n            type: options.type || \"G-type\",\r\n            temperature: options.temperature || 5778,\r\n            luminosity: options.luminosity || 1\r\n        };\r\n\r\n        // Create container for the star\r\n        this.container = new THREE.Object3D();\r\n        this.container.userData = {\r\n            isSelectable: true,\r\n            isStar: true,\r\n            starData: {\r\n                name: this.options.name,\r\n                type: this.options.type,\r\n                temperature: this.options.temperature,\r\n                luminosity: this.options.luminosity\r\n            }\r\n        };\r\n\r\n        //this.createStar();\r\n        this.createGlow();\r\n        this.createLight();\r\n\r\n        // Add animate method to the container\r\n        this.container.animate = (delta) => this.animate(delta);\r\n        \r\n        return this.container;\r\n    }\r\n\r\n    createStar() {\r\n        const geometry = new THREE.SphereGeometry(\r\n            this.options.radius,\r\n            this.options.detail,\r\n            this.options.detail\r\n        );\r\n\r\n        // Create material for the star surface\r\n        const material = new THREE.MeshBasicMaterial({\r\n            color: this.options.color,\r\n            emissive: this.options.color,\r\n            emissiveIntensity: 1.5\r\n        });\r\n\r\n        // Create mesh and add to container\r\n        this.starMesh = new THREE.Mesh(geometry, material);\r\n        this.container.add(this.starMesh);\r\n    }\r\n\r\n    createGlow() {\r\n        // Inner glow\r\n        const innerGeometry = new THREE.SphereGeometry(\r\n            this.options.radius,\r\n            this.options.detail,\r\n            this.options.detail\r\n        );\r\n        \r\n        const innerMaterial = createStarGlowMaterial();\r\n        innerMaterial.uniforms.glowColor.value = this.options.glowColor;\r\n        innerMaterial.uniforms.coeficient.value = 0.5;\r\n        innerMaterial.uniforms.power.value = 2.0;\r\n        \r\n        const innerMesh = new THREE.Mesh(innerGeometry, innerMaterial);\r\n        innerMesh.scale.multiplyScalar(0.5);\r\n        this.container.add(innerMesh);\r\n        \r\n        // Outer glow\r\n        const outerGeometry = new THREE.SphereGeometry(\r\n            this.options.radius,\r\n            this.options.detail,\r\n            this.options.detail\r\n        );\r\n        \r\n        const outerMaterial = createStarGlowMaterial();\r\n        outerMaterial.side = THREE.BackSide;\r\n        outerMaterial.uniforms.glowColor.value = this.options.glowColor;\r\n        outerMaterial.uniforms.coeficient.value = 0.4;\r\n        outerMaterial.uniforms.power.value = 4.0;\r\n        \r\n        const outerMesh = new THREE.Mesh(outerGeometry, outerMaterial);\r\n        outerMesh.scale.multiplyScalar(this.options.glowScale);\r\n        this.container.add(outerMesh);\r\n    }\r\n\r\n    createLight() {\r\n        // Add point light with increased intensity\r\n        const light = new THREE.PointLight(0xffffff, 2, 0);\r\n        light.castShadow = true;\r\n        \r\n        // Set up shadow parameters\r\n        light.shadow.mapSize.width = 2048;\r\n        light.shadow.mapSize.height = 2048;\r\n        light.shadow.camera.near = 0.01;\r\n        light.shadow.camera.far = 500;\r\n        \r\n        // Add a second light with no shadows to enhance illumination\r\n        const fillLight = new THREE.PointLight(0xffffcc, 0.5, 0);\r\n        fillLight.castShadow = false;\r\n        \r\n        this.container.add(light);\r\n        this.container.add(fillLight);\r\n    }\r\n\r\n    animate(delta) {\r\n        // Rotate star\r\n        if (this.starMesh) {\r\n            this.starMesh.rotation.y += this.options.rotationSpeed * delta;\r\n        }\r\n        \r\n        // Add random flickering to the light intensity\r\n        const light = this.container.children.find(child => child instanceof THREE.PointLight);\r\n        if (light) {\r\n            light.intensity = 1 + Math.sin(Date.now() * 0.001) * 0.05;\r\n        }\r\n    }\r\n}","export const atmosphereShader = {\r\n    vertex: `\r\n    varying vec3 vNormal;\r\n    void main() {\r\n        vNormal = normalize(normalMatrix * normal);\r\n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n    }`,\r\n    \r\n    fragment: `\r\n    uniform float coeficient;\r\n    uniform float power;\r\n    uniform vec3 glowColor;\r\n    varying vec3 vNormal;\r\n    void main() {\r\n        float intensity = pow(coeficient - dot(vNormal, vec3(0.0, 0.0, 1.0)), power);\r\n        gl_FragColor = vec4(glowColor * intensity, 1.0);\r\n    }`\r\n};","export const noiseShader = `\r\n// Simplex Noise functions\r\nvec3 mod289(vec3 x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec4 mod289(vec4 x) {\r\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\r\n}\r\n\r\nvec4 permute(vec4 x) {\r\n  return mod289(((x*34.0)+1.0)*x);\r\n}\r\n\r\nvec4 taylorInvSqrt(vec4 r) {\r\n  return 1.79284291400159 - 0.85373472095314 * r;\r\n}\r\n\r\nfloat snoise(vec3 v) {\r\n  const vec2 C = vec2(1.0/6.0, 1.0/3.0);\r\n  const vec4 D = vec4(0.0, 0.5, 1.0, 2.0);\r\n\r\n  // First corner\r\n  vec3 i  = floor(v + dot(v, C.yyy));\r\n  vec3 x0 =   v - i + dot(i, C.xxx);\r\n\r\n  // Other corners\r\n  vec3 g = step(x0.yzx, x0.xyz);\r\n  vec3 l = 1.0 - g;\r\n  vec3 i1 = min(g.xyz, l.zxy);\r\n  vec3 i2 = max(g.xyz, l.zxy);\r\n\r\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\r\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\r\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\r\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\r\n  vec3 x1 = x0 - i1 + C.xxx;\r\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\r\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\r\n\r\n  // Permutations\r\n  i = mod289(i);\r\n  vec4 p = permute(permute(permute(\r\n            i.z + vec4(0.0, i1.z, i2.z, 1.0))\r\n          + i.y + vec4(0.0, i1.y, i2.y, 1.0))\r\n          + i.x + vec4(0.0, i1.x, i2.x, 1.0));\r\n\r\n  // Gradients: 7x7 points over a square, mapped onto an octahedron.\r\n  // The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\r\n  float n_ = 0.142857142857; // 1.0/7.0\r\n  vec3 ns = n_ * D.wyz - D.xzx;\r\n\r\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\r\n\r\n  vec4 x_ = floor(j * ns.z);\r\n  vec4 y_ = floor(j - 7.0 * x_);    // mod(j,N)\r\n\r\n  vec4 x = x_ *ns.x + ns.yyyy;\r\n  vec4 y = y_ *ns.x + ns.yyyy;\r\n  vec4 h = 1.0 - abs(x) - abs(y);\r\n\r\n  vec4 b0 = vec4(x.xy, y.xy);\r\n  vec4 b1 = vec4(x.zw, y.zw);\r\n\r\n  vec4 s0 = floor(b0)*2.0 + 1.0;\r\n  vec4 s1 = floor(b1)*2.0 + 1.0;\r\n  vec4 sh = -step(h, vec4(0.0));\r\n\r\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy;\r\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww;\r\n\r\n  vec3 p0 = vec3(a0.xy, h.x);\r\n  vec3 p1 = vec3(a0.zw, h.y);\r\n  vec3 p2 = vec3(a1.xy, h.z);\r\n  vec3 p3 = vec3(a1.zw, h.w);\r\n\r\n  // Normalise gradients\r\n  vec4 norm = taylorInvSqrt(vec4(dot(p0, p0), dot(p1, p1), dot(p2, p2), dot(p3, p3)));\r\n  p0 *= norm.x;\r\n  p1 *= norm.y;\r\n  p2 *= norm.z;\r\n  p3 *= norm.w;\r\n\r\n  // Mix final noise value\r\n  vec4 m = max(0.6 - vec4(dot(x0, x0), dot(x1, x1), dot(x2, x2), dot(x3, x3)), 0.0);\r\n  m = m * m;\r\n  return 42.0 * dot(m*m, vec4(dot(p0, x0), dot(p1, x1), dot(p2, x2), dot(p3, x3)));\r\n}\r\n\r\n// FBM (Fractional Brownian Motion) with multiple octaves\r\nfloat fbm(vec3 p, int octaves, float persistence, float lacunarity) {\r\n  float amplitude = 1.0;\r\n  float frequency = 1.0;\r\n  float total = 0.0;\r\n  float normalization = 0.0;\r\n\r\n  for (int i = 0; i < octaves; i++) {\r\n    float noiseValue = snoise(p * frequency) * amplitude;\r\n    total += noiseValue;\r\n    normalization += amplitude;\r\n    amplitude *= persistence;\r\n    frequency *= lacunarity;\r\n  }\r\n\r\n  return total / normalization;\r\n}\r\n`;","import * as THREE from 'three';\r\n\r\nexport class GameUI {\r\n    constructor(gameInstance) {\r\n        this.game = gameInstance;\r\n        this.selectedObject = null;\r\n        this.uiContainer = null;\r\n        this.detailPanel = null;\r\n        \r\n        this.initUI();\r\n    }\r\n    \r\n    initUI() {\r\n        // Create UI container\r\n        this.uiContainer = document.createElement('div');\r\n        this.uiContainer.className = 'game-ui';\r\n        document.getElementById('ui-overlay').appendChild(this.uiContainer);\r\n        \r\n        // Create detail panel (initially hidden)\r\n        this.detailPanel = document.createElement('div');\r\n        this.detailPanel.className = 'detail-panel';\r\n        this.detailPanel.style.display = 'none';\r\n        this.uiContainer.appendChild(this.detailPanel);\r\n        \r\n        this.addStyles();\r\n    }\r\n    \r\n    addStyles() {\r\n        const style = document.createElement('style');\r\n        style.textContent = `\r\n            .game-ui {\r\n                position: absolute;\r\n                bottom: 0;\r\n                left: 0;\r\n                width: 100%;\r\n                pointer-events: none;\r\n            }\r\n            \r\n            .detail-panel {\r\n                position: absolute;\r\n                bottom: 20px;\r\n                left: 20px;\r\n                background: rgba(0, 20, 40, 0.8);\r\n                border: 1px solid rgba(0, 100, 255, 0.5);\r\n                border-radius: 5px;\r\n                padding: 15px;\r\n                color: white;\r\n                width: 300px;\r\n                pointer-events: auto;\r\n            }\r\n            \r\n            .action-buttons {\r\n                margin-top: 15px;\r\n                display: flex;\r\n                justify-content: center;\r\n            }\r\n            \r\n            .action-button {\r\n                background: linear-gradient(to bottom, rgba(0, 120, 255, 0.7), rgba(0, 80, 170, 0.7));\r\n                border: 1px solid rgba(0, 150, 255, 0.5);\r\n                border-radius: 4px;\r\n                color: white;\r\n                padding: 8px 15px;\r\n                font-size: 14px;\r\n                cursor: pointer;\r\n                transition: all 0.2s;\r\n                display: flex;\r\n                align-items: center;\r\n                gap: 5px;\r\n            }\r\n            \r\n            .action-button:hover {\r\n                background: linear-gradient(to bottom, rgba(0, 140, 255, 0.8), rgba(0, 100, 200, 0.8));\r\n                transform: translateY(-2px);\r\n                box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);\r\n            }\r\n            \r\n            .action-button:active {\r\n                transform: translateY(0);\r\n                box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\r\n            }\r\n            \r\n            .detail-panel h2 {\r\n                margin-top: 0;\r\n                color: #00ccff;\r\n                border-bottom: 1px solid rgba(0, 100, 255, 0.5);\r\n                padding-bottom: 8px;\r\n                margin-bottom: 10px;\r\n            }\r\n            \r\n            .detail-panel .stats {\r\n                display: grid;\r\n                grid-template-columns: 1fr 1fr;\r\n                gap: 5px;\r\n            }\r\n            \r\n            .detail-panel .stat-label {\r\n                color: rgba(255, 255, 255, 0.7);\r\n            }\r\n            \r\n            .structures-section {\r\n                margin-top: 15px;\r\n                border-top: 1px solid rgba(0, 100, 255, 0.3);\r\n                padding-top: 10px;\r\n            }\r\n            \r\n            .structures-section h4 {\r\n                margin-top: 0;\r\n                margin-bottom: 10px;\r\n                color: #00ccff;\r\n            }\r\n            \r\n            .structure-list {\r\n                max-height: 150px;\r\n                overflow-y: auto;\r\n            }\r\n            \r\n            .structure-item {\r\n                display: flex;\r\n                align-items: center;\r\n                margin-bottom: 5px;\r\n                padding: 5px;\r\n                background: rgba(0, 50, 100, 0.3);\r\n                border-radius: 3px;\r\n                font-size: 0.9em;\r\n            }\r\n            \r\n            .structure-icon {\r\n                width: 20px;\r\n                height: 20px;\r\n                border-radius: 2px;\r\n                margin-right: 8px;\r\n            }\r\n            \r\n            .notification {\r\n                padding: 10px 20px;\r\n                background: rgba(0, 100, 200, 0.8);\r\n                color: white;\r\n                border-radius: 5px;\r\n                position: absolute;\r\n                top: 20px;\r\n                left: 50%;\r\n                transform: translateX(-50%);\r\n                z-index: 1000;\r\n                transition: opacity 0.5s;\r\n            }\r\n            \r\n            .notification.error {\r\n                background: rgba(200, 50, 0, 0.8);\r\n            }\r\n        `;\r\n        document.head.appendChild(style);\r\n    }\r\n    \r\n    selectObject(object) {\r\n        // Store the reference to the selected object\r\n        this.selectedObject = object;\r\n        \r\n        console.log(\"selectObject called with:\", object);\r\n        \r\n        if (object && object.userData && (object.userData.isPlanet || object.userData.isStar)) {\r\n            console.log(\"Object is a planet or star\");\r\n            console.log(\"Object userData:\", object.userData);\r\n            \r\n            // Update detail panel\r\n            this.showDetailPanel(object);\r\n            \r\n            // Show build menu if it's a planet\r\n            if (object.userData.isPlanet) {\r\n                console.log(\"Showing build menu for planet\");\r\n                if (window.buildMenuUI) {\r\n                    console.log(\"Using global buildMenuUI\");\r\n                    \r\n                    // Get resources from the correct source\r\n                    let resources = 0;\r\n                    \r\n                    // Try window.gameState first\r\n                    if (window.gameState && typeof window.gameState.resources !== 'undefined') {\r\n                        resources = window.gameState.resources;\r\n                    } \r\n                    // Then try this.game.gameState\r\n                    else if (this.game && this.game.gameState && typeof this.game.gameState.resources !== 'undefined') {\r\n                        resources = this.game.gameState.resources;\r\n                    }\r\n                    // Finally fall back to DOM\r\n                    else {\r\n                        const resourcesElement = document.getElementById('resources-value');\r\n                        if (resourcesElement) {\r\n                            resources = parseInt(resourcesElement.textContent) || 0;\r\n                        }\r\n                    }\r\n                    \r\n                    console.log(\"Resources available:\", resources);\r\n                    \r\n                    // Update and show menu\r\n                    window.buildMenuUI.update(resources);\r\n                    window.buildMenuUI.show();\r\n                }\r\n            } else {\r\n                console.log(\"Not a planet, hiding build menu\");\r\n                if (window.buildMenuUI) {\r\n                    window.buildMenuUI.hide();\r\n                }\r\n            }\r\n            \r\n            // Move camera to focus on the selected object\r\n            this.focusCameraOn(object);\r\n        } else {\r\n            console.log(\"Object is null or not a planet/star\");\r\n            this.hideDetailPanel();\r\n            // Hide both menus when deselecting\r\n            if (window.buildMenuUI) {\r\n                window.buildMenuUI.hide();\r\n            }\r\n            // Also hide ship builder\r\n            if (this.game && this.game.shipBuilder) {\r\n                this.game.shipBuilder.hide();\r\n            }\r\n        }\r\n    }\r\n    \r\n    showDetailPanel(object) {\r\n        // Determine if this is a planet or star\r\n        const isPlanet = object.userData.isPlanet;\r\n        const data = isPlanet ? object.userData.planetData : object.userData.starData;\r\n        \r\n        // Create HTML content\r\n        let html = `\r\n            <h2>${data.name}</h2>\r\n            <div class=\"stats\">\r\n                <div class=\"stat-label\">Type:</div>\r\n                <div>${data.type}</div>\r\n        `;\r\n        \r\n        if (isPlanet) {\r\n            // Add planet-specific stats with defensive checks\r\n            if (data.resources) {\r\n                html += `\r\n                    <div class=\"stat-label\">Minerals:</div>\r\n                    <div>${data.resources.minerals ? data.resources.minerals.toFixed(1) : '0.0'}</div>\r\n                    <div class=\"stat-label\">Energy:</div>\r\n                    <div>${data.resources.energy ? data.resources.energy.toFixed(1) : '0.0'}</div>\r\n                    <div class=\"stat-label\">Water:</div>\r\n                    <div>${data.resources.water ? data.resources.water.toFixed(1) : '0.0'}</div>\r\n                `;\r\n            } else {\r\n                html += `\r\n                    <div class=\"stat-label\">Resources:</div>\r\n                    <div>No data available</div>\r\n                `;\r\n            }\r\n            \r\n            // Add structures list if any exist\r\n            if (data.structures && data.structures.length > 0) {\r\n                html += `\r\n                </div>\r\n                <div class=\"structures-section\">\r\n                    <h4>Orbital Structures</h4>\r\n                    <div class=\"structure-list\">\r\n                `;\r\n                \r\n                // List each structure\r\n                const structureColors = {\r\n                    'mining': '#ffcc00',\r\n                    'research': '#00ccff',\r\n                    'colony': '#00ff44',\r\n                    'defense': '#ff3300',\r\n                    'fighter_hangar': '#3498db',\r\n                    'shipyard': '#9b59b6'\r\n                };\r\n                \r\n                const structureNames = {\r\n                    'mining': 'Mining Station',\r\n                    'research': 'Research Outpost',\r\n                    'colony': 'Colony Base',\r\n                    'defense': 'Defense Platform',\r\n                    'fighter_hangar': 'Fighter Hangar',\r\n                    'shipyard': 'Capital Shipyard'\r\n                };\r\n                \r\n                let hasShipFacilities = false;\r\n                \r\n                data.structures.forEach(structure => {\r\n                    const color = structureColors[structure.type] || '#ffffff';\r\n                    const name = structureNames[structure.type] || structure.type;\r\n                    \r\n                    if (structure.type === 'fighter_hangar' || structure.type === 'shipyard') {\r\n                        hasShipFacilities = true;\r\n                    }\r\n                    \r\n                    html += `\r\n                        <div class=\"structure-item\">\r\n                            <div class=\"structure-icon\" style=\"background-color: ${color};\"></div>\r\n                            ${name}\r\n                        </div>\r\n                    `;\r\n                });\r\n                \r\n                html += `\r\n                    </div>\r\n                `;\r\n                \r\n                // Add ship building button if planet has hangars or shipyards\r\n                if (hasShipFacilities) {\r\n                    html += `\r\n                    <div class=\"action-buttons\">\r\n                        <button id=\"build-ships-btn\" class=\"action-button\">\r\n                            <i class=\"fas fa-rocket\"></i> Build Ships\r\n                        </button>\r\n                    </div>\r\n                    `;\r\n                }\r\n                \r\n                html += `</div>`;\r\n                \r\n                // Add event listener for ship building button and immediately show the ship builder menu\r\n                setTimeout(() => {\r\n                    const shipButton = document.getElementById('build-ships-btn');\r\n                    if (shipButton && this.game && this.game.shipBuilder) {\r\n                        // Show the ship builder immediately when planet with facilities is selected\r\n                        if (hasShipFacilities) {\r\n                            this.game.shipBuilder.show(this.selectedObject);\r\n                        }\r\n                        \r\n                        // Add click event for toggling the ship builder\r\n                        shipButton.addEventListener('click', () => {\r\n                            // Toggle the ship builder visibility\r\n                            const shipMenu = document.getElementById('ship-build-menu');\r\n                            if (shipMenu) {\r\n                                if (shipMenu.style.display === 'none') {\r\n                                    this.game.shipBuilder.show(this.selectedObject);\r\n                                } else {\r\n                                    this.game.shipBuilder.hide();\r\n                                }\r\n                            } else {\r\n                                this.game.shipBuilder.show(this.selectedObject);\r\n                            }\r\n                        });\r\n                    }\r\n                }, 0);\r\n                \r\n            } else {\r\n                html += `</div>`;\r\n            }\r\n        } else {\r\n            // Add star-specific stats\r\n            html += `\r\n                <div class=\"stat-label\">Temperature:</div>\r\n                <div>${data.temperature || 'N/A'} K</div>\r\n                <div class=\"stat-label\">Luminosity:</div>\r\n                <div>${data.luminosity || 'N/A'} L☉</div>\r\n            </div>`;\r\n        }\r\n        \r\n        // Update and show the panel\r\n        this.detailPanel.innerHTML = html;\r\n        this.detailPanel.style.display = 'block';\r\n    }\r\n    \r\n    hideDetailPanel() {\r\n        this.detailPanel.style.display = 'none';\r\n    }\r\n    \r\n    buildStructure(type, planetObject) {\r\n        console.log(`Attempting to build ${type} on ${planetObject.userData.planetData.name}`);\r\n        \r\n        // Check if the player has enough resources\r\n        const resourcesNeeded = this.getStructureCost(type);\r\n        \r\n        // Get the current resources\r\n        let currentResources = 0;\r\n        \r\n        // Check window.gameState first (our global state)\r\n        if (window.gameState && typeof window.gameState.resources !== 'undefined') {\r\n            currentResources = window.gameState.resources;\r\n        } \r\n        // Then check game instance \r\n        else if (this.game && this.game.gameState && typeof this.game.gameState.resources !== 'undefined') {\r\n            currentResources = this.game.gameState.resources;\r\n        }\r\n        // Finally fall back to DOM\r\n        else {\r\n            const resourcesElement = document.getElementById('resources-value');\r\n            if (resourcesElement) {\r\n                currentResources = parseInt(resourcesElement.textContent) || 0;\r\n            }\r\n        }\r\n        \r\n        if (currentResources < resourcesNeeded) {\r\n            // Not enough resources\r\n            this.showNotification(`Not enough resources to build ${type} station. Need ${resourcesNeeded} resources.`, 'error');\r\n            return;\r\n        }\r\n        \r\n        // Deduct resources from all possible sources\r\n        const newResourceAmount = currentResources - resourcesNeeded;\r\n        \r\n        // Update window.gameState (global)\r\n        if (window.gameState) {\r\n            window.gameState.resources = newResourceAmount;\r\n        }\r\n        \r\n        // Update game instance state\r\n        if (this.game && this.game.gameState) {\r\n            this.game.gameState.resources = newResourceAmount;\r\n        }\r\n        \r\n        // Update DOM display\r\n        const resourcesElement = document.getElementById('resources-value');\r\n        if (resourcesElement) {\r\n            resourcesElement.textContent = newResourceAmount;\r\n        }\r\n        \r\n        // Update mining facilities count if it's a mining structure\r\n        if (type === 'mining') {\r\n            // Update DOM display\r\n            const miningFacilitiesElement = document.getElementById('mining-facilities-value');\r\n            if (miningFacilitiesElement) {\r\n                const currentFacilities = parseInt(miningFacilitiesElement.textContent) || 0;\r\n                miningFacilitiesElement.textContent = currentFacilities + 1;\r\n            }\r\n            \r\n            // Update game state mining facilities\r\n            const planetId = planetObject.userData.id || planetObject.id || Math.random().toString(36).substr(2, 9);\r\n            \r\n            // Update window.gameState\r\n            if (window.gameState) {\r\n                if (!window.gameState.mining_facilities) {\r\n                    window.gameState.mining_facilities = {};\r\n                }\r\n                if (!window.gameState.mining_facilities[planetId]) {\r\n                    window.gameState.mining_facilities[planetId] = 0;\r\n                }\r\n                window.gameState.mining_facilities[planetId]++;\r\n            }\r\n            \r\n            // Update game instance\r\n            if (this.game && this.game.gameState) {\r\n                if (!this.game.gameState.mining_facilities) {\r\n                    this.game.gameState.mining_facilities = {};\r\n                }\r\n                if (!this.game.gameState.mining_facilities[planetId]) {\r\n                    this.game.gameState.mining_facilities[planetId] = 0;\r\n                }\r\n                this.game.gameState.mining_facilities[planetId]++;\r\n            }\r\n        }\r\n        \r\n        // Call the addStructure method on the planet object\r\n        if (planetObject.addStructure) {\r\n            const structure = planetObject.addStructure(type);\r\n            \r\n            // Show notification\r\n            this.showNotification(`Built ${type} station in orbit around ${planetObject.userData.planetData.name}`);\r\n            \r\n            // Update the detail panel to show the new structure\r\n            this.showDetailPanel(planetObject);\r\n            \r\n            // Save the game state to persist changes to the database\r\n            if (this.game && this.game.saveGameData) {\r\n                this.game.saveGameData();\r\n            }\r\n        } else {\r\n            console.error(\"Planet object does not have addStructure method\");\r\n            \r\n            // Try updating planet data directly\r\n            if (planetObject.userData && planetObject.userData.isPlanet) {\r\n                console.log(\"Trying to update planet data directly\");\r\n                \r\n                // Update the planet data directly\r\n                if (!planetObject.userData.planetData.structures) {\r\n                    planetObject.userData.planetData.structures = [];\r\n                }\r\n                planetObject.userData.planetData.structures.push({ type });\r\n                \r\n                this.showNotification(`Built ${type} station in orbit around ${planetObject.userData.planetData.name}`);\r\n                \r\n                // Update the detail panel to show the new structure\r\n                this.showDetailPanel(planetObject);\r\n                \r\n                // Save the game state to persist changes to the database\r\n                if (this.game && this.game.saveGameData) {\r\n                    this.game.saveGameData();\r\n                }\r\n            }\r\n        }\r\n        \r\n        // Update the build menu to show new resource amount\r\n        if (window.buildMenuUI) {\r\n            window.buildMenuUI.update(newResourceAmount);\r\n        }\r\n    }\r\n    \r\n    getStructureCost(type) {\r\n        const costs = {\r\n            'mining': 100,\r\n            'research': 150,\r\n            'colony': 200,\r\n            'defense': 180\r\n        };\r\n        \r\n        return costs[type] || 100;\r\n    }\r\n    \r\n    focusCameraOn(object) {\r\n        // Get the current camera position\r\n        const startPos = this.game.camera.position.clone();\r\n        \r\n        // Calculate target position (some distance from the object)\r\n        const objectPos = object.position.clone();\r\n        const objectRadius = object.userData.isPlanet ? \r\n            object.children[0].geometry.parameters.radius : \r\n            object.children[0].geometry.parameters.radius;\r\n        \r\n        const distance = objectRadius * 3; // Position camera at 3x the radius\r\n        \r\n        // We'll keep the same direction from the center to the camera,\r\n        // but adjust the distance\r\n        const direction = new THREE.Vector3().subVectors(startPos, objectPos).normalize();\r\n        const targetPos = objectPos.clone().add(direction.multiplyScalar(distance));\r\n        \r\n        // Animate the camera move\r\n        this.animateCameraMove(startPos, targetPos, objectPos);\r\n    }\r\n    \r\n    animateCameraMove(startPos, targetPos, lookAt) {\r\n        const camera = this.game.camera;\r\n        const duration = 1000; // ms\r\n        const startTime = Date.now();\r\n        \r\n        // Store the original controls enabled state\r\n        const controlsEnabled = this.game.controls.enabled;\r\n        \r\n        // Disable controls during animation\r\n        this.game.controls.enabled = false;\r\n        \r\n        const animate = () => {\r\n            const now = Date.now();\r\n            const elapsed = now - startTime;\r\n            const progress = Math.min(elapsed / duration, 1);\r\n            \r\n            // Use a smoothstep function for easing\r\n            const smoothProgress = progress * progress * (3 - 2 * progress);\r\n            \r\n            // Interpolate position\r\n            camera.position.lerpVectors(startPos, targetPos, smoothProgress);\r\n            \r\n            // Look at the object - check for null first\r\n            if (lookAt) {\r\n                camera.lookAt(lookAt);\r\n            }\r\n            \r\n            if (progress < 1) {\r\n                requestAnimationFrame(animate);\r\n            } else {\r\n                // Re-enable controls after animation\r\n                this.game.controls.enabled = controlsEnabled;\r\n                \r\n                // Reset orbit controls target if we have a valid lookAt point\r\n                if (lookAt && this.game.controls) {\r\n                    this.game.controls.target.copy(lookAt);\r\n                }\r\n            }\r\n        };\r\n        \r\n        animate();\r\n    }\r\n    \r\n    showNotification(message, type = 'info') {\r\n        const notification = document.createElement('div');\r\n        notification.className = `notification ${type}`;\r\n        notification.textContent = message;\r\n        \r\n        // Add to the UI container\r\n        this.uiContainer.appendChild(notification);\r\n        \r\n        // Remove after a delay\r\n        setTimeout(() => {\r\n            notification.style.opacity = '0';\r\n            \r\n            setTimeout(() => {\r\n                if (notification.parentNode) {\r\n                    this.uiContainer.removeChild(notification);\r\n                }\r\n            }, 500);\r\n        }, 3000);\r\n    }\r\n}","/**\n * @license\n * Copyright 2010-2023 Three.js Authors\n * SPDX-License-Identifier: MIT\n */\nconst REVISION = '157';\n\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nconst TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nconst CullFaceNone = 0;\nconst CullFaceBack = 1;\nconst CullFaceFront = 2;\nconst CullFaceFrontBack = 3;\nconst BasicShadowMap = 0;\nconst PCFShadowMap = 1;\nconst PCFSoftShadowMap = 2;\nconst VSMShadowMap = 3;\nconst FrontSide = 0;\nconst BackSide = 1;\nconst DoubleSide = 2;\nconst TwoPassDoubleSide = 2; // r149\nconst NoBlending = 0;\nconst NormalBlending = 1;\nconst AdditiveBlending = 2;\nconst SubtractiveBlending = 3;\nconst MultiplyBlending = 4;\nconst CustomBlending = 5;\nconst AddEquation = 100;\nconst SubtractEquation = 101;\nconst ReverseSubtractEquation = 102;\nconst MinEquation = 103;\nconst MaxEquation = 104;\nconst ZeroFactor = 200;\nconst OneFactor = 201;\nconst SrcColorFactor = 202;\nconst OneMinusSrcColorFactor = 203;\nconst SrcAlphaFactor = 204;\nconst OneMinusSrcAlphaFactor = 205;\nconst DstAlphaFactor = 206;\nconst OneMinusDstAlphaFactor = 207;\nconst DstColorFactor = 208;\nconst OneMinusDstColorFactor = 209;\nconst SrcAlphaSaturateFactor = 210;\nconst NeverDepth = 0;\nconst AlwaysDepth = 1;\nconst LessDepth = 2;\nconst LessEqualDepth = 3;\nconst EqualDepth = 4;\nconst GreaterEqualDepth = 5;\nconst GreaterDepth = 6;\nconst NotEqualDepth = 7;\nconst MultiplyOperation = 0;\nconst MixOperation = 1;\nconst AddOperation = 2;\nconst NoToneMapping = 0;\nconst LinearToneMapping = 1;\nconst ReinhardToneMapping = 2;\nconst CineonToneMapping = 3;\nconst ACESFilmicToneMapping = 4;\nconst CustomToneMapping = 5;\n\nconst UVMapping = 300;\nconst CubeReflectionMapping = 301;\nconst CubeRefractionMapping = 302;\nconst EquirectangularReflectionMapping = 303;\nconst EquirectangularRefractionMapping = 304;\nconst CubeUVReflectionMapping = 306;\nconst RepeatWrapping = 1000;\nconst ClampToEdgeWrapping = 1001;\nconst MirroredRepeatWrapping = 1002;\nconst NearestFilter = 1003;\nconst NearestMipmapNearestFilter = 1004;\nconst NearestMipMapNearestFilter = 1004;\nconst NearestMipmapLinearFilter = 1005;\nconst NearestMipMapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipmapNearestFilter = 1007;\nconst LinearMipMapNearestFilter = 1007;\nconst LinearMipmapLinearFilter = 1008;\nconst LinearMipMapLinearFilter = 1008;\nconst UnsignedByteType = 1009;\nconst ByteType = 1010;\nconst ShortType = 1011;\nconst UnsignedShortType = 1012;\nconst IntType = 1013;\nconst UnsignedIntType = 1014;\nconst FloatType = 1015;\nconst HalfFloatType = 1016;\nconst UnsignedShort4444Type = 1017;\nconst UnsignedShort5551Type = 1018;\nconst UnsignedInt248Type = 1020;\nconst AlphaFormat = 1021;\nconst RGBAFormat = 1023;\nconst LuminanceFormat = 1024;\nconst LuminanceAlphaFormat = 1025;\nconst DepthFormat = 1026;\nconst DepthStencilFormat = 1027;\nconst RedFormat = 1028;\nconst RedIntegerFormat = 1029;\nconst RGFormat = 1030;\nconst RGIntegerFormat = 1031;\nconst RGBAIntegerFormat = 1033;\n\nconst RGB_S3TC_DXT1_Format = 33776;\nconst RGBA_S3TC_DXT1_Format = 33777;\nconst RGBA_S3TC_DXT3_Format = 33778;\nconst RGBA_S3TC_DXT5_Format = 33779;\nconst RGB_PVRTC_4BPPV1_Format = 35840;\nconst RGB_PVRTC_2BPPV1_Format = 35841;\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\nconst RGB_ETC1_Format = 36196;\nconst RGB_ETC2_Format = 37492;\nconst RGBA_ETC2_EAC_Format = 37496;\nconst RGBA_ASTC_4x4_Format = 37808;\nconst RGBA_ASTC_5x4_Format = 37809;\nconst RGBA_ASTC_5x5_Format = 37810;\nconst RGBA_ASTC_6x5_Format = 37811;\nconst RGBA_ASTC_6x6_Format = 37812;\nconst RGBA_ASTC_8x5_Format = 37813;\nconst RGBA_ASTC_8x6_Format = 37814;\nconst RGBA_ASTC_8x8_Format = 37815;\nconst RGBA_ASTC_10x5_Format = 37816;\nconst RGBA_ASTC_10x6_Format = 37817;\nconst RGBA_ASTC_10x8_Format = 37818;\nconst RGBA_ASTC_10x10_Format = 37819;\nconst RGBA_ASTC_12x10_Format = 37820;\nconst RGBA_ASTC_12x12_Format = 37821;\nconst RGBA_BPTC_Format = 36492;\nconst RGB_BPTC_SIGNED_Format = 36494;\nconst RGB_BPTC_UNSIGNED_Format = 36495;\nconst RED_RGTC1_Format = 36283;\nconst SIGNED_RED_RGTC1_Format = 36284;\nconst RED_GREEN_RGTC2_Format = 36285;\nconst SIGNED_RED_GREEN_RGTC2_Format = 36286;\nconst LoopOnce = 2200;\nconst LoopRepeat = 2201;\nconst LoopPingPong = 2202;\nconst InterpolateDiscrete = 2300;\nconst InterpolateLinear = 2301;\nconst InterpolateSmooth = 2302;\nconst ZeroCurvatureEnding = 2400;\nconst ZeroSlopeEnding = 2401;\nconst WrapAroundEnding = 2402;\nconst NormalAnimationBlendMode = 2500;\nconst AdditiveAnimationBlendMode = 2501;\nconst TrianglesDrawMode = 0;\nconst TriangleStripDrawMode = 1;\nconst TriangleFanDrawMode = 2;\n/** @deprecated Use LinearSRGBColorSpace or NoColorSpace in three.js r152+. */\nconst LinearEncoding = 3000;\n/** @deprecated Use SRGBColorSpace in three.js r152+. */\nconst sRGBEncoding = 3001;\nconst BasicDepthPacking = 3200;\nconst RGBADepthPacking = 3201;\nconst TangentSpaceNormalMap = 0;\nconst ObjectSpaceNormalMap = 1;\n\n// Color space string identifiers, matching CSS Color Module Level 4 and WebGPU names where available.\nconst NoColorSpace = '';\nconst SRGBColorSpace = 'srgb';\nconst LinearSRGBColorSpace = 'srgb-linear';\nconst DisplayP3ColorSpace = 'display-p3';\nconst LinearDisplayP3ColorSpace = 'display-p3-linear';\n\nconst LinearTransfer = 'linear';\nconst SRGBTransfer = 'srgb';\n\nconst Rec709Primaries = 'rec709';\nconst P3Primaries = 'p3';\n\nconst ZeroStencilOp = 0;\nconst KeepStencilOp = 7680;\nconst ReplaceStencilOp = 7681;\nconst IncrementStencilOp = 7682;\nconst DecrementStencilOp = 7683;\nconst IncrementWrapStencilOp = 34055;\nconst DecrementWrapStencilOp = 34056;\nconst InvertStencilOp = 5386;\n\nconst NeverStencilFunc = 512;\nconst LessStencilFunc = 513;\nconst EqualStencilFunc = 514;\nconst LessEqualStencilFunc = 515;\nconst GreaterStencilFunc = 516;\nconst NotEqualStencilFunc = 517;\nconst GreaterEqualStencilFunc = 518;\nconst AlwaysStencilFunc = 519;\n\nconst NeverCompare = 512;\nconst LessCompare = 513;\nconst EqualCompare = 514;\nconst LessEqualCompare = 515;\nconst GreaterCompare = 516;\nconst NotEqualCompare = 517;\nconst GreaterEqualCompare = 518;\nconst AlwaysCompare = 519;\n\nconst StaticDrawUsage = 35044;\nconst DynamicDrawUsage = 35048;\nconst StreamDrawUsage = 35040;\nconst StaticReadUsage = 35045;\nconst DynamicReadUsage = 35049;\nconst StreamReadUsage = 35041;\nconst StaticCopyUsage = 35046;\nconst DynamicCopyUsage = 35050;\nconst StreamCopyUsage = 35042;\n\nconst GLSL1 = '100';\nconst GLSL3 = '300 es';\n\nconst _SRGBAFormat = 1035; // fallback for WebGL 1\n\nconst WebGLCoordinateSystem = 2000;\nconst WebGPUCoordinateSystem = 2001;\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nclass EventDispatcher {\n\n\taddEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t}\n\n\thasEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t}\n\n\tremoveEventListener( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t\tevent.target = null;\n\n\t\t}\n\n\t}\n\n}\n\nconst _lut = [ '00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '0a', '0b', '0c', '0d', '0e', '0f', '10', '11', '12', '13', '14', '15', '16', '17', '18', '19', '1a', '1b', '1c', '1d', '1e', '1f', '20', '21', '22', '23', '24', '25', '26', '27', '28', '29', '2a', '2b', '2c', '2d', '2e', '2f', '30', '31', '32', '33', '34', '35', '36', '37', '38', '39', '3a', '3b', '3c', '3d', '3e', '3f', '40', '41', '42', '43', '44', '45', '46', '47', '48', '49', '4a', '4b', '4c', '4d', '4e', '4f', '50', '51', '52', '53', '54', '55', '56', '57', '58', '59', '5a', '5b', '5c', '5d', '5e', '5f', '60', '61', '62', '63', '64', '65', '66', '67', '68', '69', '6a', '6b', '6c', '6d', '6e', '6f', '70', '71', '72', '73', '74', '75', '76', '77', '78', '79', '7a', '7b', '7c', '7d', '7e', '7f', '80', '81', '82', '83', '84', '85', '86', '87', '88', '89', '8a', '8b', '8c', '8d', '8e', '8f', '90', '91', '92', '93', '94', '95', '96', '97', '98', '99', '9a', '9b', '9c', '9d', '9e', '9f', 'a0', 'a1', 'a2', 'a3', 'a4', 'a5', 'a6', 'a7', 'a8', 'a9', 'aa', 'ab', 'ac', 'ad', 'ae', 'af', 'b0', 'b1', 'b2', 'b3', 'b4', 'b5', 'b6', 'b7', 'b8', 'b9', 'ba', 'bb', 'bc', 'bd', 'be', 'bf', 'c0', 'c1', 'c2', 'c3', 'c4', 'c5', 'c6', 'c7', 'c8', 'c9', 'ca', 'cb', 'cc', 'cd', 'ce', 'cf', 'd0', 'd1', 'd2', 'd3', 'd4', 'd5', 'd6', 'd7', 'd8', 'd9', 'da', 'db', 'dc', 'dd', 'de', 'df', 'e0', 'e1', 'e2', 'e3', 'e4', 'e5', 'e6', 'e7', 'e8', 'e9', 'ea', 'eb', 'ec', 'ed', 'ee', 'ef', 'f0', 'f1', 'f2', 'f3', 'f4', 'f5', 'f6', 'f7', 'f8', 'f9', 'fa', 'fb', 'fc', 'fd', 'fe', 'ff' ];\n\nlet _seed = 1234567;\n\n\nconst DEG2RAD = Math.PI / 180;\nconst RAD2DEG = 180 / Math.PI;\n\n// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\nfunction generateUUID() {\n\n\tconst d0 = Math.random() * 0xffffffff | 0;\n\tconst d1 = Math.random() * 0xffffffff | 0;\n\tconst d2 = Math.random() * 0xffffffff | 0;\n\tconst d3 = Math.random() * 0xffffffff | 0;\n\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t// .toLowerCase() here flattens concatenated strings to save heap memory space.\n\treturn uuid.toLowerCase();\n\n}\n\nfunction clamp( value, min, max ) {\n\n\treturn Math.max( min, Math.min( max, value ) );\n\n}\n\n// compute euclidean modulo of m % n\n// https://en.wikipedia.org/wiki/Modulo_operation\nfunction euclideanModulo( n, m ) {\n\n\treturn ( ( n % m ) + m ) % m;\n\n}\n\n// Linear mapping from range <a1, a2> to range <b1, b2>\nfunction mapLinear( x, a1, a2, b1, b2 ) {\n\n\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n}\n\n// https://www.gamedev.net/tutorials/programming/general-and-gameplay-programming/inverse-lerp-a-super-useful-yet-often-overlooked-function-r5230/\nfunction inverseLerp( x, y, value ) {\n\n\tif ( x !== y ) {\n\n\t\treturn ( value - x ) / ( y - x );\n\n\t} else {\n\n\t\treturn 0;\n\n\t}\n\n}\n\n// https://en.wikipedia.org/wiki/Linear_interpolation\nfunction lerp( x, y, t ) {\n\n\treturn ( 1 - t ) * x + t * y;\n\n}\n\n// http://www.rorydriscoll.com/2016/03/07/frame-rate-independent-damping-using-lerp/\nfunction damp( x, y, lambda, dt ) {\n\n\treturn lerp( x, y, 1 - Math.exp( - lambda * dt ) );\n\n}\n\n// https://www.desmos.com/calculator/vcsjnyz7x4\nfunction pingpong( x, length = 1 ) {\n\n\treturn length - Math.abs( euclideanModulo( x, length * 2 ) - length );\n\n}\n\n// http://en.wikipedia.org/wiki/Smoothstep\nfunction smoothstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * ( 3 - 2 * x );\n\n}\n\nfunction smootherstep( x, min, max ) {\n\n\tif ( x <= min ) return 0;\n\tif ( x >= max ) return 1;\n\n\tx = ( x - min ) / ( max - min );\n\n\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n}\n\n// Random integer from <low, high> interval\nfunction randInt( low, high ) {\n\n\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n}\n\n// Random float from <low, high> interval\nfunction randFloat( low, high ) {\n\n\treturn low + Math.random() * ( high - low );\n\n}\n\n// Random float from <-range/2, range/2> interval\nfunction randFloatSpread( range ) {\n\n\treturn range * ( 0.5 - Math.random() );\n\n}\n\n// Deterministic pseudo-random float in the interval [ 0, 1 ]\nfunction seededRandom( s ) {\n\n\tif ( s !== undefined ) _seed = s;\n\n\t// Mulberry32 generator\n\n\tlet t = _seed += 0x6D2B79F5;\n\n\tt = Math.imul( t ^ t >>> 15, t | 1 );\n\n\tt ^= t + Math.imul( t ^ t >>> 7, t | 61 );\n\n\treturn ( ( t ^ t >>> 14 ) >>> 0 ) / 4294967296;\n\n}\n\nfunction degToRad( degrees ) {\n\n\treturn degrees * DEG2RAD;\n\n}\n\nfunction radToDeg( radians ) {\n\n\treturn radians * RAD2DEG;\n\n}\n\nfunction isPowerOfTwo( value ) {\n\n\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n}\n\nfunction ceilPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction floorPowerOfTwo( value ) {\n\n\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n}\n\nfunction setQuaternionFromProperEuler( q, a, b, c, order ) {\n\n\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t// rotations are applied to the axes in the order specified by 'order'\n\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t// angles are in radians\n\n\tconst cos = Math.cos;\n\tconst sin = Math.sin;\n\n\tconst c2 = cos( b / 2 );\n\tconst s2 = sin( b / 2 );\n\n\tconst c13 = cos( ( a + c ) / 2 );\n\tconst s13 = sin( ( a + c ) / 2 );\n\n\tconst c1_3 = cos( ( a - c ) / 2 );\n\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\tconst c3_1 = cos( ( c - a ) / 2 );\n\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\tswitch ( order ) {\n\n\t\tcase 'XYX':\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YZY':\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZXZ':\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'XZX':\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'YXY':\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\tbreak;\n\n\t\tcase 'ZYZ':\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t}\n\n}\n\nfunction denormalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint32Array:\n\n\t\t\treturn value / 4294967295.0;\n\n\t\tcase Uint16Array:\n\n\t\t\treturn value / 65535.0;\n\n\t\tcase Uint8Array:\n\n\t\t\treturn value / 255.0;\n\n\t\tcase Int32Array:\n\n\t\t\treturn Math.max( value / 2147483647.0, - 1.0 );\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.max( value / 32767.0, - 1.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.max( value / 127.0, - 1.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nfunction normalize( value, array ) {\n\n\tswitch ( array.constructor ) {\n\n\t\tcase Float32Array:\n\n\t\t\treturn value;\n\n\t\tcase Uint32Array:\n\n\t\t\treturn Math.round( value * 4294967295.0 );\n\n\t\tcase Uint16Array:\n\n\t\t\treturn Math.round( value * 65535.0 );\n\n\t\tcase Uint8Array:\n\n\t\t\treturn Math.round( value * 255.0 );\n\n\t\tcase Int32Array:\n\n\t\t\treturn Math.round( value * 2147483647.0 );\n\n\t\tcase Int16Array:\n\n\t\t\treturn Math.round( value * 32767.0 );\n\n\t\tcase Int8Array:\n\n\t\t\treturn Math.round( value * 127.0 );\n\n\t\tdefault:\n\n\t\t\tthrow new Error( 'Invalid component type.' );\n\n\t}\n\n}\n\nconst MathUtils = {\n\tDEG2RAD: DEG2RAD,\n\tRAD2DEG: RAD2DEG,\n\tgenerateUUID: generateUUID,\n\tclamp: clamp,\n\teuclideanModulo: euclideanModulo,\n\tmapLinear: mapLinear,\n\tinverseLerp: inverseLerp,\n\tlerp: lerp,\n\tdamp: damp,\n\tpingpong: pingpong,\n\tsmoothstep: smoothstep,\n\tsmootherstep: smootherstep,\n\trandInt: randInt,\n\trandFloat: randFloat,\n\trandFloatSpread: randFloatSpread,\n\tseededRandom: seededRandom,\n\tdegToRad: degToRad,\n\tradToDeg: radToDeg,\n\tisPowerOfTwo: isPowerOfTwo,\n\tceilPowerOfTwo: ceilPowerOfTwo,\n\tfloorPowerOfTwo: floorPowerOfTwo,\n\tsetQuaternionFromProperEuler: setQuaternionFromProperEuler,\n\tnormalize: normalize,\n\tdenormalize: denormalize\n};\n\nclass Vector2 {\n\n\tconstructor( x = 0, y = 0 ) {\n\n\t\tVector2.prototype.isVector2 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.x;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.x = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.y;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.y = value;\n\n\t}\n\n\tset( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = Math.trunc( this.x );\n\t\tthis.y = Math.trunc( this.y );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tangle() {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t}\n\n\trotateAround( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\n\t}\n\n}\n\nclass Matrix3 {\n\n\tconstructor( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tMatrix3.prototype.isMatrix3 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t];\n\n\t\tif ( n11 !== undefined ) {\n\n\t\t\tthis.set( n11, n12, n13, n21, n22, n23, n31, n32, n33 );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix4( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t}\n\n\tinvert() {\n\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ],\n\t\t\tn12 = te[ 3 ], n22 = te[ 4 ], n32 = te[ 5 ],\n\t\t\tn13 = te[ 6 ], n23 = te[ 7 ], n33 = te[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\ttranspose() {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tgetNormalMatrix( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).invert().transpose();\n\n\t}\n\n\ttransposeIntoArray( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetUvTransform( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\t//\n\n\tscale( sx, sy ) {\n\n\t\tthis.premultiply( _m3.makeScale( sx, sy ) );\n\n\t\treturn this;\n\n\t}\n\n\trotate( theta ) {\n\n\t\tthis.premultiply( _m3.makeRotation( - theta ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( tx, ty ) {\n\n\t\tthis.premultiply( _m3.makeTranslation( tx, ty ) );\n\n\t\treturn this;\n\n\t}\n\n\t// for 2D Transforms\n\n\tmakeTranslation( x, y ) {\n\n\t\tif ( x.isVector2 ) {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, x.x,\n\t\t\t\t0, 1, x.y,\n\t\t\t\t0, 0, 1\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, x,\n\t\t\t\t0, 1, y,\n\t\t\t\t0, 0, 1\n\n\t\t\t);\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotation( theta ) {\n\n\t\t// counterclockwise\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0,\n\t\t\ts, c, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0,\n\t\t\t0, y, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\t//\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t}\n\n}\n\nconst _m3 = /*@__PURE__*/ new Matrix3();\n\nfunction arrayNeedsUint32( array ) {\n\n\t// assumes larger values usually on last\n\n\tfor ( let i = array.length - 1; i >= 0; -- i ) {\n\n\t\tif ( array[ i ] >= 65535 ) return true; // account for PRIMITIVE_RESTART_FIXED_INDEX, #24565\n\n\t}\n\n\treturn false;\n\n}\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\tUint8ClampedArray: Uint8ClampedArray,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nfunction getTypedArray( type, buffer ) {\n\n\treturn new TYPED_ARRAYS[ type ]( buffer );\n\n}\n\nfunction createElementNS( name ) {\n\n\treturn document.createElementNS( 'http://www.w3.org/1999/xhtml', name );\n\n}\n\nfunction createCanvasElement() {\n\n\tconst canvas = createElementNS( 'canvas' );\n\tcanvas.style.display = 'block';\n\treturn canvas;\n\n}\n\nconst _cache = {};\n\nfunction warnOnce( message ) {\n\n\tif ( message in _cache ) return;\n\n\t_cache[ message ] = true;\n\n\tconsole.warn( message );\n\n}\n\n/**\n * Matrices converting P3 <-> Rec. 709 primaries, without gamut mapping\n * or clipping. Based on W3C specifications for sRGB and Display P3,\n * and ICC specifications for the D50 connection space. Values in/out\n * are _linear_ sRGB and _linear_ Display P3.\n *\n * Note that both sRGB and Display P3 use the sRGB transfer functions.\n *\n * Reference:\n * - http://www.russellcottrell.com/photo/matrixCalculator.htm\n */\n\nconst LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = /*@__PURE__*/ new Matrix3().set(\n\t0.8224621, 0.177538, 0.0,\n\t0.0331941, 0.9668058, 0.0,\n\t0.0170827, 0.0723974, 0.9105199,\n);\n\nconst LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = /*@__PURE__*/ new Matrix3().set(\n\t1.2249401, - 0.2249404, 0.0,\n\t- 0.0420569, 1.0420571, 0.0,\n\t- 0.0196376, - 0.0786361, 1.0982735\n);\n\n/**\n * Defines supported color spaces by transfer function and primaries,\n * and provides conversions to/from the Linear-sRGB reference space.\n */\nconst COLOR_SPACES = {\n\t[ LinearSRGBColorSpace ]: {\n\t\ttransfer: LinearTransfer,\n\t\tprimaries: Rec709Primaries,\n\t\ttoReference: ( color ) => color,\n\t\tfromReference: ( color ) => color,\n\t},\n\t[ SRGBColorSpace ]: {\n\t\ttransfer: SRGBTransfer,\n\t\tprimaries: Rec709Primaries,\n\t\ttoReference: ( color ) => color.convertSRGBToLinear(),\n\t\tfromReference: ( color ) => color.convertLinearToSRGB(),\n\t},\n\t[ LinearDisplayP3ColorSpace ]: {\n\t\ttransfer: LinearTransfer,\n\t\tprimaries: P3Primaries,\n\t\ttoReference: ( color ) => color.applyMatrix3( LINEAR_DISPLAY_P3_TO_LINEAR_SRGB ),\n\t\tfromReference: ( color ) => color.applyMatrix3( LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 ),\n\t},\n\t[ DisplayP3ColorSpace ]: {\n\t\ttransfer: SRGBTransfer,\n\t\tprimaries: P3Primaries,\n\t\ttoReference: ( color ) => color.convertSRGBToLinear().applyMatrix3( LINEAR_DISPLAY_P3_TO_LINEAR_SRGB ),\n\t\tfromReference: ( color ) => color.applyMatrix3( LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 ).convertLinearToSRGB(),\n\t},\n};\n\nconst SUPPORTED_WORKING_COLOR_SPACES = new Set( [ LinearSRGBColorSpace, LinearDisplayP3ColorSpace ] );\n\nconst ColorManagement = {\n\n\tenabled: true,\n\n\t_workingColorSpace: LinearSRGBColorSpace,\n\n\tget legacyMode() {\n\n\t\tconsole.warn( 'THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150.' );\n\n\t\treturn ! this.enabled;\n\n\t},\n\n\tset legacyMode( legacyMode ) {\n\n\t\tconsole.warn( 'THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150.' );\n\n\t\tthis.enabled = ! legacyMode;\n\n\t},\n\n\tget workingColorSpace() {\n\n\t\treturn this._workingColorSpace;\n\n\t},\n\n\tset workingColorSpace( colorSpace ) {\n\n\t\tif ( ! SUPPORTED_WORKING_COLOR_SPACES.has( colorSpace ) ) {\n\n\t\t\tthrow new Error( `Unsupported working color space, \"${ colorSpace }\".` );\n\n\t\t}\n\n\t\tthis._workingColorSpace = colorSpace;\n\n\t},\n\n\tconvert: function ( color, sourceColorSpace, targetColorSpace ) {\n\n\t\tif ( this.enabled === false || sourceColorSpace === targetColorSpace || ! sourceColorSpace || ! targetColorSpace ) {\n\n\t\t\treturn color;\n\n\t\t}\n\n\t\tconst sourceToReference = COLOR_SPACES[ sourceColorSpace ].toReference;\n\t\tconst targetFromReference = COLOR_SPACES[ targetColorSpace ].fromReference;\n\n\t\treturn targetFromReference( sourceToReference( color ) );\n\n\t},\n\n\tfromWorkingColorSpace: function ( color, targetColorSpace ) {\n\n\t\treturn this.convert( color, this._workingColorSpace, targetColorSpace );\n\n\t},\n\n\ttoWorkingColorSpace: function ( color, sourceColorSpace ) {\n\n\t\treturn this.convert( color, sourceColorSpace, this._workingColorSpace );\n\n\t},\n\n\tgetPrimaries: function ( colorSpace ) {\n\n\t\treturn COLOR_SPACES[ colorSpace ].primaries;\n\n\t},\n\n\tgetTransfer: function ( colorSpace ) {\n\n\t\tif ( colorSpace === NoColorSpace ) return LinearTransfer;\n\n\t\treturn COLOR_SPACES[ colorSpace ].transfer;\n\n\t},\n\n};\n\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nlet _canvas;\n\nclass ImageUtils {\n\n\tstatic getDataURL( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement === 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = createElementNS( 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons', image );\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n\tstatic sRGBToLinear( image ) {\n\n\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\tconst canvas = createElementNS( 'canvas' );\n\n\t\t\tcanvas.width = image.width;\n\t\t\tcanvas.height = image.height;\n\n\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\tconst imageData = context.getImageData( 0, 0, image.width, image.height );\n\t\t\tconst data = imageData.data;\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] / 255 ) * 255;\n\n\t\t\t}\n\n\t\t\tcontext.putImageData( imageData, 0, 0 );\n\n\t\t\treturn canvas;\n\n\t\t} else if ( image.data ) {\n\n\t\t\tconst data = image.data.slice( 0 );\n\n\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\tif ( data instanceof Uint8Array || data instanceof Uint8ClampedArray ) {\n\n\t\t\t\t\tdata[ i ] = Math.floor( SRGBToLinear( data[ i ] / 255 ) * 255 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// assuming float\n\n\t\t\t\t\tdata[ i ] = SRGBToLinear( data[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tdata: data,\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied.' );\n\t\t\treturn image;\n\n\t\t}\n\n\t}\n\n}\n\nlet _sourceId = 0;\n\nclass Source {\n\n\tconstructor( data = null ) {\n\n\t\tthis.isSource = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _sourceId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.data = data;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.images[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.images[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\t\t\tuuid: this.uuid,\n\t\t\turl: ''\n\t\t};\n\n\t\tconst data = this.data;\n\n\t\tif ( data !== null ) {\n\n\t\t\tlet url;\n\n\t\t\tif ( Array.isArray( data ) ) {\n\n\t\t\t\t// cube texture\n\n\t\t\t\turl = [];\n\n\t\t\t\tfor ( let i = 0, l = data.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( data[ i ].isDataTexture ) {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ].image ) );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\turl.push( serializeImage( data[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// texture\n\n\t\t\t\turl = serializeImage( data );\n\n\t\t\t}\n\n\t\t\toutput.url = url;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.images[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n}\n\nfunction serializeImage( image ) {\n\n\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t// default images\n\n\t\treturn ImageUtils.getDataURL( image );\n\n\t} else {\n\n\t\tif ( image.data ) {\n\n\t\t\t// images of DataTexture\n\n\t\t\treturn {\n\t\t\t\tdata: Array.from( image.data ),\n\t\t\t\twidth: image.width,\n\t\t\t\theight: image.height,\n\t\t\t\ttype: image.data.constructor.name\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Texture: Unable to serialize Texture.' );\n\t\t\treturn {};\n\n\t\t}\n\n\t}\n\n}\n\nlet _textureId = 0;\n\nclass Texture extends EventDispatcher {\n\n\tconstructor( image = Texture.DEFAULT_IMAGE, mapping = Texture.DEFAULT_MAPPING, wrapS = ClampToEdgeWrapping, wrapT = ClampToEdgeWrapping, magFilter = LinearFilter, minFilter = LinearMipmapLinearFilter, format = RGBAFormat, type = UnsignedByteType, anisotropy = Texture.DEFAULT_ANISOTROPY, colorSpace = NoColorSpace ) {\n\n\t\tsuper();\n\n\t\tthis.isTexture = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _textureId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\n\t\tthis.source = new Source( image );\n\t\tthis.mipmaps = [];\n\n\t\tthis.mapping = mapping;\n\t\tthis.channel = 0;\n\n\t\tthis.wrapS = wrapS;\n\t\tthis.wrapT = wrapT;\n\n\t\tthis.magFilter = magFilter;\n\t\tthis.minFilter = minFilter;\n\n\t\tthis.anisotropy = anisotropy;\n\n\t\tthis.format = format;\n\t\tthis.internalFormat = null;\n\t\tthis.type = type;\n\n\t\tthis.offset = new Vector2( 0, 0 );\n\t\tthis.repeat = new Vector2( 1, 1 );\n\t\tthis.center = new Vector2( 0, 0 );\n\t\tthis.rotation = 0;\n\n\t\tthis.matrixAutoUpdate = true;\n\t\tthis.matrix = new Matrix3();\n\n\t\tthis.generateMipmaps = true;\n\t\tthis.premultiplyAlpha = false;\n\t\tthis.flipY = true;\n\t\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t\tif ( typeof colorSpace === 'string' ) {\n\n\t\t\tthis.colorSpace = colorSpace;\n\n\t\t} else { // @deprecated, r152\n\n\t\t\twarnOnce( 'THREE.Texture: Property .encoding has been replaced by .colorSpace.' );\n\t\t\tthis.colorSpace = colorSpace === sRGBEncoding ? SRGBColorSpace : NoColorSpace;\n\n\t\t}\n\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\t\tthis.onUpdate = null;\n\n\t\tthis.isRenderTargetTexture = false; // indicates whether a texture belongs to a render target or not\n\t\tthis.needsPMREMUpdate = false; // indicates whether this texture should be processed by PMREMGenerator or not (only relevant for render target textures)\n\n\t}\n\n\tget image() {\n\n\t\treturn this.source.data;\n\n\t}\n\n\tset image( value = null ) {\n\n\t\tthis.source.data = value;\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.source = source.source;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\t\tthis.channel = source.channel;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.colorSpace = source.colorSpace;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tthis.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\timage: this.source.toJSON( meta ).uuid,\n\n\t\t\tmapping: this.mapping,\n\t\t\tchannel: this.channel,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\tinternalFormat: this.internalFormat,\n\t\t\ttype: this.type,\n\t\t\tcolorSpace: this.colorSpace,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tgenerateMipmaps: this.generateMipmaps,\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( Object.keys( this.userData ).length > 0 ) output.userData = this.userData;\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\ttransformUv( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) {\n\n\t\t\tthis.version ++;\n\t\t\tthis.source.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tget encoding() { // @deprecated, r152\n\n\t\twarnOnce( 'THREE.Texture: Property .encoding has been replaced by .colorSpace.' );\n\t\treturn this.colorSpace === SRGBColorSpace ? sRGBEncoding : LinearEncoding;\n\n\t}\n\n\tset encoding( encoding ) { // @deprecated, r152\n\n\t\twarnOnce( 'THREE.Texture: Property .encoding has been replaced by .colorSpace.' );\n\t\tthis.colorSpace = encoding === sRGBEncoding ? SRGBColorSpace : NoColorSpace;\n\n\t}\n\n}\n\nTexture.DEFAULT_IMAGE = null;\nTexture.DEFAULT_MAPPING = UVMapping;\nTexture.DEFAULT_ANISOTROPY = 1;\n\nclass Vector4 {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tVector4.prototype.isVector4 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t}\n\n\tget width() {\n\n\t\treturn this.z;\n\n\t}\n\n\tset width( value ) {\n\n\t\tthis.z = value;\n\n\t}\n\n\tget height() {\n\n\t\treturn this.w;\n\n\t}\n\n\tset height( value ) {\n\n\t\tthis.w = value;\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\t\tthis.w *= v.w;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tsetAxisAngleFromQuaternion( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetAxisAngleFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = Math.trunc( this.x );\n\t\tthis.y = Math.trunc( this.y );\n\t\tthis.z = Math.trunc( this.z );\n\t\tthis.w = Math.trunc( this.w );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\t\tyield this.w;\n\n\t}\n\n}\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nclass RenderTarget extends EventDispatcher {\n\n\tconstructor( width = 1, height = 1, options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.isRenderTarget = true;\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = 1;\n\n\t\tthis.scissor = new Vector4( 0, 0, width, height );\n\t\tthis.scissorTest = false;\n\n\t\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\t\tconst image = { width: width, height: height, depth: 1 };\n\n\t\tif ( options.encoding !== undefined ) {\n\n\t\t\t// @deprecated, r152\n\t\t\twarnOnce( 'THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace.' );\n\t\t\toptions.colorSpace = options.encoding === sRGBEncoding ? SRGBColorSpace : NoColorSpace;\n\n\t\t}\n\n\t\toptions = Object.assign( {\n\t\t\tgenerateMipmaps: false,\n\t\t\tinternalFormat: null,\n\t\t\tminFilter: LinearFilter,\n\t\t\tdepthBuffer: true,\n\t\t\tstencilBuffer: false,\n\t\t\tdepthTexture: null,\n\t\t\tsamples: 0\n\t\t}, options );\n\n\t\tthis.texture = new Texture( image, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.colorSpace );\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.flipY = false;\n\t\tthis.texture.generateMipmaps = options.generateMipmaps;\n\t\tthis.texture.internalFormat = options.internalFormat;\n\n\t\tthis.depthBuffer = options.depthBuffer;\n\t\tthis.stencilBuffer = options.stencilBuffer;\n\n\t\tthis.depthTexture = options.depthTexture;\n\n\t\tthis.samples = options.samples;\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\t\t\tthis.texture.image.depth = depth;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.scissor.copy( source.scissor );\n\t\tthis.scissorTest = source.scissorTest;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\t// ensure image object is not shared, see #20328\n\n\t\tconst image = Object.assign( {}, source.texture.image );\n\t\tthis.texture.source = new Source( image );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.samples = source.samples;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nclass WebGLRenderTarget extends RenderTarget {\n\n\tconstructor( width = 1, height = 1, options = {} ) {\n\n\t\tsuper( width, height, options );\n\n\t\tthis.isWebGLRenderTarget = true;\n\n\t}\n\n}\n\nclass DataArrayTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( null );\n\n\t\tthis.isDataArrayTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGLArrayRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( width, height );\n\n\t\tthis.isWebGLArrayRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new DataArrayTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass Data3DTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, depth = 1 ) {\n\n\t\t// We're going to add .setXXX() methods for setting properties later.\n\t\t// Users can still set in DataTexture3D directly.\n\t\t//\n\t\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t\t// \ttexture.anisotropy = 16;\n\t\t//\n\t\t// See #14839\n\n\t\tsuper( null );\n\n\t\tthis.isData3DTexture = true;\n\n\t\tthis.image = { data, width, height, depth };\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nclass WebGL3DRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( width = 1, height = 1, depth = 1 ) {\n\n\t\tsuper( width, height );\n\n\t\tthis.isWebGL3DRenderTarget = true;\n\n\t\tthis.depth = depth;\n\n\t\tthis.texture = new Data3DTexture( null, width, height, depth );\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t}\n\n}\n\nclass WebGLMultipleRenderTargets extends WebGLRenderTarget {\n\n\tconstructor( width = 1, height = 1, count = 1, options = {} ) {\n\n\t\tsuper( width, height, options );\n\n\t\tthis.isWebGLMultipleRenderTargets = true;\n\n\t\tconst texture = this.texture;\n\n\t\tthis.texture = [];\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.texture[ i ] = texture.clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t}\n\n\tsetSize( width, height, depth = 1 ) {\n\n\t\tif ( this.width !== width || this.height !== height || this.depth !== depth ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\t\t\tthis.depth = depth;\n\n\t\t\tfor ( let i = 0, il = this.texture.length; i < il; i ++ ) {\n\n\t\t\t\tthis.texture[ i ].image.width = width;\n\t\t\t\tthis.texture[ i ].image.height = height;\n\t\t\t\tthis.texture[ i ].image.depth = depth;\n\n\t\t\t}\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.dispose();\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\t\tthis.depth = source.depth;\n\n\t\tthis.scissor.copy( source.scissor );\n\t\tthis.scissorTest = source.scissorTest;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\n\t\tif ( source.depthTexture !== null ) this.depthTexture = source.depthTexture.clone();\n\n\t\tthis.texture.length = 0;\n\n\t\tfor ( let i = 0, il = source.texture.length; i < il; i ++ ) {\n\n\t\t\tthis.texture[ i ] = source.texture[ i ].clone();\n\t\t\tthis.texture[ i ].isRenderTargetTexture = true;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Quaternion {\n\n\tconstructor( x = 0, y = 0, z = 0, w = 1 ) {\n\n\t\tthis.isQuaternion = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t}\n\n\tstatic slerpFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( t === 0 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x0;\n\t\t\tdst[ dstOffset + 1 ] = y0;\n\t\t\tdst[ dstOffset + 2 ] = z0;\n\t\t\tdst[ dstOffset + 3 ] = w0;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( t === 1 ) {\n\n\t\t\tdst[ dstOffset + 0 ] = x1;\n\t\t\tdst[ dstOffset + 1 ] = y1;\n\t\t\tdst[ dstOffset + 2 ] = z1;\n\t\t\tdst[ dstOffset + 3 ] = w1;\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t;\n\t\t\tconst cos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n\tstatic multiplyQuaternionsFlat( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget w() {\n\n\t\treturn this._w;\n\n\t}\n\n\tset w( value ) {\n\n\t\tthis._w = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t}\n\n\tcopy( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromEuler( euler, update ) {\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler._order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAxisAngle( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromUnitVectors( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < Number.EPSILON ) {\n\n\t\t\t// vFrom and vTo point in opposite directions\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t}\n\n\tangleTo( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t}\n\n\trotateTowards( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\treturn this.set( 0, 0, 0, 1 );\n\n\t}\n\n\tinvert() {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t}\n\n\tconjugate() {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t}\n\n\tlengthSq() {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t}\n\n\tnormalize() {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t}\n\n\tpremultiply( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t}\n\n\tmultiplyQuaternions( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerp( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tslerpQuaternions( qa, qb, t ) {\n\n\t\treturn this.copy( qa ).slerp( qb, t );\n\n\t}\n\n\trandom() {\n\n\t\t// Derived from http://planning.cs.uiuc.edu/node198.html\n\t\t// Note, this source uses w, x, y, z ordering,\n\t\t// so we swap the order below.\n\n\t\tconst u1 = Math.random();\n\t\tconst sqrt1u1 = Math.sqrt( 1 - u1 );\n\t\tconst sqrtu1 = Math.sqrt( u1 );\n\n\t\tconst u2 = 2 * Math.PI * Math.random();\n\n\t\tconst u3 = 2 * Math.PI * Math.random();\n\n\t\treturn this.set(\n\t\t\tsqrt1u1 * Math.cos( u2 ),\n\t\t\tsqrtu1 * Math.sin( u3 ),\n\t\t\tsqrtu1 * Math.cos( u3 ),\n\t\t\tsqrt1u1 * Math.sin( u2 ),\n\t\t);\n\n\t}\n\n\tequals( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.toArray();\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._w;\n\n\t}\n\n}\n\nclass Vector3 {\n\n\tconstructor( x = 0, y = 0, z = 0 ) {\n\n\t\tVector3.prototype.isVector3 = true;\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t}\n\n\tset( x, y, z ) {\n\n\t\tif ( z === undefined ) z = this.z; // sprite.scale.set(x,y)\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetX( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponent( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t}\n\n\tcopy( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tadd( v ) {\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t}\n\n\taddVectors( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t}\n\n\taddScaledVector( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( v ) {\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tsubScalar( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t}\n\n\tsubVectors( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyVectors( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyEuler( euler ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromEuler( euler ) );\n\n\t}\n\n\tapplyAxisAngle( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion$4.setFromAxisAngle( axis, angle ) );\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t}\n\n\tproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t}\n\n\tunproject( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t}\n\n\tdivide( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t}\n\n\tdivideScalar( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t}\n\n\tmin( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tmax( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t}\n\n\tclamp( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampScalar( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t}\n\n\tclampLength( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t}\n\n\tfloor() {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tceil() {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tround() {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t}\n\n\troundToZero() {\n\n\t\tthis.x = Math.trunc( this.x );\n\t\tthis.y = Math.trunc( this.y );\n\t\tthis.z = Math.trunc( this.z );\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t}\n\n\tdot( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t}\n\n\t// TODO lengthSquared?\n\n\tlengthSq() {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t}\n\n\tlength() {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t}\n\n\tmanhattanLength() {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t}\n\n\tnormalize() {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t}\n\n\tsetLength( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t}\n\n\tlerp( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpVectors( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tcross( v ) {\n\n\t\treturn this.crossVectors( this, v );\n\n\t}\n\n\tcrossVectors( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t}\n\n\tprojectOnVector( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t}\n\n\tprojectOnPlane( planeNormal ) {\n\n\t\t_vector$b.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector$b );\n\n\t}\n\n\treflect( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector$b.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t}\n\n\tangleTo( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( clamp( theta, - 1, 1 ) );\n\n\t}\n\n\tdistanceTo( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t}\n\n\tdistanceToSquared( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t}\n\n\tmanhattanDistanceTo( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t}\n\n\tsetFromSpherical( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t}\n\n\tsetFromSphericalCoords( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCylindrical( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t}\n\n\tsetFromCylindricalCoords( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixPosition( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixScale( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrixColumn( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t}\n\n\tsetFromMatrix3Column( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t}\n\n\tsetFromEuler( e ) {\n\n\t\tthis.x = e._x;\n\t\tthis.y = e._y;\n\t\tthis.z = e._z;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromColor( c ) {\n\n\t\tthis.x = c.r;\n\t\tthis.y = c.g;\n\t\tthis.z = c.b;\n\n\t\treturn this;\n\n\t}\n\n\tequals( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\trandom() {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n\trandomDirection() {\n\n\t\t// Derived from https://mathworld.wolfram.com/SpherePointPicking.html\n\n\t\tconst u = ( Math.random() - 0.5 ) * 2;\n\t\tconst t = Math.random() * Math.PI * 2;\n\t\tconst f = Math.sqrt( 1 - u ** 2 );\n\n\t\tthis.x = f * Math.cos( t );\n\t\tthis.y = f * Math.sin( t );\n\t\tthis.z = u;\n\n\t\treturn this;\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.x;\n\t\tyield this.y;\n\t\tyield this.z;\n\n\t}\n\n}\n\nconst _vector$b = /*@__PURE__*/ new Vector3();\nconst _quaternion$4 = /*@__PURE__*/ new Quaternion();\n\nclass Box3 {\n\n\tconstructor( min = new Vector3( + Infinity, + Infinity, + Infinity ), max = new Vector3( - Infinity, - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox3 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromArray( array ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = array.length; i < il; i += 3 ) {\n\n\t\t\tthis.expandByPoint( _vector$a.fromArray( array, i ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromBufferAttribute( attribute ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = attribute.count; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( _vector$a.fromBufferAttribute( attribute, i ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$a.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object, precise = false ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object, precise );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\texpandByObject( object, precise = false ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tif ( object.boundingBox !== undefined ) {\n\n\t\t\tif ( object.boundingBox === null ) {\n\n\t\t\t\tobject.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box$3.copy( object.boundingBox );\n\t\t\t_box$3.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.union( _box$3 );\n\n\t\t} else {\n\n\t\t\tconst geometry = object.geometry;\n\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tif ( precise && geometry.attributes !== undefined && geometry.attributes.position !== undefined ) {\n\n\t\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\t\tfor ( let i = 0, l = position.count; i < l; i ++ ) {\n\n\t\t\t\t\t\t_vector$a.fromBufferAttribute( position, i ).applyMatrix4( object.matrixWorld );\n\t\t\t\t\t\tthis.expandByPoint( _vector$a );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_box$3.copy( geometry.boundingBox );\n\t\t\t\t\t_box$3.applyMatrix4( object.matrixWorld );\n\n\t\t\t\t\tthis.union( _box$3 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ], precise );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$a );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$a.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t}\n\n\tintersectsTriangle( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0$2.subVectors( triangle.a, _center );\n\t\t_v1$7.subVectors( triangle.b, _center );\n\t\t_v2$4.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1$7, _v0$2 );\n\t\t_f1.subVectors( _v2$4, _v1$7 );\n\t\t_f2.subVectors( _v0$2, _v2$4 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$4, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0$2, _v1$7, _v2$4, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0$2, _v1$7, _v2$4, _extents );\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.clampPoint( point, _vector$a ).distanceTo( point );\n\n\t}\n\n\tgetBoundingSphere( target ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\ttarget.makeEmpty();\n\n\t\t} else {\n\n\t\t\tthis.getCenter( target.center );\n\n\t\t\ttarget.radius = this.getSize( _vector$a ).length() * 0.5;\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _points = [\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3(),\n\t/*@__PURE__*/ new Vector3()\n];\n\nconst _vector$a = /*@__PURE__*/ new Vector3();\n\nconst _box$3 = /*@__PURE__*/ new Box3();\n\n// triangle centered vertices\n\nconst _v0$2 = /*@__PURE__*/ new Vector3();\nconst _v1$7 = /*@__PURE__*/ new Vector3();\nconst _v2$4 = /*@__PURE__*/ new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = /*@__PURE__*/ new Vector3();\nconst _f1 = /*@__PURE__*/ new Vector3();\nconst _f2 = /*@__PURE__*/ new Vector3();\n\nconst _center = /*@__PURE__*/ new Vector3();\nconst _extents = /*@__PURE__*/ new Vector3();\nconst _triangleNormal = /*@__PURE__*/ new Vector3();\nconst _testAxis = /*@__PURE__*/ new Vector3();\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the separating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the separating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is separating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _box$2 = /*@__PURE__*/ new Box3();\nconst _v1$6 = /*@__PURE__*/ new Vector3();\nconst _v2$3 = /*@__PURE__*/ new Vector3();\n\nclass Sphere {\n\n\tconstructor( center = new Vector3(), radius = - 1 ) {\n\n\t\tthis.center = center;\n\t\tthis.radius = radius;\n\n\t}\n\n\tset( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$2.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn ( this.radius < 0 );\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tgetBoundingBox( target ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\tthis.center.copy( point );\n\n\t\t\tthis.radius = 0;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\t_v1$6.subVectors( point, this.center );\n\n\t\tconst lengthSq = _v1$6.lengthSq();\n\n\t\tif ( lengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\t// calculate the minimal sphere\n\n\t\t\tconst length = Math.sqrt( lengthSq );\n\n\t\t\tconst delta = ( length - this.radius ) * 0.5;\n\n\t\t\tthis.center.addScaledVector( _v1$6, delta / length );\n\n\t\t\tthis.radius += delta;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunion( sphere ) {\n\n\t\tif ( sphere.isEmpty() ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\tthis.copy( sphere );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( this.center.equals( sphere.center ) === true ) {\n\n\t\t\t this.radius = Math.max( this.radius, sphere.radius );\n\n\t\t} else {\n\n\t\t\t_v2$3.subVectors( sphere.center, this.center ).setLength( sphere.radius );\n\n\t\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).add( _v2$3 ) );\n\n\t\t\tthis.expandByPoint( _v1$6.copy( sphere.center ).sub( _v2$3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$9 = /*@__PURE__*/ new Vector3();\nconst _segCenter = /*@__PURE__*/ new Vector3();\nconst _segDir = /*@__PURE__*/ new Vector3();\nconst _diff = /*@__PURE__*/ new Vector3();\n\nconst _edge1 = /*@__PURE__*/ new Vector3();\nconst _edge2 = /*@__PURE__*/ new Vector3();\nconst _normal$1 = /*@__PURE__*/ new Vector3();\n\nclass Ray {\n\n\tconstructor( origin = new Vector3(), direction = new Vector3( 0, 0, - 1 ) ) {\n\n\t\tthis.origin = origin;\n\t\tthis.direction = direction;\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn target.copy( this.origin ).addScaledVector( this.direction, t );\n\n\t}\n\n\tlookAt( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t}\n\n\trecast( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector$9 ) );\n\n\t\treturn this;\n\n\t}\n\n\tclosestPointToPoint( point, target ) {\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.origin ).addScaledVector( this.direction, directionDistance );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t}\n\n\tdistanceSqToPoint( point ) {\n\n\t\tconst directionDistance = _vector$9.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector$9.copy( this.origin ).addScaledVector( this.direction, directionDistance );\n\n\t\treturn _vector$9.distanceToSquared( point );\n\n\t}\n\n\tdistanceSqToSegment( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.origin ).addScaledVector( this.direction, s0 );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segCenter ).addScaledVector( _segDir, s1 );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t}\n\n\tintersectSphere( sphere, target ) {\n\n\t\t_vector$9.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector$9.dot( this.direction );\n\t\tconst d2 = _vector$9.dot( _vector$9 ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if t1 is behind the ray - if so, return null\n\t\tif ( t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t}\n\n\tdistanceToPlane( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t}\n\n\tintersectPlane( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t}\n\n\tintersectsPlane( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t}\n\n\tintersectBox( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\tif ( tymin > tmin || isNaN( tmin ) ) tmin = tymin;\n\n\t\tif ( tymax < tmax || isNaN( tmax ) ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn this.intersectBox( box, _vector$9 ) !== null;\n\n\t}\n\n\tintersectTriangle( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from https://github.com/pmjoniak/GeometricTools/blob/master/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal$1.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal$1 );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal$1 );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t}\n\n\tapplyMatrix4( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t}\n\n\tequals( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass Matrix4 {\n\n\tconstructor( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tMatrix4.prototype.isMatrix4 = true;\n\n\t\tthis.elements = [\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t];\n\n\t\tif ( n11 !== undefined ) {\n\n\t\t\tthis.set( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 );\n\n\t\t}\n\n\t}\n\n\tset( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t}\n\n\tidentity() {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t}\n\n\tcopy( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t}\n\n\tcopyPosition( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t}\n\n\tsetFromMatrix3( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 3 ], me[ 6 ], 0,\n\t\t\tme[ 1 ], me[ 4 ], me[ 7 ], 0,\n\t\t\tme[ 2 ], me[ 5 ], me[ 8 ], 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractBasis( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t}\n\n\tmakeBasis( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\textractRotation( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1$5.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1$5.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1$5.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromEuler( euler ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationFromQuaternion( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t}\n\n\tlookAt( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t}\n\n\tpremultiply( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t}\n\n\tmultiplyMatrices( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t}\n\n\tdeterminant() {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t}\n\n\ttranspose() {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t}\n\n\tsetPosition( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tinvert() {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\n\t\t\tn11 = te[ 0 ], n21 = te[ 1 ], n31 = te[ 2 ], n41 = te[ 3 ],\n\t\t\tn12 = te[ 4 ], n22 = te[ 5 ], n32 = te[ 6 ], n42 = te[ 7 ],\n\t\t\tn13 = te[ 8 ], n23 = te[ 9 ], n33 = te[ 10 ], n43 = te[ 11 ],\n\t\t\tn14 = te[ 12 ], n24 = te[ 13 ], n34 = te[ 14 ], n44 = te[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t}\n\n\tscale( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxScaleOnAxis() {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t}\n\n\tmakeTranslation( x, y, z ) {\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, 0, x.x,\n\t\t\t\t0, 1, 0, x.y,\n\t\t\t\t0, 0, 1, x.z,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t} else {\n\n\t\t\tthis.set(\n\n\t\t\t\t1, 0, 0, x,\n\t\t\t\t0, 1, 0, y,\n\t\t\t\t0, 0, 1, z,\n\t\t\t\t0, 0, 0, 1\n\n\t\t\t);\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationX( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationY( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationZ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeRotationAxis( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeScale( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tmakeShear( xy, xz, yx, yz, zx, zy ) {\n\n\t\tthis.set(\n\n\t\t\t1, yx, zx, 0,\n\t\t\txy, 1, zy, 0,\n\t\t\txz, yz, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t}\n\n\tcompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tdecompose( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1$5.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tconst sy = _v1$5.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tconst sz = _v1$5.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1$2.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1$2.elements[ 0 ] *= invSX;\n\t\t_m1$2.elements[ 1 ] *= invSX;\n\t\t_m1$2.elements[ 2 ] *= invSX;\n\n\t\t_m1$2.elements[ 4 ] *= invSY;\n\t\t_m1$2.elements[ 5 ] *= invSY;\n\t\t_m1$2.elements[ 6 ] *= invSY;\n\n\t\t_m1$2.elements[ 8 ] *= invSZ;\n\t\t_m1$2.elements[ 9 ] *= invSZ;\n\t\t_m1$2.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1$2 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t}\n\n\tmakePerspective( left, right, top, bottom, near, far, coordinateSystem = WebGLCoordinateSystem ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\n\t\tlet c, d;\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tc = - ( far + near ) / ( far - near );\n\t\t\td = ( - 2 * far * near ) / ( far - near );\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tc = - far / ( far - near );\n\t\t\td = ( - far * near ) / ( far - near );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.Matrix4.makePerspective(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a; \tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b; \tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c; \tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t}\n\n\tmakeOrthographic( left, right, top, bottom, near, far, coordinateSystem = WebGLCoordinateSystem ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\n\t\tlet z, zInv;\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tz = ( far + near ) * p;\n\t\t\tzInv = - 2 * p;\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tz = near * p;\n\t\t\tzInv = - 1 * p;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.Matrix4.makeOrthographic(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\t\tte[ 8 ] = 0; \t\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0; \t\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0; \t\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0; \t\tte[ 6 ] = 0;\t\tte[ 10 ] = zInv;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0; \t\tte[ 7 ] = 0;\t\tte[ 11 ] = 0;\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t}\n\n\tequals( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n}\n\nconst _v1$5 = /*@__PURE__*/ new Vector3();\nconst _m1$2 = /*@__PURE__*/ new Matrix4();\nconst _zero = /*@__PURE__*/ new Vector3( 0, 0, 0 );\nconst _one = /*@__PURE__*/ new Vector3( 1, 1, 1 );\nconst _x = /*@__PURE__*/ new Vector3();\nconst _y = /*@__PURE__*/ new Vector3();\nconst _z = /*@__PURE__*/ new Vector3();\n\nconst _matrix = /*@__PURE__*/ new Matrix4();\nconst _quaternion$3 = /*@__PURE__*/ new Quaternion();\n\nclass Euler {\n\n\tconstructor( x = 0, y = 0, z = 0, order = Euler.DEFAULT_ORDER ) {\n\n\t\tthis.isEuler = true;\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t}\n\n\tget x() {\n\n\t\treturn this._x;\n\n\t}\n\n\tset x( value ) {\n\n\t\tthis._x = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget y() {\n\n\t\treturn this._y;\n\n\t}\n\n\tset y( value ) {\n\n\t\tthis._y = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget z() {\n\n\t\treturn this._z;\n\n\t}\n\n\tset z( value ) {\n\n\t\tthis._z = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tget order() {\n\n\t\treturn this._order;\n\n\t}\n\n\tset order( value ) {\n\n\t\tthis._order = value;\n\t\tthis._onChangeCallback();\n\n\t}\n\n\tset( x, y, z, order = this._order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t}\n\n\tcopy( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromRotationMatrix( m, order = this._order, update = true ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update === true ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\tsetFromQuaternion( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t}\n\n\tsetFromVector3( v, order = this._order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order );\n\n\t}\n\n\treorder( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$3.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$3, newOrder );\n\n\t}\n\n\tequals( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t}\n\n\tfromArray( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t}\n\n\t_onChange( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\t_onChangeCallback() {}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this._x;\n\t\tyield this._y;\n\t\tyield this._z;\n\t\tyield this._order;\n\n\t}\n\n}\n\nEuler.DEFAULT_ORDER = 'XYZ';\n\nclass Layers {\n\n\tconstructor() {\n\n\t\tthis.mask = 1 | 0;\n\n\t}\n\n\tset( channel ) {\n\n\t\tthis.mask = ( 1 << channel | 0 ) >>> 0;\n\n\t}\n\n\tenable( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t}\n\n\tenableAll() {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t}\n\n\ttoggle( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t}\n\n\tdisable( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t}\n\n\tdisableAll() {\n\n\t\tthis.mask = 0;\n\n\t}\n\n\ttest( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n\tisEnabled( channel ) {\n\n\t\treturn ( this.mask & ( 1 << channel | 0 ) ) !== 0;\n\n\t}\n\n}\n\nlet _object3DId = 0;\n\nconst _v1$4 = /*@__PURE__*/ new Vector3();\nconst _q1 = /*@__PURE__*/ new Quaternion();\nconst _m1$1 = /*@__PURE__*/ new Matrix4();\nconst _target = /*@__PURE__*/ new Vector3();\n\nconst _position$3 = /*@__PURE__*/ new Vector3();\nconst _scale$2 = /*@__PURE__*/ new Vector3();\nconst _quaternion$2 = /*@__PURE__*/ new Quaternion();\n\nconst _xAxis = /*@__PURE__*/ new Vector3( 1, 0, 0 );\nconst _yAxis = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nconst _zAxis = /*@__PURE__*/ new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\nclass Object3D extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isObject3D = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Object3D';\n\n\t\tthis.parent = null;\n\t\tthis.children = [];\n\n\t\tthis.up = Object3D.DEFAULT_UP.clone();\n\n\t\tconst position = new Vector3();\n\t\tconst rotation = new Euler();\n\t\tconst quaternion = new Quaternion();\n\t\tconst scale = new Vector3( 1, 1, 1 );\n\n\t\tfunction onRotationChange() {\n\n\t\t\tquaternion.setFromEuler( rotation, false );\n\n\t\t}\n\n\t\tfunction onQuaternionChange() {\n\n\t\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t\t}\n\n\t\trotation._onChange( onRotationChange );\n\t\tquaternion._onChange( onQuaternionChange );\n\n\t\tObject.defineProperties( this, {\n\t\t\tposition: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: position\n\t\t\t},\n\t\t\trotation: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: rotation\n\t\t\t},\n\t\t\tquaternion: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: quaternion\n\t\t\t},\n\t\t\tscale: {\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: scale\n\t\t\t},\n\t\t\tmodelViewMatrix: {\n\t\t\t\tvalue: new Matrix4()\n\t\t\t},\n\t\t\tnormalMatrix: {\n\t\t\t\tvalue: new Matrix3()\n\t\t\t}\n\t\t} );\n\n\t\tthis.matrix = new Matrix4();\n\t\tthis.matrixWorld = new Matrix4();\n\n\t\tthis.matrixAutoUpdate = Object3D.DEFAULT_MATRIX_AUTO_UPDATE;\n\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\tthis.matrixWorldAutoUpdate = Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE; // checked by the renderer\n\n\t\tthis.layers = new Layers();\n\t\tthis.visible = true;\n\n\t\tthis.castShadow = false;\n\t\tthis.receiveShadow = false;\n\n\t\tthis.frustumCulled = true;\n\t\tthis.renderOrder = 0;\n\n\t\tthis.animations = [];\n\n\t\tthis.userData = {};\n\n\t}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tonAfterRender( /* renderer, scene, camera, geometry, material, group */ ) {}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t}\n\n\tsetRotationFromAxisAngle( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t}\n\n\tsetRotationFromEuler( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t}\n\n\tsetRotationFromMatrix( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t}\n\n\tsetRotationFromQuaternion( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t}\n\n\trotateOnAxis( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateOnWorldAxis( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t}\n\n\trotateY( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t}\n\n\ttranslateOnAxis( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$4.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$4.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t}\n\n\ttranslateX( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t}\n\n\ttranslateY( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t}\n\n\ttranslateZ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t}\n\n\tlocalToWorld( vector ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t}\n\n\tworldToLocal( vector ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn vector.applyMatrix4( _m1$1.copy( this.matrixWorld ).invert() );\n\n\t}\n\n\tlookAt( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position$3.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1$1.lookAt( _position$3, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position$3, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.invert() );\n\n\t\t}\n\n\t}\n\n\tadd( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object can\\'t be added as a child of itself.', object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object && object.isObject3D ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Object3D.add: object not an instance of THREE.Object3D.', object );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremoveFromParent() {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tparent.remove( this );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclear() {\n\n\t\treturn this.remove( ... this.children );\n\n\t}\n\n\tattach( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\t// Note: This method does not support scene graphs having non-uniformly-scaled nodes(s)\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.copy( this.matrixWorld ).invert();\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tthis.add( object );\n\n\t\tobject.updateWorldMatrix( false, true );\n\n\t\treturn this;\n\n\t}\n\n\tgetObjectById( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t}\n\n\tgetObjectByName( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t}\n\n\tgetObjectByProperty( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tgetObjectsByProperty( name, value ) {\n\n\t\tlet result = [];\n\n\t\tif ( this[ name ] === value ) result.push( this );\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst childResult = this.children[ i ].getObjectsByProperty( name, value );\n\n\t\t\tif ( childResult.length > 0 ) {\n\n\t\t\t\tresult = result.concat( childResult );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tgetWorldPosition( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t}\n\n\tgetWorldQuaternion( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, target, _scale$2 );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldScale( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$2, target );\n\n\t\treturn target;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t}\n\n\traycast( /* raycaster, intersects */ ) {}\n\n\ttraverse( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseVisible( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t}\n\n\ttraverseAncestors( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t}\n\n\tupdateMatrix() {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tconst child = children[ i ];\n\n\t\t\tif ( child.matrixWorldAutoUpdate === true || force === true ) {\n\n\t\t\t\tchild.updateMatrixWorld( force );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null && parent.matrixWorldAutoUpdate === true ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\n\t\t\t\tif ( child.matrixWorldAutoUpdate === true ) {\n\n\t\t\t\t\tchild.updateWorldMatrix( false, true );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {},\n\t\t\t\tskeletons: {},\n\t\t\t\tanimations: {},\n\t\t\t\tnodes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( Object.keys( this.userData ).length > 0 ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\t\tobject.up = this.up.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\t\t\tif ( this.instanceColor !== null ) object.instanceColor = this.instanceColor.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isScene ) {\n\n\t\t\tif ( this.background ) {\n\n\t\t\t\tif ( this.background.isColor ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON();\n\n\t\t\t\t} else if ( this.background.isTexture ) {\n\n\t\t\t\t\tobject.background = this.background.toJSON( meta ).uuid;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.environment && this.environment.isTexture && this.environment.isRenderTargetTexture !== true ) {\n\n\t\t\t\tobject.environment = this.environment.toJSON( meta ).uuid;\n\n\t\t\t}\n\n\t\t} else if ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.isSkinnedMesh ) {\n\n\t\t\tobject.bindMode = this.bindMode;\n\t\t\tobject.bindMatrix = this.bindMatrix.toArray();\n\n\t\t\tif ( this.skeleton !== undefined ) {\n\n\t\t\t\tserialize( meta.skeletons, this.skeleton );\n\n\t\t\t\tobject.skeleton = this.skeleton.uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.animations.length > 0 ) {\n\n\t\t\tobject.animations = [];\n\n\t\t\tfor ( let i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\t\tconst animation = this.animations[ i ];\n\n\t\t\t\tobject.animations.push( serialize( meta.animations, animation ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\t\t\tconst skeletons = extractFromCache( meta.skeletons );\n\t\t\tconst animations = extractFromCache( meta.animations );\n\t\t\tconst nodes = extractFromCache( meta.nodes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\t\t\tif ( skeletons.length > 0 ) output.skeletons = skeletons;\n\t\t\tif ( animations.length > 0 ) output.animations = animations;\n\t\t\tif ( nodes.length > 0 ) output.nodes = nodes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t}\n\n\tclone( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t}\n\n\tcopy( source, recursive = true ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.rotation.order = source.rotation.order;\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.matrixWorldAutoUpdate = source.matrixWorldAutoUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.animations = source.animations.slice();\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nObject3D.DEFAULT_UP = /*@__PURE__*/ new Vector3( 0, 1, 0 );\nObject3D.DEFAULT_MATRIX_AUTO_UPDATE = true;\nObject3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE = true;\n\nconst _v0$1 = /*@__PURE__*/ new Vector3();\nconst _v1$3 = /*@__PURE__*/ new Vector3();\nconst _v2$2 = /*@__PURE__*/ new Vector3();\nconst _v3$1 = /*@__PURE__*/ new Vector3();\n\nconst _vab = /*@__PURE__*/ new Vector3();\nconst _vac = /*@__PURE__*/ new Vector3();\nconst _vbc = /*@__PURE__*/ new Vector3();\nconst _vap = /*@__PURE__*/ new Vector3();\nconst _vbp = /*@__PURE__*/ new Vector3();\nconst _vcp = /*@__PURE__*/ new Vector3();\n\nlet warnedGetUV = false;\n\nclass Triangle {\n\n\tconstructor( a = new Vector3(), b = new Vector3(), c = new Vector3() ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t}\n\n\tstatic getNormal( a, b, c, target ) {\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t}\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tstatic getBarycoord( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$2.subVectors( point, a );\n\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\n\t\tconst dot02 = _v0$1.dot( _v2$2 );\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\n\t\tconst dot12 = _v1$3.dot( _v2$2 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t}\n\n\tstatic containsPoint( point, a, b, c ) {\n\n\t\tthis.getBarycoord( point, a, b, c, _v3$1 );\n\n\t\treturn ( _v3$1.x >= 0 ) && ( _v3$1.y >= 0 ) && ( ( _v3$1.x + _v3$1.y ) <= 1 );\n\n\t}\n\n\tstatic getUV( point, p1, p2, p3, uv1, uv2, uv3, target ) { // @deprecated, r151\n\n\t\tif ( warnedGetUV === false ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation().' );\n\n\t\t\twarnedGetUV = true;\n\n\t\t}\n\n\t\treturn this.getInterpolation( point, p1, p2, p3, uv1, uv2, uv3, target );\n\n\t}\n\n\tstatic getInterpolation( point, p1, p2, p3, v1, v2, v3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3$1 );\n\n\t\ttarget.setScalar( 0 );\n\t\ttarget.addScaledVector( v1, _v3$1.x );\n\t\ttarget.addScaledVector( v2, _v3$1.y );\n\t\ttarget.addScaledVector( v3, _v3$1.z );\n\n\t\treturn target;\n\n\t}\n\n\tstatic isFrontFacing( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n\tset( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPointsAndIndices( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromAttributeAndIndices( attribute, i0, i1, i2 ) {\n\n\t\tthis.a.fromBufferAttribute( attribute, i0 );\n\t\tthis.b.fromBufferAttribute( attribute, i1 );\n\t\tthis.c.fromBufferAttribute( attribute, i2 );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t}\n\n\tgetArea() {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t}\n\n\tgetMidpoint( target ) {\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t}\n\n\tgetNormal( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t}\n\n\tgetPlane( target ) {\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t}\n\n\tgetBarycoord( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t}\n\n\tgetUV( point, uv1, uv2, uv3, target ) { // @deprecated, r151\n\n\t\tif ( warnedGetUV === false ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation().' );\n\n\t\t\twarnedGetUV = true;\n\n\t\t}\n\n\t\treturn Triangle.getInterpolation( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t}\n\n\tgetInterpolation( point, v1, v2, v3, target ) {\n\n\t\treturn Triangle.getInterpolation( point, this.a, this.b, this.c, v1, v2, v3, target );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t}\n\n\tisFrontFacing( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t}\n\n\tclosestPointToPoint( p, target ) {\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t}\n\n\tequals( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n}\n\nlet _materialId = 0;\n\nclass Material extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isMaterial = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _materialId ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Material';\n\n\t\tthis.blending = NormalBlending;\n\t\tthis.side = FrontSide;\n\t\tthis.vertexColors = false;\n\n\t\tthis.opacity = 1;\n\t\tthis.transparent = false;\n\t\tthis.alphaHash = false;\n\n\t\tthis.blendSrc = SrcAlphaFactor;\n\t\tthis.blendDst = OneMinusSrcAlphaFactor;\n\t\tthis.blendEquation = AddEquation;\n\t\tthis.blendSrcAlpha = null;\n\t\tthis.blendDstAlpha = null;\n\t\tthis.blendEquationAlpha = null;\n\n\t\tthis.depthFunc = LessEqualDepth;\n\t\tthis.depthTest = true;\n\t\tthis.depthWrite = true;\n\n\t\tthis.stencilWriteMask = 0xff;\n\t\tthis.stencilFunc = AlwaysStencilFunc;\n\t\tthis.stencilRef = 0;\n\t\tthis.stencilFuncMask = 0xff;\n\t\tthis.stencilFail = KeepStencilOp;\n\t\tthis.stencilZFail = KeepStencilOp;\n\t\tthis.stencilZPass = KeepStencilOp;\n\t\tthis.stencilWrite = false;\n\n\t\tthis.clippingPlanes = null;\n\t\tthis.clipIntersection = false;\n\t\tthis.clipShadows = false;\n\n\t\tthis.shadowSide = null;\n\n\t\tthis.colorWrite = true;\n\n\t\tthis.precision = null; // override the renderer's default precision for this material\n\n\t\tthis.polygonOffset = false;\n\t\tthis.polygonOffsetFactor = 0;\n\t\tthis.polygonOffsetUnits = 0;\n\n\t\tthis.dithering = false;\n\n\t\tthis.alphaToCoverage = false;\n\t\tthis.premultipliedAlpha = false;\n\t\tthis.forceSinglePass = false;\n\n\t\tthis.visible = true;\n\n\t\tthis.toneMapped = true;\n\n\t\tthis.userData = {};\n\n\t\tthis.version = 0;\n\n\t\tthis._alphaTest = 0;\n\n\t}\n\n\tget alphaTest() {\n\n\t\treturn this._alphaTest;\n\n\t}\n\n\tset alphaTest( value ) {\n\n\t\tif ( this._alphaTest > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._alphaTest = value;\n\n\t}\n\n\tonBuild( /* shaderobject, renderer */ ) {}\n\n\tonBeforeRender( /* renderer, scene, camera, geometry, object, group */ ) {}\n\n\tonBeforeCompile( /* shaderobject, renderer */ ) {}\n\n\tcustomProgramCacheKey() {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t}\n\n\tsetValues( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( `THREE.Material: parameter '${ key }' has value of undefined.` );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( `THREE.Material: '${ key }' is not a property of THREE.${ this.type }.` );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRootObject ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen !== undefined ) data.sheen = this.sheen;\n\t\tif ( this.sheenColor && this.sheenColor.isColor ) data.sheenColor = this.sheenColor.getHex();\n\t\tif ( this.sheenRoughness !== undefined ) data.sheenRoughness = this.sheenRoughness;\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.specularIntensity !== undefined ) data.specularIntensity = this.specularIntensity;\n\t\tif ( this.specularColor && this.specularColor.isColor ) data.specularColor = this.specularColor.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.iridescence !== undefined ) data.iridescence = this.iridescence;\n\t\tif ( this.iridescenceIOR !== undefined ) data.iridescenceIOR = this.iridescenceIOR;\n\t\tif ( this.iridescenceThicknessRange !== undefined ) data.iridescenceThicknessRange = this.iridescenceThicknessRange;\n\n\t\tif ( this.iridescenceMap && this.iridescenceMap.isTexture ) {\n\n\t\t\tdata.iridescenceMap = this.iridescenceMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.iridescenceThicknessMap && this.iridescenceThicknessMap.isTexture ) {\n\n\t\t\tdata.iridescenceThicknessMap = this.iridescenceThicknessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.anisotropy !== undefined ) data.anisotropy = this.anisotropy;\n\t\tif ( this.anisotropyRotation !== undefined ) data.anisotropyRotation = this.anisotropyRotation;\n\n\t\tif ( this.anisotropyMap && this.anisotropyMap.isTexture ) {\n\n\t\t\tdata.anisotropyMap = this.anisotropyMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\n\t\tif ( this.lightMap && this.lightMap.isTexture ) {\n\n\t\t\tdata.lightMap = this.lightMap.toJSON( meta ).uuid;\n\t\t\tdata.lightMapIntensity = this.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\t\tif ( this.specularIntensityMap && this.specularIntensityMap.isTexture ) data.specularIntensityMap = this.specularIntensityMap.toJSON( meta ).uuid;\n\t\tif ( this.specularColorMap && this.specularColorMap.isTexture ) data.specularColorMap = this.specularColorMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\n\t\t}\n\n\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\t\tif ( this.reflectivity !== undefined ) data.reflectivity = this.reflectivity;\n\t\tif ( this.refractionRatio !== undefined ) data.refractionRatio = this.refractionRatio;\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.transmission !== undefined ) data.transmission = this.transmission;\n\t\tif ( this.transmissionMap && this.transmissionMap.isTexture ) data.transmissionMap = this.transmissionMap.toJSON( meta ).uuid;\n\t\tif ( this.thickness !== undefined ) data.thickness = this.thickness;\n\t\tif ( this.thicknessMap && this.thicknessMap.isTexture ) data.thicknessMap = this.thicknessMap.toJSON( meta ).uuid;\n\t\tif ( this.attenuationDistance !== undefined && this.attenuationDistance !== Infinity ) data.attenuationDistance = this.attenuationDistance;\n\t\tif ( this.attenuationColor !== undefined ) data.attenuationColor = this.attenuationColor.getHex();\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.shadowSide !== null ) data.shadowSide = this.shadowSide;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors === true ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = true;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\t\tdata.colorWrite = this.colorWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation !== undefined && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth !== undefined && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.alphaHash === true ) data.alphaHash = true;\n\t\tif ( this.alphaToCoverage === true ) data.alphaToCoverage = true;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = true;\n\t\tif ( this.forceSinglePass === true ) data.forceSinglePass = true;\n\n\t\tif ( this.wireframe === true ) data.wireframe = true;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.flatShading === true ) data.flatShading = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( this.fog === false ) data.fog = false;\n\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.alphaHash = source.alphaHash;\n\t\tthis.alphaToCoverage = source.alphaToCoverage;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\t\tthis.forceSinglePass = source.forceSinglePass;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n}\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nclass Color {\n\n\tconstructor( r, g, b ) {\n\n\t\tthis.isColor = true;\n\n\t\tthis.r = 1;\n\t\tthis.g = 1;\n\t\tthis.b = 1;\n\n\t\treturn this.set( r, g, b );\n\n\t}\n\n\tset( r, g, b ) {\n\n\t\tif ( g === undefined && b === undefined ) {\n\n\t\t\t// r is THREE.Color, hex or string\n\n\t\t\tconst value = r;\n\n\t\t\tif ( value && value.isColor ) {\n\n\t\t\t\tthis.copy( value );\n\n\t\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\t\tthis.setHex( value );\n\n\t\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\t\tthis.setStyle( value );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.setRGB( r, g, b );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetScalar( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t}\n\n\tsetHex( hex, colorSpace = SRGBColorSpace ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetRGB( r, g, b, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetHSL( h, s, l, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = euclideanModulo( h, 1 );\n\t\ts = clamp( s, 0, 1 );\n\t\tl = clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\tColorManagement.toWorkingColorSpace( this, colorSpace );\n\n\t\treturn this;\n\n\t}\n\n\tsetStyle( style, colorSpace = SRGBColorSpace ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^(\\w+)\\(([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setRGB(\n\t\t\t\t\t\t\tMath.min( 255, parseInt( color[ 1 ], 10 ) ) / 255,\n\t\t\t\t\t\t\tMath.min( 255, parseInt( color[ 2 ], 10 ) ) / 255,\n\t\t\t\t\t\t\tMath.min( 255, parseInt( color[ 3 ], 10 ) ) / 255,\n\t\t\t\t\t\t\tcolorSpace\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setRGB(\n\t\t\t\t\t\t\tMath.min( 100, parseInt( color[ 1 ], 10 ) ) / 100,\n\t\t\t\t\t\t\tMath.min( 100, parseInt( color[ 2 ], 10 ) ) / 100,\n\t\t\t\t\t\t\tMath.min( 100, parseInt( color[ 3 ], 10 ) ) / 100,\n\t\t\t\t\t\t\tcolorSpace\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^\\s*(\\d*\\.?\\d+)\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*,\\s*(\\d*\\.?\\d+)\\%\\s*(?:,\\s*(\\d*\\.?\\d+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\n\t\t\t\t\t\thandleAlpha( color[ 4 ] );\n\n\t\t\t\t\t\treturn this.setHSL(\n\t\t\t\t\t\t\tparseFloat( color[ 1 ] ) / 360,\n\t\t\t\t\t\t\tparseFloat( color[ 2 ] ) / 100,\n\t\t\t\t\t\t\tparseFloat( color[ 3 ] ) / 100,\n\t\t\t\t\t\t\tcolorSpace\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tconsole.warn( 'THREE.Color: Unknown color model ' + style );\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f\\d]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\treturn this.setRGB(\n\t\t\t\t\tparseInt( hex.charAt( 0 ), 16 ) / 15,\n\t\t\t\t\tparseInt( hex.charAt( 1 ), 16 ) / 15,\n\t\t\t\t\tparseInt( hex.charAt( 2 ), 16 ) / 15,\n\t\t\t\t\tcolorSpace\n\t\t\t\t);\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\treturn this.setHex( parseInt( hex, 16 ), colorSpace );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Invalid hex color ' + style );\n\n\t\t\t}\n\n\t\t} else if ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style, colorSpace );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetColorName( style, colorSpace = SRGBColorSpace ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style.toLowerCase() ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex, colorSpace );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t}\n\n\tcopy( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t}\n\n\tcopySRGBToLinear( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tcopyLinearToSRGB( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t}\n\n\tconvertSRGBToLinear() {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t}\n\n\tconvertLinearToSRGB() {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t}\n\n\tgetHex( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( _color.copy( this ), colorSpace );\n\n\t\treturn Math.round( clamp( _color.r * 255, 0, 255 ) ) * 65536 + Math.round( clamp( _color.g * 255, 0, 255 ) ) * 256 + Math.round( clamp( _color.b * 255, 0, 255 ) );\n\n\t}\n\n\tgetHexString( colorSpace = SRGBColorSpace ) {\n\n\t\treturn ( '000000' + this.getHex( colorSpace ).toString( 16 ) ).slice( - 6 );\n\n\t}\n\n\tgetHSL( target, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tColorManagement.fromWorkingColorSpace( _color.copy( this ), colorSpace );\n\n\t\tconst r = _color.r, g = _color.g, b = _color.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t}\n\n\tgetRGB( target, colorSpace = ColorManagement.workingColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( _color.copy( this ), colorSpace );\n\n\t\ttarget.r = _color.r;\n\t\ttarget.g = _color.g;\n\t\ttarget.b = _color.b;\n\n\t\treturn target;\n\n\t}\n\n\tgetStyle( colorSpace = SRGBColorSpace ) {\n\n\t\tColorManagement.fromWorkingColorSpace( _color.copy( this ), colorSpace );\n\n\t\tconst r = _color.r, g = _color.g, b = _color.b;\n\n\t\tif ( colorSpace !== SRGBColorSpace ) {\n\n\t\t\t// Requires CSS Color Module Level 4 (https://www.w3.org/TR/css-color-4/).\n\t\t\treturn `color(${ colorSpace } ${ r.toFixed( 3 ) } ${ g.toFixed( 3 ) } ${ b.toFixed( 3 ) })`;\n\n\t\t}\n\n\t\treturn `rgb(${ Math.round( r * 255 ) },${ Math.round( g * 255 ) },${ Math.round( b * 255 ) })`;\n\n\t}\n\n\toffsetHSL( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\treturn this.setHSL( _hslA.h + h, _hslA.s + s, _hslA.l + l );\n\n\t}\n\n\tadd( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t}\n\n\taddColors( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t}\n\n\taddScalar( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t}\n\n\tsub( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t}\n\n\tmultiply( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t}\n\n\tmultiplyScalar( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t}\n\n\tlerp( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpColors( color1, color2, alpha ) {\n\n\t\tthis.r = color1.r + ( color2.r - color1.r ) * alpha;\n\t\tthis.g = color1.g + ( color2.g - color1.g ) * alpha;\n\t\tthis.b = color1.b + ( color2.b - color1.b ) * alpha;\n\n\t\treturn this;\n\n\t}\n\n\tlerpHSL( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\tthis.r = v.x;\n\t\tthis.g = v.y;\n\t\tthis.b = v.z;\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tconst r = this.r, g = this.g, b = this.b;\n\t\tconst e = m.elements;\n\n\t\tthis.r = e[ 0 ] * r + e[ 3 ] * g + e[ 6 ] * b;\n\t\tthis.g = e[ 1 ] * r + e[ 4 ] * g + e[ 7 ] * b;\n\t\tthis.b = e[ 2 ] * r + e[ 5 ] * g + e[ 8 ] * b;\n\n\t\treturn this;\n\n\t}\n\n\tequals( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t}\n\n\tfromBufferAttribute( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.getHex();\n\n\t}\n\n\t*[ Symbol.iterator ]() {\n\n\t\tyield this.r;\n\t\tyield this.g;\n\t\tyield this.b;\n\n\t}\n\n}\n\nconst _color = /*@__PURE__*/ new Color();\n\nColor.NAMES = _colorKeywords;\n\nclass MeshBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshBasicMaterial = true;\n\n\t\tthis.type = 'MeshBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // emissive\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// Fast Half Float Conversions, http://www.fox-toolkit.org/ftp/fasthalffloatconversion.pdf\n\nconst _tables = /*@__PURE__*/ _generateTables();\n\nfunction _generateTables() {\n\n\t// float32 to float16 helpers\n\n\tconst buffer = new ArrayBuffer( 4 );\n\tconst floatView = new Float32Array( buffer );\n\tconst uint32View = new Uint32Array( buffer );\n\n\tconst baseTable = new Uint32Array( 512 );\n\tconst shiftTable = new Uint32Array( 512 );\n\n\tfor ( let i = 0; i < 256; ++ i ) {\n\n\t\tconst e = i - 127;\n\n\t\t// very small number (0, -0)\n\n\t\tif ( e < - 27 ) {\n\n\t\t\tbaseTable[ i ] = 0x0000;\n\t\t\tbaseTable[ i | 0x100 ] = 0x8000;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// small number (denorm)\n\n\t\t} else if ( e < - 14 ) {\n\n\t\t\tbaseTable[ i ] = 0x0400 >> ( - e - 14 );\n\t\t\tbaseTable[ i | 0x100 ] = ( 0x0400 >> ( - e - 14 ) ) | 0x8000;\n\t\t\tshiftTable[ i ] = - e - 1;\n\t\t\tshiftTable[ i | 0x100 ] = - e - 1;\n\n\t\t\t// normal number\n\n\t\t} else if ( e <= 15 ) {\n\n\t\t\tbaseTable[ i ] = ( e + 15 ) << 10;\n\t\t\tbaseTable[ i | 0x100 ] = ( ( e + 15 ) << 10 ) | 0x8000;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t\t// large number (Infinity, -Infinity)\n\n\t\t} else if ( e < 128 ) {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 24;\n\t\t\tshiftTable[ i | 0x100 ] = 24;\n\n\t\t\t// stay (NaN, Infinity, -Infinity)\n\n\t\t} else {\n\n\t\t\tbaseTable[ i ] = 0x7c00;\n\t\t\tbaseTable[ i | 0x100 ] = 0xfc00;\n\t\t\tshiftTable[ i ] = 13;\n\t\t\tshiftTable[ i | 0x100 ] = 13;\n\n\t\t}\n\n\t}\n\n\t// float16 to float32 helpers\n\n\tconst mantissaTable = new Uint32Array( 2048 );\n\tconst exponentTable = new Uint32Array( 64 );\n\tconst offsetTable = new Uint32Array( 64 );\n\n\tfor ( let i = 1; i < 1024; ++ i ) {\n\n\t\tlet m = i << 13; // zero pad mantissa bits\n\t\tlet e = 0; // zero exponent\n\n\t\t// normalized\n\t\twhile ( ( m & 0x00800000 ) === 0 ) {\n\n\t\t\tm <<= 1;\n\t\t\te -= 0x00800000; // decrement exponent\n\n\t\t}\n\n\t\tm &= ~ 0x00800000; // clear leading 1 bit\n\t\te += 0x38800000; // adjust bias\n\n\t\tmantissaTable[ i ] = m | e;\n\n\t}\n\n\tfor ( let i = 1024; i < 2048; ++ i ) {\n\n\t\tmantissaTable[ i ] = 0x38000000 + ( ( i - 1024 ) << 13 );\n\n\t}\n\n\tfor ( let i = 1; i < 31; ++ i ) {\n\n\t\texponentTable[ i ] = i << 23;\n\n\t}\n\n\texponentTable[ 31 ] = 0x47800000;\n\texponentTable[ 32 ] = 0x80000000;\n\n\tfor ( let i = 33; i < 63; ++ i ) {\n\n\t\texponentTable[ i ] = 0x80000000 + ( ( i - 32 ) << 23 );\n\n\t}\n\n\texponentTable[ 63 ] = 0xc7800000;\n\n\tfor ( let i = 1; i < 64; ++ i ) {\n\n\t\tif ( i !== 32 ) {\n\n\t\t\toffsetTable[ i ] = 1024;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tfloatView: floatView,\n\t\tuint32View: uint32View,\n\t\tbaseTable: baseTable,\n\t\tshiftTable: shiftTable,\n\t\tmantissaTable: mantissaTable,\n\t\texponentTable: exponentTable,\n\t\toffsetTable: offsetTable\n\t};\n\n}\n\n// float32 to float16\n\nfunction toHalfFloat( val ) {\n\n\tif ( Math.abs( val ) > 65504 ) console.warn( 'THREE.DataUtils.toHalfFloat(): Value out of range.' );\n\n\tval = clamp( val, - 65504, 65504 );\n\n\t_tables.floatView[ 0 ] = val;\n\tconst f = _tables.uint32View[ 0 ];\n\tconst e = ( f >> 23 ) & 0x1ff;\n\treturn _tables.baseTable[ e ] + ( ( f & 0x007fffff ) >> _tables.shiftTable[ e ] );\n\n}\n\n// float16 to float32\n\nfunction fromHalfFloat( val ) {\n\n\tconst m = val >> 10;\n\t_tables.uint32View[ 0 ] = _tables.mantissaTable[ _tables.offsetTable[ m ] + ( val & 0x3ff ) ] + _tables.exponentTable[ m ];\n\treturn _tables.floatView[ 0 ];\n\n}\n\nconst DataUtils = {\n\ttoHalfFloat: toHalfFloat,\n\tfromHalfFloat: fromHalfFloat,\n};\n\nconst _vector$8 = /*@__PURE__*/ new Vector3();\nconst _vector2$1 = /*@__PURE__*/ new Vector2();\n\nclass BufferAttribute {\n\n\tconstructor( array, itemSize, normalized = false ) {\n\n\t\tif ( Array.isArray( array ) ) {\n\n\t\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t\t}\n\n\t\tthis.isBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.array = array;\n\t\tthis.itemSize = itemSize;\n\t\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\t\tthis.normalized = normalized;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\t\tthis.gpuType = FloatType;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\t\tthis.gpuType = source.gpuType;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcopyArray( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix3( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\n\t\t\t\t_vector2$1.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector$8.fromBufferAttribute( this, i );\n\t\t\t\t_vector$8.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector$8.x, _vector$8.y, _vector$8.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$8.fromBufferAttribute( this, i );\n\n\t\t\t_vector$8.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$8.x, _vector$8.y, _vector$8.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$8.fromBufferAttribute( this, i );\n\n\t\t\t_vector$8.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$8.x, _vector$8.y, _vector$8.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$8.fromBufferAttribute( this, i );\n\n\t\t\t_vector$8.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$8.x, _vector$8.y, _vector$8.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\t// Matching BufferAttribute constructor, do not normalize the array.\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tgetComponent( index, component ) {\n\n\t\tlet value = this.array[ index * this.itemSize + component ];\n\n\t\tif ( this.normalized ) value = denormalize( value, this.array );\n\n\t\treturn value;\n\n\t}\n\n\tsetComponent( index, component, value ) {\n\n\t\tif ( this.normalized ) value = normalize( value, this.array );\n\n\t\tthis.array[ index * this.itemSize + component ] = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = this.array[ index * this.itemSize ];\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = this.array[ index * this.itemSize + 1 ];\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = this.array[ index * this.itemSize + 2 ];\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = this.array[ index * this.itemSize + 3 ];\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.from( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( this.usage !== StaticDrawUsage ) data.usage = this.usage;\n\t\tif ( this.updateRange.offset !== 0 || this.updateRange.count !== - 1 ) data.updateRange = this.updateRange;\n\n\t\treturn data;\n\n\t}\n\n}\n\n//\n\nclass Int8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint8ClampedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint8ClampedArray( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Int32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Int32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Uint32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float16BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Uint16Array( array ), itemSize, normalized );\n\n\t\tthis.isFloat16BufferAttribute = true;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = fromHalfFloat( this.array[ index * this.itemSize ] );\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.array[ index * this.itemSize ] = toHalfFloat( x );\n\n\t\treturn this;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = fromHalfFloat( this.array[ index * this.itemSize + 1 ] );\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.array[ index * this.itemSize + 1 ] = toHalfFloat( y );\n\n\t\treturn this;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = fromHalfFloat( this.array[ index * this.itemSize + 2 ] );\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.array[ index * this.itemSize + 2 ] = toHalfFloat( z );\n\n\t\treturn this;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = fromHalfFloat( this.array[ index * this.itemSize + 3 ] );\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.array[ index * this.itemSize + 3 ] = toHalfFloat( w );\n\n\t\treturn this;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = toHalfFloat( x );\n\t\tthis.array[ index + 1 ] = toHalfFloat( y );\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = toHalfFloat( x );\n\t\tthis.array[ index + 1 ] = toHalfFloat( y );\n\t\tthis.array[ index + 2 ] = toHalfFloat( z );\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.array[ index + 0 ] = toHalfFloat( x );\n\t\tthis.array[ index + 1 ] = toHalfFloat( y );\n\t\tthis.array[ index + 2 ] = toHalfFloat( z );\n\t\tthis.array[ index + 3 ] = toHalfFloat( w );\n\n\t\treturn this;\n\n\t}\n\n}\n\n\nclass Float32BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float32Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nclass Float64BufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized ) {\n\n\t\tsuper( new Float64Array( array ), itemSize, normalized );\n\n\t}\n\n}\n\nlet _id$2 = 0;\n\nconst _m1 = /*@__PURE__*/ new Matrix4();\nconst _obj = /*@__PURE__*/ new Object3D();\nconst _offset = /*@__PURE__*/ new Vector3();\nconst _box$1 = /*@__PURE__*/ new Box3();\nconst _boxMorphTargets = /*@__PURE__*/ new Box3();\nconst _vector$7 = /*@__PURE__*/ new Vector3();\n\nclass BufferGeometry extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBufferGeometry = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _id$2 ++ } );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'BufferGeometry';\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\n\t\tthis.morphAttributes = {};\n\t\tthis.morphTargetsRelative = false;\n\n\t\tthis.groups = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\tthis.drawRange = { start: 0, count: Infinity };\n\n\t\tthis.userData = {};\n\n\t}\n\n\tgetIndex() {\n\n\t\treturn this.index;\n\n\t}\n\n\tsetIndex( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayNeedsUint32( index ) ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetAttribute( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t}\n\n\tsetAttribute( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t}\n\n\tdeleteAttribute( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t}\n\n\thasAttribute( name ) {\n\n\t\treturn this.attributes[ name ] !== undefined;\n\n\t}\n\n\taddGroup( start, count, materialIndex = 0 ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex\n\n\t\t} );\n\n\t}\n\n\tclearGroups() {\n\n\t\tthis.groups = [];\n\n\t}\n\n\tsetDrawRange( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyQuaternion( q ) {\n\n\t\t_m1.makeRotationFromQuaternion( q );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateY( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tscale( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tlookAt( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t}\n\n\tcenter() {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingBox.set(\n\t\t\t\tnew Vector3( - Infinity, - Infinity, - Infinity ),\n\t\t\t\tnew Vector3( + Infinity, + Infinity, + Infinity )\n\t\t\t);\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$1.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$7.addVectors( this.boundingBox.min, _box$1.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$7 );\n\n\t\t\t\t\t\t_vector$7.addVectors( this.boundingBox.max, _box$1.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$7 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$1.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$1.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position && position.isGLBufferAttribute ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set \"mesh.frustumCulled\" to \"false\".', this );\n\n\t\t\tthis.boundingSphere.set( new Vector3(), Infinity );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box$1.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$7.addVectors( _box$1.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$1.expandByPoint( _vector$7 );\n\n\t\t\t\t\t\t_vector$7.addVectors( _box$1.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$1.expandByPoint( _vector$7 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$1.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$1.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$1.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$7.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$7 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$7.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$7.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$7 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeTangents() {\n\n\t\tconst index = this.index;\n\t\tconst attributes = this.attributes;\n\n\t\t// based on http://www.terathon.com/code/tangent.html\n\t\t// (per vertex tangents)\n\n\t\tif ( index === null ||\n\t\t\t attributes.position === undefined ||\n\t\t\t attributes.normal === undefined ||\n\t\t\t attributes.uv === undefined ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst indices = index.array;\n\t\tconst positions = attributes.position.array;\n\t\tconst normals = attributes.normal.array;\n\t\tconst uvs = attributes.uv.array;\n\n\t\tconst nVertices = positions.length / 3;\n\n\t\tif ( this.hasAttribute( 'tangent' ) === false ) {\n\n\t\t\tthis.setAttribute( 'tangent', new BufferAttribute( new Float32Array( 4 * nVertices ), 4 ) );\n\n\t\t}\n\n\t\tconst tangents = this.getAttribute( 'tangent' ).array;\n\n\t\tconst tan1 = [], tan2 = [];\n\n\t\tfor ( let i = 0; i < nVertices; i ++ ) {\n\n\t\t\ttan1[ i ] = new Vector3();\n\t\t\ttan2[ i ] = new Vector3();\n\n\t\t}\n\n\t\tconst vA = new Vector3(),\n\t\t\tvB = new Vector3(),\n\t\t\tvC = new Vector3(),\n\n\t\t\tuvA = new Vector2(),\n\t\t\tuvB = new Vector2(),\n\t\t\tuvC = new Vector2(),\n\n\t\t\tsdir = new Vector3(),\n\t\t\ttdir = new Vector3();\n\n\t\tfunction handleTriangle( a, b, c ) {\n\n\t\t\tvA.fromArray( positions, a * 3 );\n\t\t\tvB.fromArray( positions, b * 3 );\n\t\t\tvC.fromArray( positions, c * 3 );\n\n\t\t\tuvA.fromArray( uvs, a * 2 );\n\t\t\tuvB.fromArray( uvs, b * 2 );\n\t\t\tuvC.fromArray( uvs, c * 2 );\n\n\t\t\tvB.sub( vA );\n\t\t\tvC.sub( vA );\n\n\t\t\tuvB.sub( uvA );\n\t\t\tuvC.sub( uvA );\n\n\t\t\tconst r = 1.0 / ( uvB.x * uvC.y - uvC.x * uvB.y );\n\n\t\t\t// silently ignore degenerate uv triangles having coincident or colinear vertices\n\n\t\t\tif ( ! isFinite( r ) ) return;\n\n\t\t\tsdir.copy( vB ).multiplyScalar( uvC.y ).addScaledVector( vC, - uvB.y ).multiplyScalar( r );\n\t\t\ttdir.copy( vC ).multiplyScalar( uvB.x ).addScaledVector( vB, - uvC.x ).multiplyScalar( r );\n\n\t\t\ttan1[ a ].add( sdir );\n\t\t\ttan1[ b ].add( sdir );\n\t\t\ttan1[ c ].add( sdir );\n\n\t\t\ttan2[ a ].add( tdir );\n\t\t\ttan2[ b ].add( tdir );\n\t\t\ttan2[ c ].add( tdir );\n\n\t\t}\n\n\t\tlet groups = this.groups;\n\n\t\tif ( groups.length === 0 ) {\n\n\t\t\tgroups = [ {\n\t\t\t\tstart: 0,\n\t\t\t\tcount: indices.length\n\t\t\t} ];\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleTriangle(\n\t\t\t\t\tindices[ j + 0 ],\n\t\t\t\t\tindices[ j + 1 ],\n\t\t\t\t\tindices[ j + 2 ]\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst tmp = new Vector3(), tmp2 = new Vector3();\n\t\tconst n = new Vector3(), n2 = new Vector3();\n\n\t\tfunction handleVertex( v ) {\n\n\t\t\tn.fromArray( normals, v * 3 );\n\t\t\tn2.copy( n );\n\n\t\t\tconst t = tan1[ v ];\n\n\t\t\t// Gram-Schmidt orthogonalize\n\n\t\t\ttmp.copy( t );\n\t\t\ttmp.sub( n.multiplyScalar( n.dot( t ) ) ).normalize();\n\n\t\t\t// Calculate handedness\n\n\t\t\ttmp2.crossVectors( n2, t );\n\t\t\tconst test = tmp2.dot( tan2[ v ] );\n\t\t\tconst w = ( test < 0.0 ) ? - 1.0 : 1.0;\n\n\t\t\ttangents[ v * 4 ] = tmp.x;\n\t\t\ttangents[ v * 4 + 1 ] = tmp.y;\n\t\t\ttangents[ v * 4 + 2 ] = tmp.z;\n\t\t\ttangents[ v * 4 + 3 ] = w;\n\n\t\t}\n\n\t\tfor ( let i = 0, il = groups.length; i < il; ++ i ) {\n\n\t\t\tconst group = groups[ i ];\n\n\t\t\tconst start = group.start;\n\t\t\tconst count = group.count;\n\n\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\thandleVertex( indices[ j + 0 ] );\n\t\t\t\thandleVertex( indices[ j + 1 ] );\n\t\t\t\thandleVertex( indices[ j + 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcomputeVertexNormals() {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tnormalizeNormals() {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$7.fromBufferAttribute( normals, i );\n\n\t\t\t_vector$7.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$7.x, _vector$7.y, _vector$7.z );\n\n\t\t}\n\n\t}\n\n\ttoNonIndexed() {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\tindex = indices[ i ] * attribute.data.stride + attribute.offset;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\t// for simplicity the code assumes attributes are not shared across geometries, see #15811\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tdata.data.attributes[ key ] = attribute.toJSON( data.data );\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tarray.push( attribute.toJSON( data.data ) );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nconst _inverseMatrix$3 = /*@__PURE__*/ new Matrix4();\nconst _ray$3 = /*@__PURE__*/ new Ray();\nconst _sphere$5 = /*@__PURE__*/ new Sphere();\nconst _sphereHitAt = /*@__PURE__*/ new Vector3();\n\nconst _vA$1 = /*@__PURE__*/ new Vector3();\nconst _vB$1 = /*@__PURE__*/ new Vector3();\nconst _vC$1 = /*@__PURE__*/ new Vector3();\n\nconst _tempA = /*@__PURE__*/ new Vector3();\nconst _morphA = /*@__PURE__*/ new Vector3();\n\nconst _uvA$1 = /*@__PURE__*/ new Vector2();\nconst _uvB$1 = /*@__PURE__*/ new Vector2();\nconst _uvC$1 = /*@__PURE__*/ new Vector2();\n\nconst _normalA = /*@__PURE__*/ new Vector3();\nconst _normalB = /*@__PURE__*/ new Vector3();\nconst _normalC = /*@__PURE__*/ new Vector3();\n\nconst _intersectionPoint = /*@__PURE__*/ new Vector3();\nconst _intersectionPointWorld = /*@__PURE__*/ new Vector3();\n\nclass Mesh extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new MeshBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isMesh = true;\n\n\t\tthis.type = 'Mesh';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = Array.isArray( source.material ) ? source.material.slice() : source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tgetVertexPosition( index, target ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.attributes.position;\n\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\n\t\ttarget.fromBufferAttribute( position, index );\n\n\t\tconst morphInfluences = this.morphTargetInfluences;\n\n\t\tif ( morphPosition && morphInfluences ) {\n\n\t\t\t_morphA.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\t\tconst influence = morphInfluences[ i ];\n\t\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t\t_tempA.fromBufferAttribute( morphAttribute, index );\n\n\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_morphA.addScaledVector( _tempA.sub( target ), influence );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttarget.add( _morphA );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// test with bounding sphere in world space\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$5.copy( geometry.boundingSphere );\n\t\t_sphere$5.applyMatrix4( matrixWorld );\n\n\t\t// check distance from ray origin to bounding sphere\n\n\t\t_ray$3.copy( raycaster.ray ).recast( raycaster.near );\n\n\t\tif ( _sphere$5.containsPoint( _ray$3.origin ) === false ) {\n\n\t\t\tif ( _ray$3.intersectSphere( _sphere$5, _sphereHitAt ) === null ) return;\n\n\t\t\tif ( _ray$3.origin.distanceToSquared( _sphereHitAt ) > ( raycaster.far - raycaster.near ) ** 2 ) return;\n\n\t\t}\n\n\t\t// convert ray to local space of mesh\n\n\t\t_inverseMatrix$3.copy( matrixWorld ).invert();\n\t\t_ray$3.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$3 );\n\n\t\t// test with bounding box in local space\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray$3.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\t// test for intersections with geometry\n\n\t\tthis._computeIntersections( raycaster, intersects, _ray$3 );\n\n\t}\n\n\t_computeIntersections( raycaster, intersects, rayLocalSpace ) {\n\n\t\tlet intersection;\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\n\t\tconst index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\t\tconst uv = geometry.attributes.uv;\n\t\tconst uv1 = geometry.attributes.uv1;\n\t\tconst normal = geometry.attributes.normal;\n\t\tconst groups = geometry.groups;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\tif ( index !== null ) {\n\n\t\t\t// indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\tintersection = checkGeometryIntersection( this, groupMaterial, raycaster, rayLocalSpace, uv, uv1, normal, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\tintersection = checkGeometryIntersection( this, material, raycaster, rayLocalSpace, uv, uv1, normal, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( position !== undefined ) {\n\n\t\t\t// non-indexed buffer geometry\n\n\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) ) );\n\n\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\tintersection = checkGeometryIntersection( this, groupMaterial, raycaster, rayLocalSpace, uv, uv1, normal, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\tconst a = i;\n\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\tintersection = checkGeometryIntersection( this, material, raycaster, rayLocalSpace, uv, uv1, normal, a, b, c );\n\n\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, ( material.side === FrontSide ), point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkGeometryIntersection( object, material, raycaster, ray, uv, uv1, normal, a, b, c ) {\n\n\tobject.getVertexPosition( a, _vA$1 );\n\tobject.getVertexPosition( b, _vB$1 );\n\tobject.getVertexPosition( c, _vC$1 );\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA$1, _vB$1, _vC$1, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getInterpolation( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv1 ) {\n\n\t\t\t_uvA$1.fromBufferAttribute( uv1, a );\n\t\t\t_uvB$1.fromBufferAttribute( uv1, b );\n\t\t\t_uvC$1.fromBufferAttribute( uv1, c );\n\n\t\t\tintersection.uv1 = Triangle.getInterpolation( _intersectionPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() );\n\t\t\tintersection.uv2 = intersection.uv1; // @deprecated, r152\n\n\t\t}\n\n\t\tif ( normal ) {\n\n\t\t\t_normalA.fromBufferAttribute( normal, a );\n\t\t\t_normalB.fromBufferAttribute( normal, b );\n\t\t\t_normalC.fromBufferAttribute( normal, c );\n\n\t\t\tintersection.normal = Triangle.getInterpolation( _intersectionPoint, _vA$1, _vB$1, _vC$1, _normalA, _normalB, _normalC, new Vector3() );\n\n\t\t\tif ( intersection.normal.dot( ray.direction ) > 0 ) {\n\n\t\t\t\tintersection.normal.multiplyScalar( - 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst face = {\n\t\t\ta: a,\n\t\t\tb: b,\n\t\t\tc: c,\n\t\t\tnormal: new Vector3(),\n\t\t\tmaterialIndex: 0\n\t\t};\n\n\t\tTriangle.getNormal( _vA$1, _vB$1, _vC$1, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nclass BoxGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, depth = 1, widthSegments = 1, heightSegments = 1, depthSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\t\tdepthSegments = Math.floor( depthSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new BoxGeometry( data.width, data.height, data.depth, data.widthSegments, data.heightSegments, data.depthSegments );\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture || property.isQuaternion ) ) {\n\n\t\t\t\tif ( property.isRenderTargetTexture ) {\n\n\t\t\t\t\tconsole.warn( 'UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms().' );\n\t\t\t\t\tdst[ u ][ p ] = null;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t\t}\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\nfunction cloneUniformsGroups( src ) {\n\n\tconst dst = [];\n\n\tfor ( let u = 0; u < src.length; u ++ ) {\n\n\t\tdst.push( src[ u ].clone() );\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction getUnlitUniformColorSpace( renderer ) {\n\n\tif ( renderer.getRenderTarget() === null ) {\n\n\t\t// https://github.com/mrdoob/three.js/pull/23937#issuecomment-1111067398\n\t\treturn renderer.outputColorSpace;\n\n\t}\n\n\treturn ColorManagement.workingColorSpace;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\n\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n\nclass ShaderMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShaderMaterial = true;\n\n\t\tthis.type = 'ShaderMaterial';\n\n\t\tthis.defines = {};\n\t\tthis.uniforms = {};\n\t\tthis.uniformsGroups = [];\n\n\t\tthis.vertexShader = default_vertex;\n\t\tthis.fragmentShader = default_fragment;\n\n\t\tthis.linewidth = 1;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.fog = false; // set to use scene fog\n\t\tthis.lights = false; // set to use scene lights\n\t\tthis.clipping = false; // set to use user-defined clipping planes\n\n\t\tthis.forceSinglePass = true;\n\n\t\tthis.extensions = {\n\t\t\tderivatives: false, // set to use derivatives\n\t\t\tfragDepth: false, // set to use fragment depth values\n\t\t\tdrawBuffers: false, // set to use draw buffers\n\t\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t\t};\n\n\t\t// When rendered geometry doesn't include these attributes but the material does,\n\t\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\t\tthis.defaultAttributeValues = {\n\t\t\t'color': [ 1, 1, 1 ],\n\t\t\t'uv': [ 0, 0 ],\n\t\t\t'uv1': [ 0, 0 ]\n\t\t};\n\n\t\tthis.index0AttributeName = undefined;\n\t\tthis.uniformsNeedUpdate = false;\n\n\t\tthis.glslVersion = null;\n\n\t\tif ( parameters !== undefined ) {\n\n\t\t\tthis.setValues( parameters );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.fragmentShader = source.fragmentShader;\n\t\tthis.vertexShader = source.vertexShader;\n\n\t\tthis.uniforms = cloneUniforms( source.uniforms );\n\t\tthis.uniformsGroups = cloneUniformsGroups( source.uniformsGroups );\n\n\t\tthis.defines = Object.assign( {}, source.defines );\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.fog = source.fog;\n\t\tthis.lights = source.lights;\n\t\tthis.clipping = source.clipping;\n\n\t\tthis.extensions = Object.assign( {}, source.extensions );\n\n\t\tthis.glslVersion = source.glslVersion;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.glslVersion = this.glslVersion;\n\t\tdata.uniforms = {};\n\n\t\tfor ( const name in this.uniforms ) {\n\n\t\t\tconst uniform = this.uniforms[ name ];\n\t\t\tconst value = uniform.value;\n\n\t\t\tif ( value && value.isTexture ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 't',\n\t\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isColor ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'c',\n\t\t\t\t\tvalue: value.getHex()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v2',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'v4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm3',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\ttype: 'm4',\n\t\t\t\t\tvalue: value.toArray()\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tdata.uniforms[ name ] = {\n\t\t\t\t\tvalue: value\n\t\t\t\t};\n\n\t\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\t\tdata.vertexShader = this.vertexShader;\n\t\tdata.fragmentShader = this.fragmentShader;\n\n\t\tdata.lights = this.lights;\n\t\tdata.clipping = this.clipping;\n\n\t\tconst extensions = {};\n\n\t\tfor ( const key in this.extensions ) {\n\n\t\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t\t}\n\n\t\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass Camera extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isCamera = true;\n\n\t\tthis.type = 'Camera';\n\n\t\tthis.matrixWorldInverse = new Matrix4();\n\n\t\tthis.projectionMatrix = new Matrix4();\n\t\tthis.projectionMatrixInverse = new Matrix4();\n\n\t\tthis.coordinateSystem = WebGLCoordinateSystem;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\tthis.coordinateSystem = source.coordinateSystem;\n\n\t\treturn this;\n\n\t}\n\n\tgetWorldDirection( target ) {\n\n\t\treturn super.getWorldDirection( target ).negate();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tupdateWorldMatrix( updateParents, updateChildren ) {\n\n\t\tsuper.updateWorldMatrix( updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.copy( this.matrixWorld ).invert();\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass PerspectiveCamera extends Camera {\n\n\tconstructor( fov = 50, aspect = 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isPerspectiveCamera = true;\n\n\t\tthis.type = 'PerspectiveCamera';\n\n\t\tthis.fov = fov;\n\t\tthis.zoom = 1;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.focus = 10;\n\n\t\tthis.aspect = aspect;\n\t\tthis.view = null;\n\n\t\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\t\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength( focalLength ) {\n\n\t\t/** see {@link http://www.bobatkins.com/photography/technical/field_of_view.html} */\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength() {\n\n\t\tconst vExtentSlope = Math.tan( DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t}\n\n\tgetEffectiveFOV() {\n\n\t\treturn RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t}\n\n\tgetFilmWidth() {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t}\n\n\tgetFilmHeight() {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t}\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst near = this.near;\n\t\tlet top = near * Math.tan( DEG2RAD * 0.5 * this.fov ) / this.zoom;\n\t\tlet height = 2 * top;\n\t\tlet width = this.aspect * height;\n\t\tlet left = - 0.5 * width;\n\t\tconst view = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far, this.coordinateSystem );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst fov = - 90; // negative fov is not an error\nconst aspect = 1;\n\nclass CubeCamera extends Object3D {\n\n\tconstructor( near, far, renderTarget ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CubeCamera';\n\n\t\tthis.renderTarget = renderTarget;\n\t\tthis.coordinateSystem = null;\n\t\tthis.activeMipmapLevel = 0;\n\n\t\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPX.layers = this.layers;\n\t\tthis.add( cameraPX );\n\n\t\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNX.layers = this.layers;\n\t\tthis.add( cameraNX );\n\n\t\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPY.layers = this.layers;\n\t\tthis.add( cameraPY );\n\n\t\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNY.layers = this.layers;\n\t\tthis.add( cameraNY );\n\n\t\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraPZ.layers = this.layers;\n\t\tthis.add( cameraPZ );\n\n\t\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\t\tcameraNZ.layers = this.layers;\n\t\tthis.add( cameraNZ );\n\n\t}\n\n\tupdateCoordinateSystem() {\n\n\t\tconst coordinateSystem = this.coordinateSystem;\n\n\t\tconst cameras = this.children.concat();\n\n\t\tconst [ cameraPX, cameraNX, cameraPY, cameraNY, cameraPZ, cameraNZ ] = cameras;\n\n\t\tfor ( const camera of cameras ) this.remove( camera );\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tcameraPX.up.set( 0, 1, 0 );\n\t\t\tcameraPX.lookAt( 1, 0, 0 );\n\n\t\t\tcameraNX.up.set( 0, 1, 0 );\n\t\t\tcameraNX.lookAt( - 1, 0, 0 );\n\n\t\t\tcameraPY.up.set( 0, 0, - 1 );\n\t\t\tcameraPY.lookAt( 0, 1, 0 );\n\n\t\t\tcameraNY.up.set( 0, 0, 1 );\n\t\t\tcameraNY.lookAt( 0, - 1, 0 );\n\n\t\t\tcameraPZ.up.set( 0, 1, 0 );\n\t\t\tcameraPZ.lookAt( 0, 0, 1 );\n\n\t\t\tcameraNZ.up.set( 0, 1, 0 );\n\t\t\tcameraNZ.lookAt( 0, 0, - 1 );\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tcameraPX.up.set( 0, - 1, 0 );\n\t\t\tcameraPX.lookAt( - 1, 0, 0 );\n\n\t\t\tcameraNX.up.set( 0, - 1, 0 );\n\t\t\tcameraNX.lookAt( 1, 0, 0 );\n\n\t\t\tcameraPY.up.set( 0, 0, 1 );\n\t\t\tcameraPY.lookAt( 0, 1, 0 );\n\n\t\t\tcameraNY.up.set( 0, 0, - 1 );\n\t\t\tcameraNY.lookAt( 0, - 1, 0 );\n\n\t\t\tcameraPZ.up.set( 0, - 1, 0 );\n\t\t\tcameraPZ.lookAt( 0, 0, 1 );\n\n\t\t\tcameraNZ.up.set( 0, - 1, 0 );\n\t\t\tcameraNZ.lookAt( 0, 0, - 1 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\tfor ( const camera of cameras ) {\n\n\t\t\tthis.add( camera );\n\n\t\t\tcamera.updateMatrixWorld();\n\n\t\t}\n\n\t}\n\n\tupdate( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst { renderTarget, activeMipmapLevel } = this;\n\n\t\tif ( this.coordinateSystem !== renderer.coordinateSystem ) {\n\n\t\t\tthis.coordinateSystem = renderer.coordinateSystem;\n\n\t\t\tthis.updateCoordinateSystem();\n\n\t\t}\n\n\t\tconst [ cameraPX, cameraNX, cameraPY, cameraNY, cameraPZ, cameraNZ ] = this.children;\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\t\tconst currentActiveCubeFace = renderer.getActiveCubeFace();\n\t\tconst currentActiveMipmapLevel = renderer.getActiveMipmapLevel();\n\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0, activeMipmapLevel );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1, activeMipmapLevel );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2, activeMipmapLevel );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3, activeMipmapLevel );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4, activeMipmapLevel );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\t// mipmaps are generated during the last call of render()\n\t\t// at this point, all sides of the cube render target are defined\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5, activeMipmapLevel );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget, currentActiveCubeFace, currentActiveMipmapLevel );\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t\trenderTarget.texture.needsPMREMUpdate = true;\n\n\t}\n\n}\n\nclass CubeTexture extends Texture {\n\n\tconstructor( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, colorSpace ) {\n\n\t\timages = images !== undefined ? images : [];\n\t\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\n\t\tsuper( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, colorSpace );\n\n\t\tthis.isCubeTexture = true;\n\n\t\tthis.flipY = false;\n\n\t}\n\n\tget images() {\n\n\t\treturn this.image;\n\n\t}\n\n\tset images( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n}\n\nclass WebGLCubeRenderTarget extends WebGLRenderTarget {\n\n\tconstructor( size = 1, options = {} ) {\n\n\t\tsuper( size, size, options );\n\n\t\tthis.isWebGLCubeRenderTarget = true;\n\n\t\tconst image = { width: size, height: size, depth: 1 };\n\t\tconst images = [ image, image, image, image, image, image ];\n\n\t\tif ( options.encoding !== undefined ) {\n\n\t\t\t// @deprecated, r152\n\t\t\twarnOnce( 'THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace.' );\n\t\t\toptions.colorSpace = options.encoding === sRGBEncoding ? SRGBColorSpace : NoColorSpace;\n\n\t\t}\n\n\t\tthis.texture = new CubeTexture( images, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.colorSpace );\n\n\t\t// By convention -- likely based on the RenderMan spec from the 1990's -- cube maps are specified by WebGL (and three.js)\n\t\t// in a coordinate system in which positive-x is to the right when looking up the positive-z axis -- in other words,\n\t\t// in a left-handed coordinate system. By continuing this convention, preexisting cube maps continued to render correctly.\n\n\t\t// three.js uses a right-handed coordinate system. So environment maps used in three.js appear to have px and nx swapped\n\t\t// and the flag isRenderTargetTexture controls this conversion. The flip is not required when using WebGLCubeRenderTarget.texture\n\t\t// as a cube texture (this is detected when isRenderTargetTexture is set to true for cube textures).\n\n\t\tthis.texture.isRenderTargetTexture = true;\n\n\t\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\t\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\t}\n\n\tfromEquirectangularTexture( renderer, texture ) {\n\n\t\tthis.texture.type = texture.type;\n\t\tthis.texture.colorSpace = texture.colorSpace;\n\n\t\tthis.texture.generateMipmaps = texture.generateMipmaps;\n\t\tthis.texture.minFilter = texture.minFilter;\n\t\tthis.texture.magFilter = texture.magFilter;\n\n\t\tconst shader = {\n\n\t\t\tuniforms: {\n\t\t\t\ttEquirect: { value: null },\n\t\t\t},\n\n\t\t\tvertexShader: /* glsl */`\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t`,\n\n\t\t\tfragmentShader: /* glsl */`\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t`\n\t\t};\n\n\t\tconst geometry = new BoxGeometry( 5, 5, 5 );\n\n\t\tconst material = new ShaderMaterial( {\n\n\t\t\tname: 'CubemapFromEquirect',\n\n\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tside: BackSide,\n\t\t\tblending: NoBlending\n\n\t\t} );\n\n\t\tmaterial.uniforms.tEquirect.value = texture;\n\n\t\tconst mesh = new Mesh( geometry, material );\n\n\t\tconst currentMinFilter = texture.minFilter;\n\n\t\t// Avoid blurred poles\n\t\tif ( texture.minFilter === LinearMipmapLinearFilter ) texture.minFilter = LinearFilter;\n\n\t\tconst camera = new CubeCamera( 1, 10, this );\n\t\tcamera.update( renderer, mesh );\n\n\t\ttexture.minFilter = currentMinFilter;\n\n\t\tmesh.geometry.dispose();\n\t\tmesh.material.dispose();\n\n\t\treturn this;\n\n\t}\n\n\tclear( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( this, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t}\n\n}\n\nconst _vector1 = /*@__PURE__*/ new Vector3();\nconst _vector2 = /*@__PURE__*/ new Vector3();\nconst _normalMatrix = /*@__PURE__*/ new Matrix3();\n\nclass Plane {\n\n\tconstructor( normal = new Vector3( 1, 0, 0 ), constant = 0 ) {\n\n\t\tthis.isPlane = true;\n\n\t\t// normal is assumed to be normalized\n\n\t\tthis.normal = normal;\n\t\tthis.constant = constant;\n\n\t}\n\n\tset( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t}\n\n\tsetComponents( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromNormalAndCoplanarPoint( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCoplanarPoints( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t}\n\n\tnegate() {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t}\n\n\tdistanceToSphere( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t}\n\n\tprojectPoint( point, target ) {\n\n\t\treturn target.copy( point ).addScaledVector( this.normal, - this.distanceToPoint( point ) );\n\n\t}\n\n\tintersectLine( line, target ) {\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn target.copy( line.start ).addScaledVector( direction, t );\n\n\t}\n\n\tintersectsLine( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t}\n\n\tcoplanarPoint( target ) {\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t}\n\n\tapplyMatrix4( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t}\n\n\tequals( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _sphere$4 = /*@__PURE__*/ new Sphere();\nconst _vector$6 = /*@__PURE__*/ new Vector3();\n\nclass Frustum {\n\n\tconstructor( p0 = new Plane(), p1 = new Plane(), p2 = new Plane(), p3 = new Plane(), p4 = new Plane(), p5 = new Plane() ) {\n\n\t\tthis.planes = [ p0, p1, p2, p3, p4, p5 ];\n\n\t}\n\n\tset( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromProjectionMatrix( m, coordinateSystem = WebGLCoordinateSystem ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\n\t\tif ( coordinateSystem === WebGLCoordinateSystem ) {\n\n\t\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\t} else if ( coordinateSystem === WebGPUCoordinateSystem ) {\n\n\t\t\tplanes[ 5 ].setComponents( me2, me6, me10, me14 ).normalize();\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: ' + coordinateSystem );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tintersectsObject( object ) {\n\n\t\tif ( object.boundingSphere !== undefined ) {\n\n\t\t\tif ( object.boundingSphere === null ) object.computeBoundingSphere();\n\n\t\t\t_sphere$4.copy( object.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\t} else {\n\n\t\t\tconst geometry = object.geometry;\n\n\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t\t_sphere$4.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\t}\n\n\t\treturn this.intersectsSphere( _sphere$4 );\n\n\t}\n\n\tintersectsSprite( sprite ) {\n\n\t\t_sphere$4.center.set( 0, 0, 0 );\n\t\t_sphere$4.radius = 0.7071067811865476;\n\t\t_sphere$4.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$4 );\n\n\t}\n\n\tintersectsSphere( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$6.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$6.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$6.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$6 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nfunction WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\tif ( attribute.isFloat16BufferAttribute ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\ttype = gl.HALF_FLOAT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t\t}\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t} else if ( array instanceof Uint8ClampedArray ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'THREE.WebGLAttributes: Unsupported buffer data format: ' + array );\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t\tattribute.onUploadCallback();\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isGLBufferAttribute ) {\n\n\t\t\tconst cached = buffers.get( attribute );\n\n\t\t\tif ( ! cached || cached.version < attribute.version ) {\n\n\t\t\t\tbuffers.set( attribute, {\n\t\t\t\t\tbuffer: attribute.buffer,\n\t\t\t\t\ttype: attribute.type,\n\t\t\t\t\tbytesPerElement: attribute.elementSize,\n\t\t\t\t\tversion: attribute.version\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\nclass PlaneGeometry extends BufferGeometry {\n\n\tconstructor( width = 1, height = 1, widthSegments = 1, heightSegments = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PlaneGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments\n\t\t};\n\n\t\tconst width_half = width / 2;\n\t\tconst height_half = height / 2;\n\n\t\tconst gridX = Math.floor( widthSegments );\n\t\tconst gridY = Math.floor( heightSegments );\n\n\t\tconst gridX1 = gridX + 1;\n\t\tconst gridY1 = gridY + 1;\n\n\t\tconst segment_width = width / gridX;\n\t\tconst segment_height = height / gridY;\n\n\t\t//\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\tconst y = iy * segment_height - height_half;\n\n\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\tconst a = ix + gridX1 * iy;\n\t\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PlaneGeometry( data.width, data.height, data.widthSegments, data.heightSegments );\n\n\t}\n\n}\n\nvar alphahash_fragment = \"#ifdef USE_ALPHAHASH\\n\\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\\n#endif\";\n\nvar alphahash_pars_fragment = \"#ifdef USE_ALPHAHASH\\n\\tconst float ALPHA_HASH_SCALE = 0.05;\\n\\tfloat hash2D( vec2 value ) {\\n\\t\\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\\n\\t}\\n\\tfloat hash3D( vec3 value ) {\\n\\t\\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\\n\\t}\\n\\tfloat getAlphaHashThreshold( vec3 position ) {\\n\\t\\tfloat maxDeriv = max(\\n\\t\\t\\tlength( dFdx( position.xyz ) ),\\n\\t\\t\\tlength( dFdy( position.xyz ) )\\n\\t\\t);\\n\\t\\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\\n\\t\\tvec2 pixScales = vec2(\\n\\t\\t\\texp2( floor( log2( pixScale ) ) ),\\n\\t\\t\\texp2( ceil( log2( pixScale ) ) )\\n\\t\\t);\\n\\t\\tvec2 alpha = vec2(\\n\\t\\t\\thash3D( floor( pixScales.x * position.xyz ) ),\\n\\t\\t\\thash3D( floor( pixScales.y * position.xyz ) )\\n\\t\\t);\\n\\t\\tfloat lerpFactor = fract( log2( pixScale ) );\\n\\t\\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\\n\\t\\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\\n\\t\\tvec3 cases = vec3(\\n\\t\\t\\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\\n\\t\\t\\t( x - 0.5 * a ) / ( 1.0 - a ),\\n\\t\\t\\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\\n\\t\\t);\\n\\t\\tfloat threshold = ( x < ( 1.0 - a ) )\\n\\t\\t\\t? ( ( x < a ) ? cases.x : cases.y )\\n\\t\\t\\t: cases.z;\\n\\t\\treturn clamp( threshold , 1.0e-6, 1.0 );\\n\\t}\\n#endif\";\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\\n#endif\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar alphatest_fragment = \"#ifdef USE_ALPHATEST\\n\\tif ( diffuseColor.a < alphaTest ) discard;\\n#endif\";\n\nvar alphatest_pars_fragment = \"#ifdef USE_ALPHATEST\\n\\tuniform float alphaTest;\\n#endif\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\\n\\t#endif\\n#endif\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"vec3 transformed = vec3( position );\\n#ifdef USE_ALPHAHASH\\n\\tvPosition = vec3( position );\\n#endif\";\n\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\n\nvar bsdfs = \"float G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n} // validated\";\n\nvar iridescence_fragment = \"#ifdef USE_IRIDESCENCE\\n\\tconst mat3 XYZ_TO_REC709 = mat3(\\n\\t\\t 3.2404542, -0.9692660,  0.0556434,\\n\\t\\t-1.5371385,  1.8760108, -0.2040259,\\n\\t\\t-0.4985314,  0.0415560,  1.0572252\\n\\t);\\n\\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\\n\\t\\tvec3 sqrtF0 = sqrt( fresnel0 );\\n\\t\\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\\n\\t}\\n\\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\\n\\t}\\n\\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\\n\\t\\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\\n\\t}\\n\\tvec3 evalSensitivity( float OPD, vec3 shift ) {\\n\\t\\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\\n\\t\\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\\n\\t\\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\\n\\t\\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\\n\\t\\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\\n\\t\\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\\n\\t\\txyz /= 1.0685e-7;\\n\\t\\tvec3 rgb = XYZ_TO_REC709 * xyz;\\n\\t\\treturn rgb;\\n\\t}\\n\\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\\n\\t\\tvec3 I;\\n\\t\\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\\n\\t\\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\\n\\t\\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\\n\\t\\tif ( cosTheta2Sq < 0.0 ) {\\n\\t\\t\\treturn vec3( 1.0 );\\n\\t\\t}\\n\\t\\tfloat cosTheta2 = sqrt( cosTheta2Sq );\\n\\t\\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\\n\\t\\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\\n\\t\\tfloat T121 = 1.0 - R12;\\n\\t\\tfloat phi12 = 0.0;\\n\\t\\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\\n\\t\\tfloat phi21 = PI - phi12;\\n\\t\\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\\t\\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\\n\\t\\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\\n\\t\\tvec3 phi23 = vec3( 0.0 );\\n\\t\\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\\n\\t\\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\\n\\t\\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\\n\\t\\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\\n\\t\\tvec3 phi = vec3( phi21 ) + phi23;\\n\\t\\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\\n\\t\\tvec3 r123 = sqrt( R123 );\\n\\t\\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\\n\\t\\tvec3 C0 = R12 + Rs;\\n\\t\\tI = C0;\\n\\t\\tvec3 Cm = Rs - T121;\\n\\t\\tfor ( int m = 1; m <= 2; ++ m ) {\\n\\t\\t\\tCm *= r123;\\n\\t\\t\\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\\n\\t\\t\\tI += Cm * Sm;\\n\\t\\t}\\n\\t\\treturn max( I, vec3( 0.0 ) );\\n\\t}\\n#endif\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vBumpMapUv );\\n\\t\\tvec2 dSTdy = dFdy( vBumpMapUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\\n\\t\\tvec3 vSigmaX = dFdx( surf_pos.xyz );\\n\\t\\tvec3 vSigmaY = dFdy( surf_pos.xyz );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\n\nvar color_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tdiffuseColor *= vColor;\\n#elif defined( USE_COLOR )\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_pars_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvarying vec4 vColor;\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#if defined( USE_COLOR_ALPHA )\\n\\tvColor = vec4( 1.0 );\\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\\n\\tvColor = vec3( 1.0 );\\n#endif\\n#ifdef USE_COLOR\\n\\tvColor *= color;\\n#endif\\n#ifdef USE_INSTANCING_COLOR\\n\\tvColor.xyz *= instanceColor.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nvec3 pow2( const in vec3 x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract( sin( sn ) * c );\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\n#ifdef USE_ALPHAHASH\\n\\tvarying vec3 vPosition;\\n#endif\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat luminance( const in vec3 rgb ) {\\n\\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\\n\\treturn dot( weights, rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n\\treturn m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n}\\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\\n\\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\\n\\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\\n} // validated\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t#define cubeUV_minMipLevel 4.0\\n\\t#define cubeUV_minTileSize 16.0\\n\\tfloat getFace( vec3 direction ) {\\n\\t\\tvec3 absDirection = abs( direction );\\n\\t\\tfloat face = - 1.0;\\n\\t\\tif ( absDirection.x > absDirection.z ) {\\n\\t\\t\\tif ( absDirection.x > absDirection.y )\\n\\t\\t\\t\\tface = direction.x > 0.0 ? 0.0 : 3.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t} else {\\n\\t\\t\\tif ( absDirection.z > absDirection.y )\\n\\t\\t\\t\\tface = direction.z > 0.0 ? 2.0 : 5.0;\\n\\t\\t\\telse\\n\\t\\t\\t\\tface = direction.y > 0.0 ? 1.0 : 4.0;\\n\\t\\t}\\n\\t\\treturn face;\\n\\t}\\n\\tvec2 getUV( vec3 direction, float face ) {\\n\\t\\tvec2 uv;\\n\\t\\tif ( face == 0.0 ) {\\n\\t\\t\\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 1.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\\n\\t\\t} else if ( face == 2.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\\n\\t\\t} else if ( face == 3.0 ) {\\n\\t\\t\\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\\n\\t\\t} else if ( face == 4.0 ) {\\n\\t\\t\\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\\n\\t\\t} else {\\n\\t\\t\\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\\n\\t\\t}\\n\\t\\treturn 0.5 * ( uv + 1.0 );\\n\\t}\\n\\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\\n\\t\\tfloat face = getFace( direction );\\n\\t\\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\\n\\t\\tmipInt = max( mipInt, cubeUV_minMipLevel );\\n\\t\\tfloat faceSize = exp2( mipInt );\\n\\t\\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\\n\\t\\tif ( face > 2.0 ) {\\n\\t\\t\\tuv.y += faceSize;\\n\\t\\t\\tface -= 3.0;\\n\\t\\t}\\n\\t\\tuv.x += face * faceSize;\\n\\t\\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\\n\\t\\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\\n\\t\\tuv.x *= CUBEUV_TEXEL_WIDTH;\\n\\t\\tuv.y *= CUBEUV_TEXEL_HEIGHT;\\n\\t\\t#ifdef texture2DGradEXT\\n\\t\\t\\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\\n\\t\\t#else\\n\\t\\t\\treturn texture2D( envMap, uv ).rgb;\\n\\t\\t#endif\\n\\t}\\n\\t#define cubeUV_r0 1.0\\n\\t#define cubeUV_v0 0.339\\n\\t#define cubeUV_m0 - 2.0\\n\\t#define cubeUV_r1 0.8\\n\\t#define cubeUV_v1 0.276\\n\\t#define cubeUV_m1 - 1.0\\n\\t#define cubeUV_r4 0.4\\n\\t#define cubeUV_v4 0.046\\n\\t#define cubeUV_m4 2.0\\n\\t#define cubeUV_r5 0.305\\n\\t#define cubeUV_v5 0.016\\n\\t#define cubeUV_m5 3.0\\n\\t#define cubeUV_r6 0.21\\n\\t#define cubeUV_v6 0.0038\\n\\t#define cubeUV_m6 4.0\\n\\tfloat roughnessToMip( float roughness ) {\\n\\t\\tfloat mip = 0.0;\\n\\t\\tif ( roughness >= cubeUV_r1 ) {\\n\\t\\t\\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\\n\\t\\t} else if ( roughness >= cubeUV_r4 ) {\\n\\t\\t\\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\\n\\t\\t} else if ( roughness >= cubeUV_r5 ) {\\n\\t\\t\\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\\n\\t\\t} else if ( roughness >= cubeUV_r6 ) {\\n\\t\\t\\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\\n\\t\\t} else {\\n\\t\\t\\tmip = - 2.0 * log2( 1.16 * roughness );\\t\\t}\\n\\t\\treturn mip;\\n\\t}\\n\\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\\n\\t\\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\\n\\t\\tfloat mipF = fract( mip );\\n\\t\\tfloat mipInt = floor( mip );\\n\\t\\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\\n\\t\\tif ( mipF == 0.0 ) {\\n\\t\\t\\treturn vec4( color0, 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\\n\\t\\t\\treturn vec4( mix( color0, color1, mipF ), 1.0 );\\n\\t\\t}\\n\\t}\\n#endif\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\\n#endif\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\n\nvar colorspace_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\n\nvar colorspace_pars_fragment = \"\\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\\n\\tvec3( 0.8224621, 0.177538, 0.0 ),\\n\\tvec3( 0.0331941, 0.9668058, 0.0 ),\\n\\tvec3( 0.0170827, 0.0723974, 0.9105199 )\\n);\\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\\n\\tvec3( 1.2249401, - 0.2249404, 0.0 ),\\n\\tvec3( - 0.0420569, 1.0420571, 0.0 ),\\n\\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\\n);\\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\\n\\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\\n}\\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\\n\\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\\n}\\nvec4 LinearTransferOETF( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 sRGBTransferOETF( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn sRGBTransferOETF( value );\\n}\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\n\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\n\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tvFogDepth = - mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float vFogDepth;\\n#endif\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float vFogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\n\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn vec3( texture2D( gradientMap, coord ).r );\\n\\t#else\\n\\t\\tvec2 fw = fwidth( coord ) * 0.5;\\n\\t\\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\\n\\t#endif\\n}\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\\n\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\treflectedLight.indirectDiffuse += lightMapIrradiance;\\n#endif\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_fragment = \"LambertMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_lambert_pars_fragment = \"varying vec3 vViewPosition;\\nstruct LambertMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Lambert\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Lambert\";\n\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\n#if defined( USE_LIGHT_PROBES )\\n\\tuniform vec3 lightProbe[ 9 ];\\n#endif\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\\n\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\treturn irradiance;\\n}\\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n\\t#if defined ( LEGACY_LIGHTS )\\n\\t\\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\t\\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t\\t}\\n\\t\\treturn 1.0;\\n\\t#else\\n\\t\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\t\\tif ( cutoffDistance > 0.0 ) {\\n\\t\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t\\t}\\n\\t\\treturn distanceFalloff;\\n\\t#endif\\n}\\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\\n\\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\\n\\t\\tlight.color = directionalLight.color;\\n\\t\\tlight.direction = directionalLight.direction;\\n\\t\\tlight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\\n\\t\\tvec3 lVector = pointLight.position - geometryPosition;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tlight.color = pointLight.color;\\n\\t\\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\\n\\t\\tvec3 lVector = spotLight.position - geometryPosition;\\n\\t\\tlight.direction = normalize( lVector );\\n\\t\\tfloat angleCos = dot( light.direction, spotLight.direction );\\n\\t\\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\tif ( spotAttenuation > 0.0 ) {\\n\\t\\t\\tfloat lightDistance = length( lVector );\\n\\t\\t\\tlight.color = spotLight.color * spotAttenuation;\\n\\t\\t\\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tlight.visible = ( light.color != vec3( 0.0 ) );\\n\\t\\t} else {\\n\\t\\t\\tlight.color = vec3( 0.0 );\\n\\t\\t\\tlight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\\n\\t\\tfloat dotNL = dot( normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\n\nvar envmap_physical_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tvec3 getIBLIrradiance( const in vec3 normal ) {\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\tvec3 reflectVec = reflect( - viewDir, normal );\\n\\t\\t\\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t\\t#else\\n\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t#endif\\n\\t}\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\\n\\t\\t\\t#ifdef ENVMAP_TYPE_CUBE_UV\\n\\t\\t\\t\\tvec3 bentNormal = cross( bitangent, viewDir );\\n\\t\\t\\t\\tbentNormal = normalize( cross( bentNormal, bitangent ) );\\n\\t\\t\\t\\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\\n\\t\\t\\t\\treturn getIBLRadiance( viewDir, bentNormal, roughness );\\n\\t\\t\\t#else\\n\\t\\t\\t\\treturn vec3( 0.0 );\\n\\t\\t\\t#endif\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\n\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\nstruct ToonMaterial {\\n\\tvec3 diffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\nstruct BlinnPhongMaterial {\\n\\tvec3 diffuseColor;\\n\\tvec3 specularColor;\\n\\tfloat specularShininess;\\n\\tfloat specularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\\nmaterial.roughness = min( material.roughness, 1.0 );\\n#ifdef IOR\\n\\tmaterial.ior = ior;\\n\\t#ifdef USE_SPECULAR\\n\\t\\tfloat specularIntensityFactor = specularIntensity;\\n\\t\\tvec3 specularColorFactor = specularColor;\\n\\t\\t#ifdef USE_SPECULAR_COLORMAP\\n\\t\\t\\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\\n\\t\\t#endif\\n\\t\\t#ifdef USE_SPECULAR_INTENSITYMAP\\n\\t\\t\\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\\n\\t\\t#endif\\n\\t\\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\\n\\t#else\\n\\t\\tfloat specularIntensityFactor = 1.0;\\n\\t\\tvec3 specularColorFactor = vec3( 1.0 );\\n\\t\\tmaterial.specularF90 = 1.0;\\n\\t#endif\\n\\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\\n\\tmaterial.specularF90 = 1.0;\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\tmaterial.clearcoatF0 = vec3( 0.04 );\\n\\tmaterial.clearcoatF90 = 1.0;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tmaterial.iridescence = iridescence;\\n\\tmaterial.iridescenceIOR = iridescenceIOR;\\n\\t#ifdef USE_IRIDESCENCEMAP\\n\\t\\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\t\\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\\n\\t#else\\n\\t\\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\\n\\t#endif\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheenColor;\\n\\t#ifdef USE_SHEEN_COLORMAP\\n\\t\\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\\n\\t#endif\\n\\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\\n\\t#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\t\\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\\n\\t#endif\\n#endif\\n#ifdef USE_ANISOTROPY\\n\\t#ifdef USE_ANISOTROPYMAP\\n\\t\\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\\n\\t\\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\\n\\t\\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\\n\\t#else\\n\\t\\tvec2 anisotropyV = anisotropyVector;\\n\\t#endif\\n\\tmaterial.anisotropy = length( anisotropyV );\\n\\tanisotropyV /= material.anisotropy;\\n\\tmaterial.anisotropy = saturate( material.anisotropy );\\n\\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\\n\\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;\\n\\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;\\n#endif\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3 diffuseColor;\\n\\tfloat roughness;\\n\\tvec3 specularColor;\\n\\tfloat specularF90;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat clearcoat;\\n\\t\\tfloat clearcoatRoughness;\\n\\t\\tvec3 clearcoatF0;\\n\\t\\tfloat clearcoatF90;\\n\\t#endif\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tfloat iridescence;\\n\\t\\tfloat iridescenceIOR;\\n\\t\\tfloat iridescenceThickness;\\n\\t\\tvec3 iridescenceFresnel;\\n\\t\\tvec3 iridescenceF0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tvec3 sheenColor;\\n\\t\\tfloat sheenRoughness;\\n\\t#endif\\n\\t#ifdef IOR\\n\\t\\tfloat ior;\\n\\t#endif\\n\\t#ifdef USE_TRANSMISSION\\n\\t\\tfloat transmission;\\n\\t\\tfloat transmissionAlpha;\\n\\t\\tfloat thickness;\\n\\t\\tfloat attenuationDistance;\\n\\t\\tvec3 attenuationColor;\\n\\t#endif\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tfloat anisotropy;\\n\\t\\tfloat alphaT;\\n\\t\\tvec3 anisotropyT;\\n\\t\\tvec3 anisotropyB;\\n\\t#endif\\n};\\nvec3 clearcoatSpecular = vec3( 0.0 );\\nvec3 sheenSpecular = vec3( 0.0 );\\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\\n    float x2 = x * x;\\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\\n}\\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\n#ifdef USE_ANISOTROPY\\n\\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\\n\\t\\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\\n\\t\\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\\n\\t\\tfloat v = 0.5 / ( gv + gl );\\n\\t\\treturn saturate(v);\\n\\t}\\n\\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\\n\\t\\tfloat a2 = alphaT * alphaB;\\n\\t\\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\\n\\t\\thighp float v2 = dot( v, v );\\n\\t\\tfloat w2 = a2 / v2;\\n\\t\\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\\n\\t}\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\\n\\t\\tvec3 f0 = material.clearcoatF0;\\n\\t\\tfloat f90 = material.clearcoatF90;\\n\\t\\tfloat roughness = material.clearcoatRoughness;\\n\\t\\tfloat alpha = pow2( roughness );\\n\\t\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\t\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\t\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\t\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\t\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\t\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\t\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\t\\tfloat D = D_GGX( alpha, dotNH );\\n\\t\\treturn F * ( V * D );\\n\\t}\\n#endif\\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\\n\\tvec3 f0 = material.specularColor;\\n\\tfloat f90 = material.specularF90;\\n\\tfloat roughness = material.roughness;\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\\n\\tvec3 F = F_Schlick( f0, f90, dotVH );\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tF = mix( F, material.iridescenceFresnel, material.iridescence );\\n\\t#endif\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tfloat dotTL = dot( material.anisotropyT, lightDir );\\n\\t\\tfloat dotTV = dot( material.anisotropyT, viewDir );\\n\\t\\tfloat dotTH = dot( material.anisotropyT, halfDir );\\n\\t\\tfloat dotBL = dot( material.anisotropyB, lightDir );\\n\\t\\tfloat dotBV = dot( material.anisotropyB, viewDir );\\n\\t\\tfloat dotBH = dot( material.anisotropyB, halfDir );\\n\\t\\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\\n\\t\\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\\n\\t#else\\n\\t\\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\t\\tfloat D = D_GGX( alpha, dotNH );\\n\\t#endif\\n\\treturn F * ( V * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie( float roughness, float dotNH ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tfloat invAlpha = 1.0 / alpha;\\n\\tfloat cos2h = dotNH * dotNH;\\n\\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\\n\\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\\n}\\nfloat V_Neubelt( float dotNV, float dotNL ) {\\n\\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\\n}\\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\\n\\tvec3 halfDir = normalize( lightDir + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, lightDir ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat D = D_Charlie( sheenRoughness, dotNH );\\n\\tfloat V = V_Neubelt( dotNV, dotNL );\\n\\treturn sheenColor * ( D * V );\\n}\\n#endif\\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat r2 = roughness * roughness;\\n\\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\\n\\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\\n\\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\\n\\treturn saturate( DG * RECIPROCAL_PI );\\n}\\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\\n\\treturn fab;\\n}\\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\treturn specularColor * fab.x + specularF90 * fab.y;\\n}\\n#ifdef USE_IRIDESCENCE\\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#else\\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n#endif\\n\\tvec2 fab = DFGApprox( normal, viewDir, roughness );\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\\n\\t#else\\n\\t\\tvec3 Fr = specularColor;\\n\\t#endif\\n\\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\\n\\tfloat Ess = fab.x + fab.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometryNormal;\\n\\t\\tvec3 viewDir = geometryViewDir;\\n\\t\\tvec3 position = geometryPosition;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.roughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = dotNLcc * directLight.color;\\n\\t\\tclearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\\n\\t#endif\\n\\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\\n\\t#endif\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\t#ifdef USE_IRIDESCENCE\\n\\t\\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\\n\\t#else\\n\\t\\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\\n\\t#endif\\n\\tvec3 totalScattering = singleScattering + multiScattering;\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\\n\\treflectedLight.indirectSpecular += radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\n\nvar lights_fragment_begin = \"\\nvec3 geometryPosition = - vViewPosition;\\nvec3 geometryNormal = normal;\\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\nvec3 geometryClearcoatNormal;\\n#ifdef USE_CLEARCOAT\\n\\tgeometryClearcoatNormal = clearcoatNormal;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\\n\\tif ( material.iridescenceThickness == 0.0 ) {\\n\\t\\tmaterial.iridescence = 0.0;\\n\\t} else {\\n\\t\\tmaterial.iridescence = saturate( material.iridescence );\\n\\t}\\n\\tif ( material.iridescence > 0.0 ) {\\n\\t\\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\\n\\t\\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\\n\\t}\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointLightInfo( pointLight, geometryPosition, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\tvec4 spotColor;\\n\\tvec3 spotLightCoord;\\n\\tbool inSpotLightMap;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\\n\\t\\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\\n\\t\\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\\n\\t\\t#else\\n\\t\\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\\n\\t\\t#endif\\n\\t\\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\\n\\t\\t\\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\\n\\t\\t\\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\\n\\t\\t\\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\\n\\t\\t\\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\\n\\t\\t#endif\\n\\t\\t#undef SPOT_LIGHT_MAP_INDEX\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalLightInfo( directionalLight, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\t#if defined( USE_LIGHT_PROBES )\\n\\t\\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\\n\\t#endif\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\n\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getIBLIrradiance( geometryNormal );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\t#ifdef USE_ANISOTROPY\\n\\t\\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\\n\\t#else\\n\\t\\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\\n\\t#endif\\n#endif\";\n\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\\n#endif\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\\n\\t\\n\\t#endif\\n\\tdiffuseColor *= sampledDiffuseColor;\\n#endif\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\n\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\t#if defined( USE_POINTS_UV )\\n\\t\\tvec2 uv = vUv;\\n\\t#else\\n\\t\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n\\t#endif\\n#endif\\n#ifdef USE_MAP\\n\\tdiffuseColor *= texture2D( map, uv );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\n\nvar map_particle_pars_fragment = \"#if defined( USE_POINTS_UV )\\n\\tvarying vec2 vUv;\\n#else\\n\\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\t\\tuniform mat3 uvTransform;\\n\\t#endif\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphcolor_vertex = \"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\\n\\tvColor *= morphTargetBaseInfluence;\\n\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t#if defined( USE_COLOR_ALPHA )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\\n\\t\\t#elif defined( USE_COLOR )\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\t\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\t\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\t\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\\n\\t\\tuniform sampler2DArray morphTargetsTexture;\\n\\t\\tuniform ivec2 morphTargetsTextureSize;\\n\\t\\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\\n\\t\\t\\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\\n\\t\\t\\tint y = texelIndex / morphTargetsTextureSize.x;\\n\\t\\t\\tint x = texelIndex - y * morphTargetsTextureSize.x;\\n\\t\\t\\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\\n\\t\\t\\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\\n\\t\\t}\\n\\t#else\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\tuniform float morphTargetInfluences[ 8 ];\\n\\t\\t#else\\n\\t\\t\\tuniform float morphTargetInfluences[ 4 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\t#ifdef MORPHTARGETS_TEXTURE\\n\\t\\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\\n\\t\\t\\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\\n\\t\\t}\\n\\t#else\\n\\t\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\t\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\t\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\t\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t\\t#ifndef USE_MORPHNORMALS\\n\\t\\t\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\t\\t\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\t\\t\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\t\\t\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar normal_fragment_begin = \"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\\n#ifdef FLAT_SHADED\\n\\tvec3 fdx = dFdx( vViewPosition );\\n\\tvec3 fdy = dFdy( vViewPosition );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal *= faceDirection;\\n\\t#endif\\n#endif\\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\\n\\t#ifdef USE_TANGENT\\n\\t\\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\\n\\t#else\\n\\t\\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\\n\\t\\t#if defined( USE_NORMALMAP )\\n\\t\\t\\tvNormalMapUv\\n\\t\\t#elif defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tvClearcoatNormalMapUv\\n\\t\\t#else\\n\\t\\t\\tvUv\\n\\t\\t#endif\\n\\t\\t);\\n\\t#endif\\n\\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\\n\\t\\ttbn[0] *= faceDirection;\\n\\t\\ttbn[1] *= faceDirection;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\t#ifdef USE_TANGENT\\n\\t\\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\\n\\t#else\\n\\t\\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\\n\\t#endif\\n\\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\\n\\t\\ttbn2[0] *= faceDirection;\\n\\t\\ttbn2[1] *= faceDirection;\\n\\t#endif\\n#endif\\nvec3 nonPerturbedNormal = normal;\";\n\nvar normal_fragment_maps = \"#ifdef USE_NORMALMAP_OBJECTSPACE\\n\\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * faceDirection;\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\tnormal = normalize( tbn * mapN );\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\\n#endif\";\n\nvar normal_pars_fragment = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_pars_vertex = \"#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\";\n\nvar normal_vertex = \"#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef USE_NORMALMAP_OBJECTSPACE\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\\n\\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\\n\\t\\tvec3 q0 = dFdx( eye_pos.xyz );\\n\\t\\tvec3 q1 = dFdy( eye_pos.xyz );\\n\\t\\tvec2 st0 = dFdx( uv.st );\\n\\t\\tvec2 st1 = dFdy( uv.st );\\n\\t\\tvec3 N = surf_norm;\\n\\t\\tvec3 q1perp = cross( q1, N );\\n\\t\\tvec3 q0perp = cross( N, q0 );\\n\\t\\tvec3 T = q1perp * st0.x + q0perp * st1.x;\\n\\t\\tvec3 B = q1perp * st0.y + q0perp * st1.y;\\n\\t\\tfloat det = max( dot( T, T ), dot( B, B ) );\\n\\t\\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\\n\\t\\treturn mat3( T * scale, B * scale, N );\\n\\t}\\n#endif\";\n\nvar clearcoat_normal_fragment_begin = \"#ifdef USE_CLEARCOAT\\n\\tvec3 clearcoatNormal = nonPerturbedNormal;\\n#endif\";\n\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\\n#endif\";\n\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\";\n\nvar iridescence_pars_fragment = \"#ifdef USE_IRIDESCENCEMAP\\n\\tuniform sampler2D iridescenceMap;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tuniform sampler2D iridescenceThicknessMap;\\n#endif\";\n\nvar opaque_fragment = \"#ifdef OPAQUE\\ndiffuseColor.a = 1.0;\\n#endif\\n#ifdef USE_TRANSMISSION\\ndiffuseColor.a *= material.transmissionAlpha;\\n#endif\\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec2 packDepthToRG( in highp float v ) {\\n\\treturn packDepthToRGBA( v ).yx;\\n}\\nfloat unpackRGToDepth( const in highp vec2 v ) {\\n\\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\\n\\treturn depth * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * depth - far );\\n}\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\n\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\n\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\n\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#if NUM_SPOT_LIGHT_COORDS > 0\\n\\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#if NUM_SPOT_LIGHT_MAPS > 0\\n\\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\\n\\t\\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar shadowmap_pars_vertex = \"#if NUM_SPOT_LIGHT_COORDS > 0\\n\\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\\n\\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\\n#endif\\n#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\n\nvar shadowmap_vertex = \"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\\n\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\tvec4 shadowWorldPosition;\\n#endif\\n#if defined( USE_SHADOWMAP )\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if NUM_SPOT_LIGHT_COORDS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition;\\n\\t\\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\t\\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\\n\\t\\t#endif\\n\\t\\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\tuniform highp sampler2D boneTexture;\\n\\tuniform int boneTextureSize;\\n\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\tfloat j = i * 4.0;\\n\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\ty = dy * ( y + 0.5 );\\n\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\treturn bone;\\n\\t}\\n#endif\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate( a ) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn saturate( toneMappingExposure * color );\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\n\nvar transmission_fragment = \"#ifdef USE_TRANSMISSION\\n\\tmaterial.transmission = transmission;\\n\\tmaterial.transmissionAlpha = 1.0;\\n\\tmaterial.thickness = thickness;\\n\\tmaterial.attenuationDistance = attenuationDistance;\\n\\tmaterial.attenuationColor = attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\\n\\t#endif\\n\\tvec3 pos = vWorldPosition;\\n\\tvec3 v = normalize( cameraPosition - pos );\\n\\tvec3 n = inverseTransformDirection( normal, viewMatrix );\\n\\tvec4 transmitted = getIBLVolumeRefraction(\\n\\t\\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\\n\\t\\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\\n\\t\\tmaterial.attenuationColor, material.attenuationDistance );\\n\\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\\n\\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\\n#endif\";\n\nvar transmission_pars_fragment = \"#ifdef USE_TRANSMISSION\\n\\tuniform float transmission;\\n\\tuniform float thickness;\\n\\tuniform float attenuationDistance;\\n\\tuniform vec3 attenuationColor;\\n\\t#ifdef USE_TRANSMISSIONMAP\\n\\t\\tuniform sampler2D transmissionMap;\\n\\t#endif\\n\\t#ifdef USE_THICKNESSMAP\\n\\t\\tuniform sampler2D thicknessMap;\\n\\t#endif\\n\\tuniform vec2 transmissionSamplerSize;\\n\\tuniform sampler2D transmissionSamplerMap;\\n\\tuniform mat4 modelMatrix;\\n\\tuniform mat4 projectionMatrix;\\n\\tvarying vec3 vWorldPosition;\\n\\tfloat w0( float a ) {\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\\n\\t}\\n\\tfloat w1( float a ) {\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\\n\\t}\\n\\tfloat w2( float a ){\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\\n\\t}\\n\\tfloat w3( float a ) {\\n\\t\\treturn ( 1.0 / 6.0 ) * ( a * a * a );\\n\\t}\\n\\tfloat g0( float a ) {\\n\\t\\treturn w0( a ) + w1( a );\\n\\t}\\n\\tfloat g1( float a ) {\\n\\t\\treturn w2( a ) + w3( a );\\n\\t}\\n\\tfloat h0( float a ) {\\n\\t\\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\\n\\t}\\n\\tfloat h1( float a ) {\\n\\t\\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\\n\\t}\\n\\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\\n\\t\\tuv = uv * texelSize.zw + 0.5;\\n\\t\\tvec2 iuv = floor( uv );\\n\\t\\tvec2 fuv = fract( uv );\\n\\t\\tfloat g0x = g0( fuv.x );\\n\\t\\tfloat g1x = g1( fuv.x );\\n\\t\\tfloat h0x = h0( fuv.x );\\n\\t\\tfloat h1x = h1( fuv.x );\\n\\t\\tfloat h0y = h0( fuv.y );\\n\\t\\tfloat h1y = h1( fuv.y );\\n\\t\\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\\n\\t\\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\\n\\t\\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\\n\\t\\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\\n\\t\\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\\n\\t\\t\\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\\n\\t}\\n\\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\\n\\t\\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\\n\\t\\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\\n\\t\\tvec2 fLodSizeInv = 1.0 / fLodSize;\\n\\t\\tvec2 cLodSizeInv = 1.0 / cLodSize;\\n\\t\\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\\n\\t\\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\\n\\t\\treturn mix( fSample, cSample, fract( lod ) );\\n\\t}\\n\\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\\n\\t\\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\\n\\t\\tvec3 modelScale;\\n\\t\\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\\n\\t\\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\\n\\t\\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\\n\\t\\treturn normalize( refractionVector ) * thickness * modelScale;\\n\\t}\\n\\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\\n\\t\\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\\n\\t}\\n\\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\\n\\t\\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\\n\\t\\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\\n\\t}\\n\\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tif ( isinf( attenuationDistance ) ) {\\n\\t\\t\\treturn vec3( 1.0 );\\n\\t\\t} else {\\n\\t\\t\\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\\n\\t\\t\\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\\t\\t\\treturn transmittance;\\n\\t\\t}\\n\\t}\\n\\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\\n\\t\\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\\n\\t\\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\\n\\t\\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\\n\\t\\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\\n\\t\\tvec3 refractedRayExit = position + transmissionRay;\\n\\t\\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\\n\\t\\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\\n\\t\\trefractionCoords += 1.0;\\n\\t\\trefractionCoords /= 2.0;\\n\\t\\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\\n\\t\\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\\n\\t\\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\\n\\t\\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\\n\\t\\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\\n\\t\\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\\n\\t}\\n#endif\";\n\nvar uv_pars_fragment = \"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\\n\\tvarying vec2 vUv;\\n#endif\\n#ifdef USE_MAP\\n\\tvarying vec2 vMapUv;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tvarying vec2 vAlphaMapUv;\\n#endif\\n#ifdef USE_LIGHTMAP\\n\\tvarying vec2 vLightMapUv;\\n#endif\\n#ifdef USE_AOMAP\\n\\tvarying vec2 vAoMapUv;\\n#endif\\n#ifdef USE_BUMPMAP\\n\\tvarying vec2 vBumpMapUv;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tvarying vec2 vNormalMapUv;\\n#endif\\n#ifdef USE_EMISSIVEMAP\\n\\tvarying vec2 vEmissiveMapUv;\\n#endif\\n#ifdef USE_METALNESSMAP\\n\\tvarying vec2 vMetalnessMapUv;\\n#endif\\n#ifdef USE_ROUGHNESSMAP\\n\\tvarying vec2 vRoughnessMapUv;\\n#endif\\n#ifdef USE_ANISOTROPYMAP\\n\\tvarying vec2 vAnisotropyMapUv;\\n#endif\\n#ifdef USE_CLEARCOATMAP\\n\\tvarying vec2 vClearcoatMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvarying vec2 vClearcoatNormalMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tvarying vec2 vClearcoatRoughnessMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCEMAP\\n\\tvarying vec2 vIridescenceMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tvarying vec2 vIridescenceThicknessMapUv;\\n#endif\\n#ifdef USE_SHEEN_COLORMAP\\n\\tvarying vec2 vSheenColorMapUv;\\n#endif\\n#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\tvarying vec2 vSheenRoughnessMapUv;\\n#endif\\n#ifdef USE_SPECULARMAP\\n\\tvarying vec2 vSpecularMapUv;\\n#endif\\n#ifdef USE_SPECULAR_COLORMAP\\n\\tvarying vec2 vSpecularColorMapUv;\\n#endif\\n#ifdef USE_SPECULAR_INTENSITYMAP\\n\\tvarying vec2 vSpecularIntensityMapUv;\\n#endif\\n#ifdef USE_TRANSMISSIONMAP\\n\\tuniform mat3 transmissionMapTransform;\\n\\tvarying vec2 vTransmissionMapUv;\\n#endif\\n#ifdef USE_THICKNESSMAP\\n\\tuniform mat3 thicknessMapTransform;\\n\\tvarying vec2 vThicknessMapUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\\n\\tvarying vec2 vUv;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform mat3 mapTransform;\\n\\tvarying vec2 vMapUv;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform mat3 alphaMapTransform;\\n\\tvarying vec2 vAlphaMapUv;\\n#endif\\n#ifdef USE_LIGHTMAP\\n\\tuniform mat3 lightMapTransform;\\n\\tvarying vec2 vLightMapUv;\\n#endif\\n#ifdef USE_AOMAP\\n\\tuniform mat3 aoMapTransform;\\n\\tvarying vec2 vAoMapUv;\\n#endif\\n#ifdef USE_BUMPMAP\\n\\tuniform mat3 bumpMapTransform;\\n\\tvarying vec2 vBumpMapUv;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tuniform mat3 normalMapTransform;\\n\\tvarying vec2 vNormalMapUv;\\n#endif\\n#ifdef USE_DISPLACEMENTMAP\\n\\tuniform mat3 displacementMapTransform;\\n\\tvarying vec2 vDisplacementMapUv;\\n#endif\\n#ifdef USE_EMISSIVEMAP\\n\\tuniform mat3 emissiveMapTransform;\\n\\tvarying vec2 vEmissiveMapUv;\\n#endif\\n#ifdef USE_METALNESSMAP\\n\\tuniform mat3 metalnessMapTransform;\\n\\tvarying vec2 vMetalnessMapUv;\\n#endif\\n#ifdef USE_ROUGHNESSMAP\\n\\tuniform mat3 roughnessMapTransform;\\n\\tvarying vec2 vRoughnessMapUv;\\n#endif\\n#ifdef USE_ANISOTROPYMAP\\n\\tuniform mat3 anisotropyMapTransform;\\n\\tvarying vec2 vAnisotropyMapUv;\\n#endif\\n#ifdef USE_CLEARCOATMAP\\n\\tuniform mat3 clearcoatMapTransform;\\n\\tvarying vec2 vClearcoatMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform mat3 clearcoatNormalMapTransform;\\n\\tvarying vec2 vClearcoatNormalMapUv;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform mat3 clearcoatRoughnessMapTransform;\\n\\tvarying vec2 vClearcoatRoughnessMapUv;\\n#endif\\n#ifdef USE_SHEEN_COLORMAP\\n\\tuniform mat3 sheenColorMapTransform;\\n\\tvarying vec2 vSheenColorMapUv;\\n#endif\\n#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\tuniform mat3 sheenRoughnessMapTransform;\\n\\tvarying vec2 vSheenRoughnessMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCEMAP\\n\\tuniform mat3 iridescenceMapTransform;\\n\\tvarying vec2 vIridescenceMapUv;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tuniform mat3 iridescenceThicknessMapTransform;\\n\\tvarying vec2 vIridescenceThicknessMapUv;\\n#endif\\n#ifdef USE_SPECULARMAP\\n\\tuniform mat3 specularMapTransform;\\n\\tvarying vec2 vSpecularMapUv;\\n#endif\\n#ifdef USE_SPECULAR_COLORMAP\\n\\tuniform mat3 specularColorMapTransform;\\n\\tvarying vec2 vSpecularColorMapUv;\\n#endif\\n#ifdef USE_SPECULAR_INTENSITYMAP\\n\\tuniform mat3 specularIntensityMapTransform;\\n\\tvarying vec2 vSpecularIntensityMapUv;\\n#endif\\n#ifdef USE_TRANSMISSIONMAP\\n\\tuniform mat3 transmissionMapTransform;\\n\\tvarying vec2 vTransmissionMapUv;\\n#endif\\n#ifdef USE_THICKNESSMAP\\n\\tuniform mat3 thicknessMapTransform;\\n\\tvarying vec2 vThicknessMapUv;\\n#endif\";\n\nvar uv_vertex = \"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\\n\\tvUv = vec3( uv, 1 ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_LIGHTMAP\\n\\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_AOMAP\\n\\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_BUMPMAP\\n\\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_NORMALMAP\\n\\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_DISPLACEMENTMAP\\n\\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_EMISSIVEMAP\\n\\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_METALNESSMAP\\n\\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_ROUGHNESSMAP\\n\\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_ANISOTROPYMAP\\n\\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_CLEARCOATMAP\\n\\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_IRIDESCENCEMAP\\n\\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\\n\\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SHEEN_COLORMAP\\n\\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SPECULARMAP\\n\\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SPECULAR_COLORMAP\\n\\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_SPECULAR_INTENSITYMAP\\n\\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_TRANSMISSIONMAP\\n\\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\\n#endif\\n#ifdef USE_THICKNESSMAP\\n\\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\n\nconst vertex$h = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\n\nconst fragment$h = \"uniform sampler2D t2D;\\nuniform float backgroundIntensity;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\t#ifdef DECODE_VIDEO_TEXTURE\\n\\t\\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\\n\\t#endif\\n\\ttexColor.rgb *= backgroundIntensity;\\n\\tgl_FragColor = texColor;\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\";\n\nconst vertex$g = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nconst fragment$g = \"#ifdef ENVMAP_TYPE_CUBE\\n\\tuniform samplerCube envMap;\\n#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\tuniform sampler2D envMap;\\n#endif\\nuniform float flipEnvMap;\\nuniform float backgroundBlurriness;\\nuniform float backgroundIntensity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\\n\\t#else\\n\\t\\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\t#endif\\n\\ttexColor.rgb *= backgroundIntensity;\\n\\tgl_FragColor = texColor;\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\";\n\nconst vertex$f = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nconst fragment$f = \"uniform samplerCube tCube;\\nuniform float tFlip;\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\nvoid main() {\\n\\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\\n\\tgl_FragColor = texColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\";\n\nconst vertex$e = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\n\nconst fragment$e = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\n\nconst vertex$d = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\n\nconst fragment$d = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\n\nconst vertex$c = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\n\nconst fragment$c = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tgl_FragColor = texture2D( tEquirect, sampleUV );\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n}\";\n\nconst vertex$b = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$b = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$a = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinbase_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$a = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$9 = \"#define LAMBERT\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$9 = \"#define LAMBERT\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_lambert_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_lambert_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$8 = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\n\nconst fragment$8 = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$7 = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$7 = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <normal_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n\\t#ifdef OPAQUE\\n\\t\\tgl_FragColor.a = 1.0;\\n\\t#endif\\n}\";\n\nconst vertex$6 = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$6 = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$5 = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifdef USE_TRANSMISSION\\n\\tvarying vec3 vWorldPosition;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n#ifdef USE_TRANSMISSION\\n\\tvWorldPosition = worldPosition.xyz;\\n#endif\\n}\";\n\nconst fragment$5 = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define IOR\\n\\t#define USE_SPECULAR\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef IOR\\n\\tuniform float ior;\\n#endif\\n#ifdef USE_SPECULAR\\n\\tuniform float specularIntensity;\\n\\tuniform vec3 specularColor;\\n\\t#ifdef USE_SPECULAR_COLORMAP\\n\\t\\tuniform sampler2D specularColorMap;\\n\\t#endif\\n\\t#ifdef USE_SPECULAR_INTENSITYMAP\\n\\t\\tuniform sampler2D specularIntensityMap;\\n\\t#endif\\n#endif\\n#ifdef USE_CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_IRIDESCENCE\\n\\tuniform float iridescence;\\n\\tuniform float iridescenceIOR;\\n\\tuniform float iridescenceThicknessMinimum;\\n\\tuniform float iridescenceThicknessMaximum;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheenColor;\\n\\tuniform float sheenRoughness;\\n\\t#ifdef USE_SHEEN_COLORMAP\\n\\t\\tuniform sampler2D sheenColorMap;\\n\\t#endif\\n\\t#ifdef USE_SHEEN_ROUGHNESSMAP\\n\\t\\tuniform sampler2D sheenRoughnessMap;\\n\\t#endif\\n#endif\\n#ifdef USE_ANISOTROPY\\n\\tuniform vec2 anisotropyVector;\\n\\t#ifdef USE_ANISOTROPYMAP\\n\\t\\tuniform sampler2D anisotropyMap;\\n\\t#endif\\n#endif\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <iridescence_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_physical_pars_fragment>\\n#include <transmission_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <iridescence_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\\n\\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\\n\\t#include <transmission_fragment>\\n\\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\\n\\t#ifdef USE_SHEEN\\n\\t\\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\\n\\t\\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT\\n\\t\\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\\n\\t\\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\\n\\t\\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\\n\\t#endif\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$4 = \"#define TOON\\nvarying vec3 vViewPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <normal_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <normal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$4 = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <normal_pars_fragment>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nconst vertex$3 = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\n#ifdef USE_POINTS_UV\\n\\tvarying vec2 vUv;\\n\\tuniform mat3 uvTransform;\\n#endif\\nvoid main() {\\n\\t#ifdef USE_POINTS_UV\\n\\t\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\t#endif\\n\\t#include <color_vertex>\\n\\t#include <morphcolor_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$3 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nconst vertex$2 = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$2 = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <logdepthbuf_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\t#include <logdepthbuf_fragment>\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst vertex$1 = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst fragment$1 = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <alphatest_pars_fragment>\\n#include <alphahash_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <alphahash_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\t#include <opaque_fragment>\\n\\t#include <tonemapping_fragment>\\n\\t#include <colorspace_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nconst ShaderChunk = {\n\talphahash_fragment: alphahash_fragment,\n\talphahash_pars_fragment: alphahash_pars_fragment,\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\talphatest_pars_fragment: alphatest_pars_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tiridescence_fragment: iridescence_fragment,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tcolorspace_fragment: colorspace_fragment,\n\tcolorspace_pars_fragment: colorspace_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_fragment: lights_lambert_fragment,\n\tlights_lambert_pars_fragment: lights_lambert_pars_fragment,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphcolor_vertex: morphcolor_vertex,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormal_pars_fragment: normal_pars_fragment,\n\tnormal_pars_vertex: normal_pars_vertex,\n\tnormal_vertex: normal_vertex,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tiridescence_pars_fragment: iridescence_pars_fragment,\n\topaque_fragment: opaque_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\ttransmission_fragment: transmission_fragment,\n\ttransmission_pars_fragment: transmission_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_vert: vertex$h,\n\tbackground_frag: fragment$h,\n\tbackgroundCube_vert: vertex$g,\n\tbackgroundCube_frag: fragment$g,\n\tcube_vert: vertex$f,\n\tcube_frag: fragment$f,\n\tdepth_vert: vertex$e,\n\tdepth_frag: fragment$e,\n\tdistanceRGBA_vert: vertex$d,\n\tdistanceRGBA_frag: fragment$d,\n\tequirect_vert: vertex$c,\n\tequirect_frag: fragment$c,\n\tlinedashed_vert: vertex$b,\n\tlinedashed_frag: fragment$b,\n\tmeshbasic_vert: vertex$a,\n\tmeshbasic_frag: fragment$a,\n\tmeshlambert_vert: vertex$9,\n\tmeshlambert_frag: fragment$9,\n\tmeshmatcap_vert: vertex$8,\n\tmeshmatcap_frag: fragment$8,\n\tmeshnormal_vert: vertex$7,\n\tmeshnormal_frag: fragment$7,\n\tmeshphong_vert: vertex$6,\n\tmeshphong_frag: fragment$6,\n\tmeshphysical_vert: vertex$5,\n\tmeshphysical_frag: fragment$5,\n\tmeshtoon_vert: vertex$4,\n\tmeshtoon_frag: fragment$4,\n\tpoints_vert: vertex$3,\n\tpoints_frag: fragment$3,\n\tshadow_vert: vertex$2,\n\tshadow_frag: fragment$2,\n\tsprite_vert: vertex$1,\n\tsprite_frag: fragment$1\n};\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tmapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\n\t\talphaMap: { value: null },\n\t\talphaMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\n\t\talphaTest: { value: 0 }\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\t\tspecularMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 }, // basic, lambert, phong\n\t\tior: { value: 1.5 }, // physical\n\t\trefractionRatio: { value: 0.98 }, // basic, lambert, phong\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 },\n\t\taoMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 },\n\t\tlightMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\tnormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null },\n\t\temissiveMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null },\n\t\tmetalnessMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null },\n\t\troughnessMapTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: /*@__PURE__*/ new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotLightMap: { value: [] },\n\t\tspotShadowMap: { value: [] },\n\t\tspotLightMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} },\n\n\t\tltc_1: { value: null },\n\t\tltc_2: { value: null }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\talphaMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\talphaTest: { value: 0 },\n\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: /*@__PURE__*/ new Color( 0xffffff ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: /*@__PURE__*/ new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\tmapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\talphaMap: { value: null },\n\t\talphaMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\talphaTest: { value: 0 }\n\n\t}\n\n};\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: /*@__PURE__*/ new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: /*@__PURE__*/ new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshnormal_vert,\n\t\tfragmentShader: ShaderChunk.meshnormal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t\tbackgroundIntensity: { value: 1 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\n\tbackgroundCube: {\n\n\t\tuniforms: {\n\t\t\tenvMap: { value: null },\n\t\t\tflipEnvMap: { value: - 1 },\n\t\t\tbackgroundBlurriness: { value: 0 },\n\t\t\tbackgroundIntensity: { value: 1 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.backgroundCube_vert,\n\t\tfragmentShader: ShaderChunk.backgroundCube_frag\n\n\t},\n\n\tcube: {\n\n\t\tuniforms: {\n\t\t\ttCube: { value: null },\n\t\t\ttFlip: { value: - 1 },\n\t\t\topacity: { value: 1.0 }\n\t\t},\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: /*@__PURE__*/ new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: /*@__PURE__*/ new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: /*@__PURE__*/ mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tclearcoatNormalMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tclearcoatNormalScale: { value: /*@__PURE__*/ new Vector2( 1, 1 ) },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatRoughnessMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tiridescence: { value: 0 },\n\t\t\tiridescenceMap: { value: null },\n\t\t\tiridescenceMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tiridescenceIOR: { value: 1.3 },\n\t\t\tiridescenceThicknessMinimum: { value: 100 },\n\t\t\tiridescenceThicknessMaximum: { value: 400 },\n\t\t\tiridescenceThicknessMap: { value: null },\n\t\t\tiridescenceThicknessMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tsheen: { value: 0 },\n\t\t\tsheenColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tsheenColorMap: { value: null },\n\t\t\tsheenColorMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tsheenRoughness: { value: 1 },\n\t\t\tsheenRoughnessMap: { value: null },\n\t\t\tsheenRoughnessMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\ttransmission: { value: 0 },\n\t\t\ttransmissionMap: { value: null },\n\t\t\ttransmissionMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\ttransmissionSamplerSize: { value: /*@__PURE__*/ new Vector2() },\n\t\t\ttransmissionSamplerMap: { value: null },\n\t\t\tthickness: { value: 0 },\n\t\t\tthicknessMap: { value: null },\n\t\t\tthicknessMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tattenuationDistance: { value: 0 },\n\t\t\tattenuationColor: { value: /*@__PURE__*/ new Color( 0x000000 ) },\n\t\t\tspecularColor: { value: /*@__PURE__*/ new Color( 1, 1, 1 ) },\n\t\t\tspecularColorMap: { value: null },\n\t\t\tspecularColorMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tspecularIntensity: { value: 1 },\n\t\t\tspecularIntensityMap: { value: null },\n\t\t\tspecularIntensityMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t\tanisotropyVector: { value: /*@__PURE__*/ new Vector2() },\n\t\t\tanisotropyMap: { value: null },\n\t\t\tanisotropyMapTransform: { value: /*@__PURE__*/ new Matrix3() },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\nconst _rgb = { r: 0, b: 0, g: 0 };\n\nfunction WebGLBackground( renderer, cubemaps, cubeuvmaps, state, objects, alpha, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = alpha === true ? 0 : 1;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene ) {\n\n\t\tlet forceClear = false;\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\tif ( background && background.isTexture ) {\n\n\t\t\tconst usePMREM = scene.backgroundBlurriness > 0; // use PMREM if the user wants to blur the background\n\t\t\tbackground = ( usePMREM ? cubeuvmaps : cubemaps ).get( background );\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tconst environmentBlendMode = renderer.xr.getEnvironmentBlendMode();\n\n\t\tif ( environmentBlendMode === 'additive' ) {\n\n\t\t\tstate.buffers.color.setClear( 0, 0, 0, 1, premultipliedAlpha );\n\n\t\t} else if ( environmentBlendMode === 'alpha-blend' ) {\n\n\t\t\tstate.buffers.color.setClear( 0, 0, 0, 0, premultipliedAlpha );\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.backgroundCube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.backgroundCube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.backgroundCube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// add \"envMap\" material property so the renderer can evaluate it like for built-in materials\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tboxMesh.material.uniforms.envMap.value = background;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = ( background.isCubeTexture && background.isRenderTargetTexture === false ) ? - 1 : 1;\n\t\t\tboxMesh.material.uniforms.backgroundBlurriness.value = scene.backgroundBlurriness;\n\t\t\tboxMesh.material.uniforms.backgroundIntensity.value = scene.backgroundIntensity;\n\t\t\tboxMesh.material.toneMapped = ColorManagement.getTransfer( background.colorSpace ) !== SRGBTransfer;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tboxMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// add \"map\" material property so the renderer can evaluate it like for built-in materials\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\t\t\tplaneMesh.material.uniforms.backgroundIntensity.value = scene.backgroundIntensity;\n\t\t\tplaneMesh.material.toneMapped = ColorManagement.getTransfer( background.colorSpace ) !== SRGBTransfer;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\tplaneMesh.layers.enableAll();\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tcolor.getRGB( _rgb, getUnlitUniformColorSpace( renderer ) );\n\n\t\tstate.buffers.color.setClear( _rgb.r, _rgb.g, _rgb.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha = 1 ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\tlet forceUpdate = false;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( object, geometry, program, index );\n\n\t\t\tif ( updateBuffers ) saveCache( object, geometry, program, index );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tif ( updateBuffers || forceUpdate ) {\n\n\t\t\tforceUpdate = false;\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( gl.ELEMENT_ARRAY_BUFFER, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {},\n\t\t\tindex: null\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( object, geometry, program, index ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tconst cachedAttribute = cachedAttributes[ name ];\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( cachedAttribute === undefined ) return true;\n\n\t\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\t\tif ( geometryAttribute && cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( currentState.attributesNum !== attributesNum ) return true;\n\n\t\tif ( currentState.index !== index ) return true;\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( object, geometry, program, index ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\t\tlet attributesNum = 0;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet attribute = attributes[ name ];\n\n\t\t\t\tif ( attribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) attribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) attribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tconst data = {};\n\t\t\t\tdata.attribute = attribute;\n\n\t\t\t\tif ( attribute && attribute.data ) {\n\n\t\t\t\t\tdata.data = attribute.data;\n\n\t\t\t\t}\n\n\t\t\t\tcache[ name ] = data;\n\n\t\t\t\tattributesNum ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\t\tcurrentState.attributesNum = attributesNum;\n\n\t\tcurrentState.index = index;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset, integer ) {\n\n\t\tif ( integer === true ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute.location >= 0 ) {\n\n\t\t\t\tlet geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute === undefined ) {\n\n\t\t\t\t\tif ( name === 'instanceMatrix' && object.instanceMatrix ) geometryAttribute = object.instanceMatrix;\n\t\t\t\t\tif ( name === 'instanceColor' && object.instanceColor ) geometryAttribute = object.instanceColor;\n\n\t\t\t\t}\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\t// check for integer attributes (WebGL 2 only)\n\n\t\t\t\t\tconst integer = ( capabilities.isWebGL2 === true && ( type === gl.INT || type === gl.UNSIGNED_INT || geometryAttribute.gpuType === IntType ) );\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, data.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tstride * bytesPerElement,\n\t\t\t\t\t\t\t\t( offset + ( size / programAttribute.locationSize ) * i ) * bytesPerElement,\n\t\t\t\t\t\t\t\tinteger\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute.location + i, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( object.isInstancedMesh !== true && geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\t\tenableAttribute( programAttribute.location + i );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\t\tfor ( let i = 0; i < programAttribute.locationSize; i ++ ) {\n\n\t\t\t\t\t\t\tvertexAttribPointer(\n\t\t\t\t\t\t\t\tprogramAttribute.location + i,\n\t\t\t\t\t\t\t\tsize / programAttribute.locationSize,\n\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\tnormalized,\n\t\t\t\t\t\t\t\tsize * bytesPerElement,\n\t\t\t\t\t\t\t\t( size / programAttribute.locationSize ) * i * bytesPerElement,\n\t\t\t\t\t\t\t\tinteger\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute.location, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute.location, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\t\tforceUpdate = true;\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatibility\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\tconst isWebGL2 = typeof WebGL2RenderingContext !== 'undefined' && gl.constructor.name === 'WebGL2RenderingContext';\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst drawBuffers = isWebGL2 || extensions.has( 'WEBGL_draw_buffers' );\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tconst maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tconst maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tconst maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tconst maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tconst maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tconst maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tconst maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || extensions.has( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( gl.MAX_SAMPLES ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tdrawBuffers: drawBuffers,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\nfunction WebGLClipping( properties ) {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\n\t};\n\n\tthis.setGlobalState = function ( planes, camera ) {\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\n\t};\n\n\tthis.setState = function ( material, camera, useCache ) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, useCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\nfunction WebGLCubeMaps( renderer ) {\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping( texture, mapping ) {\n\n\t\tif ( mapping === EquirectangularReflectionMapping ) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if ( mapping === EquirectangularRefractionMapping ) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture && texture.isRenderTargetTexture === false ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping ) {\n\n\t\t\t\tif ( cubemaps.has( texture ) ) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get( texture ).texture;\n\t\t\t\t\treturn mapTextureMapping( cubemap, texture.mapping );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif ( image && image.height > 0 ) {\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget( image.height / 2 );\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture( renderer, texture );\n\t\t\t\t\t\tcubemaps.set( texture, renderTarget );\n\n\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\treturn mapTextureMapping( renderTarget.texture, texture.mapping );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemap = cubemaps.get( texture );\n\n\t\tif ( cubemap !== undefined ) {\n\n\t\t\tcubemaps.delete( texture );\n\t\t\tcubemap.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass OrthographicCamera extends Camera {\n\n\tconstructor( left = - 1, right = 1, top = 1, bottom = - 1, near = 0.1, far = 2000 ) {\n\n\t\tsuper();\n\n\t\tthis.isOrthographicCamera = true;\n\n\t\tthis.type = 'OrthographicCamera';\n\n\t\tthis.zoom = 1;\n\t\tthis.view = null;\n\n\t\tthis.left = left;\n\t\tthis.right = right;\n\t\tthis.top = top;\n\t\tthis.bottom = bottom;\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t}\n\n\tsetViewOffset( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tclearViewOffset() {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t}\n\n\tupdateProjectionMatrix() {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far, this.coordinateSystem );\n\n\t\tthis.projectionMatrixInverse.copy( this.projectionMatrix ).invert();\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst LOD_MIN = 4;\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst _flatCamera = /*@__PURE__*/ new OrthographicCamera();\nconst _clearColor = /*@__PURE__*/ new Color();\nlet _oldTarget = null;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\t/*@__PURE__*/ new Vector3( 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, 1 ),\n\t/*@__PURE__*/ new Vector3( 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( - 1, 1, - 1 ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, INV_PHI ),\n\t/*@__PURE__*/ new Vector3( 0, PHI, - INV_PHI ),\n\t/*@__PURE__*/ new Vector3( INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( - INV_PHI, 0, PHI ),\n\t/*@__PURE__*/ new Vector3( PHI, INV_PHI, 0 ),\n\t/*@__PURE__*/ new Vector3( - PHI, INV_PHI, 0 ) ];\n\n/**\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n *\n * Paper: Fast, Accurate Image-Based Lighting\n * https://drive.google.com/file/d/15y8r_UpKlU9SvV4ILb0C3qCPecS8pvLz/view\n*/\n\nclass PMREMGenerator {\n\n\tconstructor( renderer ) {\n\n\t\tthis._renderer = renderer;\n\t\tthis._pingPongRenderTarget = null;\n\n\t\tthis._lodMax = 0;\n\t\tthis._cubeSize = 0;\n\t\tthis._lodPlanes = [];\n\t\tthis._sizeLods = [];\n\t\tthis._sigmas = [];\n\n\t\tthis._blurMaterial = null;\n\t\tthis._cubemapMaterial = null;\n\t\tthis._equirectMaterial = null;\n\n\t\tthis._compileMaterial( this._blurMaterial );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\n\t\tthis._setSize( 256 );\n\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\t\tcubeUVRenderTarget.depthBuffer = true;\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * or HDR. The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular( equirectangular, renderTarget = null ) {\n\n\t\treturn this._fromTexture( equirectangular, renderTarget );\n\n\t}\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * or HDR. The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap( cubemap, renderTarget = null ) {\n\n\t\treturn this._fromTexture( cubemap, renderTarget );\n\n\t}\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader() {\n\n\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\t\t\tthis._compileMaterial( this._cubemapMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader() {\n\n\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\t\t\tthis._compileMaterial( this._equirectMaterial );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose() {\n\n\t\tthis._dispose();\n\n\t\tif ( this._cubemapMaterial !== null ) this._cubemapMaterial.dispose();\n\t\tif ( this._equirectMaterial !== null ) this._equirectMaterial.dispose();\n\n\t}\n\n\t// private interface\n\n\t_setSize( cubeSize ) {\n\n\t\tthis._lodMax = Math.floor( Math.log2( cubeSize ) );\n\t\tthis._cubeSize = Math.pow( 2, this._lodMax );\n\n\t}\n\n\t_dispose() {\n\n\t\tif ( this._blurMaterial !== null ) this._blurMaterial.dispose();\n\n\t\tif ( this._pingPongRenderTarget !== null ) this._pingPongRenderTarget.dispose();\n\n\t\tfor ( let i = 0; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tthis._lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t}\n\n\t_cleanup( outputTarget ) {\n\n\t\tthis._renderer.setRenderTarget( _oldTarget );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t}\n\n\t_fromTexture( texture, renderTarget ) {\n\n\t\tif ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping ) {\n\n\t\t\tthis._setSize( texture.image.length === 0 ? 16 : ( texture.image[ 0 ].width || texture.image[ 0 ].image.width ) );\n\n\t\t} else { // Equirectangular\n\n\t\t\tthis._setSize( texture.image.width / 4 );\n\n\t\t}\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\n\t\tconst cubeUVRenderTarget = renderTarget || this._allocateTargets();\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_allocateTargets() {\n\n\t\tconst width = 3 * Math.max( this._cubeSize, 16 * 7 );\n\t\tconst height = 4 * this._cubeSize;\n\n\t\tconst params = {\n\t\t\tmagFilter: LinearFilter,\n\t\t\tminFilter: LinearFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: HalfFloatType,\n\t\t\tformat: RGBAFormat,\n\t\t\tcolorSpace: LinearSRGBColorSpace,\n\t\t\tdepthBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( width, height, params );\n\n\t\tif ( this._pingPongRenderTarget === null || this._pingPongRenderTarget.width !== width || this._pingPongRenderTarget.height !== height ) {\n\n\t\t\tif ( this._pingPongRenderTarget !== null ) {\n\n\t\t\t\tthis._dispose();\n\n\t\t\t}\n\n\t\t\tthis._pingPongRenderTarget = _createRenderTarget( width, height, params );\n\n\t\t\tconst { _lodMax } = this;\n\t\t\t( { sizeLods: this._sizeLods, lodPlanes: this._lodPlanes, sigmas: this._sigmas } = _createPlanes( _lodMax ) );\n\n\t\t\tthis._blurMaterial = _getBlurShader( _lodMax, width, height );\n\n\t\t}\n\n\t\treturn cubeUVRenderTarget;\n\n\t}\n\n\t_compileMaterial( material ) {\n\n\t\tconst tmpMesh = new Mesh( this._lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\n\n\t}\n\n\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst originalAutoClear = renderer.autoClear;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\trenderer.getClearColor( _clearColor );\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.autoClear = false;\n\n\t\tconst backgroundMaterial = new MeshBasicMaterial( {\n\t\t\tname: 'PMREM.Background',\n\t\t\tside: BackSide,\n\t\t\tdepthWrite: false,\n\t\t\tdepthTest: false,\n\t\t} );\n\n\t\tconst backgroundBox = new Mesh( new BoxGeometry(), backgroundMaterial );\n\n\t\tlet useSolidColor = false;\n\t\tconst background = scene.background;\n\n\t\tif ( background ) {\n\n\t\t\tif ( background.isColor ) {\n\n\t\t\t\tbackgroundMaterial.color.copy( background );\n\t\t\t\tscene.background = null;\n\t\t\t\tuseSolidColor = true;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tbackgroundMaterial.color.copy( _clearColor );\n\t\t\tuseSolidColor = true;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\n\t\t\tif ( col === 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col === 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\tconst size = this._cubeSize;\n\n\t\t\t_setViewport( cubeUVRenderTarget, col * size, i > 2 ? size : 0, size, size );\n\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\n\t\t\tif ( useSolidColor ) {\n\n\t\t\t\trenderer.render( backgroundBox, cubeCamera );\n\n\t\t\t}\n\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\tbackgroundBox.geometry.dispose();\n\t\tbackgroundBox.material.dispose();\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.autoClear = originalAutoClear;\n\t\tscene.background = background;\n\n\t}\n\n\t_textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tconst isCubeTexture = ( texture.mapping === CubeReflectionMapping || texture.mapping === CubeRefractionMapping );\n\n\t\tif ( isCubeTexture ) {\n\n\t\t\tif ( this._cubemapMaterial === null ) {\n\n\t\t\t\tthis._cubemapMaterial = _getCubemapMaterial();\n\n\t\t\t}\n\n\t\t\tthis._cubemapMaterial.uniforms.flipEnvMap.value = ( texture.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t} else {\n\n\t\t\tif ( this._equirectMaterial === null ) {\n\n\t\t\t\tthis._equirectMaterial = _getEquirectMaterial();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = isCubeTexture ? this._cubemapMaterial : this._equirectMaterial;\n\t\tconst mesh = new Mesh( this._lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tconst size = this._cubeSize;\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * size, 2 * size );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera );\n\n\t}\n\n\t_applyPMREM( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < this._lodPlanes.length; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( this._sigmas[ i ] * this._sigmas[ i ] - this._sigmas[ i - 1 ] * this._sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t}\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t}\n\n\t_halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( this._lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = this._sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i === 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tconst { _lodMax } = this;\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = _lodMax - lodIn;\n\n\t\tconst outputSize = this._sizeLods[ lodOut ];\n\t\tconst x = 3 * outputSize * ( lodOut > _lodMax - LOD_MIN ? lodOut - _lodMax + LOD_MIN : 0 );\n\t\tconst y = 4 * ( this._cubeSize - outputSize );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera );\n\n\t}\n\n}\n\n\n\nfunction _createPlanes( lodMax ) {\n\n\tconst lodPlanes = [];\n\tconst sizeLods = [];\n\tconst sigmas = [];\n\n\tlet lod = lodMax;\n\n\tconst totalLods = lodMax - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n\tfor ( let i = 0; i < totalLods; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\tsizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > lodMax - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - lodMax + LOD_MIN - 1 ];\n\n\t\t} else if ( i === 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\tsigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 2 );\n\t\tconst min = - texelSize;\n\t\tconst max = 1 + texelSize;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\tlodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { lodPlanes, sizeLods, sigmas };\n\n}\n\nfunction _createRenderTarget( width, height, params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( width, height, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( lodMax, width, height ) {\n\n\tconst weights = new Float32Array( MAX_SAMPLES );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new ShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: {\n\t\t\t'n': MAX_SAMPLES,\n\t\t\t'CUBEUV_TEXEL_WIDTH': 1.0 / width,\n\t\t\t'CUBEUV_TEXEL_HEIGHT': 1.0 / height,\n\t\t\t'CUBEUV_MAX_MIP': `${lodMax}.0`,\n\t\t},\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCubemapMaterial() {\n\n\treturn new ShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'flipEnvMap': { value: - 1 }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: /* glsl */`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn /* glsl */`\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t`;\n\n}\n\nfunction WebGLCubeUVMaps( renderer ) {\n\n\tlet cubeUVmaps = new WeakMap();\n\n\tlet pmremGenerator = null;\n\n\tfunction get( texture ) {\n\n\t\tif ( texture && texture.isTexture ) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tconst isEquirectMap = ( mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping );\n\t\t\tconst isCubeMap = ( mapping === CubeReflectionMapping || mapping === CubeRefractionMapping );\n\n\t\t\t// equirect/cube map to cubeUV conversion\n\n\t\t\tif ( isEquirectMap || isCubeMap ) {\n\n\t\t\t\tif ( texture.isRenderTargetTexture && texture.needsPMREMUpdate === true ) {\n\n\t\t\t\t\ttexture.needsPMREMUpdate = false;\n\n\t\t\t\t\tlet renderTarget = cubeUVmaps.get( texture );\n\n\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\trenderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture, renderTarget ) : pmremGenerator.fromCubemap( texture, renderTarget );\n\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cubeUVmaps.has( texture ) ) {\n\n\t\t\t\t\t\treturn cubeUVmaps.get( texture ).texture;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\t\tif ( ( isEquirectMap && image && image.height > 0 ) || ( isCubeMap && image && isCubeTextureComplete( image ) ) ) {\n\n\t\t\t\t\t\t\tif ( pmremGenerator === null ) pmremGenerator = new PMREMGenerator( renderer );\n\n\t\t\t\t\t\t\tconst renderTarget = isEquirectMap ? pmremGenerator.fromEquirectangular( texture ) : pmremGenerator.fromCubemap( texture );\n\t\t\t\t\t\t\tcubeUVmaps.set( texture, renderTarget );\n\n\t\t\t\t\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\t\t\t\t\treturn renderTarget.texture;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction isCubeTextureComplete( image ) {\n\n\t\tlet count = 0;\n\t\tconst length = 6;\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tif ( image[ i ] !== undefined ) count ++;\n\n\t\t}\n\n\t\treturn count === length;\n\n\n\t}\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tconst cubemapUV = cubeUVmaps.get( texture );\n\n\t\tif ( cubemapUV !== undefined ) {\n\n\t\t\tcubeUVmaps.delete( texture );\n\t\t\tcubemapUV.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubeUVmaps = new WeakMap();\n\n\t\tif ( pmremGenerator !== null ) {\n\n\t\t\tpmremGenerator.dispose();\n\t\t\tpmremGenerator = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\tfunction getExtension( name ) {\n\n\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\treturn extensions[ name ];\n\n\t\t}\n\n\t\tlet extension;\n\n\t\tswitch ( name ) {\n\n\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\tbreak;\n\n\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\textension = gl.getExtension( name );\n\n\t\t}\n\n\t\textensions[ name ] = extension;\n\n\t\treturn extension;\n\n\t}\n\n\treturn {\n\n\t\thas: function ( name ) {\n\n\t\t\treturn getExtension( name ) !== null;\n\n\t\t},\n\n\t\tinit: function ( capabilities ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgetExtension( 'EXT_color_buffer_float' );\n\n\t\t\t} else {\n\n\t\t\t\tgetExtension( 'WEBGL_depth_texture' );\n\t\t\t\tgetExtension( 'OES_texture_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float' );\n\t\t\t\tgetExtension( 'OES_texture_half_float_linear' );\n\t\t\t\tgetExtension( 'OES_standard_derivatives' );\n\t\t\t\tgetExtension( 'OES_element_index_uint' );\n\t\t\t\tgetExtension( 'OES_vertex_array_object' );\n\t\t\t\tgetExtension( 'ANGLE_instanced_arrays' );\n\n\t\t\t}\n\n\t\t\tgetExtension( 'OES_texture_float_linear' );\n\t\t\tgetExtension( 'EXT_color_buffer_half_float' );\n\t\t\tgetExtension( 'WEBGL_multisampled_render_to_texture' );\n\n\t\t},\n\n\t\tget: function ( name ) {\n\n\t\t\tconst extension = getExtension( name );\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = {};\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\tattributes.remove( geometry.index );\n\n\t\t}\n\n\t\tfor ( const name in geometry.attributes ) {\n\n\t\t\tattributes.remove( geometry.attributes[ name ] );\n\n\t\t}\n\n\t\tfor ( const name in geometry.morphAttributes ) {\n\n\t\t\tconst array = geometry.morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.remove( array[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tdelete geometries[ geometry.id ];\n\n\t\tconst attribute = wireframeAttributes.get( geometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( geometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tif ( geometries[ geometry.id ] === true ) return geometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries[ geometry.id ] = true;\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn geometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else if ( geometryPosition !== undefined ) {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst attribute = new ( arrayNeedsUint32( indices ) ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode, 1 );\n\n\t}\n\n\tfunction renderInstances( start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\nfunction WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase gl.TRIANGLES:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINES:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_STRIP:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_LOOP:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase gl.POINTS:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\nfunction numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl, capabilities, textures ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\tconst morphTextures = new WeakMap();\n\tconst morph = new Vector4();\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\tif ( capabilities.isWebGL2 === true ) {\n\n\t\t\t// instead of using attributes, the WebGL 2 code path encodes morph targets\n\t\t\t// into an array of data textures. Each layer represents a single morph target.\n\n\t\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\t\tlet entry = morphTextures.get( geometry );\n\n\t\t\tif ( entry === undefined || entry.count !== morphTargetsCount ) {\n\n\t\t\t\tif ( entry !== undefined ) entry.texture.dispose();\n\n\t\t\t\tconst hasMorphPosition = geometry.morphAttributes.position !== undefined;\n\t\t\t\tconst hasMorphNormals = geometry.morphAttributes.normal !== undefined;\n\t\t\t\tconst hasMorphColors = geometry.morphAttributes.color !== undefined;\n\n\t\t\t\tconst morphTargets = geometry.morphAttributes.position || [];\n\t\t\t\tconst morphNormals = geometry.morphAttributes.normal || [];\n\t\t\t\tconst morphColors = geometry.morphAttributes.color || [];\n\n\t\t\t\tlet vertexDataCount = 0;\n\n\t\t\t\tif ( hasMorphPosition === true ) vertexDataCount = 1;\n\t\t\t\tif ( hasMorphNormals === true ) vertexDataCount = 2;\n\t\t\t\tif ( hasMorphColors === true ) vertexDataCount = 3;\n\n\t\t\t\tlet width = geometry.attributes.position.count * vertexDataCount;\n\t\t\t\tlet height = 1;\n\n\t\t\t\tif ( width > capabilities.maxTextureSize ) {\n\n\t\t\t\t\theight = Math.ceil( width / capabilities.maxTextureSize );\n\t\t\t\t\twidth = capabilities.maxTextureSize;\n\n\t\t\t\t}\n\n\t\t\t\tconst buffer = new Float32Array( width * height * 4 * morphTargetsCount );\n\n\t\t\t\tconst texture = new DataArrayTexture( buffer, width, height, morphTargetsCount );\n\t\t\t\ttexture.type = FloatType;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t// fill buffer\n\n\t\t\t\tconst vertexDataStride = vertexDataCount * 4;\n\n\t\t\t\tfor ( let i = 0; i < morphTargetsCount; i ++ ) {\n\n\t\t\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\t\t\tconst morphNormal = morphNormals[ i ];\n\t\t\t\t\tconst morphColor = morphColors[ i ];\n\n\t\t\t\t\tconst offset = width * height * 4 * i;\n\n\t\t\t\t\tfor ( let j = 0; j < morphTarget.count; j ++ ) {\n\n\t\t\t\t\t\tconst stride = j * vertexDataStride;\n\n\t\t\t\t\t\tif ( hasMorphPosition === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphTarget, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 0 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 1 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 2 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 3 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphNormals === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphNormal, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 4 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 5 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 6 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 7 ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( hasMorphColors === true ) {\n\n\t\t\t\t\t\t\tmorph.fromBufferAttribute( morphColor, j );\n\n\t\t\t\t\t\t\tbuffer[ offset + stride + 8 ] = morph.x;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 9 ] = morph.y;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 10 ] = morph.z;\n\t\t\t\t\t\t\tbuffer[ offset + stride + 11 ] = ( morphColor.itemSize === 4 ) ? morph.w : 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tentry = {\n\t\t\t\t\tcount: morphTargetsCount,\n\t\t\t\t\ttexture: texture,\n\t\t\t\t\tsize: new Vector2( width, height )\n\t\t\t\t};\n\n\t\t\t\tmorphTextures.set( geometry, entry );\n\n\t\t\t\tfunction disposeTexture() {\n\n\t\t\t\t\ttexture.dispose();\n\n\t\t\t\t\tmorphTextures.delete( geometry );\n\n\t\t\t\t\tgeometry.removeEventListener( 'dispose', disposeTexture );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.addEventListener( 'dispose', disposeTexture );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < objectInfluences.length; i ++ ) {\n\n\t\t\t\tmorphInfluencesSum += objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', objectInfluences );\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTexture', entry.texture, textures );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetsTextureSize', entry.size );\n\n\n\t\t} else {\n\n\t\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\t\tlet influences = influencesList[ geometry.id ];\n\n\t\t\tif ( influences === undefined || influences.length !== length ) {\n\n\t\t\t\t// initialise list\n\n\t\t\t\tinfluences = [];\n\n\t\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t\t}\n\n\t\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t\t}\n\n\t\t\t// Collect influences\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tconst influence = influences[ i ];\n\n\t\t\t\tinfluence[ 0 ] = i;\n\t\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t\t}\n\n\t\t\tinfluences.sort( absNumericalSort );\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tworkInfluences.sort( numericalSort );\n\n\t\t\tconst morphTargets = geometry.morphAttributes.position;\n\t\t\tconst morphNormals = geometry.morphAttributes.normal;\n\n\t\t\tlet morphInfluencesSum = 0;\n\n\t\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\t\tconst influence = workInfluences[ i ];\n\t\t\t\tconst index = influence[ 0 ];\n\t\t\t\tconst value = influence[ 1 ];\n\n\t\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( morphTargets && geometry.hasAttribute( 'morphTarget' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( morphNormals && geometry.hasAttribute( 'morphNormal' + i ) === true ) {\n\n\t\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tif ( object.hasEventListener( 'dispose', onInstancedMeshDispose ) === false ) {\n\n\t\t\t\tobject.addEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\t\t}\n\n\t\t\tif ( updateMap.get( object ) !== frame ) {\n\n\t\t\t\tattributes.update( object.instanceMatrix, gl.ARRAY_BUFFER );\n\n\t\t\t\tif ( object.instanceColor !== null ) {\n\n\t\t\t\t\tattributes.update( object.instanceColor, gl.ARRAY_BUFFER );\n\n\t\t\t\t}\n\n\t\t\t\tupdateMap.set( object, frame );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( updateMap.get( skeleton ) !== frame ) {\n\n\t\t\t\tskeleton.update();\n\n\t\t\t\tupdateMap.set( skeleton, frame );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\tfunction onInstancedMeshDispose( event ) {\n\n\t\tconst instancedMesh = event.target;\n\n\t\tinstancedMesh.removeEventListener( 'dispose', onInstancedMeshDispose );\n\n\t\tattributes.remove( instancedMesh.instanceMatrix );\n\n\t\tif ( instancedMesh.instanceColor !== null ) attributes.remove( instancedMesh.instanceColor );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n/**\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\n\nconst emptyTexture = /*@__PURE__*/ new Texture();\nconst emptyArrayTexture = /*@__PURE__*/ new DataArrayTexture();\nconst empty3dTexture = /*@__PURE__*/ new Data3DTexture();\nconst emptyCubeTexture = /*@__PURE__*/ new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tconst n = nBlocks * blockSize;\n\tlet r = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or THREE.MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single integer / boolean\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single integer / boolean vector (from flat array or THREE.VectorN)\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2i( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2iv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3i( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3iv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4i( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4iv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single unsigned integer\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single unsigned integer vector (from flat array or THREE.VectorN)\n\nfunction setValueV2ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2ui( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2uiv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3ui( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3uiv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4ui( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4uiv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || empty3dTexture, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTextureCube( v || emptyCubeTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyArrayTexture, unit );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\t\tcase 0x8dc6: return setValueV2ui; // _VEC2\n\t\tcase 0x8dc7: return setValueV3ui; // _VEC3\n\t\tcase 0x8dc8: return setValueV4ui; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n\n// Array of scalars\n\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Array of vectors (from flat array or array of THREE.VectorN)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (from flat array or array of THREE.MatrixN)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of integer / boolean\n\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\n// Array of integer / boolean vectors (from flat array)\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n// Array of unsigned integer\n\nfunction setValueV1uiArray( gl, v ) {\n\n\tgl.uniform1uiv( this.addr, v );\n\n}\n\n// Array of unsigned integer vectors (from flat array)\n\nfunction setValueV2uiArray( gl, v ) {\n\n\tgl.uniform2uiv( this.addr, v );\n\n}\n\nfunction setValueV3uiArray( gl, v ) {\n\n\tgl.uniform3uiv( this.addr, v );\n\n}\n\nfunction setValueV4uiArray( gl, v ) {\n\n\tgl.uniform4uiv( this.addr, v );\n\n}\n\n\n// Array of textures (2D / 3D / Cube / 2DArray)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT3DArray( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture3D( v[ i ] || empty3dTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT2DArrayArray( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tif ( ! arraysEqual( cache, units ) ) {\n\n\t\tgl.uniform1iv( this.addr, units );\n\n\t\tcopyArray( cache, units );\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.setTexture2DArray( v[ i ] || emptyArrayTexture, units[ i ] );\n\n\t}\n\n}\n\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x1405: return setValueV1uiArray; // UINT\n\t\tcase 0x8dc6: return setValueV2uiArray; // _VEC2\n\t\tcase 0x8dc7: return setValueV3uiArray; // _VEC3\n\t\tcase 0x8dc8: return setValueV4uiArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3DArray;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArrayArray;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nclass SingleUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass PureArrayUniform {\n\n\tconstructor( id, activeInfo, addr ) {\n\n\t\tthis.id = id;\n\t\tthis.addr = addr;\n\t\tthis.cache = [];\n\t\tthis.size = activeInfo.size;\n\t\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t\t// this.path = activeInfo.name; // DEBUG\n\n\t}\n\n}\n\nclass StructuredUniform {\n\n\tconstructor( id ) {\n\n\t\tthis.id = id;\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t}\n\n\tsetValue( gl, value, textures ) {\n\n\t\tconst seq = this.seq;\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t\t}\n\n\t}\n\n}\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /(\\w+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ];\n\t\tconst idIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nclass WebGLUniforms {\n\n\tconstructor( gl, program ) {\n\n\t\tthis.seq = [];\n\t\tthis.map = {};\n\n\t\tconst n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\t\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\t\tparseUniform( info, addr, this );\n\n\t\t}\n\n\t}\n\n\tsetValue( gl, name, value, textures ) {\n\n\t\tconst u = this.map[ name ];\n\n\t\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n\t}\n\n\tsetOptional( gl, object, name ) {\n\n\t\tconst v = object[ name ];\n\n\t\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n\t}\n\n\tstatic upload( gl, seq, values, textures ) {\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ],\n\t\t\t\tv = values[ u.id ];\n\n\t\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tstatic seqWithValue( seq, values ) {\n\n\t\tconst r = [];\n\n\t\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\t\tconst u = seq[ i ];\n\t\t\tif ( u.id in values ) r.push( u );\n\n\t\t}\n\n\t\treturn r;\n\n\t}\n\n}\n\nfunction WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nlet programIdCount = 0;\n\nfunction handleSource( string, errorLine ) {\n\n\tconst lines = string.split( '\\n' );\n\tconst lines2 = [];\n\n\tconst from = Math.max( errorLine - 6, 0 );\n\tconst to = Math.min( errorLine + 6, lines.length );\n\n\tfor ( let i = from; i < to; i ++ ) {\n\n\t\tconst line = i + 1;\n\t\tlines2.push( `${line === errorLine ? '>' : ' '} ${line}: ${lines[ i ]}` );\n\n\t}\n\n\treturn lines2.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( colorSpace ) {\n\n\tconst workingPrimaries = ColorManagement.getPrimaries( ColorManagement.workingColorSpace );\n\tconst encodingPrimaries = ColorManagement.getPrimaries( colorSpace );\n\n\tlet gamutMapping;\n\n\tif ( workingPrimaries === encodingPrimaries ) {\n\n\t\tgamutMapping = '';\n\n\t} else if ( workingPrimaries === P3Primaries && encodingPrimaries === Rec709Primaries ) {\n\n\t\tgamutMapping = 'LinearDisplayP3ToLinearSRGB';\n\n\t} else if ( workingPrimaries === Rec709Primaries && encodingPrimaries === P3Primaries ) {\n\n\t\tgamutMapping = 'LinearSRGBToLinearDisplayP3';\n\n\t}\n\n\tswitch ( colorSpace ) {\n\n\t\tcase LinearSRGBColorSpace:\n\t\tcase LinearDisplayP3ColorSpace:\n\t\t\treturn [ gamutMapping, 'LinearTransferOETF' ];\n\n\t\tcase SRGBColorSpace:\n\t\tcase DisplayP3ColorSpace:\n\t\t\treturn [ gamutMapping, 'sRGBTransferOETF' ];\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported color space:', colorSpace );\n\t\t\treturn [ gamutMapping, 'LinearTransferOETF' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, gl.COMPILE_STATUS );\n\tconst errors = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && errors === '' ) return '';\n\n\tconst errorMatches = /ERROR: 0:(\\d+)/.exec( errors );\n\tif ( errorMatches ) {\n\n\t\t// --enable-privileged-webgl-extension\n\t\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\t\tconst errorLine = parseInt( errorMatches[ 1 ] );\n\t\treturn type.toUpperCase() + '\\n\\n' + errors + '\\n\\n' + handleSource( gl.getShaderSource( shader ), errorLine );\n\n\t} else {\n\n\t\treturn errors;\n\n\t}\n\n}\n\nfunction getTexelEncodingFunction( functionName, colorSpace ) {\n\n\tconst components = getEncodingComponents( colorSpace );\n\treturn `vec4 ${functionName}( vec4 value ) { return ${components[ 0 ]}( ${components[ 1 ]}( value ) ); }`;\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || !! parameters.envMapCubeUVHeight || parameters.bumpMap || parameters.normalMapTangentSpace || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap || parameters.transmission ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\tlet locationSize = 1;\n\t\tif ( info.type === gl.FLOAT_MAT2 ) locationSize = 2;\n\t\tif ( info.type === gl.FLOAT_MAT3 ) locationSize = 3;\n\t\tif ( info.type === gl.FLOAT_MAT4 ) locationSize = 4;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = {\n\t\t\ttype: info.type,\n\t\t\tlocation: gl.getAttribLocation( program, name ),\n\t\t\tlocationSize: locationSize\n\t\t};\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\tconst numSpotLightCoords = parameters.numSpotLightShadows + parameters.numSpotLightMaps - parameters.numSpotLightShadowsWithMaps;\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_SPOT_LIGHT_MAPS/g, parameters.numSpotLightMaps )\n\t\t.replace( /NUM_SPOT_LIGHT_COORDS/g, numSpotLightCoords )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g, parameters.numSpotLightShadowsWithMaps )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nconst shaderChunkMap = new Map( [\n\t[ 'encodings_fragment', 'colorspace_fragment' ], // @deprecated, r154\n\t[ 'encodings_pars_fragment', 'colorspace_pars_fragment' ], // @deprecated, r154\n\t[ 'output_fragment', 'opaque_fragment' ], // @deprecated, r154\n] );\n\nfunction includeReplacer( match, include ) {\n\n\tlet string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tconst newInclude = shaderChunkMap.get( include );\n\n\t\tif ( newInclude !== undefined ) {\n\n\t\t\tstring = ShaderChunk[ newInclude ];\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Shader chunk \"%s\" has been deprecated. Use \"%s\" instead.', include, newInclude );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t\t}\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string.replace( unrollLoopPattern, loopReplacer );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = 'precision ' + parameters.precision + ' float;\\nprecision ' + parameters.precision + ' int;';\n\n\tif ( parameters.precision === 'highp' ) {\n\n\t\tprecisionstring += '\\n#define HIGH_PRECISION';\n\n\t} else if ( parameters.precision === 'mediump' ) {\n\n\t\tprecisionstring += '\\n#define MEDIUM_PRECISION';\n\n\t} else if ( parameters.precision === 'lowp' ) {\n\n\t\tprecisionstring += '\\n#define LOW_PRECISION';\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction generateCubeUVSize( parameters ) {\n\n\tconst imageHeight = parameters.envMapCubeUVHeight;\n\n\tif ( imageHeight === null ) return null;\n\n\tconst maxMip = Math.log2( imageHeight ) - 2;\n\n\tconst texelHeight = 1.0 / imageHeight;\n\n\tconst texelWidth = 1.0 / ( 3 * Math.max( Math.pow( 2, maxMip ), 7 * 16 ) );\n\n\treturn { texelWidth, texelHeight, maxMip };\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\t// TODO Send this event to Three.js DevTools\n\t// console.log( 'WebGLProgram', cacheKey );\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\tconst envMapCubeUVSize = generateCubeUVSize( parameters );\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + '\\n' : '';\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\t'#define SHADER_TYPE ' + parameters.shaderType,\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\t'#define SHADER_TYPE ' + parameters.shaderType,\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_TYPE ' + parameters.shaderType,\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.useFog && parameters.fog ? '#define USE_FOG' : '',\n\t\t\tparameters.useFog && parameters.fogExp2 ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.normalMapObjectSpace ? '#define USE_NORMALMAP_OBJECTSPACE' : '',\n\t\t\tparameters.normalMapTangentSpace ? '#define USE_NORMALMAP_TANGENTSPACE' : '',\n\t\t\tparameters.displacementMap ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\n\t\t\tparameters.anisotropy ? '#define USE_ANISOTROPY' : '',\n\t\t\tparameters.anisotropyMap ? '#define USE_ANISOTROPYMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULAR_COLORMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULAR_INTENSITYMAP' : '',\n\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.alphaHash ? '#define USE_ALPHAHASH' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEEN_COLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEEN_ROUGHNESSMAP' : '',\n\n\t\t\t//\n\n\t\t\tparameters.mapUv ? '#define MAP_UV ' + parameters.mapUv : '',\n\t\t\tparameters.alphaMapUv ? '#define ALPHAMAP_UV ' + parameters.alphaMapUv : '',\n\t\t\tparameters.lightMapUv ? '#define LIGHTMAP_UV ' + parameters.lightMapUv : '',\n\t\t\tparameters.aoMapUv ? '#define AOMAP_UV ' + parameters.aoMapUv : '',\n\t\t\tparameters.emissiveMapUv ? '#define EMISSIVEMAP_UV ' + parameters.emissiveMapUv : '',\n\t\t\tparameters.bumpMapUv ? '#define BUMPMAP_UV ' + parameters.bumpMapUv : '',\n\t\t\tparameters.normalMapUv ? '#define NORMALMAP_UV ' + parameters.normalMapUv : '',\n\t\t\tparameters.displacementMapUv ? '#define DISPLACEMENTMAP_UV ' + parameters.displacementMapUv : '',\n\n\t\t\tparameters.metalnessMapUv ? '#define METALNESSMAP_UV ' + parameters.metalnessMapUv : '',\n\t\t\tparameters.roughnessMapUv ? '#define ROUGHNESSMAP_UV ' + parameters.roughnessMapUv : '',\n\n\t\t\tparameters.anisotropyMapUv ? '#define ANISOTROPYMAP_UV ' + parameters.anisotropyMapUv : '',\n\n\t\t\tparameters.clearcoatMapUv ? '#define CLEARCOATMAP_UV ' + parameters.clearcoatMapUv : '',\n\t\t\tparameters.clearcoatNormalMapUv ? '#define CLEARCOAT_NORMALMAP_UV ' + parameters.clearcoatNormalMapUv : '',\n\t\t\tparameters.clearcoatRoughnessMapUv ? '#define CLEARCOAT_ROUGHNESSMAP_UV ' + parameters.clearcoatRoughnessMapUv : '',\n\n\t\t\tparameters.iridescenceMapUv ? '#define IRIDESCENCEMAP_UV ' + parameters.iridescenceMapUv : '',\n\t\t\tparameters.iridescenceThicknessMapUv ? '#define IRIDESCENCE_THICKNESSMAP_UV ' + parameters.iridescenceThicknessMapUv : '',\n\n\t\t\tparameters.sheenColorMapUv ? '#define SHEEN_COLORMAP_UV ' + parameters.sheenColorMapUv : '',\n\t\t\tparameters.sheenRoughnessMapUv ? '#define SHEEN_ROUGHNESSMAP_UV ' + parameters.sheenRoughnessMapUv : '',\n\n\t\t\tparameters.specularMapUv ? '#define SPECULARMAP_UV ' + parameters.specularMapUv : '',\n\t\t\tparameters.specularColorMapUv ? '#define SPECULAR_COLORMAP_UV ' + parameters.specularColorMapUv : '',\n\t\t\tparameters.specularIntensityMapUv ? '#define SPECULAR_INTENSITYMAP_UV ' + parameters.specularIntensityMapUv : '',\n\n\t\t\tparameters.transmissionMapUv ? '#define TRANSMISSIONMAP_UV ' + parameters.transmissionMapUv : '',\n\t\t\tparameters.thicknessMapUv ? '#define THICKNESSMAP_UV ' + parameters.thicknessMapUv : '',\n\n\t\t\t//\n\n\t\t\tparameters.vertexTangents && parameters.flatShading === false ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUv1s ? '#define USE_UV1' : '',\n\t\t\tparameters.vertexUv2s ? '#define USE_UV2' : '',\n\t\t\tparameters.vertexUv3s ? '#define USE_UV3' : '',\n\n\t\t\tparameters.pointsUvs ? '#define USE_POINTS_UV' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\t( parameters.morphColors && parameters.isWebGL2 ) ? '#define USE_MORPHCOLORS' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE' : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_TEXTURE_STRIDE ' + parameters.morphTextureStride : '',\n\t\t\t( parameters.morphTargetsCount > 0 && parameters.isWebGL2 ) ? '#define MORPHTARGETS_COUNT ' + parameters.morphTargetsCount : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.numLightProbes > 0 ? '#define USE_LIGHT_PROBES' : '',\n\n\t\t\tparameters.useLegacyLights ? '#define LEGACY_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_UV1',\n\n\t\t\t'\tattribute vec2 uv1;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_UV2',\n\n\t\t\t'\tattribute vec2 uv2;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_UV3',\n\n\t\t\t'\tattribute vec2 uv3;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if defined( USE_COLOR_ALPHA )',\n\n\t\t\t'\tattribute vec4 color;',\n\n\t\t\t'#elif defined( USE_COLOR )',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_TYPE ' + parameters.shaderType,\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.useFog && parameters.fog ? '#define USE_FOG' : '',\n\t\t\tparameters.useFog && parameters.fogExp2 ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_WIDTH ' + envMapCubeUVSize.texelWidth : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_TEXEL_HEIGHT ' + envMapCubeUVSize.texelHeight : '',\n\t\t\tenvMapCubeUVSize ? '#define CUBEUV_MAX_MIP ' + envMapCubeUVSize.maxMip + '.0' : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\tparameters.normalMapObjectSpace ? '#define USE_NORMALMAP_OBJECTSPACE' : '',\n\t\t\tparameters.normalMapTangentSpace ? '#define USE_NORMALMAP_TANGENTSPACE' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\n\t\t\tparameters.anisotropy ? '#define USE_ANISOTROPY' : '',\n\t\t\tparameters.anisotropyMap ? '#define USE_ANISOTROPYMAP' : '',\n\n\t\t\tparameters.clearcoat ? '#define USE_CLEARCOAT' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\n\t\t\tparameters.iridescence ? '#define USE_IRIDESCENCE' : '',\n\t\t\tparameters.iridescenceMap ? '#define USE_IRIDESCENCEMAP' : '',\n\t\t\tparameters.iridescenceThicknessMap ? '#define USE_IRIDESCENCE_THICKNESSMAP' : '',\n\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.specularColorMap ? '#define USE_SPECULAR_COLORMAP' : '',\n\t\t\tparameters.specularIntensityMap ? '#define USE_SPECULAR_INTENSITYMAP' : '',\n\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.alphaTest ? '#define USE_ALPHATEST' : '',\n\t\t\tparameters.alphaHash ? '#define USE_ALPHAHASH' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.sheenColorMap ? '#define USE_SHEEN_COLORMAP' : '',\n\t\t\tparameters.sheenRoughnessMap ? '#define USE_SHEEN_ROUGHNESSMAP' : '',\n\n\t\t\tparameters.transmission ? '#define USE_TRANSMISSION' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\t\t\tparameters.thicknessMap ? '#define USE_THICKNESSMAP' : '',\n\n\t\t\tparameters.vertexTangents && parameters.flatShading === false ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexAlphas ? '#define USE_COLOR_ALPHA' : '',\n\t\t\tparameters.vertexUv1s ? '#define USE_UV1' : '',\n\t\t\tparameters.vertexUv2s ? '#define USE_UV2' : '',\n\t\t\tparameters.vertexUv3s ? '#define USE_UV3' : '',\n\n\t\t\tparameters.pointsUvs ? '#define USE_POINTS_UV' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.numLightProbes > 0 ? '#define USE_LIGHT_PROBES' : '',\n\n\t\t\tparameters.useLegacyLights ? '#define LEGACY_LIGHTS' : '',\n\n\t\t\tparameters.decodeVideoTexture ? '#define DECODE_VIDEO_TEXTURE' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\t\t\tparameters.opaque ? '#define OPAQUE' : '',\n\n\t\t\tShaderChunk[ 'colorspace_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputColorSpace ),\n\n\t\t\tparameters.useDepthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && parameters.isRawShaderMaterial !== true ) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'precision mediump sampler2DArray;',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : 'layout(location = 0) out highp vec4 pc_fragColor;',\n\t\t\t( parameters.glslVersion === GLSL3 ) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tif ( typeof renderer.debug.onShaderError === 'function' ) {\n\n\t\t\t\trenderer.debug.onShaderError( gl, program, glVertexShader, glFragmentShader );\n\n\t\t\t} else {\n\n\t\t\t\t// default error reporting\n\n\t\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\t\tconsole.error(\n\t\t\t\t\t'THREE.WebGLProgram: Shader Error ' + gl.getError() + ' - ' +\n\t\t\t\t\t'VALIDATE_STATUS ' + gl.getProgramParameter( program, gl.VALIDATE_STATUS ) + '\\n\\n' +\n\t\t\t\t\t'Program Info Log: ' + programLog + '\\n' +\n\t\t\t\t\tvertexErrors + '\\n' +\n\t\t\t\t\tfragmentErrors\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Program Info Log:', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.type = parameters.shaderType;\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nlet _id$1 = 0;\n\nclass WebGLShaderCache {\n\n\tconstructor() {\n\n\t\tthis.shaderCache = new Map();\n\t\tthis.materialCache = new Map();\n\n\t}\n\n\tupdate( material ) {\n\n\t\tconst vertexShader = material.vertexShader;\n\t\tconst fragmentShader = material.fragmentShader;\n\n\t\tconst vertexShaderStage = this._getShaderStage( vertexShader );\n\t\tconst fragmentShaderStage = this._getShaderStage( fragmentShader );\n\n\t\tconst materialShaders = this._getShaderCacheForMaterial( material );\n\n\t\tif ( materialShaders.has( vertexShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( vertexShaderStage );\n\t\t\tvertexShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\tif ( materialShaders.has( fragmentShaderStage ) === false ) {\n\n\t\t\tmaterialShaders.add( fragmentShaderStage );\n\t\t\tfragmentShaderStage.usedTimes ++;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tremove( material ) {\n\n\t\tconst materialShaders = this.materialCache.get( material );\n\n\t\tfor ( const shaderStage of materialShaders ) {\n\n\t\t\tshaderStage.usedTimes --;\n\n\t\t\tif ( shaderStage.usedTimes === 0 ) this.shaderCache.delete( shaderStage.code );\n\n\t\t}\n\n\t\tthis.materialCache.delete( material );\n\n\t\treturn this;\n\n\t}\n\n\tgetVertexShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.vertexShader ).id;\n\n\t}\n\n\tgetFragmentShaderID( material ) {\n\n\t\treturn this._getShaderStage( material.fragmentShader ).id;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shaderCache.clear();\n\t\tthis.materialCache.clear();\n\n\t}\n\n\t_getShaderCacheForMaterial( material ) {\n\n\t\tconst cache = this.materialCache;\n\t\tlet set = cache.get( material );\n\n\t\tif ( set === undefined ) {\n\n\t\t\tset = new Set();\n\t\t\tcache.set( material, set );\n\n\t\t}\n\n\t\treturn set;\n\n\t}\n\n\t_getShaderStage( code ) {\n\n\t\tconst cache = this.shaderCache;\n\t\tlet stage = cache.get( code );\n\n\t\tif ( stage === undefined ) {\n\n\t\t\tstage = new WebGLShaderStage( code );\n\t\t\tcache.set( code, stage );\n\n\t\t}\n\n\t\treturn stage;\n\n\t}\n\n}\n\nclass WebGLShaderStage {\n\n\tconstructor( code ) {\n\n\t\tthis.id = _id$1 ++;\n\n\t\tthis.code = code;\n\t\tthis.usedTimes = 0;\n\n\t}\n\n}\n\nfunction WebGLPrograms( renderer, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping ) {\n\n\tconst _programLayers = new Layers();\n\tconst _customShaders = new WebGLShaderCache();\n\tconst programs = [];\n\n\tconst IS_WEBGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst SUPPORTS_VERTEX_TEXTURES = capabilities.vertexTextures;\n\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tfunction getChannel( value ) {\n\n\t\tif ( value === 0 ) return 'uv';\n\n\t\treturn `uv${ value }`;\n\n\t}\n\n\tfunction getParameters( material, lights, shadows, scene, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst geometry = object.geometry;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\tconst envMapCubeUVHeight = ( !! envMap ) && ( envMap.mapping === CubeUVReflectionMapping ) ? envMap.image.height : null;\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\tlet morphTextureStride = 0;\n\n\t\tif ( geometry.morphAttributes.position !== undefined ) morphTextureStride = 1;\n\t\tif ( geometry.morphAttributes.normal !== undefined ) morphTextureStride = 2;\n\t\tif ( geometry.morphAttributes.color !== undefined ) morphTextureStride = 3;\n\n\t\t//\n\n\t\tlet vertexShader, fragmentShader;\n\t\tlet customVertexShaderID, customFragmentShaderID;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t\t_customShaders.update( material );\n\n\t\t\tcustomVertexShaderID = _customShaders.getVertexShaderID( material );\n\t\t\tcustomFragmentShaderID = _customShaders.getFragmentShaderID( material );\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst IS_INSTANCEDMESH = object.isInstancedMesh === true;\n\n\t\tconst HAS_MAP = !! material.map;\n\t\tconst HAS_MATCAP = !! material.matcap;\n\t\tconst HAS_ENVMAP = !! envMap;\n\t\tconst HAS_AOMAP = !! material.aoMap;\n\t\tconst HAS_LIGHTMAP = !! material.lightMap;\n\t\tconst HAS_BUMPMAP = !! material.bumpMap;\n\t\tconst HAS_NORMALMAP = !! material.normalMap;\n\t\tconst HAS_DISPLACEMENTMAP = !! material.displacementMap;\n\t\tconst HAS_EMISSIVEMAP = !! material.emissiveMap;\n\n\t\tconst HAS_METALNESSMAP = !! material.metalnessMap;\n\t\tconst HAS_ROUGHNESSMAP = !! material.roughnessMap;\n\n\t\tconst HAS_ANISOTROPY = material.anisotropy > 0;\n\t\tconst HAS_CLEARCOAT = material.clearcoat > 0;\n\t\tconst HAS_IRIDESCENCE = material.iridescence > 0;\n\t\tconst HAS_SHEEN = material.sheen > 0;\n\t\tconst HAS_TRANSMISSION = material.transmission > 0;\n\n\t\tconst HAS_ANISOTROPYMAP = HAS_ANISOTROPY && !! material.anisotropyMap;\n\n\t\tconst HAS_CLEARCOATMAP = HAS_CLEARCOAT && !! material.clearcoatMap;\n\t\tconst HAS_CLEARCOAT_NORMALMAP = HAS_CLEARCOAT && !! material.clearcoatNormalMap;\n\t\tconst HAS_CLEARCOAT_ROUGHNESSMAP = HAS_CLEARCOAT && !! material.clearcoatRoughnessMap;\n\n\t\tconst HAS_IRIDESCENCEMAP = HAS_IRIDESCENCE && !! material.iridescenceMap;\n\t\tconst HAS_IRIDESCENCE_THICKNESSMAP = HAS_IRIDESCENCE && !! material.iridescenceThicknessMap;\n\n\t\tconst HAS_SHEEN_COLORMAP = HAS_SHEEN && !! material.sheenColorMap;\n\t\tconst HAS_SHEEN_ROUGHNESSMAP = HAS_SHEEN && !! material.sheenRoughnessMap;\n\n\t\tconst HAS_SPECULARMAP = !! material.specularMap;\n\t\tconst HAS_SPECULAR_COLORMAP = !! material.specularColorMap;\n\t\tconst HAS_SPECULAR_INTENSITYMAP = !! material.specularIntensityMap;\n\n\t\tconst HAS_TRANSMISSIONMAP = HAS_TRANSMISSION && !! material.transmissionMap;\n\t\tconst HAS_THICKNESSMAP = HAS_TRANSMISSION && !! material.thicknessMap;\n\n\t\tconst HAS_GRADIENTMAP = !! material.gradientMap;\n\n\t\tconst HAS_ALPHAMAP = !! material.alphaMap;\n\n\t\tconst HAS_ALPHATEST = material.alphaTest > 0;\n\n\t\tconst HAS_ALPHAHASH = !! material.alphaHash;\n\n\t\tconst HAS_EXTENSIONS = !! material.extensions;\n\n\t\tconst HAS_ATTRIBUTE_UV1 = !! geometry.attributes.uv1;\n\t\tconst HAS_ATTRIBUTE_UV2 = !! geometry.attributes.uv2;\n\t\tconst HAS_ATTRIBUTE_UV3 = !! geometry.attributes.uv3;\n\n\t\tlet toneMapping = NoToneMapping;\n\n\t\tif ( material.toneMapped ) {\n\n\t\t\tif ( currentRenderTarget === null || currentRenderTarget.isXRRenderTarget === true ) {\n\n\t\t\t\ttoneMapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: IS_WEBGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderType: material.type,\n\t\t\tshaderName: material.name,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tcustomVertexShaderID: customVertexShaderID,\n\t\t\tcustomFragmentShaderID: customFragmentShaderID,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: IS_INSTANCEDMESH,\n\t\t\tinstancingColor: IS_INSTANCEDMESH && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: SUPPORTS_VERTEX_TEXTURES,\n\t\t\toutputColorSpace: ( currentRenderTarget === null ) ? renderer.outputColorSpace : ( currentRenderTarget.isXRRenderTarget === true ? currentRenderTarget.texture.colorSpace : LinearSRGBColorSpace ),\n\n\t\t\tmap: HAS_MAP,\n\t\t\tmatcap: HAS_MATCAP,\n\t\t\tenvMap: HAS_ENVMAP,\n\t\t\tenvMapMode: HAS_ENVMAP && envMap.mapping,\n\t\t\tenvMapCubeUVHeight: envMapCubeUVHeight,\n\t\t\taoMap: HAS_AOMAP,\n\t\t\tlightMap: HAS_LIGHTMAP,\n\t\t\tbumpMap: HAS_BUMPMAP,\n\t\t\tnormalMap: HAS_NORMALMAP,\n\t\t\tdisplacementMap: SUPPORTS_VERTEX_TEXTURES && HAS_DISPLACEMENTMAP,\n\t\t\temissiveMap: HAS_EMISSIVEMAP,\n\n\t\t\tnormalMapObjectSpace: HAS_NORMALMAP && material.normalMapType === ObjectSpaceNormalMap,\n\t\t\tnormalMapTangentSpace: HAS_NORMALMAP && material.normalMapType === TangentSpaceNormalMap,\n\n\t\t\tmetalnessMap: HAS_METALNESSMAP,\n\t\t\troughnessMap: HAS_ROUGHNESSMAP,\n\n\t\t\tanisotropy: HAS_ANISOTROPY,\n\t\t\tanisotropyMap: HAS_ANISOTROPYMAP,\n\n\t\t\tclearcoat: HAS_CLEARCOAT,\n\t\t\tclearcoatMap: HAS_CLEARCOATMAP,\n\t\t\tclearcoatNormalMap: HAS_CLEARCOAT_NORMALMAP,\n\t\t\tclearcoatRoughnessMap: HAS_CLEARCOAT_ROUGHNESSMAP,\n\n\t\t\tiridescence: HAS_IRIDESCENCE,\n\t\t\tiridescenceMap: HAS_IRIDESCENCEMAP,\n\t\t\tiridescenceThicknessMap: HAS_IRIDESCENCE_THICKNESSMAP,\n\n\t\t\tsheen: HAS_SHEEN,\n\t\t\tsheenColorMap: HAS_SHEEN_COLORMAP,\n\t\t\tsheenRoughnessMap: HAS_SHEEN_ROUGHNESSMAP,\n\n\t\t\tspecularMap: HAS_SPECULARMAP,\n\t\t\tspecularColorMap: HAS_SPECULAR_COLORMAP,\n\t\t\tspecularIntensityMap: HAS_SPECULAR_INTENSITYMAP,\n\n\t\t\ttransmission: HAS_TRANSMISSION,\n\t\t\ttransmissionMap: HAS_TRANSMISSIONMAP,\n\t\t\tthicknessMap: HAS_THICKNESSMAP,\n\n\t\t\tgradientMap: HAS_GRADIENTMAP,\n\n\t\t\topaque: material.transparent === false && material.blending === NormalBlending,\n\n\t\t\talphaMap: HAS_ALPHAMAP,\n\t\t\talphaTest: HAS_ALPHATEST,\n\t\t\talphaHash: HAS_ALPHAHASH,\n\n\t\t\tcombine: material.combine,\n\n\t\t\t//\n\n\t\t\tmapUv: HAS_MAP && getChannel( material.map.channel ),\n\t\t\taoMapUv: HAS_AOMAP && getChannel( material.aoMap.channel ),\n\t\t\tlightMapUv: HAS_LIGHTMAP && getChannel( material.lightMap.channel ),\n\t\t\tbumpMapUv: HAS_BUMPMAP && getChannel( material.bumpMap.channel ),\n\t\t\tnormalMapUv: HAS_NORMALMAP && getChannel( material.normalMap.channel ),\n\t\t\tdisplacementMapUv: HAS_DISPLACEMENTMAP && getChannel( material.displacementMap.channel ),\n\t\t\temissiveMapUv: HAS_EMISSIVEMAP && getChannel( material.emissiveMap.channel ),\n\n\t\t\tmetalnessMapUv: HAS_METALNESSMAP && getChannel( material.metalnessMap.channel ),\n\t\t\troughnessMapUv: HAS_ROUGHNESSMAP && getChannel( material.roughnessMap.channel ),\n\n\t\t\tanisotropyMapUv: HAS_ANISOTROPYMAP && getChannel( material.anisotropyMap.channel ),\n\n\t\t\tclearcoatMapUv: HAS_CLEARCOATMAP && getChannel( material.clearcoatMap.channel ),\n\t\t\tclearcoatNormalMapUv: HAS_CLEARCOAT_NORMALMAP && getChannel( material.clearcoatNormalMap.channel ),\n\t\t\tclearcoatRoughnessMapUv: HAS_CLEARCOAT_ROUGHNESSMAP && getChannel( material.clearcoatRoughnessMap.channel ),\n\n\t\t\tiridescenceMapUv: HAS_IRIDESCENCEMAP && getChannel( material.iridescenceMap.channel ),\n\t\t\tiridescenceThicknessMapUv: HAS_IRIDESCENCE_THICKNESSMAP && getChannel( material.iridescenceThicknessMap.channel ),\n\n\t\t\tsheenColorMapUv: HAS_SHEEN_COLORMAP && getChannel( material.sheenColorMap.channel ),\n\t\t\tsheenRoughnessMapUv: HAS_SHEEN_ROUGHNESSMAP && getChannel( material.sheenRoughnessMap.channel ),\n\n\t\t\tspecularMapUv: HAS_SPECULARMAP && getChannel( material.specularMap.channel ),\n\t\t\tspecularColorMapUv: HAS_SPECULAR_COLORMAP && getChannel( material.specularColorMap.channel ),\n\t\t\tspecularIntensityMapUv: HAS_SPECULAR_INTENSITYMAP && getChannel( material.specularIntensityMap.channel ),\n\n\t\t\ttransmissionMapUv: HAS_TRANSMISSIONMAP && getChannel( material.transmissionMap.channel ),\n\t\t\tthicknessMapUv: HAS_THICKNESSMAP && getChannel( material.thicknessMap.channel ),\n\n\t\t\talphaMapUv: HAS_ALPHAMAP && getChannel( material.alphaMap.channel ),\n\n\t\t\t//\n\n\t\t\tvertexTangents: !! geometry.attributes.tangent && ( HAS_NORMALMAP || HAS_ANISOTROPY ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexAlphas: material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4,\n\t\t\tvertexUv1s: HAS_ATTRIBUTE_UV1,\n\t\t\tvertexUv2s: HAS_ATTRIBUTE_UV2,\n\t\t\tvertexUv3s: HAS_ATTRIBUTE_UV3,\n\n\t\t\tpointsUvs: object.isPoints === true && !! geometry.attributes.uv && ( HAS_MAP || HAS_ALPHAMAP ),\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog === true,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading === true,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation === true,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: object.isSkinnedMesh === true,\n\n\t\t\tmorphTargets: geometry.morphAttributes.position !== undefined,\n\t\t\tmorphNormals: geometry.morphAttributes.normal !== undefined,\n\t\t\tmorphColors: geometry.morphAttributes.color !== undefined,\n\t\t\tmorphTargetsCount: morphTargetsCount,\n\t\t\tmorphTextureStride: morphTextureStride,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumSpotLightMaps: lights.spotLightMap.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\t\t\tnumSpotLightShadowsWithMaps: lights.numSpotLightShadowsWithMaps,\n\n\t\t\tnumLightProbes: lights.numLightProbes,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: toneMapping,\n\t\t\tuseLegacyLights: renderer._useLegacyLights,\n\n\t\t\tdecodeVideoTexture: HAS_MAP && ( material.map.isVideoTexture === true ) && ( ColorManagement.getTransfer( material.map.colorSpace ) === SRGBTransfer ),\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tuseDepthPacking: material.depthPacking >= 0,\n\t\t\tdepthPacking: material.depthPacking || 0,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: HAS_EXTENSIONS && material.extensions.derivatives === true,\n\t\t\textensionFragDepth: HAS_EXTENSIONS && material.extensions.fragDepth === true,\n\t\t\textensionDrawBuffers: HAS_EXTENSIONS && material.extensions.drawBuffers === true,\n\t\t\textensionShaderTextureLOD: HAS_EXTENSIONS && material.extensions.shaderTextureLOD === true,\n\n\t\t\trendererExtensionFragDepth: IS_WEBGL2 || extensions.has( 'EXT_frag_depth' ),\n\t\t\trendererExtensionDrawBuffers: IS_WEBGL2 || extensions.has( 'WEBGL_draw_buffers' ),\n\t\t\trendererExtensionShaderTextureLod: IS_WEBGL2 || extensions.has( 'EXT_shader_texture_lod' ),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.customVertexShaderID );\n\t\t\tarray.push( parameters.customFragmentShaderID );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === false ) {\n\n\t\t\tgetProgramCacheKeyParameters( array, parameters );\n\t\t\tgetProgramCacheKeyBooleans( array, parameters );\n\t\t\tarray.push( renderer.outputColorSpace );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getProgramCacheKeyParameters( array, parameters ) {\n\n\t\tarray.push( parameters.precision );\n\t\tarray.push( parameters.outputColorSpace );\n\t\tarray.push( parameters.envMapMode );\n\t\tarray.push( parameters.envMapCubeUVHeight );\n\t\tarray.push( parameters.mapUv );\n\t\tarray.push( parameters.alphaMapUv );\n\t\tarray.push( parameters.lightMapUv );\n\t\tarray.push( parameters.aoMapUv );\n\t\tarray.push( parameters.bumpMapUv );\n\t\tarray.push( parameters.normalMapUv );\n\t\tarray.push( parameters.displacementMapUv );\n\t\tarray.push( parameters.emissiveMapUv );\n\t\tarray.push( parameters.metalnessMapUv );\n\t\tarray.push( parameters.roughnessMapUv );\n\t\tarray.push( parameters.anisotropyMapUv );\n\t\tarray.push( parameters.clearcoatMapUv );\n\t\tarray.push( parameters.clearcoatNormalMapUv );\n\t\tarray.push( parameters.clearcoatRoughnessMapUv );\n\t\tarray.push( parameters.iridescenceMapUv );\n\t\tarray.push( parameters.iridescenceThicknessMapUv );\n\t\tarray.push( parameters.sheenColorMapUv );\n\t\tarray.push( parameters.sheenRoughnessMapUv );\n\t\tarray.push( parameters.specularMapUv );\n\t\tarray.push( parameters.specularColorMapUv );\n\t\tarray.push( parameters.specularIntensityMapUv );\n\t\tarray.push( parameters.transmissionMapUv );\n\t\tarray.push( parameters.thicknessMapUv );\n\t\tarray.push( parameters.combine );\n\t\tarray.push( parameters.fogExp2 );\n\t\tarray.push( parameters.sizeAttenuation );\n\t\tarray.push( parameters.morphTargetsCount );\n\t\tarray.push( parameters.morphAttributeCount );\n\t\tarray.push( parameters.numDirLights );\n\t\tarray.push( parameters.numPointLights );\n\t\tarray.push( parameters.numSpotLights );\n\t\tarray.push( parameters.numSpotLightMaps );\n\t\tarray.push( parameters.numHemiLights );\n\t\tarray.push( parameters.numRectAreaLights );\n\t\tarray.push( parameters.numDirLightShadows );\n\t\tarray.push( parameters.numPointLightShadows );\n\t\tarray.push( parameters.numSpotLightShadows );\n\t\tarray.push( parameters.numSpotLightShadowsWithMaps );\n\t\tarray.push( parameters.numLightProbes );\n\t\tarray.push( parameters.shadowMapType );\n\t\tarray.push( parameters.toneMapping );\n\t\tarray.push( parameters.numClippingPlanes );\n\t\tarray.push( parameters.numClipIntersection );\n\t\tarray.push( parameters.depthPacking );\n\n\t}\n\n\tfunction getProgramCacheKeyBooleans( array, parameters ) {\n\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.isWebGL2 )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.supportsVertexTextures )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.instancing )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.instancingColor )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.matcap )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.envMap )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.normalMapObjectSpace )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.normalMapTangentSpace )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.clearcoat )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.iridescence )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.alphaTest )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.vertexColors )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.vertexAlphas )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.vertexUv1s )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.vertexUv2s )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.vertexUv3s )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.vertexTangents )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.anisotropy )\n\t\t\t_programLayers.enable( 17 );\n\n\t\tarray.push( _programLayers.mask );\n\t\t_programLayers.disableAll();\n\n\t\tif ( parameters.fog )\n\t\t\t_programLayers.enable( 0 );\n\t\tif ( parameters.useFog )\n\t\t\t_programLayers.enable( 1 );\n\t\tif ( parameters.flatShading )\n\t\t\t_programLayers.enable( 2 );\n\t\tif ( parameters.logarithmicDepthBuffer )\n\t\t\t_programLayers.enable( 3 );\n\t\tif ( parameters.skinning )\n\t\t\t_programLayers.enable( 4 );\n\t\tif ( parameters.morphTargets )\n\t\t\t_programLayers.enable( 5 );\n\t\tif ( parameters.morphNormals )\n\t\t\t_programLayers.enable( 6 );\n\t\tif ( parameters.morphColors )\n\t\t\t_programLayers.enable( 7 );\n\t\tif ( parameters.premultipliedAlpha )\n\t\t\t_programLayers.enable( 8 );\n\t\tif ( parameters.shadowMapEnabled )\n\t\t\t_programLayers.enable( 9 );\n\t\tif ( parameters.useLegacyLights )\n\t\t\t_programLayers.enable( 10 );\n\t\tif ( parameters.doubleSided )\n\t\t\t_programLayers.enable( 11 );\n\t\tif ( parameters.flipSided )\n\t\t\t_programLayers.enable( 12 );\n\t\tif ( parameters.useDepthPacking )\n\t\t\t_programLayers.enable( 13 );\n\t\tif ( parameters.dithering )\n\t\t\t_programLayers.enable( 14 );\n\t\tif ( parameters.transmission )\n\t\t\t_programLayers.enable( 15 );\n\t\tif ( parameters.sheen )\n\t\t\t_programLayers.enable( 16 );\n\t\tif ( parameters.opaque )\n\t\t\t_programLayers.enable( 17 );\n\t\tif ( parameters.pointsUvs )\n\t\t\t_programLayers.enable( 18 );\n\t\tif ( parameters.decodeVideoTexture )\n\t\t\t_programLayers.enable( 19 );\n\n\t\tarray.push( _programLayers.mask );\n\n\t}\n\n\tfunction getUniforms( material ) {\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\t\tlet uniforms;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\t\t\tuniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\tfunction releaseShaderCache( material ) {\n\n\t\t_customShaders.remove( material );\n\n\t}\n\n\tfunction dispose() {\n\n\t\t_customShaders.dispose();\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\treleaseShaderCache: releaseShaderCache,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transmissive = [];\n\tconst transparent = [];\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransmissive.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.push( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.push( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.push( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\tif ( material.transmission > 0.0 ) {\n\n\t\t\ttransmissive.unshift( renderItem );\n\n\t\t} else if ( material.transparent === true ) {\n\n\t\t\ttransparent.unshift( renderItem );\n\n\t\t} else {\n\n\t\t\topaque.unshift( renderItem );\n\n\t\t}\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transmissive.length > 1 ) transmissive.sort( customTransparentSort || reversePainterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\topaque: opaque,\n\t\ttransmissive: transmissive,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tlet lists = new WeakMap();\n\n\tfunction get( scene, renderCallDepth ) {\n\n\t\tconst listArray = lists.get( scene );\n\t\tlet list;\n\n\t\tif ( listArray === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, [ list ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= listArray.length ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tlistArray.push( list );\n\n\t\t\t} else {\n\n\t\t\t\tlist = listArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingAndTexturingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 2 : 0 ) - ( lightA.castShadow ? 2 : 0 ) + ( lightB.map ? 1 : 0 ) - ( lightA.map ? 1 : 0 );\n\n}\n\nfunction WebGLLights( extensions, capabilities ) {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1,\n\t\t\tnumSpotMaps: - 1,\n\n\t\t\tnumLightProbes: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotLightMap: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotLightMatrix: [],\n\t\trectArea: [],\n\t\trectAreaLTC1: null,\n\t\trectAreaLTC2: null,\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: [],\n\t\tnumSpotLightShadowsWithMaps: 0,\n\t\tnumLightProbes: 0\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights, useLegacyLights ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\t\tlet numSpotMaps = 0;\n\t\tlet numSpotShadowsWithMaps = 0;\n\n\t\tlet numLightProbes = 0;\n\n\t\t// ordering : [shadow casting + map texturing, map texturing, shadow casting, none ]\n\t\tlights.sort( shadowCastingAndTexturingLightsFirst );\n\n\t\t// artist-friendly light intensity scaling factor\n\t\tconst scaleFactor = ( useLegacyLights === true ) ? Math.PI : 1;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity * scaleFactor;\n\t\t\t\tg += color.g * intensity * scaleFactor;\n\t\t\t\tb += color.b * intensity * scaleFactor;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t\tnumLightProbes ++;\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\tif ( light.map ) {\n\n\t\t\t\t\tstate.spotLightMap[ numSpotMaps ] = light.map;\n\t\t\t\t\tnumSpotMaps ++;\n\n\t\t\t\t\t// make sure the lightMatrix is up to date\n\t\t\t\t\t// TODO : do it if required only\n\t\t\t\t\tshadow.updateMatrices( light );\n\n\t\t\t\t\tif ( light.castShadow ) numSpotShadowsWithMaps ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spotLightMatrix[ spotLength ] = shadow.matrix;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity * scaleFactor );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity * scaleFactor );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity * scaleFactor );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( rectAreaLength > 0 ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t// WebGL 2\n\n\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t} else {\n\n\t\t\t\t// WebGL 1\n\n\t\t\t\tif ( extensions.has( 'OES_texture_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n\t\t\t\t} else if ( extensions.has( 'OES_texture_half_float_linear' ) === true ) {\n\n\t\t\t\t\tstate.rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n\t\t\t\t\tstate.rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ||\n\t\t\thash.numSpotMaps !== numSpotMaps ||\n\t\t\thash.numLightProbes !== numLightProbes ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotLightMatrix.length = numSpotShadows + numSpotMaps - numSpotShadowsWithMaps;\n\t\t\tstate.spotLightMap.length = numSpotMaps;\n\t\t\tstate.numSpotLightShadowsWithMaps = numSpotShadowsWithMaps;\n\t\t\tstate.numLightProbes = numLightProbes;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\t\t\thash.numSpotMaps = numSpotMaps;\n\n\t\t\thash.numLightProbes = numLightProbes;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\tfunction setupView( lights, camera ) {\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tif ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = state.directional[ directionalLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = state.spot[ spotLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = state.rectArea[ rectAreaLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = state.point[ pointLength ];\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = state.hemi[ hemiLength ];\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tsetupView: setupView,\n\t\tstate: state\n\t};\n\n}\n\nfunction WebGLRenderState( extensions, capabilities ) {\n\n\tconst lights = new WebGLLights( extensions, capabilities );\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( useLegacyLights ) {\n\n\t\tlights.setup( lightsArray, useLegacyLights );\n\n\t}\n\n\tfunction setupLightsView( camera ) {\n\n\t\tlights.setupView( lightsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\t\tsetupLightsView: setupLightsView,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates( extensions, capabilities ) {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction get( scene, renderCallDepth = 0 ) {\n\n\t\tconst renderStateArray = renderStates.get( scene );\n\t\tlet renderState;\n\n\t\tif ( renderStateArray === undefined ) {\n\n\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\trenderStates.set( scene, [ renderState ] );\n\n\t\t} else {\n\n\t\t\tif ( renderCallDepth >= renderStateArray.length ) {\n\n\t\t\t\trenderState = new WebGLRenderState( extensions, capabilities );\n\t\t\t\trenderStateArray.push( renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStateArray[ renderCallDepth ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nclass MeshDepthMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDepthMaterial = true;\n\n\t\tthis.type = 'MeshDepthMaterial';\n\n\t\tthis.depthPacking = BasicDepthPacking;\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.depthPacking = source.depthPacking;\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshDistanceMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshDistanceMaterial = true;\n\n\t\tthis.type = 'MeshDistanceMaterial';\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst vertex = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\nconst fragment = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n\\tconst float samples = float( VSM_SAMPLES );\\n\\tfloat mean = 0.0;\\n\\tfloat squared_mean = 0.0;\\n\\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\\n\\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\\n\\tfor ( float i = 0.0; i < samples; i ++ ) {\\n\\t\\tfloat uvOffset = uvStart + i * uvStride;\\n\\t\\t#ifdef HORIZONTAL_PASS\\n\\t\\t\\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\\n\\t\\t\\tmean += distribution.x;\\n\\t\\t\\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\t\\t#else\\n\\t\\t\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\\n\\t\\t\\tmean += depth;\\n\\t\\t\\tsquared_mean += depth * depth;\\n\\t\\t#endif\\n\\t}\\n\\tmean = mean / samples;\\n\\tsquared_mean = squared_mean / samples;\\n\\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\n\nfunction WebGLShadowMap( _renderer, _objects, _capabilities ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterial = new MeshDepthMaterial( { depthPacking: RGBADepthPacking } ),\n\t\t_distanceMaterial = new MeshDistanceMaterial(),\n\n\t\t_materialCache = {},\n\n\t\t_maxTextureSize = _capabilities.maxTextureSize;\n\n\tconst shadowSide = { [ FrontSide ]: BackSide, [ BackSide ]: FrontSide, [ DoubleSide ]: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\t\tdefines: {\n\t\t\tVSM_SAMPLES: 8\n\t\t},\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vertex,\n\t\tfragmentShader: fragment\n\n\t} );\n\n\tconst shadowMaterialHorizontal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizontal.defines.HORIZONTAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t'position',\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\tlet _previousType = this.type;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// check for shadow map type changes\n\n\t\tconst toVSM = ( _previousType !== VSMShadowMap && this.type === VSMShadowMap );\n\t\tconst fromVSM = ( _previousType === VSMShadowMap && this.type !== VSMShadowMap );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > _maxTextureSize || _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( _maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > _maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( _maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null || toVSM === true || fromVSM === true ) {\n\n\t\t\t\tconst pars = ( this.type !== VSMShadowMap ) ? { minFilter: NearestFilter, magFilter: NearestFilter } : {};\n\n\t\t\t\tif ( shadow.map !== null ) {\n\n\t\t\t\t\tshadow.map.dispose();\n\n\t\t\t\t}\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + '.shadowMap';\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( shadow.isPointLightShadow !== true && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\t_previousType = this.type;\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\tif ( shadowMaterialVertical.defines.VSM_SAMPLES !== shadow.blurSamples ) {\n\n\t\t\tshadowMaterialVertical.defines.VSM_SAMPLES = shadow.blurSamples;\n\t\t\tshadowMaterialHorizontal.defines.VSM_SAMPLES = shadow.blurSamples;\n\n\t\t\tshadowMaterialVertical.needsUpdate = true;\n\t\t\tshadowMaterialHorizontal.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( shadow.mapPass === null ) {\n\n\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y );\n\n\t\t}\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizontal pass\n\n\t\tshadowMaterialHorizontal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizontal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizontal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizontal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterial( object, material, light, type ) {\n\n\t\tlet result = null;\n\n\t\tconst customMaterial = ( light.isPointLight === true ) ? object.customDistanceMaterial : object.customDepthMaterial;\n\n\t\tif ( customMaterial !== undefined ) {\n\n\t\t\tresult = customMaterial;\n\n\t\t} else {\n\n\t\t\tresult = ( light.isPointLight === true ) ? _distanceMaterial : _depthMaterial;\n\n\t\t\tif ( ( _renderer.localClippingEnabled && material.clipShadows === true && Array.isArray( material.clippingPlanes ) && material.clippingPlanes.length !== 0 ) ||\n\t\t\t\t( material.displacementMap && material.displacementScale !== 0 ) ||\n\t\t\t\t( material.alphaMap && material.alphaTest > 0 ) ||\n\t\t\t\t( material.map && material.alphaTest > 0 ) ) {\n\n\t\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t\t// appropriate state\n\n\t\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t\t}\n\n\t\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t\t}\n\n\t\t\t\tresult = cachedMaterial;\n\n\t\t\t}\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.alphaMap = material.alphaMap;\n\t\tresult.alphaTest = material.alphaTest;\n\t\tresult.map = material.map;\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.displacementMap = material.displacementMap;\n\t\tresult.displacementScale = material.displacementScale;\n\t\tresult.displacementBias = material.displacementBias;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tconst materialProperties = _renderer.properties.get( result );\n\t\t\tmaterialProperties.light = light;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, groupMaterial, light, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, material, light, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef !== stencilRef ||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail !== stencilFail ||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tconst uboBindings = new WeakMap();\n\tconst uboProgramMap = new WeakMap();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentBoundFramebuffers = {};\n\tlet currentDrawbuffers = new WeakMap();\n\tlet defaultDrawbuffers = [];\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = false;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( gl.VERSION );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL ES (\\d)/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst scissorParam = gl.getParameter( gl.SCISSOR_BOX );\n\tconst viewportParam = gl.getParameter( gl.VIEWPORT );\n\n\tconst currentScissor = new Vector4().fromArray( scissorParam );\n\tconst currentViewport = new Vector4().fromArray( viewportParam );\n\n\tfunction createTexture( type, target, count, dimensions ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tif ( isWebGL2 && ( type === gl.TEXTURE_3D || type === gl.TEXTURE_2D_ARRAY ) ) {\n\n\t\t\t\tgl.texImage3D( target, 0, gl.RGBA, 1, 1, dimensions, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t\t} else {\n\n\t\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\tif ( isWebGL2 ) {\n\n\t\temptyTextures[ gl.TEXTURE_2D_ARRAY ] = createTexture( gl.TEXTURE_2D_ARRAY, gl.TEXTURE_2D_ARRAY, 1, 1 );\n\t\temptyTextures[ gl.TEXTURE_3D ] = createTexture( gl.TEXTURE_3D, gl.TEXTURE_3D, 1, 1 );\n\n\t}\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction bindFramebuffer( target, framebuffer ) {\n\n\t\tif ( currentBoundFramebuffers[ target ] !== framebuffer ) {\n\n\t\t\tgl.bindFramebuffer( target, framebuffer );\n\n\t\t\tcurrentBoundFramebuffers[ target ] = framebuffer;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t// gl.DRAW_FRAMEBUFFER is equivalent to gl.FRAMEBUFFER\n\n\t\t\t\tif ( target === gl.DRAW_FRAMEBUFFER ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ gl.FRAMEBUFFER ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t\tif ( target === gl.FRAMEBUFFER ) {\n\n\t\t\t\t\tcurrentBoundFramebuffers[ gl.DRAW_FRAMEBUFFER ] = framebuffer;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction drawBuffers( renderTarget, framebuffer ) {\n\n\t\tlet drawBuffers = defaultDrawbuffers;\n\n\t\tlet needsUpdate = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tdrawBuffers = currentDrawbuffers.get( framebuffer );\n\n\t\t\tif ( drawBuffers === undefined ) {\n\n\t\t\t\tdrawBuffers = [];\n\t\t\t\tcurrentDrawbuffers.set( framebuffer, drawBuffers );\n\n\t\t\t}\n\n\t\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\tif ( drawBuffers.length !== textures.length || drawBuffers[ 0 ] !== gl.COLOR_ATTACHMENT0 ) {\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tdrawBuffers[ i ] = gl.COLOR_ATTACHMENT0 + i;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdrawBuffers.length = textures.length;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( drawBuffers[ 0 ] !== gl.COLOR_ATTACHMENT0 ) {\n\n\t\t\t\t\tdrawBuffers[ 0 ] = gl.COLOR_ATTACHMENT0;\n\n\t\t\t\t\tneedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( drawBuffers[ 0 ] !== gl.BACK ) {\n\n\t\t\t\tdrawBuffers[ 0 ] = gl.BACK;\n\n\t\t\t\tneedsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\tgl.drawBuffers( drawBuffers );\n\n\t\t\t} else {\n\n\t\t\t\textensions.get( 'WEBGL_draw_buffers' ).drawBuffersWEBGL( drawBuffers );\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: gl.FUNC_ADD,\n\t\t[ SubtractEquation ]: gl.FUNC_SUBTRACT,\n\t\t[ ReverseSubtractEquation ]: gl.FUNC_REVERSE_SUBTRACT\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = gl.MIN;\n\t\tequationToGL[ MaxEquation ] = gl.MAX;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: gl.ZERO,\n\t\t[ OneFactor ]: gl.ONE,\n\t\t[ SrcColorFactor ]: gl.SRC_COLOR,\n\t\t[ SrcAlphaFactor ]: gl.SRC_ALPHA,\n\t\t[ SrcAlphaSaturateFactor ]: gl.SRC_ALPHA_SATURATE,\n\t\t[ DstColorFactor ]: gl.DST_COLOR,\n\t\t[ DstAlphaFactor ]: gl.DST_ALPHA,\n\t\t[ OneMinusSrcColorFactor ]: gl.ONE_MINUS_SRC_COLOR,\n\t\t[ OneMinusSrcAlphaFactor ]: gl.ONE_MINUS_SRC_ALPHA,\n\t\t[ OneMinusDstColorFactor ]: gl.ONE_MINUS_DST_COLOR,\n\t\t[ OneMinusDstAlphaFactor ]: gl.ONE_MINUS_DST_ALPHA\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled === true ) {\n\n\t\t\t\tdisable( gl.BLEND );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( currentBlendingEnabled === false ) {\n\n\t\t\tenable( gl.BLEND );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ONE, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ZERO, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ZERO, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = false;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t\tmaterial.alphaToCoverage === true\n\t\t\t? enable( gl.SAMPLE_ALPHA_TO_COVERAGE )\n\t\t\t: disable( gl.SAMPLE_ALPHA_TO_COVERAGE );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture, webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) {\n\n\t\t\tif ( currentTextureSlot === null ) {\n\n\t\t\t\twebglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\t\t} else {\n\n\t\t\t\twebglSlot = currentTextureSlot;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ webglSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ webglSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\t\tgl.activeTexture( webglSlot );\n\t\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t\t}\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texSubImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texSubImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexSubImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexSubImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexSubImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexSubImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texStorage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texStorage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\tfunction updateUBOMapping( uniformsGroup, program ) {\n\n\t\tlet mapping = uboProgramMap.get( program );\n\n\t\tif ( mapping === undefined ) {\n\n\t\t\tmapping = new WeakMap();\n\n\t\t\tuboProgramMap.set( program, mapping );\n\n\t\t}\n\n\t\tlet blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( blockIndex === undefined ) {\n\n\t\t\tblockIndex = gl.getUniformBlockIndex( program, uniformsGroup.name );\n\n\t\t\tmapping.set( uniformsGroup, blockIndex );\n\n\t\t}\n\n\t}\n\n\tfunction uniformBlockBinding( uniformsGroup, program ) {\n\n\t\tconst mapping = uboProgramMap.get( program );\n\t\tconst blockIndex = mapping.get( uniformsGroup );\n\n\t\tif ( uboBindings.get( program ) !== blockIndex ) {\n\n\t\t\t// bind shader specific block index to global block point\n\t\t\tgl.uniformBlockBinding( program, blockIndex, uniformsGroup.__bindingPointIndex );\n\n\t\t\tuboBindings.set( program, blockIndex );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\t// reset state\n\n\t\tgl.disable( gl.BLEND );\n\t\tgl.disable( gl.CULL_FACE );\n\t\tgl.disable( gl.DEPTH_TEST );\n\t\tgl.disable( gl.POLYGON_OFFSET_FILL );\n\t\tgl.disable( gl.SCISSOR_TEST );\n\t\tgl.disable( gl.STENCIL_TEST );\n\t\tgl.disable( gl.SAMPLE_ALPHA_TO_COVERAGE );\n\n\t\tgl.blendEquation( gl.FUNC_ADD );\n\t\tgl.blendFunc( gl.ONE, gl.ZERO );\n\t\tgl.blendFuncSeparate( gl.ONE, gl.ZERO, gl.ONE, gl.ZERO );\n\n\t\tgl.colorMask( true, true, true, true );\n\t\tgl.clearColor( 0, 0, 0, 0 );\n\n\t\tgl.depthMask( true );\n\t\tgl.depthFunc( gl.LESS );\n\t\tgl.clearDepth( 1 );\n\n\t\tgl.stencilMask( 0xffffffff );\n\t\tgl.stencilFunc( gl.ALWAYS, 0, 0xffffffff );\n\t\tgl.stencilOp( gl.KEEP, gl.KEEP, gl.KEEP );\n\t\tgl.clearStencil( 0 );\n\n\t\tgl.cullFace( gl.BACK );\n\t\tgl.frontFace( gl.CCW );\n\n\t\tgl.polygonOffset( 0, 0 );\n\n\t\tgl.activeTexture( gl.TEXTURE0 );\n\n\t\tgl.bindFramebuffer( gl.FRAMEBUFFER, null );\n\n\t\tif ( isWebGL2 === true ) {\n\n\t\t\tgl.bindFramebuffer( gl.DRAW_FRAMEBUFFER, null );\n\t\t\tgl.bindFramebuffer( gl.READ_FRAMEBUFFER, null );\n\n\t\t}\n\n\t\tgl.useProgram( null );\n\n\t\tgl.lineWidth( 1 );\n\n\t\tgl.scissor( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tgl.viewport( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\t// reset internals\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentBoundFramebuffers = {};\n\t\tcurrentDrawbuffers = new WeakMap();\n\t\tdefaultDrawbuffers = [];\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlendingEnabled = false;\n\t\tcurrentBlending = null;\n\t\tcurrentBlendEquation = null;\n\t\tcurrentBlendSrc = null;\n\t\tcurrentBlendDst = null;\n\t\tcurrentBlendEquationAlpha = null;\n\t\tcurrentBlendSrcAlpha = null;\n\t\tcurrentBlendDstAlpha = null;\n\t\tcurrentPremultipledAlpha = false;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcurrentLineWidth = null;\n\n\t\tcurrentPolygonOffsetFactor = null;\n\t\tcurrentPolygonOffsetUnits = null;\n\n\t\tcurrentScissor.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\t\tcurrentViewport.set( 0, 0, gl.canvas.width, gl.canvas.height );\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tbindFramebuffer: bindFramebuffer,\n\t\tdrawBuffers: drawBuffers,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\tcompressedTexImage3D: compressedTexImage3D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tupdateUBOMapping: updateUBOMapping,\n\t\tuniformBlockBinding: uniformBlockBinding,\n\n\t\ttexStorage2D: texStorage2D,\n\t\ttexStorage3D: texStorage3D,\n\t\ttexSubImage2D: texSubImage2D,\n\t\ttexSubImage3D: texSubImage3D,\n\t\tcompressedTexSubImage2D: compressedTexSubImage2D,\n\t\tcompressedTexSubImage3D: compressedTexSubImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\tconst multisampledRTTExt = extensions.has( 'WEBGL_multisampled_render_to_texture' ) ? extensions.get( 'WEBGL_multisampled_render_to_texture' ) : null;\n\tconst supportsInvalidateFramebuffer = typeof navigator === 'undefined' ? false : /OculusBrowser/g.test( navigator.userAgent );\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\tconst _sources = new WeakMap(); // maps WebglTexture objects to instances of Source\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( '2d' ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\t// eslint-disable-next-line compat/compat\n\t\t\tnew OffscreenCanvas( width, height ) : createElementNS( 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo$1( image ) {\n\n\t\treturn isPowerOfTwo( image.width ) && isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType, colorSpace, forceLinearTransfer = false ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === _gl.RED ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.R32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.R16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.R8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RED_INTEGER ) {\n\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.R8UI;\n\t\t\tif ( glType === _gl.UNSIGNED_SHORT ) internalFormat = _gl.R16UI;\n\t\t\tif ( glType === _gl.UNSIGNED_INT ) internalFormat = _gl.R32UI;\n\t\t\tif ( glType === _gl.BYTE ) internalFormat = _gl.R8I;\n\t\t\tif ( glType === _gl.SHORT ) internalFormat = _gl.R16I;\n\t\t\tif ( glType === _gl.INT ) internalFormat = _gl.R32I;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RG ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RG32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RG16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RG8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGBA ) {\n\n\t\t\tconst transfer = forceLinearTransfer ? LinearTransfer : ColorManagement.getTransfer( colorSpace );\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGBA32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGBA16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = ( transfer === SRGBTransfer ) ? _gl.SRGB8_ALPHA8 : _gl.RGBA8;\n\t\t\tif ( glType === _gl.UNSIGNED_SHORT_4_4_4_4 ) internalFormat = _gl.RGBA4;\n\t\t\tif ( glType === _gl.UNSIGNED_SHORT_5_5_5_1 ) internalFormat = _gl.RGB5_A1;\n\n\t\t}\n\n\t\tif ( internalFormat === _gl.R16F || internalFormat === _gl.R32F ||\n\t\t\tinternalFormat === _gl.RG16F || internalFormat === _gl.RG32F ||\n\t\t\tinternalFormat === _gl.RGBA16F || internalFormat === _gl.RGBA32F ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\tfunction getMipLevels( texture, image, supportsMips ) {\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) === true || ( texture.isFramebufferTexture && texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) ) {\n\n\t\t\treturn Math.log2( Math.max( image.width, image.height ) ) + 1;\n\n\t\t} else if ( texture.mipmaps !== undefined && texture.mipmaps.length > 0 ) {\n\n\t\t\t// user-defined mipmaps\n\n\t\t\treturn texture.mipmaps.length;\n\n\t\t} else if ( texture.isCompressedTexture && Array.isArray( texture.image ) ) {\n\n\t\t\treturn image.mipmaps.length;\n\n\t\t} else {\n\n\t\t\t// texture without mipmaps (only base level)\n\n\t\t\treturn 1;\n\n\t\t}\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t// check if it's necessary to remove the WebGLTexture object\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures ) {\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\t\t\twebglTexture.usedTimes --;\n\n\t\t\t// the WebGLTexture object is not used anymore, remove it\n\n\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\tdeleteTexture( texture );\n\n\t\t\t}\n\n\t\t\t// remove the weak map entry if no WebGLTexture uses the source anymore\n\n\t\t\tif ( Object.keys( webglTextures ).length === 0 ) {\n\n\t\t\t\t_sources.delete( source );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deleteTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tconst source = texture.source;\n\t\tconst webglTextures = _sources.get( source );\n\t\tdelete webglTextures[ textureProperties.__cacheKey ];\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t\tinfo.memory.textures --;\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( Array.isArray( renderTargetProperties.__webglFramebuffer[ i ] ) ) {\n\n\t\t\t\t\tfor ( let level = 0; level < renderTargetProperties.__webglFramebuffer[ i ].length; level ++ ) _gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ][ level ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( Array.isArray( renderTargetProperties.__webglFramebuffer ) ) {\n\n\t\t\t\tfor ( let level = 0; level < renderTargetProperties.__webglFramebuffer.length; level ++ ) _gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ level ] );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\n\t\t\t}\n\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) {\n\n\t\t\t\tfor ( let i = 0; i < renderTargetProperties.__webglColorRenderbuffer.length; i ++ ) {\n\n\t\t\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer[ i ] ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets ) {\n\n\t\t\tfor ( let i = 0, il = texture.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachmentProperties = properties.get( texture[ i ] );\n\n\t\t\t\tif ( attachmentProperties.__webglTexture ) {\n\n\t\t\t\t\t_gl.deleteTexture( attachmentProperties.__webglTexture );\n\n\t\t\t\t\tinfo.memory.textures --;\n\n\t\t\t\t}\n\n\t\t\t\tproperties.remove( texture[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\tfunction getTextureCacheKey( texture ) {\n\n\t\tconst array = [];\n\n\t\tarray.push( texture.wrapS );\n\t\tarray.push( texture.wrapT );\n\t\tarray.push( texture.wrapR || 0 );\n\t\tarray.push( texture.magFilter );\n\t\tarray.push( texture.minFilter );\n\t\tarray.push( texture.anisotropy );\n\t\tarray.push( texture.internalFormat );\n\t\tarray.push( texture.format );\n\t\tarray.push( texture.type );\n\t\tarray.push( texture.generateMipmaps );\n\t\tarray.push( texture.premultiplyAlpha );\n\t\tarray.push( texture.flipY );\n\t\tarray.push( texture.unpackAlignment );\n\t\tarray.push( texture.colorSpace );\n\n\t\treturn array.join();\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.isRenderTargetTexture === false && texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but no image data found.' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( _gl.TEXTURE_2D_ARRAY, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( _gl.TEXTURE_3D, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadCubeTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: _gl.REPEAT,\n\t\t[ ClampToEdgeWrapping ]: _gl.CLAMP_TO_EDGE,\n\t\t[ MirroredRepeatWrapping ]: _gl.MIRRORED_REPEAT\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: _gl.NEAREST,\n\t\t[ NearestMipmapNearestFilter ]: _gl.NEAREST_MIPMAP_NEAREST,\n\t\t[ NearestMipmapLinearFilter ]: _gl.NEAREST_MIPMAP_LINEAR,\n\n\t\t[ LinearFilter ]: _gl.LINEAR,\n\t\t[ LinearMipmapNearestFilter ]: _gl.LINEAR_MIPMAP_NEAREST,\n\t\t[ LinearMipmapLinearFilter ]: _gl.LINEAR_MIPMAP_LINEAR\n\t};\n\n\tconst compareToGL = {\n\t\t[ NeverCompare ]: _gl.NEVER,\n\t\t[ AlwaysCompare ]: _gl.ALWAYS,\n\t\t[ LessCompare ]: _gl.LESS,\n\t\t[ LessEqualCompare ]: _gl.LEQUAL,\n\t\t[ EqualCompare ]: _gl.EQUAL,\n\t\t[ GreaterEqualCompare ]: _gl.GEQUAL,\n\t\t[ GreaterCompare ]: _gl.GREATER,\n\t\t[ NotEqualCompare ]: _gl.NOTEQUAL\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, _gl.CLAMP_TO_EDGE );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( texture.compareFunction ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_COMPARE_MODE, _gl.COMPARE_REF_TO_TEXTURE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_COMPARE_FUNC, compareToGL[ texture.compareFunction ] );\n\n\t\t}\n\n\t\tif ( extensions.has( 'EXT_texture_filter_anisotropic' ) === true ) {\n\n\t\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\t\tif ( texture.magFilter === NearestFilter ) return;\n\t\t\tif ( texture.minFilter !== NearestMipmapLinearFilter && texture.minFilter !== LinearMipmapLinearFilter ) return;\n\t\t\tif ( texture.type === FloatType && extensions.has( 'OES_texture_float_linear' ) === false ) return; // verify extension for WebGL 1 and WebGL 2\n\t\t\tif ( isWebGL2 === false && ( texture.type === HalfFloatType && extensions.has( 'OES_texture_half_float_linear' ) === false ) ) return; // verify extension for WebGL 1 only\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tlet forceUpload = false;\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t}\n\n\t\t// create Source <-> WebGLTextures mapping if necessary\n\n\t\tconst source = texture.source;\n\t\tlet webglTextures = _sources.get( source );\n\n\t\tif ( webglTextures === undefined ) {\n\n\t\t\twebglTextures = {};\n\t\t\t_sources.set( source, webglTextures );\n\n\t\t}\n\n\t\t// check if there is already a WebGLTexture object for the given texture parameters\n\n\t\tconst textureCacheKey = getTextureCacheKey( texture );\n\n\t\tif ( textureCacheKey !== textureProperties.__cacheKey ) {\n\n\t\t\t// if not, create a new instance of WebGLTexture\n\n\t\t\tif ( webglTextures[ textureCacheKey ] === undefined ) {\n\n\t\t\t\t// create new entry\n\n\t\t\t\twebglTextures[ textureCacheKey ] = {\n\t\t\t\t\ttexture: _gl.createTexture(),\n\t\t\t\t\tusedTimes: 0\n\t\t\t\t};\n\n\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t// when a new instance of WebGLTexture was created, a texture upload is required\n\t\t\t\t// even if the image contents are identical\n\n\t\t\t\tforceUpload = true;\n\n\t\t\t}\n\n\t\t\twebglTextures[ textureCacheKey ].usedTimes ++;\n\n\t\t\t// every time the texture cache key changes, it's necessary to check if an instance of\n\t\t\t// WebGLTexture can be deleted in order to avoid a memory leak.\n\n\t\t\tconst webglTexture = webglTextures[ textureProperties.__cacheKey ];\n\n\t\t\tif ( webglTexture !== undefined ) {\n\n\t\t\t\twebglTextures[ textureProperties.__cacheKey ].usedTimes --;\n\n\t\t\t\tif ( webglTexture.usedTimes === 0 ) {\n\n\t\t\t\t\tdeleteTexture( texture );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// store references to cache key and WebGLTexture object\n\n\t\t\ttextureProperties.__cacheKey = textureCacheKey;\n\t\t\ttextureProperties.__webglTexture = webglTextures[ textureCacheKey ].texture;\n\n\t\t}\n\n\t\treturn forceUpload;\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = _gl.TEXTURE_2D;\n\n\t\tif ( texture.isDataArrayTexture || texture.isCompressedArrayTexture ) textureType = _gl.TEXTURE_2D_ARRAY;\n\t\tif ( texture.isData3DTexture ) textureType = _gl.TEXTURE_3D;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t\tconst sourceProperties = properties.get( source );\n\n\t\tif ( source.version !== sourceProperties.__version || forceUpload === true ) {\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\n\t\t\tconst workingPrimaries = ColorManagement.getPrimaries( ColorManagement.workingColorSpace );\n\t\t\tconst texturePrimaries = texture.colorSpace === NoColorSpace ? null : ColorManagement.getPrimaries( texture.colorSpace );\n\t\t\tconst unpackConversion = texture.colorSpace === NoColorSpace || workingPrimaries === texturePrimaries ? _gl.NONE : _gl.BROWSER_DEFAULT_WEBGL;\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, unpackConversion );\n\n\t\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo$1( texture.image ) === false;\n\t\t\tlet image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\t\t\timage = verifyColorSpace( texture, image );\n\n\t\t\tconst supportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.colorSpace );\n\n\t\t\tlet glType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace, texture.isVideoTexture );\n\n\t\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\t\tlet mipmap;\n\t\t\tconst mipmaps = texture.mipmaps;\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true );\n\t\t\tconst allocateMemory = ( sourceProperties.__version === undefined ) || ( forceUpload === true );\n\t\t\tconst levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t\t// populate depth texture with dummy data\n\n\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH24_STENCIL8;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT16; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// validation checks for WebGL 1\n\n\t\t\t\tif ( texture.format === DepthFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedIntType;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, 1, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, 0, 0, 0, image.width, image.height, glFormat, glType, image.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\t\tif ( texture.isCompressedArrayTexture ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( _gl.TEXTURE_2D_ARRAY, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage3D( _gl.TEXTURE_2D_ARRAY, i, 0, 0, 0, mipmap.width, mipmap.height, image.depth, glFormat, mipmap.data, 0, 0 );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage3D( _gl.TEXTURE_2D_ARRAY, i, glInternalFormat, mipmap.width, mipmap.height, image.depth, 0, mipmap.data, 0, 0 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage3D( _gl.TEXTURE_2D_ARRAY, i, 0, 0, 0, mipmap.width, mipmap.height, image.depth, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage3D( _gl.TEXTURE_2D_ARRAY, i, glInternalFormat, mipmap.width, mipmap.height, image.depth, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( _gl.TEXTURE_2D, i, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, i, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isDataArrayTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( _gl.TEXTURE_2D_ARRAY, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.texSubImage3D( _gl.TEXTURE_2D_ARRAY, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage3D( _gl.TEXTURE_3D, levels, glInternalFormat, image.width, image.height, image.depth );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.texSubImage3D( _gl.TEXTURE_3D, 0, 0, 0, 0, image.width, image.height, image.depth, glFormat, glType, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage3D( _gl.TEXTURE_3D, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\n\t\t\t\t}\n\n\t\t\t} else if ( texture.isFramebufferTexture ) {\n\n\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tlet width = image.width, height = image.height;\n\n\t\t\t\t\t\tfor ( let i = 0; i < levels; i ++ ) {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, width, height, 0, glFormat, glType, null );\n\n\t\t\t\t\t\t\twidth >>= 1;\n\t\t\t\t\t\t\theight >>= 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t\t// use manually created mipmaps if available\n\t\t\t\t// if there are no manual mipmaps\n\t\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, mipmaps[ 0 ].width, mipmaps[ 0 ].height );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, i, 0, 0, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\tif ( allocateMemory ) {\n\n\t\t\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_2D, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_2D, 0, 0, 0, glFormat, glType, image );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, glFormat, glType, image );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( textureType );\n\n\t\t\t}\n\n\t\t\tsourceProperties.__version = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\tfunction uploadCubeTexture( textureProperties, texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tconst forceUpload = initTexture( textureProperties, texture );\n\t\tconst source = texture.source;\n\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture, _gl.TEXTURE0 + slot );\n\n\t\tconst sourceProperties = properties.get( source );\n\n\t\tif ( source.version !== sourceProperties.__version || forceUpload === true ) {\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\n\t\t\tconst workingPrimaries = ColorManagement.getPrimaries( ColorManagement.workingColorSpace );\n\t\t\tconst texturePrimaries = texture.colorSpace === NoColorSpace ? null : ColorManagement.getPrimaries( texture.colorSpace );\n\t\t\tconst unpackConversion = texture.colorSpace === NoColorSpace || workingPrimaries === texturePrimaries ? _gl.NONE : _gl.BROWSER_DEFAULT_WEBGL;\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, unpackConversion );\n\n\t\t\tconst isCompressed = ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture );\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tconst cubeImage = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t\tcubeImage[ i ] = verifyColorSpace( texture, cubeImage[ i ] );\n\n\t\t\t}\n\n\t\t\tconst image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo$1( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format, texture.colorSpace ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace );\n\n\t\t\tconst useTexStorage = ( isWebGL2 && texture.isVideoTexture !== true );\n\t\t\tconst allocateMemory = ( sourceProperties.__version === undefined ) || ( forceUpload === true );\n\t\t\tlet levels = getMipLevels( texture, image, supportsMips );\n\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\t\tlet mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_CUBE_MAP, levels, glInternalFormat, image.width, image.height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, mipmap.data );\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, 0, 0, mipmap.width, mipmap.height, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tif ( useTexStorage && allocateMemory ) {\n\n\t\t\t\t\t// TODO: Uniformly handle mipmap definitions\n\t\t\t\t\t// Normal textures and compressed cube textures define base level + mips with their mipmap array\n\t\t\t\t\t// Uncompressed cube textures use their mipmap array only for mips (no base level)\n\n\t\t\t\t\tif ( mipmaps.length > 0 ) levels ++;\n\n\t\t\t\t\tstate.texStorage2D( _gl.TEXTURE_CUBE_MAP, levels, glInternalFormat, cubeImage[ 0 ].width, cubeImage[ 0 ].height );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, 0, 0, cubeImage[ i ].width, cubeImage[ i ].height, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, 0, 0, mipmapImage.width, mipmapImage.height, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, 0, 0, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tif ( useTexStorage ) {\n\n\t\t\t\t\t\t\t\tstate.texSubImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, 0, 0, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t}\n\n\t\t\tsourceProperties.__version = source.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, texture, attachment, textureTarget, level ) {\n\n\t\tconst glFormat = utils.convert( texture.format, texture.colorSpace );\n\t\tconst glType = utils.convert( texture.type );\n\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace );\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( ! renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\tconst width = Math.max( 1, renderTarget.width >> level );\n\t\t\tconst height = Math.max( 1, renderTarget.height >> level );\n\n\t\t\tif ( textureTarget === _gl.TEXTURE_3D || textureTarget === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\tstate.texImage3D( textureTarget, level, glInternalFormat, width, height, renderTarget.depth, 0, glFormat, glType, null );\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( textureTarget, level, glInternalFormat, width, height, 0, glFormat, glType, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( texture ).__webglTexture, 0, getRenderTargetSamples( renderTarget ) );\n\n\t\t} else if ( textureTarget === _gl.TEXTURE_2D || ( textureTarget >= _gl.TEXTURE_CUBE_MAP_POSITIVE_X && textureTarget <= _gl.TEXTURE_CUBE_MAP_NEGATIVE_Z ) ) { // see #24753\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( texture ).__webglTexture, level );\n\n\t\t}\n\n\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = ( isWebGL2 === true ) ? _gl.DEPTH_COMPONENT24 : _gl.DEPTH_COMPONENT16;\n\n\t\t\tif ( isMultisample || useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, _gl.DEPTH24_STENCIL8, renderTarget.width, renderTarget.height );\n\n\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( _gl.RENDERBUFFER, samples, _gl.DEPTH24_STENCIL8, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tconst texture = textures[ i ];\n\n\t\t\t\tconst glFormat = utils.convert( texture.format, texture.colorSpace );\n\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace );\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\tif ( isMultisample && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else if ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\t\tmultisampledRTTExt.renderbufferStorageMultisampleEXT( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\tif ( useMultisampledRTT( renderTarget ) ) {\n\n\t\t\t\tmultisampledRTTExt.framebufferTexture2DMultisampleEXT( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0, samples );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture && ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// rebind framebuffer with external textures\n\tfunction rebindTextures( renderTarget, colorTexture, depthTexture ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tif ( colorTexture !== undefined ) {\n\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, renderTarget.texture, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D, 0 );\n\n\t\t}\n\n\t\tif ( depthTexture !== undefined ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tif ( renderTarget.isWebGLMultipleRenderTargets !== true ) {\n\n\t\t\tif ( textureProperties.__webglTexture === undefined ) {\n\n\t\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( isWebGL2 && texture.mipmaps && texture.mipmaps.length > 0 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = [];\n\n\t\t\t\t\tfor ( let level = 0; level < texture.mipmaps.length; level ++ ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ][ level ] = _gl.createFramebuffer();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 && texture.mipmaps && texture.mipmaps.length > 0 ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\t\tfor ( let level = 0; level < texture.mipmaps.length; level ++ ) {\n\n\t\t\t\t\trenderTargetProperties.__webglFramebuffer[ level ] = _gl.createFramebuffer();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tif ( capabilities.drawBuffers ) {\n\n\t\t\t\t\tconst textures = renderTarget.texture;\n\n\t\t\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst attachmentProperties = properties.get( textures[ i ] );\n\n\t\t\t\t\t\tif ( attachmentProperties.__webglTexture === undefined ) {\n\n\t\t\t\t\t\t\tattachmentProperties.__webglTexture = _gl.createTexture();\n\n\t\t\t\t\t\t\tinfo.memory.textures ++;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\tconst textures = isMultipleRenderTargets ? texture : [ texture ];\n\n\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = [];\n\n\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tconst texture = textures[ i ];\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer[ i ] = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst glFormat = utils.convert( texture.format, texture.colorSpace );\n\t\t\t\t\tconst glType = utils.convert( texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType, texture.colorSpace, renderTarget.isXRRenderTarget === true );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t}\n\n\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( isWebGL2 && texture.mipmaps && texture.mipmaps.length > 0 ) {\n\n\t\t\t\t\tfor ( let level = 0; level < texture.mipmaps.length; level ++ ) {\n\n\t\t\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ][ level ], renderTarget, texture, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, level );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, texture, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else if ( isMultipleRenderTargets ) {\n\n\t\t\tconst textures = renderTarget.texture;\n\n\t\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\t\tconst attachment = textures[ i ];\n\t\t\t\tconst attachmentProperties = properties.get( attachment );\n\n\t\t\t\tstate.bindTexture( _gl.TEXTURE_2D, attachmentProperties.__webglTexture );\n\t\t\t\tsetTextureParameters( _gl.TEXTURE_2D, attachment, supportsMips );\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, attachment, _gl.COLOR_ATTACHMENT0 + i, _gl.TEXTURE_2D, 0 );\n\n\t\t\t\tif ( textureNeedsGenerateMipmaps( attachment, supportsMips ) ) {\n\n\t\t\t\t\tgenerateMipmap( _gl.TEXTURE_2D );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t} else {\n\n\t\t\tlet glTextureType = _gl.TEXTURE_2D;\n\n\t\t\tif ( renderTarget.isWebGL3DRenderTarget || renderTarget.isWebGLArrayRenderTarget ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\tglTextureType = renderTarget.isWebGL3DRenderTarget ? _gl.TEXTURE_3D : _gl.TEXTURE_2D_ARRAY;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( glTextureType, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( glTextureType, texture, supportsMips );\n\n\t\t\tif ( isWebGL2 && texture.mipmaps && texture.mipmaps.length > 0 ) {\n\n\t\t\t\tfor ( let level = 0; level < texture.mipmaps.length; level ++ ) {\n\n\t\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ level ], renderTarget, texture, _gl.COLOR_ATTACHMENT0, glTextureType, level );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, texture, _gl.COLOR_ATTACHMENT0, glTextureType, 0 );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( glTextureType );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst supportsMips = isPowerOfTwo$1( renderTarget ) || isWebGL2;\n\n\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets === true ? renderTarget.texture : [ renderTarget.texture ];\n\n\t\tfor ( let i = 0, il = textures.length; i < il; i ++ ) {\n\n\t\t\tconst texture = textures[ i ];\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\t\tgenerateMipmap( target );\n\t\t\t\tstate.unbindTexture();\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( ( isWebGL2 && renderTarget.samples > 0 ) && useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\tconst textures = renderTarget.isWebGLMultipleRenderTargets ? renderTarget.texture : [ renderTarget.texture ];\n\t\t\tconst width = renderTarget.width;\n\t\t\tconst height = renderTarget.height;\n\t\t\tlet mask = _gl.COLOR_BUFFER_BIT;\n\t\t\tconst invalidationArray = [];\n\t\t\tconst depthStyle = renderTarget.stencilBuffer ? _gl.DEPTH_STENCIL_ATTACHMENT : _gl.DEPTH_ATTACHMENT;\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\t\tconst isMultipleRenderTargets = ( renderTarget.isWebGLMultipleRenderTargets === true );\n\n\t\t\t// If MRT we need to remove FBO attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.RENDERBUFFER, null );\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( _gl.DRAW_FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.TEXTURE_2D, null, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( _gl.READ_FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tstate.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\n\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\tinvalidationArray.push( _gl.COLOR_ATTACHMENT0 + i );\n\n\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\tinvalidationArray.push( depthStyle );\n\n\t\t\t\t}\n\n\t\t\t\tconst ignoreDepthValues = ( renderTargetProperties.__ignoreDepthValues !== undefined ) ? renderTargetProperties.__ignoreDepthValues : false;\n\n\t\t\t\tif ( ignoreDepthValues === false ) {\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) mask |= _gl.DEPTH_BUFFER_BIT;\n\t\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.READ_FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( ignoreDepthValues === true ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( _gl.READ_FRAMEBUFFER, [ depthStyle ] );\n\t\t\t\t\t_gl.invalidateFramebuffer( _gl.DRAW_FRAMEBUFFER, [ depthStyle ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\t\t\t\t\t_gl.framebufferTexture2D( _gl.DRAW_FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, _gl.NEAREST );\n\n\t\t\t\tif ( supportsInvalidateFramebuffer ) {\n\n\t\t\t\t\t_gl.invalidateFramebuffer( _gl.READ_FRAMEBUFFER, invalidationArray );\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( _gl.READ_FRAMEBUFFER, null );\n\t\t\tstate.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, null );\n\n\t\t\t// If MRT since pre-blit we removed the FBO we need to reconstruct the attachments\n\t\t\tif ( isMultipleRenderTargets ) {\n\n\t\t\t\tfor ( let i = 0; i < textures.length; i ++ ) {\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer[ i ] );\n\n\t\t\t\t\tconst webglTexture = properties.get( textures[ i ] ).__webglTexture;\n\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\t\t_gl.framebufferTexture2D( _gl.DRAW_FRAMEBUFFER, _gl.COLOR_ATTACHMENT0 + i, _gl.TEXTURE_2D, webglTexture, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn Math.min( maxSamples, renderTarget.samples );\n\n\t}\n\n\tfunction useMultisampledRTT( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\treturn isWebGL2 && renderTarget.samples > 0 && extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true && renderTargetProperties.__useRenderToTexture !== false;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\tfunction verifyColorSpace( texture, image ) {\n\n\t\tconst colorSpace = texture.colorSpace;\n\t\tconst format = texture.format;\n\t\tconst type = texture.type;\n\n\t\tif ( texture.isCompressedTexture === true || texture.isVideoTexture === true || texture.format === _SRGBAFormat ) return image;\n\n\t\tif ( colorSpace !== LinearSRGBColorSpace && colorSpace !== NoColorSpace ) {\n\n\t\t\t// sRGB\n\n\t\t\tif ( ColorManagement.getTransfer( colorSpace ) === SRGBTransfer ) {\n\n\t\t\t\tif ( isWebGL2 === false ) {\n\n\t\t\t\t\t// in WebGL 1, try to use EXT_sRGB extension and unsized formats\n\n\t\t\t\t\tif ( extensions.has( 'EXT_sRGB' ) === true && format === RGBAFormat ) {\n\n\t\t\t\t\t\ttexture.format = _SRGBAFormat;\n\n\t\t\t\t\t\t// it's not possible to generate mips in WebGL 1 with this extension\n\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\t\ttexture.generateMipmaps = false;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// slow fallback (CPU decode)\n\n\t\t\t\t\t\timage = ImageUtils.sRGBToLinear( image );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// in WebGL 2 uncompressed textures can only be sRGB encoded if they have the RGBA8 format\n\n\t\t\t\t\tif ( format !== RGBAFormat || type !== UnsignedByteType ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( 'THREE.WebGLTextures: Unsupported texture color space:', colorSpace );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.rebindTextures = rebindTextures;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\tthis.setupDepthRenderbuffer = setupDepthRenderbuffer;\n\tthis.setupFrameBufferTexture = setupFrameBufferTexture;\n\tthis.useMultisampledRTT = useMultisampledRTT;\n\n}\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p, colorSpace = NoColorSpace ) {\n\n\t\tlet extension;\n\n\t\tconst transfer = ColorManagement.getTransfer( colorSpace );\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return gl.HALF_FLOAT;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\n\t\t// WebGL 1 sRGB fallback\n\n\t\tif ( p === _SRGBAFormat ) {\n\n\t\t\textension = extensions.get( 'EXT_sRGB' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.SRGB_ALPHA_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedFormat ) return gl.RED;\n\t\tif ( p === RedIntegerFormat ) return gl.RED_INTEGER;\n\t\tif ( p === RGFormat ) return gl.RG;\n\t\tif ( p === RGIntegerFormat ) return gl.RG_INTEGER;\n\t\tif ( p === RGBAIntegerFormat ) return gl.RGBA_INTEGER;\n\n\t\t// S3TC\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format || p === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\tif ( transfer === SRGBTransfer ) {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc_srgb' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\t\tif ( extension !== null ) {\n\n\t\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// PVRTC\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format || p === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC1\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ETC2\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ETC2 : extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC : extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// ASTC\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_ASTC_4x4_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR : extension.COMPRESSED_RGBA_ASTC_4x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x4_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR : extension.COMPRESSED_RGBA_ASTC_5x4_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_5x5_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR : extension.COMPRESSED_RGBA_ASTC_5x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x5_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR : extension.COMPRESSED_RGBA_ASTC_6x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_6x6_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR : extension.COMPRESSED_RGBA_ASTC_6x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x5_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR : extension.COMPRESSED_RGBA_ASTC_8x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x6_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR : extension.COMPRESSED_RGBA_ASTC_8x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_8x8_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR : extension.COMPRESSED_RGBA_ASTC_8x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x5_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR : extension.COMPRESSED_RGBA_ASTC_10x5_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x6_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR : extension.COMPRESSED_RGBA_ASTC_10x6_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x8_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR : extension.COMPRESSED_RGBA_ASTC_10x8_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_10x10_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR : extension.COMPRESSED_RGBA_ASTC_10x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x10_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR : extension.COMPRESSED_RGBA_ASTC_12x10_KHR;\n\t\t\t\tif ( p === RGBA_ASTC_12x12_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR : extension.COMPRESSED_RGBA_ASTC_12x12_KHR;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// BPTC\n\n\t\tif ( p === RGBA_BPTC_Format || p === RGB_BPTC_SIGNED_Format || p === RGB_BPTC_UNSIGNED_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_BPTC_Format ) return ( transfer === SRGBTransfer ) ? extension.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT : extension.COMPRESSED_RGBA_BPTC_UNORM_EXT;\n\t\t\t\tif ( p === RGB_BPTC_SIGNED_Format ) return extension.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;\n\t\t\t\tif ( p === RGB_BPTC_UNSIGNED_Format ) return extension.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// RGTC\n\n\t\tif ( p === RED_RGTC1_Format || p === SIGNED_RED_RGTC1_Format || p === RED_GREEN_RGTC2_Format || p === SIGNED_RED_GREEN_RGTC2_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_rgtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGBA_BPTC_Format ) return extension.COMPRESSED_RED_RGTC1_EXT;\n\t\t\t\tif ( p === SIGNED_RED_RGTC1_Format ) return extension.COMPRESSED_SIGNED_RED_RGTC1_EXT;\n\t\t\t\tif ( p === RED_GREEN_RGTC2_Format ) return extension.COMPRESSED_RED_GREEN_RGTC2_EXT;\n\t\t\t\tif ( p === SIGNED_RED_GREEN_RGTC2_Format ) return extension.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return gl.UNSIGNED_INT_24_8;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// if \"p\" can't be resolved, assume the user defines a WebGL constant as a string (fallback/workaround for packed RGB formats)\n\n\t\treturn ( gl[ p ] !== undefined ) ? gl[ p ] : null;\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\nclass ArrayCamera extends PerspectiveCamera {\n\n\tconstructor( array = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isArrayCamera = true;\n\n\t\tthis.cameras = array;\n\n\t}\n\n}\n\nclass Group extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isGroup = true;\n\n\t\tthis.type = 'Group';\n\n\t}\n\n}\n\nconst _moveEvent = { type: 'move' };\n\nclass WebXRController {\n\n\tconstructor() {\n\n\t\tthis._targetRay = null;\n\t\tthis._grip = null;\n\t\tthis._hand = null;\n\n\t}\n\n\tgetHandSpace() {\n\n\t\tif ( this._hand === null ) {\n\n\t\t\tthis._hand = new Group();\n\t\t\tthis._hand.matrixAutoUpdate = false;\n\t\t\tthis._hand.visible = false;\n\n\t\t\tthis._hand.joints = {};\n\t\t\tthis._hand.inputState = { pinching: false };\n\n\t\t}\n\n\t\treturn this._hand;\n\n\t}\n\n\tgetTargetRaySpace() {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\t\t\tthis._targetRay.hasLinearVelocity = false;\n\t\t\tthis._targetRay.linearVelocity = new Vector3();\n\t\t\tthis._targetRay.hasAngularVelocity = false;\n\t\t\tthis._targetRay.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t}\n\n\tgetGripSpace() {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\t\t\tthis._grip.hasLinearVelocity = false;\n\t\t\tthis._grip.linearVelocity = new Vector3();\n\t\t\tthis._grip.hasAngularVelocity = false;\n\t\t\tthis._grip.angularVelocity = new Vector3();\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t}\n\n\tdispatchEvent( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tconnect( inputSource ) {\n\n\t\tif ( inputSource && inputSource.hand ) {\n\n\t\t\tconst hand = this._hand;\n\n\t\t\tif ( hand ) {\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Initialize hand with joints when connected\n\t\t\t\t\tthis._getHandJoint( hand, inputjoint );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\tif ( this._hand !== null ) {\n\n\t\t\tthis._hand.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tupdate( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\t\tlet handPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\t\tconst hand = this._hand;\n\n\t\tif ( inputSource && frame.session.visibilityState !== 'visible-blurred' ) {\n\n\t\t\tif ( hand && inputSource.hand ) {\n\n\t\t\t\thandPose = true;\n\n\t\t\t\tfor ( const inputjoint of inputSource.hand.values() ) {\n\n\t\t\t\t\t// Update the joints groups with the XRJoint poses\n\t\t\t\t\tconst jointPose = frame.getJointPose( inputjoint, referenceSpace );\n\n\t\t\t\t\t// The transform of this joint will be updated with the joint pose on each frame\n\t\t\t\t\tconst joint = this._getHandJoint( hand, inputjoint );\n\n\t\t\t\t\tif ( jointPose !== null ) {\n\n\t\t\t\t\t\tjoint.matrix.fromArray( jointPose.transform.matrix );\n\t\t\t\t\t\tjoint.matrix.decompose( joint.position, joint.rotation, joint.scale );\n\t\t\t\t\t\tjoint.matrixWorldNeedsUpdate = true;\n\t\t\t\t\t\tjoint.jointRadius = jointPose.radius;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tjoint.visible = jointPose !== null;\n\n\t\t\t\t}\n\n\t\t\t\t// Custom events\n\n\t\t\t\t// Check pinchz\n\t\t\t\tconst indexTip = hand.joints[ 'index-finger-tip' ];\n\t\t\t\tconst thumbTip = hand.joints[ 'thumb-tip' ];\n\t\t\t\tconst distance = indexTip.position.distanceTo( thumbTip.position );\n\n\t\t\t\tconst distanceToPinch = 0.02;\n\t\t\t\tconst threshold = 0.005;\n\n\t\t\t\tif ( hand.inputState.pinching && distance > distanceToPinch + threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = false;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchend',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t} else if ( ! hand.inputState.pinching && distance <= distanceToPinch - threshold ) {\n\n\t\t\t\t\thand.inputState.pinching = true;\n\t\t\t\t\tthis.dispatchEvent( {\n\t\t\t\t\t\ttype: 'pinchstart',\n\t\t\t\t\t\thandedness: inputSource.handedness,\n\t\t\t\t\t\ttarget: this\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\t\t\t\t\t\tgrip.matrixWorldNeedsUpdate = true;\n\n\t\t\t\t\t\tif ( gripPose.linearVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = true;\n\t\t\t\t\t\t\tgrip.linearVelocity.copy( gripPose.linearVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasLinearVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( gripPose.angularVelocity ) {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = true;\n\t\t\t\t\t\t\tgrip.angularVelocity.copy( gripPose.angularVelocity );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tgrip.hasAngularVelocity = false;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t// Some runtimes (namely Vive Cosmos with Vive OpenXR Runtime) have only grip space and ray space is equal to it\n\t\t\t\tif ( inputPose === null && gripPose !== null ) {\n\n\t\t\t\t\tinputPose = gripPose;\n\n\t\t\t\t}\n\n\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\t\t\t\t\ttargetRay.matrixWorldNeedsUpdate = true;\n\n\t\t\t\t\tif ( inputPose.linearVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = true;\n\t\t\t\t\t\ttargetRay.linearVelocity.copy( inputPose.linearVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasLinearVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( inputPose.angularVelocity ) {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = true;\n\t\t\t\t\t\ttargetRay.angularVelocity.copy( inputPose.angularVelocity );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetRay.hasAngularVelocity = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchEvent( _moveEvent );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\tif ( hand !== null ) {\n\n\t\t\thand.visible = ( handPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// private method\n\n\t_getHandJoint( hand, inputjoint ) {\n\n\t\tif ( hand.joints[ inputjoint.jointName ] === undefined ) {\n\n\t\t\tconst joint = new Group();\n\t\t\tjoint.matrixAutoUpdate = false;\n\t\t\tjoint.visible = false;\n\t\t\thand.joints[ inputjoint.jointName ] = joint;\n\n\t\t\thand.add( joint );\n\n\t\t}\n\n\t\treturn hand.joints[ inputjoint.jointName ];\n\n\t}\n\n}\n\nclass DepthTexture extends Texture {\n\n\tconstructor( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\t\tformat = format !== undefined ? format : DepthFormat;\n\n\t\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t\t}\n\n\t\tif ( type === undefined && format === DepthFormat ) type = UnsignedIntType;\n\t\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isDepthTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\t\tthis.flipY = false;\n\t\tthis.generateMipmaps = false;\n\n\t\tthis.compareFunction = null;\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.compareFunction = source.compareFunction;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.compareFunction !== null ) data.compareFunction = this.compareFunction;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass WebXRManager extends EventDispatcher {\n\n\tconstructor( renderer, gl ) {\n\n\t\tsuper();\n\n\t\tconst scope = this;\n\n\t\tlet session = null;\n\n\t\tlet framebufferScaleFactor = 1.0;\n\n\t\tlet referenceSpace = null;\n\t\tlet referenceSpaceType = 'local-floor';\n\t\t// Set default foveation to maximum.\n\t\tlet foveation = 1.0;\n\t\tlet customReferenceSpace = null;\n\n\t\tlet pose = null;\n\t\tlet glBinding = null;\n\t\tlet glProjLayer = null;\n\t\tlet glBaseLayer = null;\n\t\tlet xrFrame = null;\n\t\tconst attributes = gl.getContextAttributes();\n\t\tlet initialRenderTarget = null;\n\t\tlet newRenderTarget = null;\n\n\t\tconst controllers = [];\n\t\tconst controllerInputSources = [];\n\n\t\t//\n\n\t\tconst cameraL = new PerspectiveCamera();\n\t\tcameraL.layers.enable( 1 );\n\t\tcameraL.viewport = new Vector4();\n\n\t\tconst cameraR = new PerspectiveCamera();\n\t\tcameraR.layers.enable( 2 );\n\t\tcameraR.viewport = new Vector4();\n\n\t\tconst cameras = [ cameraL, cameraR ];\n\n\t\tconst cameraXR = new ArrayCamera();\n\t\tcameraXR.layers.enable( 1 );\n\t\tcameraXR.layers.enable( 2 );\n\n\t\tlet _currentDepthNear = null;\n\t\tlet _currentDepthFar = null;\n\n\t\t//\n\n\t\tthis.cameraAutoUpdate = true;\n\t\tthis.enabled = false;\n\n\t\tthis.isPresenting = false;\n\n\t\tthis.getController = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getTargetRaySpace();\n\n\t\t};\n\n\t\tthis.getControllerGrip = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getGripSpace();\n\n\t\t};\n\n\t\tthis.getHand = function ( index ) {\n\n\t\t\tlet controller = controllers[ index ];\n\n\t\t\tif ( controller === undefined ) {\n\n\t\t\t\tcontroller = new WebXRController();\n\t\t\t\tcontrollers[ index ] = controller;\n\n\t\t\t}\n\n\t\t\treturn controller.getHandSpace();\n\n\t\t};\n\n\t\t//\n\n\t\tfunction onSessionEvent( event ) {\n\n\t\t\tconst controllerIndex = controllerInputSources.indexOf( event.inputSource );\n\n\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\tif ( controller !== undefined ) {\n\n\t\t\t\tcontroller.update( event.inputSource, event.frame, customReferenceSpace || referenceSpace );\n\t\t\t\tcontroller.dispatchEvent( { type: event.type, data: event.inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction onSessionEnd() {\n\n\t\t\tsession.removeEventListener( 'select', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.removeEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.removeEventListener( 'end', onSessionEnd );\n\t\t\tsession.removeEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\n\t\t\t\tif ( inputSource === null ) continue;\n\n\t\t\t\tcontrollerInputSources[ i ] = null;\n\n\t\t\t\tcontrollers[ i ].disconnect( inputSource );\n\n\t\t\t}\n\n\t\t\t_currentDepthNear = null;\n\t\t\t_currentDepthFar = null;\n\n\t\t\t// restore framebuffer/rendering state\n\n\t\t\trenderer.setRenderTarget( initialRenderTarget );\n\n\t\t\tglBaseLayer = null;\n\t\t\tglProjLayer = null;\n\t\t\tglBinding = null;\n\t\t\tsession = null;\n\t\t\tnewRenderTarget = null;\n\n\t\t\t//\n\n\t\t\tanimation.stop();\n\n\t\t\tscope.isPresenting = false;\n\n\t\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t\t}\n\n\t\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\t\tframebufferScaleFactor = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\t\treferenceSpaceType = value;\n\n\t\t\tif ( scope.isPresenting === true ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getReferenceSpace = function () {\n\n\t\t\treturn customReferenceSpace || referenceSpace;\n\n\t\t};\n\n\t\tthis.setReferenceSpace = function ( space ) {\n\n\t\t\tcustomReferenceSpace = space;\n\n\t\t};\n\n\t\tthis.getBaseLayer = function () {\n\n\t\t\treturn glProjLayer !== null ? glProjLayer : glBaseLayer;\n\n\t\t};\n\n\t\tthis.getBinding = function () {\n\n\t\t\treturn glBinding;\n\n\t\t};\n\n\t\tthis.getFrame = function () {\n\n\t\t\treturn xrFrame;\n\n\t\t};\n\n\t\tthis.getSession = function () {\n\n\t\t\treturn session;\n\n\t\t};\n\n\t\tthis.setSession = async function ( value ) {\n\n\t\t\tsession = value;\n\n\t\t\tif ( session !== null ) {\n\n\t\t\t\tinitialRenderTarget = renderer.getRenderTarget();\n\n\t\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\t\t\t\tsession.addEventListener( 'inputsourceschange', onInputSourcesChange );\n\n\t\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\t\tawait gl.makeXRCompatible();\n\n\t\t\t\t}\n\n\t\t\t\tif ( ( session.renderState.layers === undefined ) || ( renderer.capabilities.isWebGL2 === false ) ) {\n\n\t\t\t\t\tconst layerInit = {\n\t\t\t\t\t\tantialias: ( session.renderState.layers === undefined ) ? attributes.antialias : true,\n\t\t\t\t\t\talpha: true,\n\t\t\t\t\t\tdepth: attributes.depth,\n\t\t\t\t\t\tstencil: attributes.stencil,\n\t\t\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBaseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\t\t\tsession.updateRenderState( { baseLayer: glBaseLayer } );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglBaseLayer.framebufferWidth,\n\t\t\t\t\t\tglBaseLayer.framebufferHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tcolorSpace: renderer.outputColorSpace,\n\t\t\t\t\t\t\tstencilBuffer: attributes.stencil\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlet depthFormat = null;\n\t\t\t\t\tlet depthType = null;\n\t\t\t\t\tlet glDepthFormat = null;\n\n\t\t\t\t\tif ( attributes.depth ) {\n\n\t\t\t\t\t\tglDepthFormat = attributes.stencil ? gl.DEPTH24_STENCIL8 : gl.DEPTH_COMPONENT24;\n\t\t\t\t\t\tdepthFormat = attributes.stencil ? DepthStencilFormat : DepthFormat;\n\t\t\t\t\t\tdepthType = attributes.stencil ? UnsignedInt248Type : UnsignedIntType;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst projectionlayerInit = {\n\t\t\t\t\t\tcolorFormat: gl.RGBA8,\n\t\t\t\t\t\tdepthFormat: glDepthFormat,\n\t\t\t\t\t\tscaleFactor: framebufferScaleFactor\n\t\t\t\t\t};\n\n\t\t\t\t\tglBinding = new XRWebGLBinding( session, gl );\n\n\t\t\t\t\tglProjLayer = glBinding.createProjectionLayer( projectionlayerInit );\n\n\t\t\t\t\tsession.updateRenderState( { layers: [ glProjLayer ] } );\n\n\t\t\t\t\tnewRenderTarget = new WebGLRenderTarget(\n\t\t\t\t\t\tglProjLayer.textureWidth,\n\t\t\t\t\t\tglProjLayer.textureHeight,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tformat: RGBAFormat,\n\t\t\t\t\t\t\ttype: UnsignedByteType,\n\t\t\t\t\t\t\tdepthTexture: new DepthTexture( glProjLayer.textureWidth, glProjLayer.textureHeight, depthType, undefined, undefined, undefined, undefined, undefined, undefined, depthFormat ),\n\t\t\t\t\t\t\tstencilBuffer: attributes.stencil,\n\t\t\t\t\t\t\tcolorSpace: renderer.outputColorSpace,\n\t\t\t\t\t\t\tsamples: attributes.antialias ? 4 : 0\n\t\t\t\t\t\t} );\n\n\t\t\t\t\tconst renderTargetProperties = renderer.properties.get( newRenderTarget );\n\t\t\t\t\trenderTargetProperties.__ignoreDepthValues = glProjLayer.ignoreDepthValues;\n\n\t\t\t\t}\n\n\t\t\t\tnewRenderTarget.isXRRenderTarget = true; // TODO Remove this when possible, see #23278\n\n\t\t\t\tthis.setFoveation( foveation );\n\n\t\t\t\tcustomReferenceSpace = null;\n\t\t\t\treferenceSpace = await session.requestReferenceSpace( referenceSpaceType );\n\n\t\t\t\tanimation.setContext( session );\n\t\t\t\tanimation.start();\n\n\t\t\t\tscope.isPresenting = true;\n\n\t\t\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.getEnvironmentBlendMode = function () {\n\n\t\t\tif ( session !== null ) {\n\n\t\t\t\treturn session.environmentBlendMode;\n\n\t\t\t}\n\n\t\t};\n\n\t\tfunction onInputSourcesChange( event ) {\n\n\t\t\t// Notify disconnected\n\n\t\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.removed[ i ];\n\t\t\t\tconst index = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( index >= 0 ) {\n\n\t\t\t\t\tcontrollerInputSources[ index ] = null;\n\t\t\t\t\tcontrollers[ index ].disconnect( inputSource );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Notify connected\n\n\t\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\t\tconst inputSource = event.added[ i ];\n\n\t\t\t\tlet controllerIndex = controllerInputSources.indexOf( inputSource );\n\n\t\t\t\tif ( controllerIndex === - 1 ) {\n\n\t\t\t\t\t// Assign input source a controller that currently has no input source\n\n\t\t\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\t\t\tif ( i >= controllerInputSources.length ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources.push( inputSource );\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t} else if ( controllerInputSources[ i ] === null ) {\n\n\t\t\t\t\t\t\tcontrollerInputSources[ i ] = inputSource;\n\t\t\t\t\t\t\tcontrollerIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// If all controllers do currently receive input we ignore new ones\n\n\t\t\t\t\tif ( controllerIndex === - 1 ) break;\n\n\t\t\t\t}\n\n\t\t\t\tconst controller = controllers[ controllerIndex ];\n\n\t\t\t\tif ( controller ) {\n\n\t\t\t\t\tcontroller.connect( inputSource );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst cameraLPos = new Vector3();\n\t\tconst cameraRPos = new Vector3();\n\n\t\t/**\n\t\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t\t * the cameras' projection and world matrices have already been set.\n\t\t * And that near and far planes are identical for both cameras.\n\t\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t\t */\n\t\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t\t// VR systems will have identical far and near planes, and\n\t\t\t// most likely identical top and bottom frustum extents.\n\t\t\t// Use the left camera for these values.\n\t\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\t\tconst left = near * leftFov;\n\t\t\tconst right = near * rightFov;\n\n\t\t\t// Calculate the new camera's position offset from the\n\t\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t\t// TODO: Better way to apply this offset?\n\t\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.translateX( xOffset );\n\t\t\tcamera.translateZ( zOffset );\n\t\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t\t// Find the union of the frustum values of the cameras and scale\n\t\t\t// the values so that the near plane's position does not change in world space,\n\t\t\t// although must now be relative to the new union camera.\n\t\t\tconst near2 = near + zOffset;\n\t\t\tconst far2 = far + zOffset;\n\t\t\tconst left2 = left - xOffset;\n\t\t\tconst right2 = right + ( ipd - xOffset );\n\t\t\tconst top2 = topFov * far / far2 * near2;\n\t\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\t\t\tcamera.projectionMatrixInverse.copy( camera.projectionMatrix ).invert();\n\n\t\t}\n\n\t\tfunction updateCamera( camera, parent ) {\n\n\t\t\tif ( parent === null ) {\n\n\t\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t\t}\n\n\t\t\tcamera.matrixWorldInverse.copy( camera.matrixWorld ).invert();\n\n\t\t}\n\n\t\tthis.updateCamera = function ( camera ) {\n\n\t\t\tif ( session === null ) return;\n\n\t\t\tcameraXR.near = cameraR.near = cameraL.near = camera.near;\n\t\t\tcameraXR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\t\tif ( _currentDepthNear !== cameraXR.near || _currentDepthFar !== cameraXR.far ) {\n\n\t\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\t\tsession.updateRenderState( {\n\t\t\t\t\tdepthNear: cameraXR.near,\n\t\t\t\t\tdepthFar: cameraXR.far\n\t\t\t\t} );\n\n\t\t\t\t_currentDepthNear = cameraXR.near;\n\t\t\t\t_currentDepthFar = cameraXR.far;\n\n\t\t\t}\n\n\t\t\tconst parent = camera.parent;\n\t\t\tconst cameras = cameraXR.cameras;\n\n\t\t\tupdateCamera( cameraXR, parent );\n\n\t\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t\t}\n\n\t\t\t// update projection matrix for proper view frustum culling\n\n\t\t\tif ( cameras.length === 2 ) {\n\n\t\t\t\tsetProjectionFromUnion( cameraXR, cameraL, cameraR );\n\n\t\t\t} else {\n\n\t\t\t\t// assume single camera setup (AR)\n\n\t\t\t\tcameraXR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t\t}\n\n\t\t\t// update user camera and its children\n\n\t\t\tupdateUserCamera( camera, cameraXR, parent );\n\n\t\t};\n\n\t\tfunction updateUserCamera( camera, cameraXR, parent ) {\n\n\t\t\tif ( parent === null ) {\n\n\t\t\t\tcamera.matrix.copy( cameraXR.matrixWorld );\n\n\t\t\t} else {\n\n\t\t\t\tcamera.matrix.copy( parent.matrixWorld );\n\t\t\t\tcamera.matrix.invert();\n\t\t\t\tcamera.matrix.multiply( cameraXR.matrixWorld );\n\n\t\t\t}\n\n\t\t\tcamera.matrix.decompose( camera.position, camera.quaternion, camera.scale );\n\t\t\tcamera.updateMatrixWorld( true );\n\n\t\t\tcamera.projectionMatrix.copy( cameraXR.projectionMatrix );\n\t\t\tcamera.projectionMatrixInverse.copy( cameraXR.projectionMatrixInverse );\n\n\t\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\t\tcamera.fov = RAD2DEG * 2 * Math.atan( 1 / camera.projectionMatrix.elements[ 5 ] );\n\t\t\t\tcamera.zoom = 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.getCamera = function () {\n\n\t\t\treturn cameraXR;\n\n\t\t};\n\n\t\tthis.getFoveation = function () {\n\n\t\t\tif ( glProjLayer === null && glBaseLayer === null ) {\n\n\t\t\t\treturn undefined;\n\n\t\t\t}\n\n\t\t\treturn foveation;\n\n\t\t};\n\n\t\tthis.setFoveation = function ( value ) {\n\n\t\t\t// 0 = no foveation = full resolution\n\t\t\t// 1 = maximum foveation = the edges render at lower resolution\n\n\t\t\tfoveation = value;\n\n\t\t\tif ( glProjLayer !== null ) {\n\n\t\t\t\tglProjLayer.fixedFoveation = value;\n\n\t\t\t}\n\n\t\t\tif ( glBaseLayer !== null && glBaseLayer.fixedFoveation !== undefined ) {\n\n\t\t\t\tglBaseLayer.fixedFoveation = value;\n\n\t\t\t}\n\n\t\t};\n\n\t\t// Animation Loop\n\n\t\tlet onAnimationFrameCallback = null;\n\n\t\tfunction onAnimationFrame( time, frame ) {\n\n\t\t\tpose = frame.getViewerPose( customReferenceSpace || referenceSpace );\n\t\t\txrFrame = frame;\n\n\t\t\tif ( pose !== null ) {\n\n\t\t\t\tconst views = pose.views;\n\n\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\trenderer.setRenderTargetFramebuffer( newRenderTarget, glBaseLayer.framebuffer );\n\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t}\n\n\t\t\t\tlet cameraXRNeedsUpdate = false;\n\n\t\t\t\t// check if it's necessary to rebuild cameraXR's camera list\n\n\t\t\t\tif ( views.length !== cameraXR.cameras.length ) {\n\n\t\t\t\t\tcameraXR.cameras.length = 0;\n\t\t\t\t\tcameraXRNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\t\tconst view = views[ i ];\n\n\t\t\t\t\tlet viewport = null;\n\n\t\t\t\t\tif ( glBaseLayer !== null ) {\n\n\t\t\t\t\t\tviewport = glBaseLayer.getViewport( view );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst glSubImage = glBinding.getViewSubImage( glProjLayer, view );\n\t\t\t\t\t\tviewport = glSubImage.viewport;\n\n\t\t\t\t\t\t// For side-by-side projection, we only produce a single texture for both eyes.\n\t\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\t\trenderer.setRenderTargetTextures(\n\t\t\t\t\t\t\t\tnewRenderTarget,\n\t\t\t\t\t\t\t\tglSubImage.colorTexture,\n\t\t\t\t\t\t\t\tglProjLayer.ignoreDepthValues ? undefined : glSubImage.depthStencilTexture );\n\n\t\t\t\t\t\t\trenderer.setRenderTarget( newRenderTarget );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet camera = cameras[ i ];\n\n\t\t\t\t\tif ( camera === undefined ) {\n\n\t\t\t\t\t\tcamera = new PerspectiveCamera();\n\t\t\t\t\t\tcamera.layers.enable( i );\n\t\t\t\t\t\tcamera.viewport = new Vector4();\n\t\t\t\t\t\tcameras[ i ] = camera;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\t\tcamera.matrix.decompose( camera.position, camera.quaternion, camera.scale );\n\t\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\t\tcamera.projectionMatrixInverse.copy( camera.projectionMatrix ).invert();\n\t\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\t\tcameraXR.matrix.copy( camera.matrix );\n\t\t\t\t\t\tcameraXR.matrix.decompose( cameraXR.position, cameraXR.quaternion, cameraXR.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( cameraXRNeedsUpdate === true ) {\n\n\t\t\t\t\t\tcameraXR.cameras.push( camera );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\t\tconst inputSource = controllerInputSources[ i ];\n\t\t\t\tconst controller = controllers[ i ];\n\n\t\t\t\tif ( inputSource !== null && controller !== undefined ) {\n\n\t\t\t\t\tcontroller.update( inputSource, frame, customReferenceSpace || referenceSpace );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t\t\tif ( frame.detectedPlanes ) {\n\n\t\t\t\tscope.dispatchEvent( { type: 'planesdetected', data: frame } );\n\n\t\t\t}\n\n\t\t\txrFrame = null;\n\n\t\t}\n\n\t\tconst animation = new WebGLAnimation();\n\n\t\tanimation.setAnimationLoop( onAnimationFrame );\n\n\t\tthis.setAnimationLoop = function ( callback ) {\n\n\t\t\tonAnimationFrameCallback = callback;\n\n\t\t};\n\n\t\tthis.dispose = function () {};\n\n\t}\n\n}\n\nfunction WebGLMaterials( renderer, properties ) {\n\n\tfunction refreshTransformUniform( map, uniform ) {\n\n\t\tif ( map.matrixAutoUpdate === true ) {\n\n\t\t\tmap.updateMatrix();\n\n\t\t}\n\n\t\tuniform.value.copy( map.matrix );\n\n\t}\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tfog.color.getRGB( uniforms.fogColor.value, getUnlitUniformColorSpace( renderer ) );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, pixelRatio, height, transmissionRenderTarget ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsStandard( uniforms, material );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material, transmissionRenderTarget );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t\trefreshTransformUniform( material.map, uniforms.mapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\trefreshTransformUniform( material.alphaMap, uniforms.alphaMapTransform );\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\n\t\t\trefreshTransformUniform( material.bumpMap, uniforms.bumpMapTransform );\n\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.bumpScale.value *= - 1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\n\t\t\trefreshTransformUniform( material.normalMap, uniforms.normalMapTransform );\n\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.normalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\n\t\t\trefreshTransformUniform( material.displacementMap, uniforms.displacementMapTransform );\n\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t\trefreshTransformUniform( material.emissiveMap, uniforms.emissiveMapTransform );\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t\trefreshTransformUniform( material.specularMap, uniforms.specularMapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.ior.value = material.ior;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\n\t\t\t// artist-friendly light intensity scaling factor\n\t\t\tconst scaleFactor = ( renderer._useLegacyLights === true ) ? Math.PI : 1;\n\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity * scaleFactor;\n\n\t\t\trefreshTransformUniform( material.lightMap, uniforms.lightMapTransform );\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t\trefreshTransformUniform( material.aoMap, uniforms.aoMapTransform );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t\trefreshTransformUniform( material.map, uniforms.mapTransform );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t\trefreshTransformUniform( material.map, uniforms.uvTransform );\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\trefreshTransformUniform( material.alphaMap, uniforms.alphaMapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t\trefreshTransformUniform( material.map, uniforms.mapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t\trefreshTransformUniform( material.alphaMap, uniforms.alphaMapTransform );\n\n\t\t}\n\n\t\tif ( material.alphaTest > 0 ) {\n\n\t\t\tuniforms.alphaTest.value = material.alphaTest;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material ) {\n\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t\trefreshTransformUniform( material.metalnessMap, uniforms.metalnessMapTransform );\n\n\t\t}\n\n\t\tuniforms.roughness.value = material.roughness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t\trefreshTransformUniform( material.roughnessMap, uniforms.roughnessMapTransform );\n\n\t\t}\n\n\t\tconst envMap = properties.get( material ).envMap;\n\n\t\tif ( envMap ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material, transmissionRenderTarget ) {\n\n\t\tuniforms.ior.value = material.ior; // also part of uniforms common\n\n\t\tif ( material.sheen > 0 ) {\n\n\t\t\tuniforms.sheenColor.value.copy( material.sheenColor ).multiplyScalar( material.sheen );\n\n\t\t\tuniforms.sheenRoughness.value = material.sheenRoughness;\n\n\t\t\tif ( material.sheenColorMap ) {\n\n\t\t\t\tuniforms.sheenColorMap.value = material.sheenColorMap;\n\n\t\t\t\trefreshTransformUniform( material.sheenColorMap, uniforms.sheenColorMapTransform );\n\n\t\t\t}\n\n\t\t\tif ( material.sheenRoughnessMap ) {\n\n\t\t\t\tuniforms.sheenRoughnessMap.value = material.sheenRoughnessMap;\n\n\t\t\t\trefreshTransformUniform( material.sheenRoughnessMap, uniforms.sheenRoughnessMapTransform );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.clearcoat > 0 ) {\n\n\t\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\n\t\t\tif ( material.clearcoatMap ) {\n\n\t\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t\t\trefreshTransformUniform( material.clearcoatMap, uniforms.clearcoatMapTransform );\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t\t\trefreshTransformUniform( material.clearcoatRoughnessMap, uniforms.clearcoatRoughnessMapTransform );\n\n\t\t\t}\n\n\t\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\t\trefreshTransformUniform( material.clearcoatNormalMap, uniforms.clearcoatNormalMapTransform );\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\n\t\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.iridescence > 0 ) {\n\n\t\t\tuniforms.iridescence.value = material.iridescence;\n\t\t\tuniforms.iridescenceIOR.value = material.iridescenceIOR;\n\t\t\tuniforms.iridescenceThicknessMinimum.value = material.iridescenceThicknessRange[ 0 ];\n\t\t\tuniforms.iridescenceThicknessMaximum.value = material.iridescenceThicknessRange[ 1 ];\n\n\t\t\tif ( material.iridescenceMap ) {\n\n\t\t\t\tuniforms.iridescenceMap.value = material.iridescenceMap;\n\n\t\t\t\trefreshTransformUniform( material.iridescenceMap, uniforms.iridescenceMapTransform );\n\n\t\t\t}\n\n\t\t\tif ( material.iridescenceThicknessMap ) {\n\n\t\t\t\tuniforms.iridescenceThicknessMap.value = material.iridescenceThicknessMap;\n\n\t\t\t\trefreshTransformUniform( material.iridescenceThicknessMap, uniforms.iridescenceThicknessMapTransform );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.transmission > 0 ) {\n\n\t\t\tuniforms.transmission.value = material.transmission;\n\t\t\tuniforms.transmissionSamplerMap.value = transmissionRenderTarget.texture;\n\t\t\tuniforms.transmissionSamplerSize.value.set( transmissionRenderTarget.width, transmissionRenderTarget.height );\n\n\t\t\tif ( material.transmissionMap ) {\n\n\t\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t\t\trefreshTransformUniform( material.transmissionMap, uniforms.transmissionMapTransform );\n\n\t\t\t}\n\n\t\t\tuniforms.thickness.value = material.thickness;\n\n\t\t\tif ( material.thicknessMap ) {\n\n\t\t\t\tuniforms.thicknessMap.value = material.thicknessMap;\n\n\t\t\t\trefreshTransformUniform( material.thicknessMap, uniforms.thicknessMapTransform );\n\n\t\t\t}\n\n\t\t\tuniforms.attenuationDistance.value = material.attenuationDistance;\n\t\t\tuniforms.attenuationColor.value.copy( material.attenuationColor );\n\n\t\t}\n\n\t\tif ( material.anisotropy > 0 ) {\n\n\t\t\tuniforms.anisotropyVector.value.set( material.anisotropy * Math.cos( material.anisotropyRotation ), material.anisotropy * Math.sin( material.anisotropyRotation ) );\n\n\t\t\tif ( material.anisotropyMap ) {\n\n\t\t\t\tuniforms.anisotropyMap.value = material.anisotropyMap;\n\n\t\t\t\trefreshTransformUniform( material.anisotropyMap, uniforms.anisotropyMapTransform );\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.specularIntensity.value = material.specularIntensity;\n\t\tuniforms.specularColor.value.copy( material.specularColor );\n\n\t\tif ( material.specularColorMap ) {\n\n\t\t\tuniforms.specularColorMap.value = material.specularColorMap;\n\n\t\t\trefreshTransformUniform( material.specularColorMap, uniforms.specularColorMapTransform );\n\n\t\t}\n\n\t\tif ( material.specularIntensityMap ) {\n\n\t\t\tuniforms.specularIntensityMap.value = material.specularIntensityMap;\n\n\t\t\trefreshTransformUniform( material.specularIntensityMap, uniforms.specularIntensityMapTransform );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tconst light = properties.get( material ).light;\n\n\t\tuniforms.referencePosition.value.setFromMatrixPosition( light.matrixWorld );\n\t\tuniforms.nearDistance.value = light.shadow.camera.near;\n\t\tuniforms.farDistance.value = light.shadow.camera.far;\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nfunction WebGLUniformsGroups( gl, info, capabilities, state ) {\n\n\tlet buffers = {};\n\tlet updateList = {};\n\tlet allocatedBindingPoints = [];\n\n\tconst maxBindingPoints = ( capabilities.isWebGL2 ) ? gl.getParameter( gl.MAX_UNIFORM_BUFFER_BINDINGS ) : 0; // binding points are global whereas block indices are per shader program\n\n\tfunction bind( uniformsGroup, program ) {\n\n\t\tconst webglProgram = program.program;\n\t\tstate.uniformBlockBinding( uniformsGroup, webglProgram );\n\n\t}\n\n\tfunction update( uniformsGroup, program ) {\n\n\t\tlet buffer = buffers[ uniformsGroup.id ];\n\n\t\tif ( buffer === undefined ) {\n\n\t\t\tprepareUniformsGroup( uniformsGroup );\n\n\t\t\tbuffer = createBuffer( uniformsGroup );\n\t\t\tbuffers[ uniformsGroup.id ] = buffer;\n\n\t\t\tuniformsGroup.addEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\t}\n\n\t\t// ensure to update the binding points/block indices mapping for this program\n\n\t\tconst webglProgram = program.program;\n\t\tstate.updateUBOMapping( uniformsGroup, webglProgram );\n\n\t\t// update UBO once per frame\n\n\t\tconst frame = info.render.frame;\n\n\t\tif ( updateList[ uniformsGroup.id ] !== frame ) {\n\n\t\t\tupdateBufferData( uniformsGroup );\n\n\t\t\tupdateList[ uniformsGroup.id ] = frame;\n\n\t\t}\n\n\t}\n\n\tfunction createBuffer( uniformsGroup ) {\n\n\t\t// the setup of an UBO is independent of a particular shader program but global\n\n\t\tconst bindingPointIndex = allocateBindingPointIndex();\n\t\tuniformsGroup.__bindingPointIndex = bindingPointIndex;\n\n\t\tconst buffer = gl.createBuffer();\n\t\tconst size = uniformsGroup.__size;\n\t\tconst usage = uniformsGroup.usage;\n\n\t\tgl.bindBuffer( gl.UNIFORM_BUFFER, buffer );\n\t\tgl.bufferData( gl.UNIFORM_BUFFER, size, usage );\n\t\tgl.bindBuffer( gl.UNIFORM_BUFFER, null );\n\t\tgl.bindBufferBase( gl.UNIFORM_BUFFER, bindingPointIndex, buffer );\n\n\t\treturn buffer;\n\n\t}\n\n\tfunction allocateBindingPointIndex() {\n\n\t\tfor ( let i = 0; i < maxBindingPoints; i ++ ) {\n\n\t\t\tif ( allocatedBindingPoints.indexOf( i ) === - 1 ) {\n\n\t\t\t\tallocatedBindingPoints.push( i );\n\t\t\t\treturn i;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconsole.error( 'THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached.' );\n\n\t\treturn 0;\n\n\t}\n\n\tfunction updateBufferData( uniformsGroup ) {\n\n\t\tconst buffer = buffers[ uniformsGroup.id ];\n\t\tconst uniforms = uniformsGroup.uniforms;\n\t\tconst cache = uniformsGroup.__cache;\n\n\t\tgl.bindBuffer( gl.UNIFORM_BUFFER, buffer );\n\n\t\tfor ( let i = 0, il = uniforms.length; i < il; i ++ ) {\n\n\t\t\tconst uniform = uniforms[ i ];\n\n\t\t\t// partly update the buffer if necessary\n\n\t\t\tif ( hasUniformChanged( uniform, i, cache ) === true ) {\n\n\t\t\t\tconst offset = uniform.__offset;\n\n\t\t\t\tconst values = Array.isArray( uniform.value ) ? uniform.value : [ uniform.value ];\n\n\t\t\t\tlet arrayOffset = 0;\n\n\t\t\t\tfor ( let i = 0; i < values.length; i ++ ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tconst info = getUniformSize( value );\n\n\t\t\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\t\t\tuniform.__data[ 0 ] = value;\n\t\t\t\t\t\tgl.bufferSubData( gl.UNIFORM_BUFFER, offset + arrayOffset, uniform.__data );\n\n\t\t\t\t\t} else if ( value.isMatrix3 ) {\n\n\t\t\t\t\t\t// manually converting 3x3 to 3x4\n\n\t\t\t\t\t\tuniform.__data[ 0 ] = value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 1 ] = value.elements[ 1 ];\n\t\t\t\t\t\tuniform.__data[ 2 ] = value.elements[ 2 ];\n\t\t\t\t\t\tuniform.__data[ 3 ] = value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 4 ] = value.elements[ 3 ];\n\t\t\t\t\t\tuniform.__data[ 5 ] = value.elements[ 4 ];\n\t\t\t\t\t\tuniform.__data[ 6 ] = value.elements[ 5 ];\n\t\t\t\t\t\tuniform.__data[ 7 ] = value.elements[ 0 ];\n\t\t\t\t\t\tuniform.__data[ 8 ] = value.elements[ 6 ];\n\t\t\t\t\t\tuniform.__data[ 9 ] = value.elements[ 7 ];\n\t\t\t\t\t\tuniform.__data[ 10 ] = value.elements[ 8 ];\n\t\t\t\t\t\tuniform.__data[ 11 ] = value.elements[ 0 ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvalue.toArray( uniform.__data, arrayOffset );\n\n\t\t\t\t\t\tarrayOffset += info.storage / Float32Array.BYTES_PER_ELEMENT;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgl.bufferSubData( gl.UNIFORM_BUFFER, offset, uniform.__data );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgl.bindBuffer( gl.UNIFORM_BUFFER, null );\n\n\t}\n\n\tfunction hasUniformChanged( uniform, index, cache ) {\n\n\t\tconst value = uniform.value;\n\n\t\tif ( cache[ index ] === undefined ) {\n\n\t\t\t// cache entry does not exist so far\n\n\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\tcache[ index ] = value;\n\n\t\t\t} else {\n\n\t\t\t\tconst values = Array.isArray( value ) ? value : [ value ];\n\n\t\t\t\tconst tempValues = [];\n\n\t\t\t\tfor ( let i = 0; i < values.length; i ++ ) {\n\n\t\t\t\t\ttempValues.push( values[ i ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tcache[ index ] = tempValues;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t} else {\n\n\t\t\t// compare current value with cached entry\n\n\t\t\tif ( typeof value === 'number' ) {\n\n\t\t\t\tif ( cache[ index ] !== value ) {\n\n\t\t\t\t\tcache[ index ] = value;\n\t\t\t\t\treturn true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconst cachedObjects = Array.isArray( cache[ index ] ) ? cache[ index ] : [ cache[ index ] ];\n\t\t\t\tconst values = Array.isArray( value ) ? value : [ value ];\n\n\t\t\t\tfor ( let i = 0; i < cachedObjects.length; i ++ ) {\n\n\t\t\t\t\tconst cachedObject = cachedObjects[ i ];\n\n\t\t\t\t\tif ( cachedObject.equals( values[ i ] ) === false ) {\n\n\t\t\t\t\t\tcachedObject.copy( values[ i ] );\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction prepareUniformsGroup( uniformsGroup ) {\n\n\t\t// determine total buffer size according to the STD140 layout\n\t\t// Hint: STD140 is the only supported layout in WebGL 2\n\n\t\tconst uniforms = uniformsGroup.uniforms;\n\n\t\tlet offset = 0; // global buffer offset in bytes\n\t\tconst chunkSize = 16; // size of a chunk in bytes\n\t\tlet chunkOffset = 0; // offset within a single chunk in bytes\n\n\t\tfor ( let i = 0, l = uniforms.length; i < l; i ++ ) {\n\n\t\t\tconst uniform = uniforms[ i ];\n\n\t\t\tconst infos = {\n\t\t\t\tboundary: 0, // bytes\n\t\t\t\tstorage: 0 // bytes\n\t\t\t};\n\n\t\t\tconst values = Array.isArray( uniform.value ) ? uniform.value : [ uniform.value ];\n\n\t\t\tfor ( let j = 0, jl = values.length; j < jl; j ++ ) {\n\n\t\t\t\tconst value = values[ j ];\n\n\t\t\t\tconst info = getUniformSize( value );\n\n\t\t\t\tinfos.boundary += info.boundary;\n\t\t\t\tinfos.storage += info.storage;\n\n\t\t\t}\n\n\t\t\t// the following two properties will be used for partial buffer updates\n\n\t\t\tuniform.__data = new Float32Array( infos.storage / Float32Array.BYTES_PER_ELEMENT );\n\t\t\tuniform.__offset = offset;\n\n\t\t\t//\n\n\t\t\tif ( i > 0 ) {\n\n\t\t\t\tchunkOffset = offset % chunkSize;\n\n\t\t\t\tconst remainingSizeInChunk = chunkSize - chunkOffset;\n\n\t\t\t\t// check for chunk overflow\n\n\t\t\t\tif ( chunkOffset !== 0 && ( remainingSizeInChunk - infos.boundary ) < 0 ) {\n\n\t\t\t\t\t// add padding and adjust offset\n\n\t\t\t\t\toffset += ( chunkSize - chunkOffset );\n\t\t\t\t\tuniform.__offset = offset;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\toffset += infos.storage;\n\n\t\t}\n\n\t\t// ensure correct final padding\n\n\t\tchunkOffset = offset % chunkSize;\n\n\t\tif ( chunkOffset > 0 ) offset += ( chunkSize - chunkOffset );\n\n\t\t//\n\n\t\tuniformsGroup.__size = offset;\n\t\tuniformsGroup.__cache = {};\n\n\t\treturn this;\n\n\t}\n\n\tfunction getUniformSize( value ) {\n\n\t\tconst info = {\n\t\t\tboundary: 0, // bytes\n\t\t\tstorage: 0 // bytes\n\t\t};\n\n\t\t// determine sizes according to STD140\n\n\t\tif ( typeof value === 'number' ) {\n\n\t\t\t// float/int\n\n\t\t\tinfo.boundary = 4;\n\t\t\tinfo.storage = 4;\n\n\t\t} else if ( value.isVector2 ) {\n\n\t\t\t// vec2\n\n\t\t\tinfo.boundary = 8;\n\t\t\tinfo.storage = 8;\n\n\t\t} else if ( value.isVector3 || value.isColor ) {\n\n\t\t\t// vec3\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 12; // evil: vec3 must start on a 16-byte boundary but it only consumes 12 bytes\n\n\t\t} else if ( value.isVector4 ) {\n\n\t\t\t// vec4\n\n\t\t\tinfo.boundary = 16;\n\t\t\tinfo.storage = 16;\n\n\t\t} else if ( value.isMatrix3 ) {\n\n\t\t\t// mat3 (in STD140 a 3x3 matrix is represented as 3x4)\n\n\t\t\tinfo.boundary = 48;\n\t\t\tinfo.storage = 48;\n\n\t\t} else if ( value.isMatrix4 ) {\n\n\t\t\t// mat4\n\n\t\t\tinfo.boundary = 64;\n\t\t\tinfo.storage = 64;\n\n\t\t} else if ( value.isTexture ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group.' );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Unsupported uniform value type.', value );\n\n\t\t}\n\n\t\treturn info;\n\n\t}\n\n\tfunction onUniformsGroupsDispose( event ) {\n\n\t\tconst uniformsGroup = event.target;\n\n\t\tuniformsGroup.removeEventListener( 'dispose', onUniformsGroupsDispose );\n\n\t\tconst index = allocatedBindingPoints.indexOf( uniformsGroup.__bindingPointIndex );\n\t\tallocatedBindingPoints.splice( index, 1 );\n\n\t\tgl.deleteBuffer( buffers[ uniformsGroup.id ] );\n\n\t\tdelete buffers[ uniformsGroup.id ];\n\t\tdelete updateList[ uniformsGroup.id ];\n\n\t}\n\n\tfunction dispose() {\n\n\t\tfor ( const id in buffers ) {\n\n\t\t\tgl.deleteBuffer( buffers[ id ] );\n\n\t\t}\n\n\t\tallocatedBindingPoints = [];\n\t\tbuffers = {};\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tbind: bind,\n\t\tupdate: update,\n\n\t\tdispose: dispose\n\n\t};\n\n}\n\nclass WebGLRenderer {\n\n\tconstructor( parameters = {} ) {\n\n\t\tconst {\n\t\t\tcanvas = createCanvasElement(),\n\t\t\tcontext = null,\n\t\t\tdepth = true,\n\t\t\tstencil = true,\n\t\t\talpha = false,\n\t\t\tantialias = false,\n\t\t\tpremultipliedAlpha = true,\n\t\t\tpreserveDrawingBuffer = false,\n\t\t\tpowerPreference = 'default',\n\t\t\tfailIfMajorPerformanceCaveat = false,\n\t\t} = parameters;\n\n\t\tthis.isWebGLRenderer = true;\n\n\t\tlet _alpha;\n\n\t\tif ( context !== null ) {\n\n\t\t\t_alpha = context.getContextAttributes().alpha;\n\n\t\t} else {\n\n\t\t\t_alpha = alpha;\n\n\t\t}\n\n\t\tconst uintClearColor = new Uint32Array( 4 );\n\t\tconst intClearColor = new Int32Array( 4 );\n\n\t\tlet currentRenderList = null;\n\t\tlet currentRenderState = null;\n\n\t\t// render() can be called from within a callback triggered by another render.\n\t\t// We track this so that the nested render call gets its list and state isolated from the parent render call.\n\n\t\tconst renderListStack = [];\n\t\tconst renderStateStack = [];\n\n\t\t// public properties\n\n\t\tthis.domElement = canvas;\n\n\t\t// Debug configuration container\n\t\tthis.debug = {\n\n\t\t\t/**\n\t\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t\t * @type {boolean}\n\t\t\t */\n\t\t\tcheckShaderErrors: true,\n\t\t\t/**\n\t\t\t * Callback for custom error reporting.\n\t\t\t * @type {?Function}\n\t\t\t */\n\t\t\tonShaderError: null\n\t\t};\n\n\t\t// clearing\n\n\t\tthis.autoClear = true;\n\t\tthis.autoClearColor = true;\n\t\tthis.autoClearDepth = true;\n\t\tthis.autoClearStencil = true;\n\n\t\t// scene graph\n\n\t\tthis.sortObjects = true;\n\n\t\t// user-defined clipping\n\n\t\tthis.clippingPlanes = [];\n\t\tthis.localClippingEnabled = false;\n\n\t\t// physically based shading\n\n\t\tthis._outputColorSpace = SRGBColorSpace;\n\n\t\t// physical lights\n\n\t\tthis._useLegacyLights = false;\n\n\t\t// tone mapping\n\n\t\tthis.toneMapping = NoToneMapping;\n\t\tthis.toneMappingExposure = 1.0;\n\n\t\t// internal properties\n\n\t\tconst _this = this;\n\n\t\tlet _isContextLost = false;\n\n\t\t// internal state cache\n\n\t\tlet _currentActiveCubeFace = 0;\n\t\tlet _currentActiveMipmapLevel = 0;\n\t\tlet _currentRenderTarget = null;\n\t\tlet _currentMaterialId = - 1;\n\n\t\tlet _currentCamera = null;\n\n\t\tconst _currentViewport = new Vector4();\n\t\tconst _currentScissor = new Vector4();\n\t\tlet _currentScissorTest = null;\n\n\t\tconst _currentClearColor = new Color( 0x000000 );\n\t\tlet _currentClearAlpha = 0;\n\n\t\t//\n\n\t\tlet _width = canvas.width;\n\t\tlet _height = canvas.height;\n\n\t\tlet _pixelRatio = 1;\n\t\tlet _opaqueSort = null;\n\t\tlet _transparentSort = null;\n\n\t\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\t\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\t\tlet _scissorTest = false;\n\n\t\t// frustum\n\n\t\tconst _frustum = new Frustum();\n\n\t\t// clipping\n\n\t\tlet _clippingEnabled = false;\n\t\tlet _localClippingEnabled = false;\n\n\t\t// transmission\n\n\t\tlet _transmissionRenderTarget = null;\n\n\t\t// camera matrices cache\n\n\t\tconst _projScreenMatrix = new Matrix4();\n\n\t\tconst _vector2 = new Vector2();\n\t\tconst _vector3 = new Vector3();\n\n\t\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\t\tfunction getTargetPixelRatio() {\n\n\t\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t\t}\n\n\t\t// initialize\n\n\t\tlet _gl = context;\n\n\t\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\t\tconst contextName = contextNames[ i ];\n\t\t\t\tconst context = canvas.getContext( contextName, contextAttributes );\n\t\t\t\tif ( context !== null ) return context;\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\ttry {\n\n\t\t\tconst contextAttributes = {\n\t\t\t\talpha: true,\n\t\t\t\tdepth,\n\t\t\t\tstencil,\n\t\t\t\tantialias,\n\t\t\t\tpremultipliedAlpha,\n\t\t\t\tpreserveDrawingBuffer,\n\t\t\t\tpowerPreference,\n\t\t\t\tfailIfMajorPerformanceCaveat,\n\t\t\t};\n\n\t\t\t// OffscreenCanvas does not have setAttribute, see #22811\n\t\t\tif ( 'setAttribute' in canvas ) canvas.setAttribute( 'data-engine', `three.js r${REVISION}` );\n\n\t\t\t// event listeners must be registered before WebGL context is created, see #12753\n\t\t\tcanvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t\tcanvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t\tcanvas.addEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\t\tcontextNames.shift();\n\n\t\t\t\t}\n\n\t\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\t\tif ( _gl === null ) {\n\n\t\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( typeof WebGLRenderingContext !== 'undefined' && _gl instanceof WebGLRenderingContext ) { // @deprecated, r153\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163.' );\n\n\t\t\t}\n\n\t\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\t\tthrow error;\n\n\t\t}\n\n\t\tlet extensions, capabilities, state, info;\n\t\tlet properties, textures, cubemaps, cubeuvmaps, attributes, geometries, objects;\n\t\tlet programCache, materials, renderLists, renderStates, clipping, shadowMap;\n\n\t\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\t\tlet utils, bindingStates, uniformsGroups;\n\n\t\tfunction initGLContext() {\n\n\t\t\textensions = new WebGLExtensions( _gl );\n\n\t\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\t\textensions.init( capabilities );\n\n\t\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\n\t\t\tinfo = new WebGLInfo( _gl );\n\t\t\tproperties = new WebGLProperties();\n\t\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\t\tcubemaps = new WebGLCubeMaps( _this );\n\t\t\tcubeuvmaps = new WebGLCubeUVMaps( _this );\n\t\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\t\tmorphtargets = new WebGLMorphtargets( _gl, capabilities, textures );\n\t\t\tclipping = new WebGLClipping( properties );\n\t\t\tprogramCache = new WebGLPrograms( _this, cubemaps, cubeuvmaps, extensions, capabilities, bindingStates, clipping );\n\t\t\tmaterials = new WebGLMaterials( _this, properties );\n\t\t\trenderLists = new WebGLRenderLists();\n\t\t\trenderStates = new WebGLRenderStates( extensions, capabilities );\n\t\t\tbackground = new WebGLBackground( _this, cubemaps, cubeuvmaps, state, objects, _alpha, premultipliedAlpha );\n\t\t\tshadowMap = new WebGLShadowMap( _this, objects, capabilities );\n\t\t\tuniformsGroups = new WebGLUniformsGroups( _gl, info, capabilities, state );\n\n\t\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\t\tinfo.programs = programCache.programs;\n\n\t\t\t_this.capabilities = capabilities;\n\t\t\t_this.extensions = extensions;\n\t\t\t_this.properties = properties;\n\t\t\t_this.renderLists = renderLists;\n\t\t\t_this.shadowMap = shadowMap;\n\t\t\t_this.state = state;\n\t\t\t_this.info = info;\n\n\t\t}\n\n\t\tinitGLContext();\n\n\t\t// xr\n\n\t\tconst xr = new WebXRManager( _this, _gl );\n\n\t\tthis.xr = xr;\n\n\t\t// API\n\n\t\tthis.getContext = function () {\n\n\t\t\treturn _gl;\n\n\t\t};\n\n\t\tthis.getContextAttributes = function () {\n\n\t\t\treturn _gl.getContextAttributes();\n\n\t\t};\n\n\t\tthis.forceContextLoss = function () {\n\n\t\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\t\tif ( extension ) extension.loseContext();\n\n\t\t};\n\n\t\tthis.forceContextRestore = function () {\n\n\t\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\t\tif ( extension ) extension.restoreContext();\n\n\t\t};\n\n\t\tthis.getPixelRatio = function () {\n\n\t\t\treturn _pixelRatio;\n\n\t\t};\n\n\t\tthis.setPixelRatio = function ( value ) {\n\n\t\t\tif ( value === undefined ) return;\n\n\t\t\t_pixelRatio = value;\n\n\t\t\tthis.setSize( _width, _height, false );\n\n\t\t};\n\n\t\tthis.getSize = function ( target ) {\n\n\t\t\treturn target.set( _width, _height );\n\n\t\t};\n\n\t\tthis.setSize = function ( width, height, updateStyle = true ) {\n\n\t\t\tif ( xr.isPresenting ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\n\t\t\tcanvas.width = Math.floor( width * _pixelRatio );\n\t\t\tcanvas.height = Math.floor( height * _pixelRatio );\n\n\t\t\tif ( updateStyle === true ) {\n\n\t\t\t\tcanvas.style.width = width + 'px';\n\t\t\t\tcanvas.style.height = height + 'px';\n\n\t\t\t}\n\n\t\t\tthis.setViewport( 0, 0, width, height );\n\n\t\t};\n\n\t\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t\t};\n\n\t\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t\t_width = width;\n\t\t\t_height = height;\n\n\t\t\t_pixelRatio = pixelRatio;\n\n\t\t\tcanvas.width = Math.floor( width * pixelRatio );\n\t\t\tcanvas.height = Math.floor( height * pixelRatio );\n\n\t\t\tthis.setViewport( 0, 0, width, height );\n\n\t\t};\n\n\t\tthis.getCurrentViewport = function ( target ) {\n\n\t\t\treturn target.copy( _currentViewport );\n\n\t\t};\n\n\t\tthis.getViewport = function ( target ) {\n\n\t\t\treturn target.copy( _viewport );\n\n\t\t};\n\n\t\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\t\tif ( x.isVector4 ) {\n\n\t\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t\t} else {\n\n\t\t\t\t_viewport.set( x, y, width, height );\n\n\t\t\t}\n\n\t\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\t};\n\n\t\tthis.getScissor = function ( target ) {\n\n\t\t\treturn target.copy( _scissor );\n\n\t\t};\n\n\t\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\t\tif ( x.isVector4 ) {\n\n\t\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t\t} else {\n\n\t\t\t\t_scissor.set( x, y, width, height );\n\n\t\t\t}\n\n\t\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\t};\n\n\t\tthis.getScissorTest = function () {\n\n\t\t\treturn _scissorTest;\n\n\t\t};\n\n\t\tthis.setScissorTest = function ( boolean ) {\n\n\t\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t\t};\n\n\t\tthis.setOpaqueSort = function ( method ) {\n\n\t\t\t_opaqueSort = method;\n\n\t\t};\n\n\t\tthis.setTransparentSort = function ( method ) {\n\n\t\t\t_transparentSort = method;\n\n\t\t};\n\n\t\t// Clearing\n\n\t\tthis.getClearColor = function ( target ) {\n\n\t\t\treturn target.copy( background.getClearColor() );\n\n\t\t};\n\n\t\tthis.setClearColor = function () {\n\n\t\t\tbackground.setClearColor.apply( background, arguments );\n\n\t\t};\n\n\t\tthis.getClearAlpha = function () {\n\n\t\t\treturn background.getClearAlpha();\n\n\t\t};\n\n\t\tthis.setClearAlpha = function () {\n\n\t\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t\t};\n\n\t\tthis.clear = function ( color = true, depth = true, stencil = true ) {\n\n\t\t\tlet bits = 0;\n\n\t\t\tif ( color ) {\n\n\t\t\t\t// check if we're trying to clear an integer target\n\t\t\t\tlet isIntegerFormat = false;\n\t\t\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t\t\tconst targetFormat = _currentRenderTarget.texture.format;\n\t\t\t\t\tisIntegerFormat = targetFormat === RGBAIntegerFormat ||\n\t\t\t\t\t\ttargetFormat === RGIntegerFormat ||\n\t\t\t\t\t\ttargetFormat === RedIntegerFormat;\n\n\t\t\t\t}\n\n\t\t\t\t// use the appropriate clear functions to clear the target if it's a signed\n\t\t\t\t// or unsigned integer target\n\t\t\t\tif ( isIntegerFormat ) {\n\n\t\t\t\t\tconst targetType = _currentRenderTarget.texture.type;\n\t\t\t\t\tconst isUnsignedType = targetType === UnsignedByteType ||\n\t\t\t\t\t\ttargetType === UnsignedIntType ||\n\t\t\t\t\t\ttargetType === UnsignedShortType ||\n\t\t\t\t\t\ttargetType === UnsignedInt248Type ||\n\t\t\t\t\t\ttargetType === UnsignedShort4444Type ||\n\t\t\t\t\t\ttargetType === UnsignedShort5551Type;\n\n\t\t\t\t\tconst clearColor = background.getClearColor();\n\t\t\t\t\tconst a = background.getClearAlpha();\n\t\t\t\t\tconst r = clearColor.r;\n\t\t\t\t\tconst g = clearColor.g;\n\t\t\t\t\tconst b = clearColor.b;\n\n\t\t\t\t\tif ( isUnsignedType ) {\n\n\t\t\t\t\t\tuintClearColor[ 0 ] = r;\n\t\t\t\t\t\tuintClearColor[ 1 ] = g;\n\t\t\t\t\t\tuintClearColor[ 2 ] = b;\n\t\t\t\t\t\tuintClearColor[ 3 ] = a;\n\t\t\t\t\t\t_gl.clearBufferuiv( _gl.COLOR, 0, uintClearColor );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tintClearColor[ 0 ] = r;\n\t\t\t\t\t\tintClearColor[ 1 ] = g;\n\t\t\t\t\t\tintClearColor[ 2 ] = b;\n\t\t\t\t\t\tintClearColor[ 3 ] = a;\n\t\t\t\t\t\t_gl.clearBufferiv( _gl.COLOR, 0, intClearColor );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbits |= _gl.COLOR_BUFFER_BIT;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\t\tif ( stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t\t_gl.clear( bits );\n\n\t\t};\n\n\t\tthis.clearColor = function () {\n\n\t\t\tthis.clear( true, false, false );\n\n\t\t};\n\n\t\tthis.clearDepth = function () {\n\n\t\t\tthis.clear( false, true, false );\n\n\t\t};\n\n\t\tthis.clearStencil = function () {\n\n\t\t\tthis.clear( false, false, true );\n\n\t\t};\n\n\t\t//\n\n\t\tthis.dispose = function () {\n\n\t\t\tcanvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t\tcanvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\t\t\tcanvas.removeEventListener( 'webglcontextcreationerror', onContextCreationError, false );\n\n\t\t\trenderLists.dispose();\n\t\t\trenderStates.dispose();\n\t\t\tproperties.dispose();\n\t\t\tcubemaps.dispose();\n\t\t\tcubeuvmaps.dispose();\n\t\t\tobjects.dispose();\n\t\t\tbindingStates.dispose();\n\t\t\tuniformsGroups.dispose();\n\t\t\tprogramCache.dispose();\n\n\t\t\txr.dispose();\n\n\t\t\txr.removeEventListener( 'sessionstart', onXRSessionStart );\n\t\t\txr.removeEventListener( 'sessionend', onXRSessionEnd );\n\n\t\t\tif ( _transmissionRenderTarget ) {\n\n\t\t\t\t_transmissionRenderTarget.dispose();\n\t\t\t\t_transmissionRenderTarget = null;\n\n\t\t\t}\n\n\t\t\tanimation.stop();\n\n\t\t};\n\n\t\t// Events\n\n\t\tfunction onContextLost( event ) {\n\n\t\t\tevent.preventDefault();\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t\t_isContextLost = true;\n\n\t\t}\n\n\t\tfunction onContextRestore( /* event */ ) {\n\n\t\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t\t_isContextLost = false;\n\n\t\t\tconst infoAutoReset = info.autoReset;\n\t\t\tconst shadowMapEnabled = shadowMap.enabled;\n\t\t\tconst shadowMapAutoUpdate = shadowMap.autoUpdate;\n\t\t\tconst shadowMapNeedsUpdate = shadowMap.needsUpdate;\n\t\t\tconst shadowMapType = shadowMap.type;\n\n\t\t\tinitGLContext();\n\n\t\t\tinfo.autoReset = infoAutoReset;\n\t\t\tshadowMap.enabled = shadowMapEnabled;\n\t\t\tshadowMap.autoUpdate = shadowMapAutoUpdate;\n\t\t\tshadowMap.needsUpdate = shadowMapNeedsUpdate;\n\t\t\tshadowMap.type = shadowMapType;\n\n\t\t}\n\n\t\tfunction onContextCreationError( event ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer: A WebGL context could not be created. Reason: ', event.statusMessage );\n\n\t\t}\n\n\t\tfunction onMaterialDispose( event ) {\n\n\t\t\tconst material = event.target;\n\n\t\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\t\tdeallocateMaterial( material );\n\n\t\t}\n\n\t\t// Buffer deallocation\n\n\t\tfunction deallocateMaterial( material ) {\n\n\t\t\treleaseMaterialProgramReferences( material );\n\n\t\t\tproperties.remove( material );\n\n\t\t}\n\n\n\t\tfunction releaseMaterialProgramReferences( material ) {\n\n\t\t\tconst programs = properties.get( material ).programs;\n\n\t\t\tif ( programs !== undefined ) {\n\n\t\t\t\tprograms.forEach( function ( program ) {\n\n\t\t\t\t\tprogramCache.releaseProgram( program );\n\n\t\t\t\t} );\n\n\t\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\t\tprogramCache.releaseShaderCache( material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Buffer rendering\n\n\t\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\t\tconst program = setProgram( camera, scene, geometry, material, object );\n\n\t\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t\t//\n\n\t\t\tlet index = geometry.index;\n\t\t\tlet rangeFactor = 1;\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\n\t\t\t\tif ( index === undefined ) return;\n\n\t\t\t\trangeFactor = 2;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tconst drawRange = geometry.drawRange;\n\t\t\tconst position = geometry.attributes.position;\n\n\t\t\tlet drawStart = drawRange.start * rangeFactor;\n\t\t\tlet drawEnd = ( drawRange.start + drawRange.count ) * rangeFactor;\n\n\t\t\tif ( group !== null ) {\n\n\t\t\t\tdrawStart = Math.max( drawStart, group.start * rangeFactor );\n\t\t\t\tdrawEnd = Math.min( drawEnd, ( group.start + group.count ) * rangeFactor );\n\n\t\t\t}\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tdrawStart = Math.max( drawStart, 0 );\n\t\t\t\tdrawEnd = Math.min( drawEnd, index.count );\n\n\t\t\t} else if ( position !== undefined && position !== null ) {\n\n\t\t\t\tdrawStart = Math.max( drawStart, 0 );\n\t\t\t\tdrawEnd = Math.min( drawEnd, position.count );\n\n\t\t\t}\n\n\t\t\tconst drawCount = drawEnd - drawStart;\n\n\t\t\tif ( drawCount < 0 || drawCount === Infinity ) return;\n\n\t\t\t//\n\n\t\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\t\tlet attribute;\n\t\t\tlet renderer = bufferRenderer;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tattribute = attributes.get( index );\n\n\t\t\t\trenderer = indexedBufferRenderer;\n\t\t\t\trenderer.setIndex( attribute );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( object.isMesh ) {\n\n\t\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isLine ) {\n\n\t\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isPoints ) {\n\n\t\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t\t}\n\n\t\t\tif ( object.isInstancedMesh ) {\n\n\t\t\t\trenderer.renderInstances( drawStart, drawCount, object.count );\n\n\t\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\t\tconst maxInstanceCount = geometry._maxInstanceCount !== undefined ? geometry._maxInstanceCount : Infinity;\n\t\t\t\tconst instanceCount = Math.min( geometry.instanceCount, maxInstanceCount );\n\n\t\t\t\trenderer.renderInstances( drawStart, drawCount, instanceCount );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t\t}\n\n\t\t};\n\n\t\t// Compile\n\n\t\tthis.compile = function ( scene, camera ) {\n\n\t\t\tfunction prepare( material, scene, object ) {\n\n\t\t\t\tif ( material.transparent === true && material.side === DoubleSide && material.forceSinglePass === false ) {\n\n\t\t\t\t\tmaterial.side = BackSide;\n\t\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\t\tmaterial.side = FrontSide;\n\t\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\t\tmaterial.side = DoubleSide;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgetProgram( material, scene, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcurrentRenderState = renderStates.get( scene );\n\t\t\tcurrentRenderState.init();\n\n\t\t\trenderStateStack.push( currentRenderState );\n\n\t\t\tscene.traverseVisible( function ( object ) {\n\n\t\t\t\tif ( object.isLight && object.layers.test( camera.layers ) ) {\n\n\t\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tcurrentRenderState.setupLights( _this._useLegacyLights );\n\n\t\t\tscene.traverse( function ( object ) {\n\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( material ) {\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\t\tconst material2 = material[ i ];\n\n\t\t\t\t\t\t\tprepare( material2, scene, object );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tprepare( material, scene, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\trenderStateStack.pop();\n\t\t\tcurrentRenderState = null;\n\n\t\t};\n\n\t\t// Animation Loop\n\n\t\tlet onAnimationFrameCallback = null;\n\n\t\tfunction onAnimationFrame( time ) {\n\n\t\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t\t}\n\n\t\tfunction onXRSessionStart() {\n\n\t\t\tanimation.stop();\n\n\t\t}\n\n\t\tfunction onXRSessionEnd() {\n\n\t\t\tanimation.start();\n\n\t\t}\n\n\t\tconst animation = new WebGLAnimation();\n\t\tanimation.setAnimationLoop( onAnimationFrame );\n\n\t\tif ( typeof self !== 'undefined' ) animation.setContext( self );\n\n\t\tthis.setAnimationLoop = function ( callback ) {\n\n\t\t\tonAnimationFrameCallback = callback;\n\t\t\txr.setAnimationLoop( callback );\n\n\t\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t\t};\n\n\t\txr.addEventListener( 'sessionstart', onXRSessionStart );\n\t\txr.addEventListener( 'sessionend', onXRSessionEnd );\n\n\t\t// Rendering\n\n\t\tthis.render = function ( scene, camera ) {\n\n\t\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( _isContextLost === true ) return;\n\n\t\t\t// update scene graph\n\n\t\t\tif ( scene.matrixWorldAutoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t\t// update camera matrices and frustum\n\n\t\t\tif ( camera.parent === null && camera.matrixWorldAutoUpdate === true ) camera.updateMatrixWorld();\n\n\t\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\t\tif ( xr.cameraAutoUpdate === true ) xr.updateCamera( camera );\n\n\t\t\t\tcamera = xr.getCamera(); // use XR camera for rendering\n\n\t\t\t}\n\n\t\t\t//\n\t\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, _currentRenderTarget );\n\n\t\t\tcurrentRenderState = renderStates.get( scene, renderStateStack.length );\n\t\t\tcurrentRenderState.init();\n\n\t\t\trenderStateStack.push( currentRenderState );\n\n\t\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t\t_clippingEnabled = clipping.init( this.clippingPlanes, _localClippingEnabled );\n\n\t\t\tcurrentRenderList = renderLists.get( scene, renderListStack.length );\n\t\t\tcurrentRenderList.init();\n\n\t\t\trenderListStack.push( currentRenderList );\n\n\t\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\t\tcurrentRenderList.finish();\n\n\t\t\tif ( _this.sortObjects === true ) {\n\n\t\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tthis.info.render.frame ++;\n\n\t\t\tif ( _clippingEnabled === true ) clipping.beginShadows();\n\n\t\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\t\tif ( _clippingEnabled === true ) clipping.endShadows();\n\n\t\t\t//\n\n\t\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\n\t\t\t//\n\n\t\t\tbackground.render( currentRenderList, scene );\n\n\t\t\t// render scene\n\n\t\t\tcurrentRenderState.setupLights( _this._useLegacyLights );\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\tconst cameras = camera.cameras;\n\n\t\t\t\tfor ( let i = 0, l = cameras.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst camera2 = cameras[ i ];\n\n\t\t\t\t\trenderScene( currentRenderList, scene, camera2, camera2.viewport );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\trenderScene( currentRenderList, scene, camera );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t\t// _gl.finish();\n\n\t\t\tbindingStates.resetDefaultState();\n\t\t\t_currentMaterialId = - 1;\n\t\t\t_currentCamera = null;\n\n\t\t\trenderStateStack.pop();\n\n\t\t\tif ( renderStateStack.length > 0 ) {\n\n\t\t\t\tcurrentRenderState = renderStateStack[ renderStateStack.length - 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tcurrentRenderState = null;\n\n\t\t\t}\n\n\t\t\trenderListStack.pop();\n\n\t\t\tif ( renderListStack.length > 0 ) {\n\n\t\t\t\tcurrentRenderList = renderListStack[ renderListStack.length - 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tcurrentRenderList = null;\n\n\t\t\t}\n\n\t\t};\n\n\t\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\t\tif ( object.visible === false ) return;\n\n\t\t\tconst visible = object.layers.test( camera.layers );\n\n\t\t\tif ( visible ) {\n\n\t\t\t\tif ( object.isGroup ) {\n\n\t\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t\tif ( object.boundingSphere !== undefined ) {\n\n\t\t\t\t\t\t\t\tif ( object.boundingSphere === null ) object.computeBoundingSphere();\n\t\t\t\t\t\t\t\t_vector3.copy( object.boundingSphere.center );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\t\t\t\t\t\t\t\t_vector3.copy( geometry.boundingSphere.center );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t_vector3\n\t\t\t\t\t\t\t\t.applyMatrix4( object.matrixWorld )\n\t\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst children = object.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction renderScene( currentRenderList, scene, camera, viewport ) {\n\n\t\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\t\tconst transmissiveObjects = currentRenderList.transmissive;\n\t\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\t\tcurrentRenderState.setupLightsView( camera );\n\n\t\t\tif ( _clippingEnabled === true ) clipping.setGlobalState( _this.clippingPlanes, camera );\n\n\t\t\tif ( transmissiveObjects.length > 0 ) renderTransmissionPass( opaqueObjects, transmissiveObjects, scene, camera );\n\n\t\t\tif ( viewport ) state.viewport( _currentViewport.copy( viewport ) );\n\n\t\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\t\tif ( transmissiveObjects.length > 0 ) renderObjects( transmissiveObjects, scene, camera );\n\t\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\t\tstate.buffers.depth.setTest( true );\n\t\t\tstate.buffers.depth.setMask( true );\n\t\t\tstate.buffers.color.setMask( true );\n\n\t\t\tstate.setPolygonOffset( false );\n\n\t\t}\n\n\t\tfunction renderTransmissionPass( opaqueObjects, transmissiveObjects, scene, camera ) {\n\n\t\t\tconst isWebGL2 = capabilities.isWebGL2;\n\n\t\t\tif ( _transmissionRenderTarget === null ) {\n\n\t\t\t\t_transmissionRenderTarget = new WebGLRenderTarget( 1, 1, {\n\t\t\t\t\tgenerateMipmaps: true,\n\t\t\t\t\ttype: extensions.has( 'EXT_color_buffer_half_float' ) ? HalfFloatType : UnsignedByteType,\n\t\t\t\t\tminFilter: LinearMipmapLinearFilter,\n\t\t\t\t\tsamples: ( isWebGL2 ) ? 4 : 0\n\t\t\t\t} );\n\n\t\t\t\t// debug\n\n\t\t\t\t/*\n\t\t\t\tconst geometry = new PlaneGeometry();\n\t\t\t\tconst material = new MeshBasicMaterial( { map: _transmissionRenderTarget.texture } );\n\n\t\t\t\tconst mesh = new Mesh( geometry, material );\n\t\t\t\tscene.add( mesh );\n\t\t\t\t*/\n\n\t\t\t}\n\n\t\t\t_this.getDrawingBufferSize( _vector2 );\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t_transmissionRenderTarget.setSize( _vector2.x, _vector2.y );\n\n\t\t\t} else {\n\n\t\t\t\t_transmissionRenderTarget.setSize( floorPowerOfTwo( _vector2.x ), floorPowerOfTwo( _vector2.y ) );\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tconst currentRenderTarget = _this.getRenderTarget();\n\t\t\t_this.setRenderTarget( _transmissionRenderTarget );\n\n\t\t\t_this.getClearColor( _currentClearColor );\n\t\t\t_currentClearAlpha = _this.getClearAlpha();\n\t\t\tif ( _currentClearAlpha < 1 ) _this.setClearColor( 0xffffff, 0.5 );\n\n\t\t\t_this.clear();\n\n\t\t\t// Turn off the features which can affect the frag color for opaque objects pass.\n\t\t\t// Otherwise they are applied twice in opaque objects pass and transmission objects pass.\n\t\t\tconst currentToneMapping = _this.toneMapping;\n\t\t\t_this.toneMapping = NoToneMapping;\n\n\t\t\trenderObjects( opaqueObjects, scene, camera );\n\n\t\t\ttextures.updateMultisampleRenderTarget( _transmissionRenderTarget );\n\t\t\ttextures.updateRenderTargetMipmap( _transmissionRenderTarget );\n\n\t\t\tlet renderTargetNeedsUpdate = false;\n\n\t\t\tfor ( let i = 0, l = transmissiveObjects.length; i < l; i ++ ) {\n\n\t\t\t\tconst renderItem = transmissiveObjects[ i ];\n\n\t\t\t\tconst object = renderItem.object;\n\t\t\t\tconst geometry = renderItem.geometry;\n\t\t\t\tconst material = renderItem.material;\n\t\t\t\tconst group = renderItem.group;\n\n\t\t\t\tif ( material.side === DoubleSide && object.layers.test( camera.layers ) ) {\n\n\t\t\t\t\tconst currentSide = material.side;\n\n\t\t\t\t\tmaterial.side = BackSide;\n\t\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t\t\tmaterial.side = currentSide;\n\t\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t\t\trenderTargetNeedsUpdate = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( renderTargetNeedsUpdate === true ) {\n\n\t\t\t\ttextures.updateMultisampleRenderTarget( _transmissionRenderTarget );\n\t\t\t\ttextures.updateRenderTargetMipmap( _transmissionRenderTarget );\n\n\t\t\t}\n\n\t\t\t_this.setRenderTarget( currentRenderTarget );\n\n\t\t\t_this.setClearColor( _currentClearColor, _currentClearAlpha );\n\n\t\t\t_this.toneMapping = currentToneMapping;\n\n\t\t}\n\n\t\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\t\tconst object = renderItem.object;\n\t\t\t\tconst geometry = renderItem.geometry;\n\t\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\t\tconst group = renderItem.group;\n\n\t\t\t\tif ( object.layers.test( camera.layers ) ) {\n\n\t\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\n\t\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\t\tmaterial.onBeforeRender( _this, scene, camera, geometry, object, group );\n\n\t\t\tif ( material.transparent === true && material.side === DoubleSide && material.forceSinglePass === false ) {\n\n\t\t\t\tmaterial.side = BackSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\t\tmaterial.side = FrontSide;\n\t\t\t\tmaterial.needsUpdate = true;\n\t\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\t\tmaterial.side = DoubleSide;\n\n\t\t\t} else {\n\n\t\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t\t}\n\n\t\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\n\t\t}\n\n\t\tfunction getProgram( material, scene, object ) {\n\n\t\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\t\tconst materialProperties = properties.get( material );\n\n\t\t\tconst lights = currentRenderState.state.lights;\n\t\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\t\tconst lightsStateVersion = lights.state.version;\n\n\t\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, object );\n\t\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\t\tlet programs = materialProperties.programs;\n\n\t\t\t// always update environment and fog - changing these trigger an getProgram call, but it's possible that the program doesn't change\n\n\t\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\t\tmaterialProperties.fog = scene.fog;\n\t\t\tmaterialProperties.envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || materialProperties.environment );\n\n\t\t\tif ( programs === undefined ) {\n\n\t\t\t\t// new material\n\n\t\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t\t\tprograms = new Map();\n\t\t\t\tmaterialProperties.programs = programs;\n\n\t\t\t}\n\n\t\t\tlet program = programs.get( programCacheKey );\n\n\t\t\tif ( program !== undefined ) {\n\n\t\t\t\t// early out if program and light state is identical\n\n\t\t\t\tif ( materialProperties.currentProgram === program && materialProperties.lightsStateVersion === lightsStateVersion ) {\n\n\t\t\t\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t\t\t\treturn program;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tparameters.uniforms = programCache.getUniforms( material );\n\n\t\t\t\tmaterial.onBuild( object, parameters, _this );\n\n\t\t\t\tmaterial.onBeforeCompile( parameters, _this );\n\n\t\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\t\t\t\tprograms.set( programCacheKey, program );\n\n\t\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\n\t\t\t}\n\n\t\t\tconst uniforms = materialProperties.uniforms;\n\n\t\t\tif ( ( ! material.isShaderMaterial && ! material.isRawShaderMaterial ) || material.clipping === true ) {\n\n\t\t\t\tuniforms.clippingPlanes = clipping.uniform;\n\n\t\t\t}\n\n\t\t\tupdateCommonMaterialProperties( material, parameters );\n\n\t\t\t// store the light setup it was created for\n\n\t\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\t\tuniforms.ltc_1.value = lights.state.rectAreaLTC1;\n\t\t\t\tuniforms.ltc_2.value = lights.state.rectAreaLTC2;\n\t\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\t\tuniforms.spotLightMatrix.value = lights.state.spotLightMatrix;\n\t\t\t\tuniforms.spotLightMap.value = lights.state.spotLightMap;\n\t\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t\t}\n\n\t\t\tconst progUniforms = program.getUniforms();\n\t\t\tconst uniformsList = WebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\t\tmaterialProperties.currentProgram = program;\n\t\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t\t\treturn program;\n\n\t\t}\n\n\t\tfunction updateCommonMaterialProperties( material, parameters ) {\n\n\t\t\tconst materialProperties = properties.get( material );\n\n\t\t\tmaterialProperties.outputColorSpace = parameters.outputColorSpace;\n\t\t\tmaterialProperties.instancing = parameters.instancing;\n\t\t\tmaterialProperties.instancingColor = parameters.instancingColor;\n\t\t\tmaterialProperties.skinning = parameters.skinning;\n\t\t\tmaterialProperties.morphTargets = parameters.morphTargets;\n\t\t\tmaterialProperties.morphNormals = parameters.morphNormals;\n\t\t\tmaterialProperties.morphColors = parameters.morphColors;\n\t\t\tmaterialProperties.morphTargetsCount = parameters.morphTargetsCount;\n\t\t\tmaterialProperties.numClippingPlanes = parameters.numClippingPlanes;\n\t\t\tmaterialProperties.numIntersection = parameters.numClipIntersection;\n\t\t\tmaterialProperties.vertexAlphas = parameters.vertexAlphas;\n\t\t\tmaterialProperties.vertexTangents = parameters.vertexTangents;\n\t\t\tmaterialProperties.toneMapping = parameters.toneMapping;\n\n\t\t}\n\n\t\tfunction setProgram( camera, scene, geometry, material, object ) {\n\n\t\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\t\ttextures.resetTextureUnits();\n\n\t\t\tconst fog = scene.fog;\n\t\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\t\tconst colorSpace = ( _currentRenderTarget === null ) ? _this.outputColorSpace : ( _currentRenderTarget.isXRRenderTarget === true ? _currentRenderTarget.texture.colorSpace : LinearSRGBColorSpace );\n\t\t\tconst envMap = ( material.isMeshStandardMaterial ? cubeuvmaps : cubemaps ).get( material.envMap || environment );\n\t\t\tconst vertexAlphas = material.vertexColors === true && !! geometry.attributes.color && geometry.attributes.color.itemSize === 4;\n\t\t\tconst vertexTangents = !! geometry.attributes.tangent && ( !! material.normalMap || material.anisotropy > 0 );\n\t\t\tconst morphTargets = !! geometry.morphAttributes.position;\n\t\t\tconst morphNormals = !! geometry.morphAttributes.normal;\n\t\t\tconst morphColors = !! geometry.morphAttributes.color;\n\n\t\t\tlet toneMapping = NoToneMapping;\n\n\t\t\tif ( material.toneMapped ) {\n\n\t\t\t\tif ( _currentRenderTarget === null || _currentRenderTarget.isXRRenderTarget === true ) {\n\n\t\t\t\t\ttoneMapping = _this.toneMapping;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst morphAttribute = geometry.morphAttributes.position || geometry.morphAttributes.normal || geometry.morphAttributes.color;\n\t\t\tconst morphTargetsCount = ( morphAttribute !== undefined ) ? morphAttribute.length : 0;\n\n\t\t\tconst materialProperties = properties.get( material );\n\t\t\tconst lights = currentRenderState.state.lights;\n\n\t\t\tif ( _clippingEnabled === true ) {\n\n\t\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\t\tconst useCache =\n\t\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t\t// (#8465, #8379)\n\t\t\t\t\tclipping.setState( material, camera, useCache );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet needsProgramChange = false;\n\n\t\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\t\tif ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.outputColorSpace !== colorSpace ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( object.isInstancedMesh && materialProperties.instancing === false ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( ! object.isInstancedMesh && materialProperties.instancing === true ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( object.isSkinnedMesh && materialProperties.skinning === false ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( ! object.isSkinnedMesh && materialProperties.skinning === true ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( object.isInstancedMesh && materialProperties.instancingColor === true && object.instanceColor === null ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( object.isInstancedMesh && materialProperties.instancingColor === false && object.instanceColor !== null ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.envMap !== envMap ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( material.fog === true && materialProperties.fog !== fog ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t\t( materialProperties.numClippingPlanes !== clipping.numPlanes ||\n\t\t\t\t\tmaterialProperties.numIntersection !== clipping.numIntersection ) ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.vertexAlphas !== vertexAlphas ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.vertexTangents !== vertexTangents ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.morphTargets !== morphTargets ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.morphNormals !== morphNormals ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.morphColors !== morphColors ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( materialProperties.toneMapping !== toneMapping ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t} else if ( capabilities.isWebGL2 === true && materialProperties.morphTargetsCount !== morphTargetsCount ) {\n\n\t\t\t\t\tneedsProgramChange = true;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tneedsProgramChange = true;\n\t\t\t\tmaterialProperties.__version = material.version;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tlet program = materialProperties.currentProgram;\n\n\t\t\tif ( needsProgramChange === true ) {\n\n\t\t\t\tprogram = getProgram( material, scene, object );\n\n\t\t\t}\n\n\t\t\tlet refreshProgram = false;\n\t\t\tlet refreshMaterial = false;\n\t\t\tlet refreshLights = false;\n\n\t\t\tconst p_uniforms = program.getUniforms(),\n\t\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\t\trefreshProgram = true;\n\t\t\t\trefreshMaterial = true;\n\t\t\t\trefreshLights = true;\n\n\t\t\t}\n\n\t\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t\t_currentMaterialId = material.id;\n\n\t\t\t\trefreshMaterial = true;\n\n\t\t\t}\n\n\t\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\t\t// common camera uniforms\n\n\t\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl, _vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t\t}\n\n\t\t\t\t// consider moving isOrthographic to UniformLib and WebGLMaterials, see https://github.com/mrdoob/three.js/pull/26467#issuecomment-1645185067\n\n\t\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t\t}\n\n\t\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// skinning and morph target uniforms must be set even if material didn't change\n\t\t\t// auto-setting of texture unit for bone and morph texture must go before other textures\n\t\t\t// otherwise textures used for skinning and morphing can take over texture units reserved for other material textures\n\n\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\t\tconst skeleton = object.skeleton;\n\n\t\t\t\tif ( skeleton ) {\n\n\t\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\t\tif ( skeleton.boneTexture === null ) skeleton.computeBoneTexture();\n\n\t\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\t\tif ( morphAttributes.position !== undefined || morphAttributes.normal !== undefined || ( morphAttributes.color !== undefined && capabilities.isWebGL2 === true ) ) {\n\n\t\t\t\tmorphtargets.update( object, geometry, program );\n\n\t\t\t}\n\n\t\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t\t}\n\n\t\t\t// https://github.com/mrdoob/three.js/pull/24467#issuecomment-1209031512\n\n\t\t\tif ( material.isMeshGouraudMaterial && material.envMap !== null ) {\n\n\t\t\t\tm_uniforms.envMap.value = envMap;\n\n\t\t\t\tm_uniforms.flipEnvMap.value = ( envMap.isCubeTexture && envMap.isRenderTargetTexture === false ) ? - 1 : 1;\n\n\t\t\t}\n\n\t\t\tif ( refreshMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t\t// values\n\t\t\t\t\t//\n\t\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t\t// the GL state when required\n\n\t\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t\t}\n\n\t\t\t\t// refresh uniforms common to several materials\n\n\t\t\t\tif ( fog && material.fog === true ) {\n\n\t\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t\t}\n\n\t\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, _pixelRatio, _height, _transmissionRenderTarget );\n\n\t\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t\t}\n\n\t\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t\t}\n\n\t\t\t// common matrices\n\n\t\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\t\t// UBOs\n\n\t\t\tif ( material.isShaderMaterial || material.isRawShaderMaterial ) {\n\n\t\t\t\tconst groups = material.uniformsGroups;\n\n\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\tif ( capabilities.isWebGL2 ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\t\t\tuniformsGroups.update( group, program );\n\t\t\t\t\t\tuniformsGroups.bind( group, program );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn program;\n\n\t\t}\n\n\t\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\t\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\t\tuniforms.directionalLights.needsUpdate = value;\n\t\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\t\tuniforms.pointLights.needsUpdate = value;\n\t\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\t\tuniforms.spotLights.needsUpdate = value;\n\t\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t\t}\n\n\t\tfunction materialNeedsLights( material ) {\n\n\t\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t\t}\n\n\t\tthis.getActiveCubeFace = function () {\n\n\t\t\treturn _currentActiveCubeFace;\n\n\t\t};\n\n\t\tthis.getActiveMipmapLevel = function () {\n\n\t\t\treturn _currentActiveMipmapLevel;\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn _currentRenderTarget;\n\n\t\t};\n\n\t\tthis.setRenderTargetTextures = function ( renderTarget, colorTexture, depthTexture ) {\n\n\t\t\tproperties.get( renderTarget.texture ).__webglTexture = colorTexture;\n\t\t\tproperties.get( renderTarget.depthTexture ).__webglTexture = depthTexture;\n\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\t\trenderTargetProperties.__hasExternalTextures = true;\n\n\t\t\tif ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\t\trenderTargetProperties.__autoAllocateDepthBuffer = depthTexture === undefined;\n\n\t\t\t\tif ( ! renderTargetProperties.__autoAllocateDepthBuffer ) {\n\n\t\t\t\t\t// The multisample_render_to_texture extension doesn't work properly if there\n\t\t\t\t\t// are midframe flushes and an external depth buffer. Disable use of the extension.\n\t\t\t\t\tif ( extensions.has( 'WEBGL_multisampled_render_to_texture' ) === true ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided' );\n\t\t\t\t\t\trenderTargetProperties.__useRenderToTexture = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.setRenderTargetFramebuffer = function ( renderTarget, defaultFramebuffer ) {\n\n\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\t\trenderTargetProperties.__webglFramebuffer = defaultFramebuffer;\n\t\t\trenderTargetProperties.__useDefaultFramebuffer = defaultFramebuffer === undefined;\n\n\t\t};\n\n\t\tthis.setRenderTarget = function ( renderTarget, activeCubeFace = 0, activeMipmapLevel = 0 ) {\n\n\t\t\t_currentRenderTarget = renderTarget;\n\t\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\t\tlet useDefaultFramebuffer = true;\n\t\t\tlet framebuffer = null;\n\t\t\tlet isCube = false;\n\t\t\tlet isRenderTarget3D = false;\n\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\tif ( renderTargetProperties.__useDefaultFramebuffer !== undefined ) {\n\n\t\t\t\t\t// We need to make sure to rebind the framebuffer.\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\t\t\t\t\tuseDefaultFramebuffer = false;\n\n\t\t\t\t} else if ( renderTargetProperties.__webglFramebuffer === undefined ) {\n\n\t\t\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t\t\t} else if ( renderTargetProperties.__hasExternalTextures ) {\n\n\t\t\t\t\t// Color and depth texture must be rebound in order for the swapchain to update.\n\t\t\t\t\ttextures.rebindTextures( renderTarget, properties.get( renderTarget.texture ).__webglTexture, properties.get( renderTarget.depthTexture ).__webglTexture );\n\n\t\t\t\t}\n\n\t\t\t\tconst texture = renderTarget.texture;\n\n\t\t\t\tif ( texture.isData3DTexture || texture.isDataArrayTexture || texture.isCompressedArrayTexture ) {\n\n\t\t\t\t\tisRenderTarget3D = true;\n\n\t\t\t\t}\n\n\t\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\t\tif ( Array.isArray( __webglFramebuffer[ activeCubeFace ] ) ) {\n\n\t\t\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ][ activeMipmapLevel ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tisCube = true;\n\n\t\t\t\t} else if ( ( capabilities.isWebGL2 && renderTarget.samples > 0 ) && textures.useMultisampledRTT( renderTarget ) === false ) {\n\n\t\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( Array.isArray( __webglFramebuffer ) ) {\n\n\t\t\t\t\t\tframebuffer = __webglFramebuffer[ activeMipmapLevel ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t\t} else {\n\n\t\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t\t}\n\n\t\t\tconst framebufferBound = state.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\tif ( framebufferBound && capabilities.drawBuffers && useDefaultFramebuffer ) {\n\n\t\t\t\tstate.drawBuffers( renderTarget, framebuffer );\n\n\t\t\t}\n\n\t\t\tstate.viewport( _currentViewport );\n\t\t\tstate.scissor( _currentScissor );\n\t\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + activeCubeFace, textureProperties.__webglTexture, activeMipmapLevel );\n\n\t\t\t} else if ( isRenderTarget3D ) {\n\n\t\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t\tconst layer = activeCubeFace || 0;\n\t\t\t\t_gl.framebufferTextureLayer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, textureProperties.__webglTexture, activeMipmapLevel || 0, layer );\n\n\t\t\t}\n\n\t\t\t_currentMaterialId = - 1; // reset current material to ensure correct uniform bindings\n\n\t\t};\n\n\t\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t\t}\n\n\t\t\tif ( framebuffer ) {\n\n\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\ttry {\n\n\t\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst halfFloatSupportedByExt = ( textureType === HalfFloatType ) && ( extensions.has( 'EXT_color_buffer_half_float' ) || ( capabilities.isWebGL2 && extensions.has( 'EXT_color_buffer_float' ) ) );\n\n\t\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.has( 'OES_texture_float' ) || extensions.has( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t\t! halfFloatSupportedByExt ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} finally {\n\n\t\t\t\t\t// restore framebuffer of current render target if necessary\n\n\t\t\t\t\tconst framebuffer = ( _currentRenderTarget !== null ) ? properties.get( _currentRenderTarget ).__webglFramebuffer : null;\n\t\t\t\t\tstate.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.copyFramebufferToTexture = function ( position, texture, level = 0 ) {\n\n\t\t\tconst levelScale = Math.pow( 2, - level );\n\t\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\t\tconst height = Math.floor( texture.image.height * levelScale );\n\n\t\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t\t_gl.copyTexSubImage2D( _gl.TEXTURE_2D, level, 0, 0, position.x, position.y, width, height );\n\n\t\t\tstate.unbindTexture();\n\n\t\t};\n\n\t\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level = 0 ) {\n\n\t\t\tconst width = srcTexture.image.width;\n\t\t\tconst height = srcTexture.image.height;\n\t\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t\t// As another texture upload may have changed pixelStorei\n\t\t\t// parameters, make sure they are correct for the dstTexture\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, dstTexture.flipY );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, dstTexture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, dstTexture.unpackAlignment );\n\n\t\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t\t} else {\n\n\t\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t\t_gl.compressedTexSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Generate mipmaps only when copying level 0\n\t\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( _gl.TEXTURE_2D );\n\n\t\t\tstate.unbindTexture();\n\n\t\t};\n\n\t\tthis.copyTextureToTexture3D = function ( sourceBox, position, srcTexture, dstTexture, level = 0 ) {\n\n\t\t\tif ( _this.isWebGL1Renderer ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst width = sourceBox.max.x - sourceBox.min.x + 1;\n\t\t\tconst height = sourceBox.max.y - sourceBox.min.y + 1;\n\t\t\tconst depth = sourceBox.max.z - sourceBox.min.z + 1;\n\t\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\t\tconst glType = utils.convert( dstTexture.type );\n\t\t\tlet glTarget;\n\n\t\t\tif ( dstTexture.isData3DTexture ) {\n\n\t\t\t\ttextures.setTexture3D( dstTexture, 0 );\n\t\t\t\tglTarget = _gl.TEXTURE_3D;\n\n\t\t\t} else if ( dstTexture.isDataArrayTexture ) {\n\n\t\t\t\ttextures.setTexture2DArray( dstTexture, 0 );\n\t\t\t\tglTarget = _gl.TEXTURE_2D_ARRAY;\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, dstTexture.flipY );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, dstTexture.premultiplyAlpha );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, dstTexture.unpackAlignment );\n\n\t\t\tconst unpackRowLen = _gl.getParameter( _gl.UNPACK_ROW_LENGTH );\n\t\t\tconst unpackImageHeight = _gl.getParameter( _gl.UNPACK_IMAGE_HEIGHT );\n\t\t\tconst unpackSkipPixels = _gl.getParameter( _gl.UNPACK_SKIP_PIXELS );\n\t\t\tconst unpackSkipRows = _gl.getParameter( _gl.UNPACK_SKIP_ROWS );\n\t\t\tconst unpackSkipImages = _gl.getParameter( _gl.UNPACK_SKIP_IMAGES );\n\n\t\t\tconst image = srcTexture.isCompressedTexture ? srcTexture.mipmaps[ 0 ] : srcTexture.image;\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ROW_LENGTH, image.width );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_IMAGE_HEIGHT, image.height );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_PIXELS, sourceBox.min.x );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_ROWS, sourceBox.min.y );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_IMAGES, sourceBox.min.z );\n\n\t\t\tif ( srcTexture.isDataTexture || srcTexture.isData3DTexture ) {\n\n\t\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image.data );\n\n\t\t\t} else {\n\n\t\t\t\tif ( srcTexture.isCompressedArrayTexture ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture.' );\n\t\t\t\t\t_gl.compressedTexSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, image.data );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t_gl.texSubImage3D( glTarget, level, position.x, position.y, position.z, width, height, depth, glFormat, glType, image );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_ROW_LENGTH, unpackRowLen );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_IMAGE_HEIGHT, unpackImageHeight );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_PIXELS, unpackSkipPixels );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_ROWS, unpackSkipRows );\n\t\t\t_gl.pixelStorei( _gl.UNPACK_SKIP_IMAGES, unpackSkipImages );\n\n\t\t\t// Generate mipmaps only when copying level 0\n\t\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( glTarget );\n\n\t\t\tstate.unbindTexture();\n\n\t\t};\n\n\t\tthis.initTexture = function ( texture ) {\n\n\t\t\tif ( texture.isCubeTexture ) {\n\n\t\t\t\ttextures.setTextureCube( texture, 0 );\n\n\t\t\t} else if ( texture.isData3DTexture ) {\n\n\t\t\t\ttextures.setTexture3D( texture, 0 );\n\n\t\t\t} else if ( texture.isDataArrayTexture || texture.isCompressedArrayTexture ) {\n\n\t\t\t\ttextures.setTexture2DArray( texture, 0 );\n\n\t\t\t} else {\n\n\t\t\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t\t}\n\n\t\t\tstate.unbindTexture();\n\n\t\t};\n\n\t\tthis.resetState = function () {\n\n\t\t\t_currentActiveCubeFace = 0;\n\t\t\t_currentActiveMipmapLevel = 0;\n\t\t\t_currentRenderTarget = null;\n\n\t\t\tstate.reset();\n\t\t\tbindingStates.reset();\n\n\t\t};\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t\t}\n\n\t}\n\n\tget coordinateSystem() {\n\n\t\treturn WebGLCoordinateSystem;\n\n\t}\n\n\tget outputColorSpace() {\n\n\t\treturn this._outputColorSpace;\n\n\t}\n\n\tset outputColorSpace( colorSpace ) {\n\n\t\tthis._outputColorSpace = colorSpace;\n\n\t\tconst gl = this.getContext();\n\t\tgl.drawingBufferColorSpace = colorSpace === DisplayP3ColorSpace ? 'display-p3' : 'srgb';\n\t\tgl.unpackColorSpace = ColorManagement.workingColorSpace === LinearDisplayP3ColorSpace ? 'display-p3' : 'srgb';\n\n\t}\n\n\tget physicallyCorrectLights() { // @deprecated, r150\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead.' );\n\t\treturn ! this.useLegacyLights;\n\n\t}\n\n\tset physicallyCorrectLights( value ) { // @deprecated, r150\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead.' );\n\t\tthis.useLegacyLights = ! value;\n\n\t}\n\n\tget outputEncoding() { // @deprecated, r152\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead.' );\n\t\treturn this.outputColorSpace === SRGBColorSpace ? sRGBEncoding : LinearEncoding;\n\n\t}\n\n\tset outputEncoding( encoding ) { // @deprecated, r152\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead.' );\n\t\tthis.outputColorSpace = encoding === sRGBEncoding ? SRGBColorSpace : LinearSRGBColorSpace;\n\n\t}\n\n\tget useLegacyLights() { // @deprecated, r155\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733.' );\n\t\treturn this._useLegacyLights;\n\n\t}\n\n\tset useLegacyLights( value ) { // @deprecated, r155\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733.' );\n\t\tthis._useLegacyLights = value;\n\n\t}\n\n}\n\nclass WebGL1Renderer extends WebGLRenderer {}\n\nWebGL1Renderer.prototype.isWebGL1Renderer = true;\n\nclass FogExp2 {\n\n\tconstructor( color, density = 0.00025 ) {\n\n\t\tthis.isFogExp2 = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\t\tthis.density = density;\n\n\t}\n\n\tclone() {\n\n\t\treturn new FogExp2( this.color, this.density );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tname: this.name,\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t}\n\n}\n\nclass Fog {\n\n\tconstructor( color, near = 1, far = 1000 ) {\n\n\t\tthis.isFog = true;\n\n\t\tthis.name = '';\n\n\t\tthis.color = new Color( color );\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Fog( this.color, this.near, this.far );\n\n\t}\n\n\ttoJSON( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tname: this.name,\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t}\n\n}\n\nclass Scene extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isScene = true;\n\n\t\tthis.type = 'Scene';\n\n\t\tthis.background = null;\n\t\tthis.environment = null;\n\t\tthis.fog = null;\n\n\t\tthis.backgroundBlurriness = 0;\n\t\tthis.backgroundIntensity = 1;\n\n\t\tthis.overrideMaterial = null;\n\n\t\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tthis.backgroundBlurriness = source.backgroundBlurriness;\n\t\tthis.backgroundIntensity = source.backgroundIntensity;\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\t\tif ( this.backgroundBlurriness > 0 ) data.object.backgroundBlurriness = this.backgroundBlurriness;\n\t\tif ( this.backgroundIntensity !== 1 ) data.object.backgroundIntensity = this.backgroundIntensity;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass InterleavedBuffer {\n\n\tconstructor( array, stride ) {\n\n\t\tthis.isInterleavedBuffer = true;\n\n\t\tthis.array = array;\n\t\tthis.stride = stride;\n\t\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.updateRange = { offset: 0, count: - 1 };\n\n\t\tthis.version = 0;\n\n\t\tthis.uuid = generateUUID();\n\n\t}\n\n\tonUploadCallback() {}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t}\n\n\tcopyAt( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tset( value, offset = 0 ) {\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new this.constructor( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t}\n\n\tonUpload( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.from( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n}\n\nconst _vector$5 = /*@__PURE__*/ new Vector3();\n\nclass InterleavedBufferAttribute {\n\n\tconstructor( interleavedBuffer, itemSize, offset, normalized = false ) {\n\n\t\tthis.isInterleavedBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.data = interleavedBuffer;\n\t\tthis.itemSize = itemSize;\n\t\tthis.offset = offset;\n\n\t\tthis.normalized = normalized;\n\n\t}\n\n\tget count() {\n\n\t\treturn this.data.count;\n\n\t}\n\n\tget array() {\n\n\t\treturn this.data.array;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tthis.data.needsUpdate = value;\n\n\t}\n\n\tapplyMatrix4( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$5.fromBufferAttribute( this, i );\n\n\t\t\t_vector$5.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$5.x, _vector$5.y, _vector$5.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tapplyNormalMatrix( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$5.fromBufferAttribute( this, i );\n\n\t\t\t_vector$5.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$5.x, _vector$5.y, _vector$5.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttransformDirection( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$5.fromBufferAttribute( this, i );\n\n\t\t\t_vector$5.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$5.x, _vector$5.y, _vector$5.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetX( index, x ) {\n\n\t\tif ( this.normalized ) x = normalize( x, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t}\n\n\tsetY( index, y ) {\n\n\t\tif ( this.normalized ) y = normalize( y, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetZ( index, z ) {\n\n\t\tif ( this.normalized ) z = normalize( z, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetW( index, w ) {\n\n\t\tif ( this.normalized ) w = normalize( w, this.array );\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tgetX( index ) {\n\n\t\tlet x = this.data.array[ index * this.data.stride + this.offset ];\n\n\t\tif ( this.normalized ) x = denormalize( x, this.array );\n\n\t\treturn x;\n\n\t}\n\n\tgetY( index ) {\n\n\t\tlet y = this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t\tif ( this.normalized ) y = denormalize( y, this.array );\n\n\t\treturn y;\n\n\t}\n\n\tgetZ( index ) {\n\n\t\tlet z = this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t\tif ( this.normalized ) z = denormalize( z, this.array );\n\n\t\treturn z;\n\n\t}\n\n\tgetW( index ) {\n\n\t\tlet w = this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t\tif ( this.normalized ) w = denormalize( w, this.array );\n\n\t\treturn w;\n\n\t}\n\n\tsetXY( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t}\n\n\tsetXYZW( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tif ( this.normalized ) {\n\n\t\t\tx = normalize( x, this.array );\n\t\t\ty = normalize( y, this.array );\n\t\t\tz = normalize( z, this.array );\n\t\t\tw = normalize( w, this.array );\n\n\t\t}\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// de-interleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interleaved attribute\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n}\n\nclass SpriteMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isSpriteMaterial = true;\n\n\t\tthis.type = 'SpriteMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.rotation = 0;\n\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nlet _geometry;\n\nconst _intersectPoint = /*@__PURE__*/ new Vector3();\nconst _worldScale = /*@__PURE__*/ new Vector3();\nconst _mvPosition = /*@__PURE__*/ new Vector3();\n\nconst _alignedPosition = /*@__PURE__*/ new Vector2();\nconst _rotatedPosition = /*@__PURE__*/ new Vector2();\nconst _viewWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _vA = /*@__PURE__*/ new Vector3();\nconst _vB = /*@__PURE__*/ new Vector3();\nconst _vC = /*@__PURE__*/ new Vector3();\n\nconst _uvA = /*@__PURE__*/ new Vector2();\nconst _uvB = /*@__PURE__*/ new Vector2();\nconst _uvC = /*@__PURE__*/ new Vector2();\n\nclass Sprite extends Object3D {\n\n\tconstructor( material = new SpriteMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isSprite = true;\n\n\t\tthis.type = 'Sprite';\n\n\t\tif ( _geometry === undefined ) {\n\n\t\t\t_geometry = new BufferGeometry();\n\n\t\t\tconst float32Array = new Float32Array( [\n\t\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t\t] );\n\n\t\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t\t}\n\n\t\tthis.geometry = _geometry;\n\t\tthis.material = material;\n\n\t\tthis.center = new Vector2( 0.5, 0.5 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tconst rotation = this.material.rotation;\n\t\tlet sin, cos;\n\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tconst center = this.center;\n\n\t\ttransformVertex( _vA.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA.set( 0, 0 );\n\t\t_uvB.set( 1, 0 );\n\t\t_uvC.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA, _vB, _vC, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA, _vC, _vB, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getInterpolation( _intersectPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\tthis.material = source.material;\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nconst _v1$2 = /*@__PURE__*/ new Vector3();\nconst _v2$1 = /*@__PURE__*/ new Vector3();\n\nclass LOD extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis._currentLevel = 0;\n\n\t\tthis.type = 'LOD';\n\n\t\tObject.defineProperties( this, {\n\t\t\tlevels: {\n\t\t\t\tenumerable: true,\n\t\t\t\tvalue: []\n\t\t\t},\n\t\t\tisLOD: {\n\t\t\t\tvalue: true,\n\t\t\t}\n\t\t} );\n\n\t\tthis.autoUpdate = true;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance, level.hysteresis );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t}\n\n\taddLevel( object, distance = 0, hysteresis = 0 ) {\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, hysteresis: hysteresis, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t}\n\n\tgetCurrentLevel() {\n\n\t\treturn this._currentLevel;\n\n\t}\n\n\n\n\tgetObjectForDistance( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tlet levelDistance = levels[ i ].distance;\n\n\t\t\t\tif ( levels[ i ].object.visible ) {\n\n\t\t\t\t\tlevelDistance -= levelDistance * levels[ i ].hysteresis;\n\n\t\t\t\t}\n\n\t\t\t\tif ( distance < levelDistance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$2 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$2.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$1.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1$2.distanceTo( _v2$1 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tlet levelDistance = levels[ i ].distance;\n\n\t\t\t\tif ( levels[ i ].object.visible ) {\n\n\t\t\t\t\tlevelDistance -= levelDistance * levels[ i ].hysteresis;\n\n\t\t\t\t}\n\n\t\t\t\tif ( distance >= levelDistance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance,\n\t\t\t\thysteresis: level.hysteresis\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _basePosition = /*@__PURE__*/ new Vector3();\n\nconst _skinIndex = /*@__PURE__*/ new Vector4();\nconst _skinWeight = /*@__PURE__*/ new Vector4();\n\nconst _vector3 = /*@__PURE__*/ new Vector3();\nconst _matrix4 = /*@__PURE__*/ new Matrix4();\nconst _vertex = /*@__PURE__*/ new Vector3();\n\nconst _sphere$3 = /*@__PURE__*/ new Sphere();\nconst _inverseMatrix$2 = /*@__PURE__*/ new Matrix4();\nconst _ray$2 = /*@__PURE__*/ new Ray();\n\nclass SkinnedMesh extends Mesh {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkinnedMesh = true;\n\n\t\tthis.type = 'SkinnedMesh';\n\n\t\tthis.bindMode = 'attached';\n\t\tthis.bindMatrix = new Matrix4();\n\t\tthis.bindMatrixInverse = new Matrix4();\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.makeEmpty();\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i ++ ) {\n\n\t\t\t_vertex.fromBufferAttribute( positionAttribute, i );\n\t\t\tthis.applyBoneTransform( i, _vertex );\n\t\t\tthis.boundingBox.expandByPoint( _vertex );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.makeEmpty();\n\n\t\tconst positionAttribute = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0; i < positionAttribute.count; i ++ ) {\n\n\t\t\t_vertex.fromBufferAttribute( positionAttribute, i );\n\t\t\tthis.applyBoneTransform( i, _vertex );\n\t\t\tthis.boundingSphere.expandByPoint( _vertex );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\tif ( source.boundingBox !== null ) this.boundingBox = source.boundingBox.clone();\n\t\tif ( source.boundingSphere !== null ) this.boundingSphere = source.boundingSphere.clone();\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// test with bounding sphere in world space\n\n\t\tif ( this.boundingSphere === null ) this.computeBoundingSphere();\n\n\t\t_sphere$3.copy( this.boundingSphere );\n\t\t_sphere$3.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\n\n\t\t// convert ray to local space of skinned mesh\n\n\t\t_inverseMatrix$2.copy( matrixWorld ).invert();\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\n\n\t\t// test with bounding box in local space\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tif ( _ray$2.intersectsBox( this.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\t// test for intersections with geometry\n\n\t\tthis._computeIntersections( raycaster, intersects, _ray$2 );\n\n\t}\n\n\tgetVertexPosition( index, target ) {\n\n\t\tsuper.getVertexPosition( index, target );\n\n\t\tthis.applyBoneTransform( index, target );\n\n\t\treturn target;\n\n\t}\n\n\tbind( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.copy( bindMatrix ).invert();\n\n\t}\n\n\tpose() {\n\n\t\tthis.skeleton.pose();\n\n\t}\n\n\tnormalizeSkinWeights() {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.fromBufferAttribute( skinWeight, i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.matrixWorld ).invert();\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.copy( this.bindMatrix ).invert();\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t}\n\n\tapplyBoneTransform( index, vector ) {\n\n\t\tconst skeleton = this.skeleton;\n\t\tconst geometry = this.geometry;\n\n\t\t_skinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t_skinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t_basePosition.copy( vector ).applyMatrix4( this.bindMatrix );\n\n\t\tvector.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tconst weight = _skinWeight.getComponent( i );\n\n\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\tconst boneIndex = _skinIndex.getComponent( i );\n\n\t\t\t\t_matrix4.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\tvector.addScaledVector( _vector3.copy( _basePosition ).applyMatrix4( _matrix4 ), weight );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn vector.applyMatrix4( this.bindMatrixInverse );\n\n\t}\n\n\tboneTransform( index, vector ) { // @deprecated, r151\n\n\t\tconsole.warn( 'THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151.' );\n\t\treturn this.applyBoneTransform( index, vector );\n\n\t}\n\n\n}\n\nclass Bone extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isBone = true;\n\n\t\tthis.type = 'Bone';\n\n\t}\n\n}\n\nclass DataTexture extends Texture {\n\n\tconstructor( data = null, width = 1, height = 1, format, type, mapping, wrapS, wrapT, magFilter = NearestFilter, minFilter = NearestFilter, anisotropy, colorSpace ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, colorSpace );\n\n\t\tthis.isDataTexture = true;\n\n\t\tthis.image = { data: data, width: width, height: height };\n\n\t\tthis.generateMipmaps = false;\n\t\tthis.flipY = false;\n\t\tthis.unpackAlignment = 1;\n\n\t}\n\n}\n\nconst _offsetMatrix = /*@__PURE__*/ new Matrix4();\nconst _identityMatrix = /*@__PURE__*/ new Matrix4();\n\nclass Skeleton {\n\n\tconstructor( bones = [], boneInverses = [] ) {\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.bones = bones.slice( 0 );\n\t\tthis.boneInverses = boneInverses;\n\t\tthis.boneMatrices = null;\n\n\t\tthis.boneTexture = null;\n\t\tthis.boneTextureSize = 0;\n\n\t\tthis.init();\n\n\t}\n\n\tinit() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tthis.boneMatrices = new Float32Array( bones.length * 16 );\n\n\t\t// calculate inverse bone matrices if necessary\n\n\t\tif ( boneInverses.length === 0 ) {\n\n\t\t\tthis.calculateInverses();\n\n\t\t} else {\n\n\t\t\t// handle special case\n\n\t\t\tif ( bones.length !== boneInverses.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: Number of inverse bone matrices does not match amount of bones.' );\n\n\t\t\t\tthis.boneInverses = [];\n\n\t\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcalculateInverses() {\n\n\t\tthis.boneInverses.length = 0;\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.copy( this.bones[ i ].matrixWorld ).invert();\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t}\n\n\tpose() {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.copy( this.boneInverses[ i ] ).invert();\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.copy( bone.parent.matrixWorld ).invert();\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdate() {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== null ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t}\n\n\tcomputeBoneTexture() {\n\n\t\t// layout (1 matrix = 4 pixels)\n\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\t\tlet size = Math.sqrt( this.bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\tsize = ceilPowerOfTwo( size );\n\t\tsize = Math.max( size, 4 );\n\n\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\tboneMatrices.set( this.boneMatrices ); // copy current values\n\n\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\t\tboneTexture.needsUpdate = true;\n\n\t\tthis.boneMatrices = boneMatrices;\n\t\tthis.boneTexture = boneTexture;\n\t\tthis.boneTextureSize = size;\n\n\t\treturn this;\n\n\t}\n\n\tgetBoneByName( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n\tdispose( ) {\n\n\t\tif ( this.boneTexture !== null ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = null;\n\n\t\t}\n\n\t}\n\n\tfromJSON( json, bones ) {\n\n\t\tthis.uuid = json.uuid;\n\n\t\tfor ( let i = 0, l = json.bones.length; i < l; i ++ ) {\n\n\t\t\tconst uuid = json.bones[ i ];\n\t\t\tlet bone = bones[ uuid ];\n\n\t\t\tif ( bone === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.Skeleton: No bone found with UUID:', uuid );\n\t\t\t\tbone = new Bone();\n\n\t\t\t}\n\n\t\t\tthis.bones.push( bone );\n\t\t\tthis.boneInverses.push( new Matrix4().fromArray( json.boneInverses[ i ] ) );\n\n\t\t}\n\n\t\tthis.init();\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Skeleton',\n\t\t\t\tgenerator: 'Skeleton.toJSON'\n\t\t\t},\n\t\t\tbones: [],\n\t\t\tboneInverses: []\n\t\t};\n\n\t\tdata.uuid = this.uuid;\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\n\t\tfor ( let i = 0, l = bones.length; i < l; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\t\t\tdata.bones.push( bone.uuid );\n\n\t\t\tconst boneInverse = boneInverses[ i ];\n\t\t\tdata.boneInverses.push( boneInverse.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass InstancedBufferAttribute extends BufferAttribute {\n\n\tconstructor( array, itemSize, normalized, meshPerAttribute = 1 ) {\n\n\t\tsuper( array, itemSize, normalized );\n\n\t\tthis.isInstancedBufferAttribute = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nconst _instanceLocalMatrix = /*@__PURE__*/ new Matrix4();\nconst _instanceWorldMatrix = /*@__PURE__*/ new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _box3 = /*@__PURE__*/ new Box3();\nconst _identity = /*@__PURE__*/ new Matrix4();\nconst _mesh = /*@__PURE__*/ new Mesh();\nconst _sphere$2 = /*@__PURE__*/ new Sphere();\n\nclass InstancedMesh extends Mesh {\n\n\tconstructor( geometry, material, count ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isInstancedMesh = true;\n\n\t\tthis.instanceMatrix = new InstancedBufferAttribute( new Float32Array( count * 16 ), 16 );\n\t\tthis.instanceColor = null;\n\n\t\tthis.count = count;\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.setMatrixAt( i, _identity );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst count = this.count;\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\tgeometry.computeBoundingBox();\n\n\t\t}\n\n\t\tthis.boundingBox.makeEmpty();\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.getMatrixAt( i, _instanceLocalMatrix );\n\n\t\t\t_box3.copy( geometry.boundingBox ).applyMatrix4( _instanceLocalMatrix );\n\n\t\t\tthis.boundingBox.union( _box3 );\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst count = this.count;\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere === null ) {\n\n\t\t\tgeometry.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.makeEmpty();\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tthis.getMatrixAt( i, _instanceLocalMatrix );\n\n\t\t\t_sphere$2.copy( geometry.boundingSphere ).applyMatrix4( _instanceLocalMatrix );\n\n\t\t\tthis.boundingSphere.union( _sphere$2 );\n\n\t\t}\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\n\t\tif ( source.instanceColor !== null ) this.instanceColor = source.instanceColor.clone();\n\n\t\tthis.count = source.count;\n\n\t\tif ( source.boundingBox !== null ) this.boundingBox = source.boundingBox.clone();\n\t\tif ( source.boundingSphere !== null ) this.boundingSphere = source.boundingSphere.clone();\n\n\t\treturn this;\n\n\t}\n\n\tgetColorAt( index, color ) {\n\n\t\tcolor.fromArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tgetMatrixAt( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\t// test with bounding sphere first\n\n\t\tif ( this.boundingSphere === null ) this.computeBoundingSphere();\n\n\t\t_sphere$2.copy( this.boundingSphere );\n\t\t_sphere$2.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$2 ) === false ) return;\n\n\t\t// now test each instance\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t}\n\n\tsetColorAt( index, color ) {\n\n\t\tif ( this.instanceColor === null ) {\n\n\t\t\tthis.instanceColor = new InstancedBufferAttribute( new Float32Array( this.instanceMatrix.count * 3 ), 3 );\n\n\t\t}\n\n\t\tcolor.toArray( this.instanceColor.array, index * 3 );\n\n\t}\n\n\tsetMatrixAt( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n}\n\nclass LineBasicMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineBasicMaterial = true;\n\n\t\tthis.type = 'LineBasicMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.linewidth = 1;\n\t\tthis.linecap = 'round';\n\t\tthis.linejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.linewidth = source.linewidth;\n\t\tthis.linecap = source.linecap;\n\t\tthis.linejoin = source.linejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _start$1 = /*@__PURE__*/ new Vector3();\nconst _end$1 = /*@__PURE__*/ new Vector3();\nconst _inverseMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _ray$1 = /*@__PURE__*/ new Ray();\nconst _sphere$1 = /*@__PURE__*/ new Sphere();\n\nclass Line extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new LineBasicMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isLine = true;\n\n\t\tthis.type = 'Line';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = Array.isArray( source.material ) ? source.material.slice() : source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += _start$1.distanceTo( _end$1 );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere );\n\t\t_sphere$1.applyMatrix4( matrixWorld );\n\t\t_sphere$1.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$1 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$1.copy( matrixWorld ).invert();\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = this.isLineSegments ? 2 : 1;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tconst a = index.getX( i );\n\t\t\t\tconst b = index.getX( i + 1 );\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, a );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, b );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end - 1; i < l; i += step ) {\n\n\t\t\t\tvStart.fromBufferAttribute( positionAttribute, i );\n\t\t\t\tvEnd.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nconst _start = /*@__PURE__*/ new Vector3();\nconst _end = /*@__PURE__*/ new Vector3();\n\nclass LineSegments extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineSegments = true;\n\n\t\tthis.type = 'LineSegments';\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconst geometry = this.geometry;\n\n\t\t// we assume non-indexed geometry\n\n\t\tif ( geometry.index === null ) {\n\n\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\tconst lineDistances = [];\n\n\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t_start.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t_end.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineLoop extends Line {\n\n\tconstructor( geometry, material ) {\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isLineLoop = true;\n\n\t\tthis.type = 'LineLoop';\n\n\t}\n\n}\n\nclass PointsMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isPointsMaterial = true;\n\n\t\tthis.type = 'PointsMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.size = 1;\n\t\tthis.sizeAttenuation = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.size = source.size;\n\t\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _inverseMatrix = /*@__PURE__*/ new Matrix4();\nconst _ray = /*@__PURE__*/ new Ray();\nconst _sphere = /*@__PURE__*/ new Sphere();\nconst _position$2 = /*@__PURE__*/ new Vector3();\n\nclass Points extends Object3D {\n\n\tconstructor( geometry = new BufferGeometry(), material = new PointsMaterial() ) {\n\n\t\tsuper();\n\n\t\tthis.isPoints = true;\n\n\t\tthis.type = 'Points';\n\n\t\tthis.geometry = geometry;\n\t\tthis.material = material;\n\n\t\tthis.updateMorphTargets();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.material = Array.isArray( source.material ) ? source.material.slice() : source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t}\n\n\traycast( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\t\tconst drawRange = geometry.drawRange;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.copy( matrixWorld ).invert();\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst index = geometry.index;\n\t\tconst attributes = geometry.attributes;\n\t\tconst positionAttribute = attributes.position;\n\n\t\tif ( index !== null ) {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, il = end; i < il; i ++ ) {\n\n\t\t\t\tconst a = index.getX( i );\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, a );\n\n\t\t\t\ttestPoint( _position$2, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\tconst end = Math.min( positionAttribute.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\tfor ( let i = start, l = end; i < l; i ++ ) {\n\n\t\t\t\t_position$2.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\ttestPoint( _position$2, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tupdateMorphTargets() {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\t\tconst keys = Object.keys( morphAttributes );\n\n\t\tif ( keys.length > 0 ) {\n\n\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nclass VideoTexture extends Texture {\n\n\tconstructor( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isVideoTexture = true;\n\n\t\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\t\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tconst scope = this;\n\n\t\tfunction updateVideo() {\n\n\t\t\tscope.needsUpdate = true;\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t\tif ( 'requestVideoFrameCallback' in video ) {\n\n\t\t\tvideo.requestVideoFrameCallback( updateVideo );\n\n\t\t}\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor( this.image ).copy( this );\n\n\t}\n\n\tupdate() {\n\n\t\tconst video = this.image;\n\t\tconst hasVideoFrameCallback = 'requestVideoFrameCallback' in video;\n\n\t\tif ( hasVideoFrameCallback === false && video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n}\n\nclass FramebufferTexture extends Texture {\n\n\tconstructor( width, height ) {\n\n\t\tsuper( { width, height } );\n\n\t\tthis.isFramebufferTexture = true;\n\n\t\tthis.magFilter = NearestFilter;\n\t\tthis.minFilter = NearestFilter;\n\n\t\tthis.generateMipmaps = false;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\nclass CompressedTexture extends Texture {\n\n\tconstructor( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, colorSpace ) {\n\n\t\tsuper( null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, colorSpace );\n\n\t\tthis.isCompressedTexture = true;\n\n\t\tthis.image = { width: width, height: height };\n\t\tthis.mipmaps = mipmaps;\n\n\t\t// no flipping for cube textures\n\t\t// (also flipping doesn't work for compressed textures )\n\n\t\tthis.flipY = false;\n\n\t\t// can't generate mipmaps for compressed textures\n\t\t// mips must be embedded in DDS files\n\n\t\tthis.generateMipmaps = false;\n\n\t}\n\n}\n\nclass CompressedArrayTexture extends CompressedTexture {\n\n\tconstructor( mipmaps, width, height, depth, format, type ) {\n\n\t\tsuper( mipmaps, width, height, format, type );\n\n\t\tthis.isCompressedArrayTexture = true;\n\t\tthis.image.depth = depth;\n\t\tthis.wrapR = ClampToEdgeWrapping;\n\n\t}\n\n}\n\nclass CompressedCubeTexture extends CompressedTexture {\n\n\tconstructor( images, format, type ) {\n\n\t\tsuper( undefined, images[ 0 ].width, images[ 0 ].height, format, type, CubeReflectionMapping );\n\n\t\tthis.isCompressedCubeTexture = true;\n\t\tthis.isCubeTexture = true;\n\n\t\tthis.image = images;\n\n\t}\n\n}\n\nclass CanvasTexture extends Texture {\n\n\tconstructor( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\t\tsuper( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\t\tthis.isCanvasTexture = true;\n\n\t\tthis.needsUpdate = true;\n\n\t}\n\n}\n\n/**\n * Extensible curve object.\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\nclass Curve {\n\n\tconstructor() {\n\n\t\tthis.type = 'Curve';\n\n\t\tthis.arcLengthDivisions = 200;\n\n\t}\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t}\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t}\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints( divisions = 5 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\t// Get total curve arc length\n\n\tgetLength() {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t}\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths( divisions = this.arcLengthDivisions ) {\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t}\n\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t}\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0;\n\t\tconst il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t}\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n\tgetTangentAt( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t}\n\n\tcomputeFrenetFrames( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.6,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass EllipseCurve extends Curve {\n\n\tconstructor( aX = 0, aY = 0, xRadius = 1, yRadius = 1, aStartAngle = 0, aEndAngle = Math.PI * 2, aClockwise = false, aRotation = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.isEllipseCurve = true;\n\n\t\tthis.type = 'EllipseCurve';\n\n\t\tthis.aX = aX;\n\t\tthis.aY = aY;\n\n\t\tthis.xRadius = xRadius;\n\t\tthis.yRadius = yRadius;\n\n\t\tthis.aStartAngle = aStartAngle;\n\t\tthis.aEndAngle = aEndAngle;\n\n\t\tthis.aClockwise = aClockwise;\n\n\t\tthis.aRotation = aRotation;\n\n\t}\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst point = optionalTarget || new Vector2();\n\n\t\tconst twoPi = Math.PI * 2;\n\t\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\n\t\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t\t// ensures that deltaAngle is 0 .. 2 PI\n\t\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\t\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\t\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\t\tif ( samePoints ) {\n\n\t\t\t\tdeltaAngle = 0;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\t\tdeltaAngle = - twoPi;\n\n\t\t\t} else {\n\n\t\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst angle = this.aStartAngle + t * deltaAngle;\n\t\tlet x = this.aX + this.xRadius * Math.cos( angle );\n\t\tlet y = this.aY + this.yRadius * Math.sin( angle );\n\n\t\tif ( this.aRotation !== 0 ) {\n\n\t\t\tconst cos = Math.cos( this.aRotation );\n\t\t\tconst sin = Math.sin( this.aRotation );\n\n\t\t\tconst tx = x - this.aX;\n\t\t\tconst ty = y - this.aY;\n\n\t\t\t// Rotate the point about the center of the ellipse.\n\t\t\tx = tx * cos - ty * sin + this.aX;\n\t\t\ty = tx * sin + ty * cos + this.aY;\n\n\t\t}\n\n\t\treturn point.set( x, y );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.aX = source.aX;\n\t\tthis.aY = source.aY;\n\n\t\tthis.xRadius = source.xRadius;\n\t\tthis.yRadius = source.yRadius;\n\n\t\tthis.aStartAngle = source.aStartAngle;\n\t\tthis.aEndAngle = source.aEndAngle;\n\n\t\tthis.aClockwise = source.aClockwise;\n\n\t\tthis.aRotation = source.aRotation;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.aX = this.aX;\n\t\tdata.aY = this.aY;\n\n\t\tdata.xRadius = this.xRadius;\n\t\tdata.yRadius = this.yRadius;\n\n\t\tdata.aStartAngle = this.aStartAngle;\n\t\tdata.aEndAngle = this.aEndAngle;\n\n\t\tdata.aClockwise = this.aClockwise;\n\n\t\tdata.aRotation = this.aRotation;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.aX = json.aX;\n\t\tthis.aY = json.aY;\n\n\t\tthis.xRadius = json.xRadius;\n\t\tthis.yRadius = json.yRadius;\n\n\t\tthis.aStartAngle = json.aStartAngle;\n\t\tthis.aEndAngle = json.aEndAngle;\n\n\t\tthis.aClockwise = json.aClockwise;\n\n\t\tthis.aRotation = json.aRotation;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass ArcCurve extends EllipseCurve {\n\n\tconstructor( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tsuper( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\tthis.isArcCurve = true;\n\n\t\tthis.type = 'ArcCurve';\n\n\t}\n\n}\n\n/**\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nconst tmp = /*@__PURE__*/ new Vector3();\nconst px = /*@__PURE__*/ new CubicPoly();\nconst py = /*@__PURE__*/ new CubicPoly();\nconst pz = /*@__PURE__*/ new CubicPoly();\n\nclass CatmullRomCurve3 extends Curve {\n\n\tconstructor( points = [], closed = false, curveType = 'centripetal', tension = 0.5 ) {\n\n\t\tsuper();\n\n\t\tthis.isCatmullRomCurve3 = true;\n\n\t\tthis.type = 'CatmullRomCurve3';\n\n\t\tthis.points = points;\n\t\tthis.closed = closed;\n\t\tthis.curveType = curveType;\n\t\tthis.tension = tension;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst l = points.length;\n\n\t\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\t\tlet intPoint = Math.floor( p );\n\t\tlet weight = p - intPoint;\n\n\t\tif ( this.closed ) {\n\n\t\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\t\tintPoint = l - 2;\n\t\t\tweight = 1;\n\n\t\t}\n\n\t\tlet p0, p3; // 4 points (p1 & p2 defined below)\n\n\t\tif ( this.closed || intPoint > 0 ) {\n\n\t\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate first point\n\t\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\t\tp0 = tmp;\n\n\t\t}\n\n\t\tconst p1 = points[ intPoint % l ];\n\t\tconst p2 = points[ ( intPoint + 1 ) % l ];\n\n\t\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t\t} else {\n\n\t\t\t// extrapolate last point\n\t\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\t\tp3 = tmp;\n\n\t\t}\n\n\t\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t\t// init Centripetal / Chordal Catmull-Rom\n\t\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t\t// safety check for repeated points\n\t\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t\t}\n\n\t\tpoint.set(\n\t\t\tpx.calc( weight ),\n\t\t\tpy.calc( weight ),\n\t\t\tpz.calc( weight )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\tthis.closed = source.closed;\n\t\tthis.curveType = source.curveType;\n\t\tthis.tension = source.tension;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\tdata.closed = this.closed;\n\t\tdata.curveType = this.curveType;\n\t\tdata.tension = this.tension;\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t\t}\n\n\t\tthis.closed = json.closed;\n\t\tthis.curveType = json.curveType;\n\t\tthis.tension = json.tension;\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Bezier Curves formulas obtained from\n * https://en.wikipedia.org/wiki/B%C3%A9zier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tconst v0 = ( p2 - p0 ) * 0.5;\n\tconst v1 = ( p3 - p1 ) * 0.5;\n\tconst t2 = t * t;\n\tconst t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tconst k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nclass CubicBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2(), v3 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve = true;\n\n\t\tthis.type = 'CubicBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass CubicBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3(), v3 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isCubicBezierCurve3 = true;\n\n\t\tthis.type = 'CubicBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\t\tthis.v3 = v3;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\t\tpoint.set(\n\t\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\t\tthis.v3.copy( source.v3 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\t\tdata.v3 = this.v3.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\t\tthis.v3.fromArray( json.v3 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve extends Curve {\n\n\tconstructor( v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve = true;\n\n\t\tthis.type = 'LineCurve';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\n\tgetTangent( t, optionalTarget = new Vector2() ) {\n\n\t\treturn optionalTarget.subVectors( this.v2, this.v1 ).normalize();\n\n\t}\n\n\tgetTangentAt( u, optionalTarget ) {\n\n\t\treturn this.getTangent( u, optionalTarget );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineCurve3 extends Curve {\n\n\tconstructor( v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isLineCurve3 = true;\n\n\t\tthis.type = 'LineCurve3';\n\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tif ( t === 1 ) {\n\n\t\t\tpoint.copy( this.v2 );\n\n\t\t} else {\n\n\t\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t\t}\n\n\t\treturn point;\n\n\t}\n\t// Line curve is linear, so we can overwrite default getPointAt\n\tgetPointAt( u, optionalTarget ) {\n\n\t\treturn this.getPoint( u, optionalTarget );\n\n\t}\n\n\tgetTangent( t, optionalTarget = new Vector3() ) {\n\n\t\treturn optionalTarget.subVectors( this.v2, this.v1 ).normalize();\n\n\t}\n\n\tgetTangentAt( u, optionalTarget ) {\n\n\t\treturn this.getTangent( u, optionalTarget );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve extends Curve {\n\n\tconstructor( v0 = new Vector2(), v1 = new Vector2(), v2 = new Vector2() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve = true;\n\n\t\tthis.type = 'QuadraticBezierCurve';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass QuadraticBezierCurve3 extends Curve {\n\n\tconstructor( v0 = new Vector3(), v1 = new Vector3(), v2 = new Vector3() ) {\n\n\t\tsuper();\n\n\t\tthis.isQuadraticBezierCurve3 = true;\n\n\t\tthis.type = 'QuadraticBezierCurve3';\n\n\t\tthis.v0 = v0;\n\t\tthis.v1 = v1;\n\t\tthis.v2 = v2;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\t\tpoint.set(\n\t\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.v0.copy( source.v0 );\n\t\tthis.v1.copy( source.v1 );\n\t\tthis.v2.copy( source.v2 );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.v0 = this.v0.toArray();\n\t\tdata.v1 = this.v1.toArray();\n\t\tdata.v2 = this.v2.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.v0.fromArray( json.v0 );\n\t\tthis.v1.fromArray( json.v1 );\n\t\tthis.v2.fromArray( json.v2 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SplineCurve extends Curve {\n\n\tconstructor( points = [] ) {\n\n\t\tsuper();\n\n\t\tthis.isSplineCurve = true;\n\n\t\tthis.type = 'SplineCurve';\n\n\t\tthis.points = points;\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector2() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst points = this.points;\n\t\tconst p = ( points.length - 1 ) * t;\n\n\t\tconst intPoint = Math.floor( p );\n\t\tconst weight = p - intPoint;\n\n\t\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\t\tconst p1 = points[ intPoint ];\n\t\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\t\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\t\tpoint.set(\n\t\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t\t);\n\n\t\treturn point;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = source.points[ i ];\n\n\t\t\tthis.points.push( point.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.points = [];\n\n\t\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = this.points[ i ];\n\t\t\tdata.points.push( point.toArray() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.points = [];\n\n\t\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\t\tconst point = json.points[ i ];\n\t\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nvar Curves = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tArcCurve: ArcCurve,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tEllipseCurve: EllipseCurve,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tSplineCurve: SplineCurve\n});\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nclass CurvePath extends Curve {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'CurvePath';\n\n\t\tthis.curves = [];\n\t\tthis.autoClose = false; // Automatically closes the path\n\n\t}\n\n\tadd( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t}\n\n\tclosePath() {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tconst lineType = ( startPoint.isVector2 === true ) ? 'LineCurve' : 'LineCurve3';\n\t\t\tthis.curves.push( new Curves[ lineType ]( endPoint, startPoint ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint( t, optionalTarget ) {\n\n\t\tconst d = t * this.getLength();\n\t\tconst curveLengths = this.getCurveLengths();\n\t\tlet i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tconst diff = curveLengths[ i ] - d;\n\t\t\t\tconst curve = this.curves[ i ];\n\n\t\t\t\tconst segmentLength = curve.getLength();\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u, optionalTarget );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t}\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength() {\n\n\t\tconst lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t}\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths() {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t}\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths() {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tconst lengths = [];\n\t\tlet sums = 0;\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t}\n\n\tgetSpacedPoints( divisions = 40 ) {\n\n\t\tconst points = [];\n\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tgetPoints( divisions = 12 ) {\n\n\t\tconst points = [];\n\t\tlet last;\n\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tconst curve = curves[ i ];\n\t\t\tconst resolution = curve.isEllipseCurve ? divisions * 2\n\t\t\t\t: ( curve.isLineCurve || curve.isLineCurve3 ) ? 1\n\t\t\t\t\t: curve.isSplineCurve ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tconst pts = curve.getPoints( resolution );\n\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tconst point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Path extends CurvePath {\n\n\tconstructor( points ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Path';\n\n\t\tthis.currentPoint = new Vector2();\n\n\t\tif ( points ) {\n\n\t\t\tthis.setFromPoints( points );\n\n\t\t}\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tconst curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tconst curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts /*Array of Vector*/ ) {\n\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tconst curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t}\n\n\tarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tabsarc( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t}\n\n\tellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t}\n\n\tabsellipse( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tconst firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tconst lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LatheGeometry extends BufferGeometry {\n\n\tconstructor( points = [ new Vector2( 0, - 0.5 ), new Vector2( 0.5, 0 ), new Vector2( 0, 0.5 ) ], segments = 12, phiStart = 0, phiLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'LatheGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpoints: points,\n\t\t\tsegments: segments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength\n\t\t};\n\n\t\tsegments = Math.floor( segments );\n\n\t\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\t\tphiLength = clamp( phiLength, 0, Math.PI * 2 );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst uvs = [];\n\t\tconst initNormals = [];\n\t\tconst normals = [];\n\n\t\t// helper variables\n\n\t\tconst inverseSegments = 1.0 / segments;\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tconst normal = new Vector3();\n\t\tconst curNormal = new Vector3();\n\t\tconst prevNormal = new Vector3();\n\t\tlet dx = 0;\n\t\tlet dy = 0;\n\n\t\t// pre-compute normals for initial \"meridian\"\n\n\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\tswitch ( j ) {\n\n\t\t\t\tcase 0:\t\t\t\t// special handling for 1st vertex on path\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tprevNormal.copy( normal );\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ( points.length - 1 ):\t// special handling for last Vertex on path\n\n\t\t\t\t\tinitNormals.push( prevNormal.x, prevNormal.y, prevNormal.z );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\t\t\t// default handling for all vertices in between\n\n\t\t\t\t\tdx = points[ j + 1 ].x - points[ j ].x;\n\t\t\t\t\tdy = points[ j + 1 ].y - points[ j ].y;\n\n\t\t\t\t\tnormal.x = dy * 1.0;\n\t\t\t\t\tnormal.y = - dx;\n\t\t\t\t\tnormal.z = dy * 0.0;\n\n\t\t\t\t\tcurNormal.copy( normal );\n\n\t\t\t\t\tnormal.x += prevNormal.x;\n\t\t\t\t\tnormal.y += prevNormal.y;\n\t\t\t\t\tnormal.z += prevNormal.z;\n\n\t\t\t\t\tnormal.normalize();\n\n\t\t\t\t\tinitNormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\tprevNormal.copy( curNormal );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices, uvs and normals\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst phi = phiStart + i * inverseSegments * phiLength;\n\n\t\t\tconst sin = Math.sin( phi );\n\t\t\tconst cos = Math.cos( phi );\n\n\t\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\t\tvertex.y = points[ j ].y;\n\t\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = i / segments;\n\t\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// normal\n\n\t\t\t\tconst x = initNormals[ 3 * j + 0 ] * sin;\n\t\t\t\tconst y = initNormals[ 3 * j + 1 ];\n\t\t\t\tconst z = initNormals[ 3 * j + 0 ] * cos;\n\n\t\t\t\tnormals.push( x, y, z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 0; i < segments; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\t\tconst base = j + i * points.length;\n\n\t\t\t\tconst a = base;\n\t\t\t\tconst b = base + points.length;\n\t\t\t\tconst c = base + points.length + 1;\n\t\t\t\tconst d = base + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( c, d, b );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new LatheGeometry( data.points, data.segments, data.phiStart, data.phiLength );\n\n\t}\n\n}\n\nclass CapsuleGeometry extends LatheGeometry {\n\n\tconstructor( radius = 1, length = 1, capSegments = 4, radialSegments = 8 ) {\n\n\t\tconst path = new Path();\n\t\tpath.absarc( 0, - length / 2, radius, Math.PI * 1.5, 0 );\n\t\tpath.absarc( 0, length / 2, radius, 0, Math.PI * 0.5 );\n\n\t\tsuper( path.getPoints( capSegments ), radialSegments );\n\n\t\tthis.type = 'CapsuleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tlength: length,\n\t\t\tcapSegments: capSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CapsuleGeometry( data.radius, data.length, data.capSegments, data.radialSegments );\n\n\t}\n\n}\n\nclass CircleGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, segments = 32, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CircleGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tsegments: segments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tsegments = Math.max( 3, segments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// center point\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tnormals.push( 0, 0, 1 );\n\t\tuvs.push( 0.5, 0.5 );\n\n\t\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\t\tconst segment = thetaStart + s / segments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uvs\n\n\t\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tindices.push( i, i + 1, 0 );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CircleGeometry( data.radius, data.segments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass CylinderGeometry extends BufferGeometry {\n\n\tconstructor( radiusTop = 1, radiusBottom = 1, height = 1, radialSegments = 32, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'CylinderGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradiusTop: radiusTop,\n\t\t\tradiusBottom: radiusBottom,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tconst scope = this;\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\theightSegments = Math.floor( heightSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet index = 0;\n\t\tconst indexArray = [];\n\t\tconst halfHeight = height / 2;\n\t\tlet groupStart = 0;\n\n\t\t// generate geometry\n\n\t\tgenerateTorso();\n\n\t\tif ( openEnded === false ) {\n\n\t\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction generateTorso() {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\t// this will be used to calculate the normal\n\t\t\tconst slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\t\tconst indexRow = [];\n\n\t\t\t\tconst v = y / heightSegments;\n\n\t\t\t\t// calculate the radius of the current row\n\n\t\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\t\tconst u = x / radialSegments;\n\n\t\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\t\tconst sinTheta = Math.sin( theta );\n\t\t\t\t\tconst cosTheta = Math.cos( theta );\n\n\t\t\t\t\t// vertex\n\n\t\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\t// normal\n\n\t\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t\t// uv\n\n\t\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t\t}\n\n\t\t\t\t// now save vertices of the row in our index array\n\n\t\t\t\tindexArray.push( indexRow );\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\t\tconst a = indexArray[ y ][ x ];\n\t\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\n\t\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// update group counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t\tfunction generateCap( top ) {\n\n\t\t\t// save the index of the first center vertex\n\t\t\tconst centerIndexStart = index;\n\n\t\t\tconst uv = new Vector2();\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\t\tconst sign = ( top === true ) ? 1 : - 1;\n\n\t\t\t// first we generate the center vertex data of the cap.\n\t\t\t// because the geometry needs one set of uvs per face,\n\t\t\t// we must generate a center vertex per face/segment\n\n\t\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// save the index of the last center vertex\n\t\t\tconst centerIndexEnd = index;\n\n\t\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tconst u = x / radialSegments;\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\tconst cosTheta = Math.cos( theta );\n\t\t\t\tconst sinTheta = Math.sin( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = halfHeight * sign;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t// increase index\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\t// generate indices\n\n\t\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\t\tconst c = centerIndexStart + x;\n\t\t\t\tconst i = centerIndexEnd + x;\n\n\t\t\t\tif ( top === true ) {\n\n\t\t\t\t\t// face top\n\n\t\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// face bottom\n\n\t\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t\t}\n\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new CylinderGeometry( data.radiusTop, data.radiusBottom, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ConeGeometry extends CylinderGeometry {\n\n\tconstructor( radius = 1, height = 1, radialSegments = 32, heightSegments = 1, openEnded = false, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper( 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\t\tthis.type = 'ConeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\theight: height,\n\t\t\tradialSegments: radialSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\topenEnded: openEnded,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new ConeGeometry( data.radius, data.height, data.radialSegments, data.heightSegments, data.openEnded, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass PolyhedronGeometry extends BufferGeometry {\n\n\tconstructor( vertices = [], indices = [], radius = 1, detail = 0 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'PolyhedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tvertices: vertices,\n\t\t\tindices: indices,\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t\t// default buffer data\n\n\t\tconst vertexBuffer = [];\n\t\tconst uvBuffer = [];\n\n\t\t// the subdivision creates the vertex buffer data\n\n\t\tsubdivide( detail );\n\n\t\t// all vertices should lie on a conceptual sphere with a given radius\n\n\t\tapplyRadius( radius );\n\n\t\t// finally, create the uv data\n\n\t\tgenerateUVs();\n\n\t\t// build non-indexed geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\t\tif ( detail === 0 ) {\n\n\t\t\tthis.computeVertexNormals(); // flat normals\n\n\t\t} else {\n\n\t\t\tthis.normalizeNormals(); // smooth normals\n\n\t\t}\n\n\t\t// helper functions\n\n\t\tfunction subdivide( detail ) {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\t// iterate over all faces and apply a subdivision with the given detail value\n\n\t\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t// get the vertices of the face\n\n\t\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t\t// perform subdivision\n\n\t\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\t\tconst cols = detail + 1;\n\n\t\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\t\tconst v = [];\n\n\t\t\t// construct all of the vertices for this subdivision\n\n\t\t\tfor ( let i = 0; i <= cols; i ++ ) {\n\n\t\t\t\tv[ i ] = [];\n\n\t\t\t\tconst aj = a.clone().lerp( c, i / cols );\n\t\t\t\tconst bj = b.clone().lerp( c, i / cols );\n\n\t\t\t\tconst rows = cols - i;\n\n\t\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\n\n\t\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// construct all of the faces\n\n\t\t\tfor ( let i = 0; i < cols; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\t\tconst k = Math.floor( j / 2 );\n\n\t\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction applyRadius( radius ) {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tconst vertex = new Vector3();\n\n\t\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t\t}\n\n\t\t\tcorrectUVs();\n\n\t\t\tcorrectSeam();\n\n\t\t}\n\n\t\tfunction correctSeam() {\n\n\t\t\t// handle case when face straddles the seam, see #3269\n\n\t\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t\t// uv data of a single face\n\n\t\t\t\tconst x0 = uvBuffer[ i + 0 ];\n\t\t\t\tconst x1 = uvBuffer[ i + 2 ];\n\t\t\t\tconst x2 = uvBuffer[ i + 4 ];\n\n\t\t\t\tconst max = Math.max( x0, x1, x2 );\n\t\t\t\tconst min = Math.min( x0, x1, x2 );\n\n\t\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction pushVertex( vertex ) {\n\n\t\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tfunction getVertexByIndex( index, vertex ) {\n\n\t\t\tconst stride = index * 3;\n\n\t\t\tvertex.x = vertices[ stride + 0 ];\n\t\t\tvertex.y = vertices[ stride + 1 ];\n\t\t\tvertex.z = vertices[ stride + 2 ];\n\n\t\t}\n\n\t\tfunction correctUVs() {\n\n\t\t\tconst a = new Vector3();\n\t\t\tconst b = new Vector3();\n\t\t\tconst c = new Vector3();\n\n\t\t\tconst centroid = new Vector3();\n\n\t\t\tconst uvA = new Vector2();\n\t\t\tconst uvB = new Vector2();\n\t\t\tconst uvC = new Vector2();\n\n\t\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\t\tconst azi = azimuth( centroid );\n\n\t\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t\t}\n\n\t\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\t\tfunction azimuth( vector ) {\n\n\t\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t\t}\n\n\n\t\t// Angle above the XZ plane.\n\n\t\tfunction inclination( vector ) {\n\n\t\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new PolyhedronGeometry( data.vertices, data.indices, data.radius, data.details );\n\n\t}\n\n}\n\nclass DodecahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\t\tconst r = 1 / t;\n\n\t\tconst vertices = [\n\n\t\t\t// (±1, ±1, ±1)\n\t\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\n\t\t\t- 1, 1, - 1, - 1, 1, 1,\n\t\t\t1, - 1, - 1, 1, - 1, 1,\n\t\t\t1, 1, - 1, 1, 1, 1,\n\n\t\t\t// (0, ±1/φ, ±φ)\n\t\t\t0, - r, - t, 0, - r, t,\n\t\t\t0, r, - t, 0, r, t,\n\n\t\t\t// (±1/φ, ±φ, 0)\n\t\t\t- r, - t, 0, - r, t, 0,\n\t\t\tr, - t, 0, r, t, 0,\n\n\t\t\t// (±φ, 0, ±1/φ)\n\t\t\t- t, 0, - r, t, 0, - r,\n\t\t\t- t, 0, r, t, 0, r\n\t\t];\n\n\t\tconst indices = [\n\t\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\n\t\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\n\t\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\n\t\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\n\t\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\n\t\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\n\t\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\n\t\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\n\t\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\n\t\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\n\t\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\n\t\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'DodecahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new DodecahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nconst _v0 = /*@__PURE__*/ new Vector3();\nconst _v1$1 = /*@__PURE__*/ new Vector3();\nconst _normal = /*@__PURE__*/ new Vector3();\nconst _triangle = /*@__PURE__*/ new Triangle();\n\nclass EdgesGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null, thresholdAngle = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'EdgesGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry,\n\t\t\tthresholdAngle: thresholdAngle\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\tconst precisionPoints = 4;\n\t\t\tconst precision = Math.pow( 10, precisionPoints );\n\t\t\tconst thresholdDot = Math.cos( DEG2RAD * thresholdAngle );\n\n\t\t\tconst indexAttr = geometry.getIndex();\n\t\t\tconst positionAttr = geometry.getAttribute( 'position' );\n\t\t\tconst indexCount = indexAttr ? indexAttr.count : positionAttr.count;\n\n\t\t\tconst indexArr = [ 0, 0, 0 ];\n\t\t\tconst vertKeys = [ 'a', 'b', 'c' ];\n\t\t\tconst hashes = new Array( 3 );\n\n\t\t\tconst edgeData = {};\n\t\t\tconst vertices = [];\n\t\t\tfor ( let i = 0; i < indexCount; i += 3 ) {\n\n\t\t\t\tif ( indexAttr ) {\n\n\t\t\t\t\tindexArr[ 0 ] = indexAttr.getX( i );\n\t\t\t\t\tindexArr[ 1 ] = indexAttr.getX( i + 1 );\n\t\t\t\t\tindexArr[ 2 ] = indexAttr.getX( i + 2 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tindexArr[ 0 ] = i;\n\t\t\t\t\tindexArr[ 1 ] = i + 1;\n\t\t\t\t\tindexArr[ 2 ] = i + 2;\n\n\t\t\t\t}\n\n\t\t\t\tconst { a, b, c } = _triangle;\n\t\t\t\ta.fromBufferAttribute( positionAttr, indexArr[ 0 ] );\n\t\t\t\tb.fromBufferAttribute( positionAttr, indexArr[ 1 ] );\n\t\t\t\tc.fromBufferAttribute( positionAttr, indexArr[ 2 ] );\n\t\t\t\t_triangle.getNormal( _normal );\n\n\t\t\t\t// create hashes for the edge from the vertices\n\t\t\t\thashes[ 0 ] = `${ Math.round( a.x * precision ) },${ Math.round( a.y * precision ) },${ Math.round( a.z * precision ) }`;\n\t\t\t\thashes[ 1 ] = `${ Math.round( b.x * precision ) },${ Math.round( b.y * precision ) },${ Math.round( b.z * precision ) }`;\n\t\t\t\thashes[ 2 ] = `${ Math.round( c.x * precision ) },${ Math.round( c.y * precision ) },${ Math.round( c.z * precision ) }`;\n\n\t\t\t\t// skip degenerate triangles\n\t\t\t\tif ( hashes[ 0 ] === hashes[ 1 ] || hashes[ 1 ] === hashes[ 2 ] || hashes[ 2 ] === hashes[ 0 ] ) {\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// iterate over every edge\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// get the first and next vertex making up the edge\n\t\t\t\t\tconst jNext = ( j + 1 ) % 3;\n\t\t\t\t\tconst vecHash0 = hashes[ j ];\n\t\t\t\t\tconst vecHash1 = hashes[ jNext ];\n\t\t\t\t\tconst v0 = _triangle[ vertKeys[ j ] ];\n\t\t\t\t\tconst v1 = _triangle[ vertKeys[ jNext ] ];\n\n\t\t\t\t\tconst hash = `${ vecHash0 }_${ vecHash1 }`;\n\t\t\t\t\tconst reverseHash = `${ vecHash1 }_${ vecHash0 }`;\n\n\t\t\t\t\tif ( reverseHash in edgeData && edgeData[ reverseHash ] ) {\n\n\t\t\t\t\t\t// if we found a sibling edge add it into the vertex array if\n\t\t\t\t\t\t// it meets the angle threshold and delete the edge from the map.\n\t\t\t\t\t\tif ( _normal.dot( edgeData[ reverseHash ].normal ) <= thresholdDot ) {\n\n\t\t\t\t\t\t\tvertices.push( v0.x, v0.y, v0.z );\n\t\t\t\t\t\t\tvertices.push( v1.x, v1.y, v1.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tedgeData[ reverseHash ] = null;\n\n\t\t\t\t\t} else if ( ! ( hash in edgeData ) ) {\n\n\t\t\t\t\t\t// if we've already got an edge here then skip adding a new one\n\t\t\t\t\t\tedgeData[ hash ] = {\n\n\t\t\t\t\t\t\tindex0: indexArr[ j ],\n\t\t\t\t\t\t\tindex1: indexArr[ jNext ],\n\t\t\t\t\t\t\tnormal: _normal.clone(),\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// iterate over all remaining, unmatched edges and add them to the vertex array\n\t\t\tfor ( const key in edgeData ) {\n\n\t\t\t\tif ( edgeData[ key ] ) {\n\n\t\t\t\t\tconst { index0, index1 } = edgeData[ key ];\n\t\t\t\t\t_v0.fromBufferAttribute( positionAttr, index0 );\n\t\t\t\t\t_v1$1.fromBufferAttribute( positionAttr, index1 );\n\n\t\t\t\t\tvertices.push( _v0.x, _v0.y, _v0.z );\n\t\t\t\t\tvertices.push( _v1$1.x, _v1$1.y, _v1$1.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Shape extends Path {\n\n\tconstructor( points ) {\n\n\t\tsuper( points );\n\n\t\tthis.uuid = generateUUID();\n\n\t\tthis.type = 'Shape';\n\n\t\tthis.holes = [];\n\n\t}\n\n\tgetPointsHoles( divisions ) {\n\n\t\tconst holesPts = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t}\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tsuper.fromJSON( json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\n/**\n * Port from https://github.com/mapbox/earcut (v2.2.4)\n */\n\nconst Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim = 2 ) {\n\n\t\tconst hasHoles = holeIndices && holeIndices.length;\n\t\tconst outerLen = hasHoles ? holeIndices[ 0 ] * dim : data.length;\n\t\tlet outerNode = linkedList( data, 0, outerLen, dim, true );\n\t\tconst triangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 32767 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize, 0 );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tlet i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tlet p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tlet stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim | 0 );\n\t\t\ttriangles.push( ear.i / dim | 0 );\n\t\t\ttriangles.push( next.i / dim | 0 );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tconst ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst x0 = ax < bx ? ( ax < cx ? ax : cx ) : ( bx < cx ? bx : cx ),\n\t\ty0 = ay < by ? ( ay < cy ? ay : cy ) : ( by < cy ? by : cy ),\n\t\tx1 = ax > bx ? ( ax > cx ? ax : cx ) : ( bx > cx ? bx : cx ),\n\t\ty1 = ay > by ? ( ay > cy ? ay : cy ) : ( by > cy ? by : cy );\n\n\tlet p = c.next;\n\twhile ( p !== a ) {\n\n\t\tif ( p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tconst a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\tconst ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tconst x0 = ax < bx ? ( ax < cx ? ax : cx ) : ( bx < cx ? bx : cx ),\n\t\ty0 = ay < by ? ( ay < cy ? ay : cy ) : ( by < cy ? by : cy ),\n\t\tx1 = ax > bx ? ( ax > cx ? ax : cx ) : ( bx > cx ? bx : cx ),\n\t\ty1 = ay > by ? ( ay > cy ? ay : cy ) : ( by > cy ? by : cy );\n\n\t// z-order range for the current triangle bbox;\n\tconst minZ = zOrder( x0, y0, minX, minY, invSize ),\n\t\tmaxZ = zOrder( x1, y1, minX, minY, invSize );\n\n\tlet p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, n.x, n.y ) && area( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, p.x, p.y ) && area( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n\t\t\tpointInTriangle( ax, ay, bx, by, cx, cy, n.x, n.y ) && area( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tconst a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim | 0 );\n\t\t\ttriangles.push( p.i / dim | 0 );\n\t\t\ttriangles.push( b.i / dim | 0 );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn filterPoints( p );\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tlet a = start;\n\tdo {\n\n\t\tlet b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tlet c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize, 0 );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize, 0 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tconst queue = [];\n\tlet i, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\touterNode = eliminateHole( queue[ i ], outerNode );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\tconst bridge = findHoleBridge( hole, outerNode );\n\tif ( ! bridge ) {\n\n\t\treturn outerNode;\n\n\t}\n\n\tconst bridgeReverse = splitPolygon( bridge, hole );\n\n\t// filter collinear points around the cuts\n\tfilterPoints( bridgeReverse, bridgeReverse.next );\n\treturn filterPoints( bridge, bridge.next );\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tlet p = outerNode,\n\t\tqx = - Infinity,\n\t\tm;\n\n\tconst hx = hole.x, hy = hole.y;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tconst x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\t\t\t\tif ( x === hx ) return m; // hole touches outer segment; pick leftmost endpoint\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tconst stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y;\n\tlet tanMin = Infinity, tan;\n\n\tp = m;\n\n\tdo {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== stop );\n\n\treturn m;\n\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector( m, p ) {\n\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tif ( p.z === 0 ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = ( x - minX ) * invSize | 0;\n\ty = ( y - minY ) * invSize | 0;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tlet p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) >= ( ax - px ) * ( cy - py ) &&\n           ( ax - px ) * ( by - py ) >= ( bx - px ) * ( ay - py ) &&\n           ( bx - px ) * ( cy - py ) >= ( cx - px ) * ( by - py );\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\n           ( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\n            ( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\n            equals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tconst o1 = sign( area( p1, q1, p2 ) );\n\tconst o2 = sign( area( p1, q1, q2 ) );\n\tconst o3 = sign( area( p2, q2, p1 ) );\n\tconst o4 = sign( area( p2, q2, q1 ) );\n\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\n\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n\treturn false;\n\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment( p, q, r ) {\n\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\n\n}\n\nfunction sign( num ) {\n\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tlet p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tlet p = a,\n\t\tinside = false;\n\tconst px = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tconst a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tconst p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = 0;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tlet sum = 0;\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nclass ShapeUtils {\n\n\t// calculate area of the contour polygon\n\n\tstatic area( contour ) {\n\n\t\tconst n = contour.length;\n\t\tlet a = 0.0;\n\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t}\n\n\tstatic isClockWise( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t}\n\n\tstatic triangulateShape( contour, holes ) {\n\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tconst holeIndices = []; // array of hole indices\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tlet holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n}\n\nfunction removeDupEndPts( points ) {\n\n\tconst l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( let i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\n/**\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\n\nclass ExtrudeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0.5, 0.5 ), new Vector2( - 0.5, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), options = {} ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ExtrudeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\toptions: options\n\t\t};\n\n\t\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\t\tconst scope = this;\n\n\t\tconst verticesArray = [];\n\t\tconst uvArray = [];\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\t\t\taddShape( shape );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\t\tthis.computeVertexNormals();\n\n\t\t// functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst placeholder = [];\n\n\t\t\t// options\n\n\t\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\t\tconst steps = options.steps !== undefined ? options.steps : 1;\n\t\t\tconst depth = options.depth !== undefined ? options.depth : 1;\n\n\t\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 0.2;\n\t\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 0.1;\n\t\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\t\tconst extrudePath = options.extrudePath;\n\n\t\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t\t//\n\n\t\t\tlet extrudePts, extrudeByPath = false;\n\t\t\tlet splineTube, binormal, normal, position2;\n\n\t\t\tif ( extrudePath ) {\n\n\t\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\t\textrudeByPath = true;\n\t\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t\t// SETUP TNB variables\n\n\t\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\t\tbinormal = new Vector3();\n\t\t\t\tnormal = new Vector3();\n\t\t\t\tposition2 = new Vector3();\n\n\t\t\t}\n\n\t\t\t// Safeguards if bevels are not enabled\n\n\t\t\tif ( ! bevelEnabled ) {\n\n\t\t\t\tbevelSegments = 0;\n\t\t\t\tbevelThickness = 0;\n\t\t\t\tbevelSize = 0;\n\t\t\t\tbevelOffset = 0;\n\n\t\t\t}\n\n\t\t\t// Variables initialization\n\n\t\t\tconst shapePoints = shape.extractPoints( curveSegments );\n\n\t\t\tlet vertices = shapePoints.shape;\n\t\t\tconst holes = shapePoints.holes;\n\n\t\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\t\tif ( reverse ) {\n\n\t\t\t\tvertices = vertices.reverse();\n\n\t\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t\t/* Vertices */\n\n\t\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\tvertices = vertices.concat( ahole );\n\n\t\t\t}\n\n\n\t\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\t\tif ( ! vec ) console.error( 'THREE.ExtrudeGeometry: vec does not exist' );\n\n\t\t\t\treturn pt.clone().addScaledVector( vec, size );\n\n\t\t\t}\n\n\t\t\tconst vlen = vertices.length, flen = faces.length;\n\n\n\t\t\t// Find directions for point movement\n\n\n\t\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t\t//\n\t\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\t\tconst v_prev_x = inPt.x - inPrev.x,\n\t\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\t\tconst v_next_x = inNext.x - inPt.x,\n\t\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t\t// check for collinear edges\n\t\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not collinear\n\n\t\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t\t//  but prevent crazy spikes\n\t\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\t\tlet direction_eq = false; // assumes: opposite\n\n\t\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t\t}\n\n\n\t\t\tconst contourMovements = [];\n\n\t\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t\t}\n\n\t\t\tconst holesMovements = [];\n\t\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\toneHoleMovements = [];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t\t}\n\n\t\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t\t}\n\n\n\t\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst bs = bevelSize + bevelOffset;\n\n\t\t\t// Back facing vertices\n\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Add stepped vertices...\n\t\t\t// Including front facing vertices\n\n\t\t\tfor ( let s = 1; s <= steps; s ++ ) {\n\n\t\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// Add bevel segments planes\n\n\t\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\t\tconst t = b / bevelSegments;\n\t\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t\t// contract shape\n\n\t\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t}\n\n\t\t\t\t// expand holes\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/* Faces */\n\n\t\t\t// Top and bottom faces\n\n\t\t\tbuildLidFaces();\n\n\t\t\t// Sides faces\n\n\t\t\tbuildSideFaces();\n\n\n\t\t\t/////  Internal functions\n\n\t\t\tfunction buildLidFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\n\t\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\t\tlet layer = 0; // steps + 1\n\t\t\t\t\tlet offset = vlen * layer;\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Bottom faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Top faces\n\n\t\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t\t}\n\n\t\t\t// Create faces for the z-sides of the shape\n\n\t\t\tfunction buildSideFaces() {\n\n\t\t\t\tconst start = verticesArray.length / 3;\n\t\t\t\tlet layeroffset = 0;\n\t\t\t\tsidewalls( contour, layeroffset );\n\t\t\t\tlayeroffset += contour.length;\n\n\t\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t\t//, true\n\t\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t\t}\n\n\n\t\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t\t}\n\n\t\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\t\tlet i = contour.length;\n\n\t\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\t\tconst j = i;\n\t\t\t\t\tlet k = i - 1;\n\t\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\n\n\t\t\t\t\t\tconst slen1 = vlen * s;\n\t\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\t\tconst a = layeroffset + j + slen1,\n\t\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction v( x, y, z ) {\n\n\t\t\t\tplaceholder.push( x );\n\t\t\t\tplaceholder.push( y );\n\t\t\t\tplaceholder.push( z );\n\n\t\t\t}\n\n\n\t\t\tfunction f3( a, b, c ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\n\t\t\t}\n\n\t\t\tfunction f4( a, b, c, d ) {\n\n\t\t\t\taddVertex( a );\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( d );\n\n\t\t\t\taddVertex( b );\n\t\t\t\taddVertex( c );\n\t\t\t\taddVertex( d );\n\n\n\t\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\t\taddUV( uvs[ 0 ] );\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t\taddUV( uvs[ 1 ] );\n\t\t\t\taddUV( uvs[ 2 ] );\n\t\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\t}\n\n\t\t\tfunction addVertex( index ) {\n\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t\t}\n\n\n\t\t\tfunction addUV( vector2 ) {\n\n\t\t\t\tuvArray.push( vector2.x );\n\t\t\t\tuvArray.push( vector2.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\t\tconst options = this.parameters.options;\n\n\t\treturn toJSON$1( shapes, options, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\tconst extrudePath = data.options.extrudePath;\n\n\t\tif ( extrudePath !== undefined ) {\n\n\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\n\n\t\t}\n\n\t\treturn new ExtrudeGeometry( geometryShapes, data.options );\n\n\t}\n\n}\n\nconst WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\n\t\tconst d_x = vertices[ indexD * 3 ];\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < Math.abs( a_x - b_x ) ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n\n};\n\nfunction toJSON$1( shapes, options, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\tdata.options = Object.assign( {}, options );\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\nclass IcosahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\t\tconst vertices = [\n\t\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\n\t\t\t0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\n\t\t\tt, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\n\t\t\t1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\n\t\t\t3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\n\t\t\t4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'IcosahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new IcosahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass OctahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\n\t\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\n\t\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\n\t\t\t1, 3, 4,\t1, 4, 2\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'OctahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new OctahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass RingGeometry extends BufferGeometry {\n\n\tconstructor( innerRadius = 0.5, outerRadius = 1, thetaSegments = 32, phiSegments = 1, thetaStart = 0, thetaLength = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'RingGeometry';\n\n\t\tthis.parameters = {\n\t\t\tinnerRadius: innerRadius,\n\t\t\touterRadius: outerRadius,\n\t\t\tthetaSegments: thetaSegments,\n\t\t\tphiSegments: phiSegments,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\tthetaSegments = Math.max( 3, thetaSegments );\n\t\tphiSegments = Math.max( 1, phiSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// some helper variables\n\n\t\tlet radius = innerRadius;\n\t\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\t\tconst vertex = new Vector3();\n\t\tconst uv = new Vector2();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= phiSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t\t// uv\n\n\t\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t\t// increase the radius for next row of vertices\n\n\t\t\tradius += radiusStep;\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let j = 0; j < phiSegments; j ++ ) {\n\n\t\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\t\tconst segment = i + thetaSegmentLevel;\n\n\t\t\t\tconst a = segment;\n\t\t\t\tconst b = segment + thetaSegments + 1;\n\t\t\t\tconst c = segment + thetaSegments + 2;\n\t\t\t\tconst d = segment + 1;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new RingGeometry( data.innerRadius, data.outerRadius, data.thetaSegments, data.phiSegments, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass ShapeGeometry extends BufferGeometry {\n\n\tconstructor( shapes = new Shape( [ new Vector2( 0, 0.5 ), new Vector2( - 0.5, - 0.5 ), new Vector2( 0.5, - 0.5 ) ] ), curveSegments = 12 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ShapeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tshapes: shapes,\n\t\t\tcurveSegments: curveSegments\n\t\t};\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet groupStart = 0;\n\t\tlet groupCount = 0;\n\n\t\t// allow single and array values for \"shapes\" parameter\n\n\t\tif ( Array.isArray( shapes ) === false ) {\n\n\t\t\taddShape( shapes );\n\n\t\t} else {\n\n\t\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\n\n\t\t\t\taddShape( shapes[ i ] );\n\n\t\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\t\tgroupStart += groupCount;\n\t\t\t\tgroupCount = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t\t// helper functions\n\n\t\tfunction addShape( shape ) {\n\n\t\t\tconst indexOffset = vertices.length / 3;\n\t\t\tconst points = shape.extractPoints( curveSegments );\n\n\t\t\tlet shapeVertices = points.shape;\n\t\t\tconst shapeHoles = points.holes;\n\n\t\t\t// check direction of vertices\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t\t// join vertices of inner and outer paths to a single array\n\n\t\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\t\tconst shapeHole = shapeHoles[ i ];\n\t\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t\t}\n\n\t\t\t// vertices, normals, uvs\n\n\t\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\t\tconst vertex = shapeVertices[ i ];\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\t\tnormals.push( 0, 0, 1 );\n\t\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\t\tconst face = faces[ i ];\n\n\t\t\t\tconst a = face[ 0 ] + indexOffset;\n\t\t\t\tconst b = face[ 1 ] + indexOffset;\n\t\t\t\tconst c = face[ 2 ] + indexOffset;\n\n\t\t\t\tindices.push( a, b, c );\n\t\t\t\tgroupCount += 3;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tconst shapes = this.parameters.shapes;\n\n\t\treturn toJSON( shapes, data );\n\n\t}\n\n\tstatic fromJSON( data, shapes ) {\n\n\t\tconst geometryShapes = [];\n\n\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\tgeometryShapes.push( shape );\n\n\t\t}\n\n\t\treturn new ShapeGeometry( geometryShapes, data.curveSegments );\n\n\t}\n\n}\n\nfunction toJSON( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\nclass SphereGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, widthSegments = 32, heightSegments = 16, phiStart = 0, phiLength = Math.PI * 2, thetaStart = 0, thetaLength = Math.PI ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'SphereGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tphiStart: phiStart,\n\t\t\tphiLength: phiLength,\n\t\t\tthetaStart: thetaStart,\n\t\t\tthetaLength: thetaLength\n\t\t};\n\n\t\twidthSegments = Math.max( 3, Math.floor( widthSegments ) );\n\t\theightSegments = Math.max( 2, Math.floor( heightSegments ) );\n\n\t\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\t\tlet index = 0;\n\t\tconst grid = [];\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\t\tconst verticesRow = [];\n\n\t\t\tconst v = iy / heightSegments;\n\n\t\t\t// special case for the poles\n\n\t\t\tlet uOffset = 0;\n\n\t\t\tif ( iy === 0 && thetaStart === 0 ) {\n\n\t\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t\t} else if ( iy === heightSegments && thetaEnd === Math.PI ) {\n\n\t\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t\t}\n\n\t\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\t\tconst u = ix / widthSegments;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.copy( vertex ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\t\tverticesRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\tgrid.push( verticesRow );\n\n\t\t}\n\n\t\t// indices\n\n\t\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\t\tconst a = grid[ iy ][ ix + 1 ];\n\t\t\t\tconst b = grid[ iy ][ ix ];\n\t\t\t\tconst c = grid[ iy + 1 ][ ix ];\n\t\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new SphereGeometry( data.radius, data.widthSegments, data.heightSegments, data.phiStart, data.phiLength, data.thetaStart, data.thetaLength );\n\n\t}\n\n}\n\nclass TetrahedronGeometry extends PolyhedronGeometry {\n\n\tconstructor( radius = 1, detail = 0 ) {\n\n\t\tconst vertices = [\n\t\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\n\t\t];\n\n\t\tconst indices = [\n\t\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\n\t\t];\n\n\t\tsuper( vertices, indices, radius, detail );\n\n\t\tthis.type = 'TetrahedronGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\tdetail: detail\n\t\t};\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TetrahedronGeometry( data.radius, data.detail );\n\n\t}\n\n}\n\nclass TorusGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, radialSegments = 12, tubularSegments = 48, arc = Math.PI * 2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\tradialSegments: radialSegments,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tarc: arc\n\t\t};\n\n\t\tradialSegments = Math.floor( radialSegments );\n\t\ttubularSegments = Math.floor( tubularSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst center = new Vector3();\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tconst u = i / tubularSegments * arc;\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= radialSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusGeometry( data.radius, data.tube, data.radialSegments, data.tubularSegments, data.arc );\n\n\t}\n\n}\n\nclass TorusKnotGeometry extends BufferGeometry {\n\n\tconstructor( radius = 1, tube = 0.4, tubularSegments = 64, radialSegments = 8, p = 2, q = 3 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TorusKnotGeometry';\n\n\t\tthis.parameters = {\n\t\t\tradius: radius,\n\t\t\ttube: tube,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradialSegments: radialSegments,\n\t\t\tp: p,\n\t\t\tq: q\n\t\t};\n\n\t\ttubularSegments = Math.floor( tubularSegments );\n\t\tradialSegments = Math.floor( radialSegments );\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\n\t\tconst P1 = new Vector3();\n\t\tconst P2 = new Vector3();\n\n\t\tconst B = new Vector3();\n\t\tconst T = new Vector3();\n\t\tconst N = new Vector3();\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segment\n\n\t\t\tconst u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t\t// calculate orthonormal basis\n\n\t\t\tT.subVectors( P2, P1 );\n\t\t\tN.addVectors( P2, P1 );\n\t\t\tB.crossVectors( T, N );\n\t\t\tN.crossVectors( B, T );\n\n\t\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\t\tB.normalize();\n\t\t\tN.normalize();\n\n\t\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\t\t\t\tconst cx = - tube * Math.cos( v );\n\t\t\t\tconst cy = tube * Math.sin( v );\n\n\t\t\t\t// now calculate the final vertex position.\n\t\t\t\t// first we orient the extrusion with our basis vectors, then we add it to the current position on the curve\n\n\t\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( i / tubularSegments );\n\t\t\t\tuvs.push( j / radialSegments );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t// indices\n\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// this function calculates the current position on the torus curve\n\n\t\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\t\tconst cu = Math.cos( u );\n\t\t\tconst su = Math.sin( u );\n\t\t\tconst quOverP = q / p * u;\n\t\t\tconst cs = Math.cos( quOverP );\n\n\t\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\treturn new TorusKnotGeometry( data.radius, data.tube, data.tubularSegments, data.radialSegments, data.p, data.q );\n\n\t}\n\n}\n\nclass TubeGeometry extends BufferGeometry {\n\n\tconstructor( path = new QuadraticBezierCurve3( new Vector3( - 1, - 1, 0 ), new Vector3( - 1, 1, 0 ), new Vector3( 1, 1, 0 ) ), tubularSegments = 64, radius = 1, radialSegments = 8, closed = false ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'TubeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tpath: path,\n\t\t\ttubularSegments: tubularSegments,\n\t\t\tradius: radius,\n\t\t\tradialSegments: radialSegments,\n\t\t\tclosed: closed\n\t\t};\n\n\t\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t\t// expose internals\n\n\t\tthis.tangents = frames.tangents;\n\t\tthis.normals = frames.normals;\n\t\tthis.binormals = frames.binormals;\n\n\t\t// helper variables\n\n\t\tconst vertex = new Vector3();\n\t\tconst normal = new Vector3();\n\t\tconst uv = new Vector2();\n\t\tlet P = new Vector3();\n\n\t\t// buffer\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\t\tconst indices = [];\n\n\t\t// create buffer data\n\n\t\tgenerateBufferData();\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\t// functions\n\n\t\tfunction generateBufferData() {\n\n\t\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\t\tgenerateSegment( i );\n\n\t\t\t}\n\n\t\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t\t// at the regular position on the given path\n\t\t\t//\n\t\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t\t// uvs are generated in a separate function.\n\t\t\t// this makes it easy compute correct values for closed geometries\n\n\t\t\tgenerateUVs();\n\n\t\t\t// finally create faces\n\n\t\t\tgenerateIndices();\n\n\t\t}\n\n\t\tfunction generateSegment( i ) {\n\n\t\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\t\tP = path.getPointAt( i / tubularSegments, P );\n\n\t\t\t// retrieve corresponding normal and binormal\n\n\t\t\tconst N = frames.normals[ i ];\n\t\t\tconst B = frames.binormals[ i ];\n\n\t\t\t// generate normals and vertices for the current segment\n\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t\tconst sin = Math.sin( v );\n\t\t\t\tconst cos = - Math.cos( v );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\t\tnormal.normalize();\n\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateIndices() {\n\n\t\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction generateUVs() {\n\n\t\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.path = this.parameters.path.toJSON();\n\n\t\treturn data;\n\n\t}\n\n\tstatic fromJSON( data ) {\n\n\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\n\t\t// User defined curves or instances of CurvePath will not be deserialized.\n\t\treturn new TubeGeometry(\n\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\n\t\t\tdata.tubularSegments,\n\t\t\tdata.radius,\n\t\t\tdata.radialSegments,\n\t\t\tdata.closed\n\t\t);\n\n\t}\n\n}\n\nclass WireframeGeometry extends BufferGeometry {\n\n\tconstructor( geometry = null ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'WireframeGeometry';\n\n\t\tthis.parameters = {\n\t\t\tgeometry: geometry\n\t\t};\n\n\t\tif ( geometry !== null ) {\n\n\t\t\t// buffer\n\n\t\t\tconst vertices = [];\n\t\t\tconst edges = new Set();\n\n\t\t\t// helper variables\n\n\t\t\tconst start = new Vector3();\n\t\t\tconst end = new Vector3();\n\n\t\t\tif ( geometry.index !== null ) {\n\n\t\t\t\t// indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\t\t\t\tconst indices = geometry.index;\n\t\t\t\tlet groups = geometry.groups;\n\n\t\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t\t}\n\n\t\t\t\t// create a data structure that contains all edges without duplicates\n\n\t\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\t\tconst group = groups[ o ];\n\n\t\t\t\t\tconst groupStart = group.start;\n\t\t\t\t\tconst groupCount = group.count;\n\n\t\t\t\t\tfor ( let i = groupStart, l = ( groupStart + groupCount ); i < l; i += 3 ) {\n\n\t\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t\tconst index1 = indices.getX( i + j );\n\t\t\t\t\t\t\tconst index2 = indices.getX( i + ( j + 1 ) % 3 );\n\n\t\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed BufferGeometry\n\n\t\t\t\tconst position = geometry.attributes.position;\n\n\t\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\t\tconst index1 = 3 * i + j;\n\t\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\n\n\t\t\t\t\t\tstart.fromBufferAttribute( position, index1 );\n\t\t\t\t\t\tend.fromBufferAttribute( position, index2 );\n\n\t\t\t\t\t\tif ( isUniqueEdge( start, end, edges ) === true ) {\n\n\t\t\t\t\t\t\tvertices.push( start.x, start.y, start.z );\n\t\t\t\t\t\t\tvertices.push( end.x, end.y, end.z );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// build geometry\n\n\t\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.parameters = Object.assign( {}, source.parameters );\n\n\t\treturn this;\n\n\t}\n\n}\n\nfunction isUniqueEdge( start, end, edges ) {\n\n\tconst hash1 = `${start.x},${start.y},${start.z}-${end.x},${end.y},${end.z}`;\n\tconst hash2 = `${end.x},${end.y},${end.z}-${start.x},${start.y},${start.z}`; // coincident edge\n\n\tif ( edges.has( hash1 ) === true || edges.has( hash2 ) === true ) {\n\n\t\treturn false;\n\n\t} else {\n\n\t\tedges.add( hash1 );\n\t\tedges.add( hash2 );\n\t\treturn true;\n\n\t}\n\n}\n\nvar Geometries = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tBoxGeometry: BoxGeometry,\n\tCapsuleGeometry: CapsuleGeometry,\n\tCircleGeometry: CircleGeometry,\n\tConeGeometry: ConeGeometry,\n\tCylinderGeometry: CylinderGeometry,\n\tDodecahedronGeometry: DodecahedronGeometry,\n\tEdgesGeometry: EdgesGeometry,\n\tExtrudeGeometry: ExtrudeGeometry,\n\tIcosahedronGeometry: IcosahedronGeometry,\n\tLatheGeometry: LatheGeometry,\n\tOctahedronGeometry: OctahedronGeometry,\n\tPlaneGeometry: PlaneGeometry,\n\tPolyhedronGeometry: PolyhedronGeometry,\n\tRingGeometry: RingGeometry,\n\tShapeGeometry: ShapeGeometry,\n\tSphereGeometry: SphereGeometry,\n\tTetrahedronGeometry: TetrahedronGeometry,\n\tTorusGeometry: TorusGeometry,\n\tTorusKnotGeometry: TorusKnotGeometry,\n\tTubeGeometry: TubeGeometry,\n\tWireframeGeometry: WireframeGeometry\n});\n\nclass ShadowMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isShadowMaterial = true;\n\n\t\tthis.type = 'ShadowMaterial';\n\n\t\tthis.color = new Color( 0x000000 );\n\t\tthis.transparent = true;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass RawShaderMaterial extends ShaderMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper( parameters );\n\n\t\tthis.isRawShaderMaterial = true;\n\n\t\tthis.type = 'RawShaderMaterial';\n\n\t}\n\n}\n\nclass MeshStandardMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshStandardMaterial = true;\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.type = 'MeshStandardMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.roughness = 1.0;\n\t\tthis.metalness = 0.0;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.roughnessMap = null;\n\n\t\tthis.metalnessMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.envMapIntensity = 1.0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'STANDARD': '' };\n\n\t\tthis.color.copy( source.color );\n\t\tthis.roughness = source.roughness;\n\t\tthis.metalness = source.metalness;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.roughnessMap = source.roughnessMap;\n\n\t\tthis.metalnessMap = source.metalnessMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.envMapIntensity = source.envMapIntensity;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhysicalMaterial extends MeshStandardMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhysicalMaterial = true;\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.type = 'MeshPhysicalMaterial';\n\n\t\tthis.anisotropyRotation = 0;\n\t\tthis.anisotropyMap = null;\n\n\t\tthis.clearcoatMap = null;\n\t\tthis.clearcoatRoughness = 0.0;\n\t\tthis.clearcoatRoughnessMap = null;\n\t\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\t\tthis.clearcoatNormalMap = null;\n\n\t\tthis.ior = 1.5;\n\n\t\tObject.defineProperty( this, 'reflectivity', {\n\t\t\tget: function () {\n\n\t\t\t\treturn ( clamp( 2.5 * ( this.ior - 1 ) / ( this.ior + 1 ), 0, 1 ) );\n\n\t\t\t},\n\t\t\tset: function ( reflectivity ) {\n\n\t\t\t\tthis.ior = ( 1 + 0.4 * reflectivity ) / ( 1 - 0.4 * reflectivity );\n\n\t\t\t}\n\t\t} );\n\n\t\tthis.iridescenceMap = null;\n\t\tthis.iridescenceIOR = 1.3;\n\t\tthis.iridescenceThicknessRange = [ 100, 400 ];\n\t\tthis.iridescenceThicknessMap = null;\n\n\t\tthis.sheenColor = new Color( 0x000000 );\n\t\tthis.sheenColorMap = null;\n\t\tthis.sheenRoughness = 1.0;\n\t\tthis.sheenRoughnessMap = null;\n\n\t\tthis.transmissionMap = null;\n\n\t\tthis.thickness = 0;\n\t\tthis.thicknessMap = null;\n\t\tthis.attenuationDistance = Infinity;\n\t\tthis.attenuationColor = new Color( 1, 1, 1 );\n\n\t\tthis.specularIntensity = 1.0;\n\t\tthis.specularIntensityMap = null;\n\t\tthis.specularColor = new Color( 1, 1, 1 );\n\t\tthis.specularColorMap = null;\n\n\t\tthis._anisotropy = 0;\n\t\tthis._clearcoat = 0;\n\t\tthis._iridescence = 0;\n\t\tthis._sheen = 0.0;\n\t\tthis._transmission = 0;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tget anisotropy() {\n\n\t\treturn this._anisotropy;\n\n\t}\n\n\tset anisotropy( value ) {\n\n\t\tif ( this._anisotropy > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._anisotropy = value;\n\n\t}\n\n\tget clearcoat() {\n\n\t\treturn this._clearcoat;\n\n\t}\n\n\tset clearcoat( value ) {\n\n\t\tif ( this._clearcoat > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._clearcoat = value;\n\n\t}\n\n\tget iridescence() {\n\n\t\treturn this._iridescence;\n\n\t}\n\n\tset iridescence( value ) {\n\n\t\tif ( this._iridescence > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._iridescence = value;\n\n\t}\n\n\tget sheen() {\n\n\t\treturn this._sheen;\n\n\t}\n\n\tset sheen( value ) {\n\n\t\tif ( this._sheen > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._sheen = value;\n\n\t}\n\n\tget transmission() {\n\n\t\treturn this._transmission;\n\n\t}\n\n\tset transmission( value ) {\n\n\t\tif ( this._transmission > 0 !== value > 0 ) {\n\n\t\t\tthis.version ++;\n\n\t\t}\n\n\t\tthis._transmission = value;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = {\n\n\t\t\t'STANDARD': '',\n\t\t\t'PHYSICAL': ''\n\n\t\t};\n\n\t\tthis.anisotropy = source.anisotropy;\n\t\tthis.anisotropyRotation = source.anisotropyRotation;\n\t\tthis.anisotropyMap = source.anisotropyMap;\n\n\t\tthis.clearcoat = source.clearcoat;\n\t\tthis.clearcoatMap = source.clearcoatMap;\n\t\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\t\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\t\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\t\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\t\tthis.ior = source.ior;\n\n\t\tthis.iridescence = source.iridescence;\n\t\tthis.iridescenceMap = source.iridescenceMap;\n\t\tthis.iridescenceIOR = source.iridescenceIOR;\n\t\tthis.iridescenceThicknessRange = [ ...source.iridescenceThicknessRange ];\n\t\tthis.iridescenceThicknessMap = source.iridescenceThicknessMap;\n\n\t\tthis.sheen = source.sheen;\n\t\tthis.sheenColor.copy( source.sheenColor );\n\t\tthis.sheenColorMap = source.sheenColorMap;\n\t\tthis.sheenRoughness = source.sheenRoughness;\n\t\tthis.sheenRoughnessMap = source.sheenRoughnessMap;\n\n\t\tthis.transmission = source.transmission;\n\t\tthis.transmissionMap = source.transmissionMap;\n\n\t\tthis.thickness = source.thickness;\n\t\tthis.thicknessMap = source.thicknessMap;\n\t\tthis.attenuationDistance = source.attenuationDistance;\n\t\tthis.attenuationColor.copy( source.attenuationColor );\n\n\t\tthis.specularIntensity = source.specularIntensity;\n\t\tthis.specularIntensityMap = source.specularIntensityMap;\n\t\tthis.specularColor.copy( source.specularColor );\n\t\tthis.specularColorMap = source.specularColorMap;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshPhongMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshPhongMaterial = true;\n\n\t\tthis.type = 'MeshPhongMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\t\tthis.specular = new Color( 0x111111 );\n\t\tthis.shininess = 30;\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.specular.copy( source.specular );\n\t\tthis.shininess = source.shininess;\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshToonMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshToonMaterial = true;\n\n\t\tthis.defines = { 'TOON': '' };\n\n\t\tthis.type = 'MeshToonMaterial';\n\n\t\tthis.color = new Color( 0xffffff );\n\n\t\tthis.map = null;\n\t\tthis.gradientMap = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\t\tthis.gradientMap = source.gradientMap;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshNormalMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshNormalMaterial = true;\n\n\t\tthis.type = 'MeshNormalMaterial';\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshLambertMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshLambertMaterial = true;\n\n\t\tthis.type = 'MeshLambertMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.map = null;\n\n\t\tthis.lightMap = null;\n\t\tthis.lightMapIntensity = 1.0;\n\n\t\tthis.aoMap = null;\n\t\tthis.aoMapIntensity = 1.0;\n\n\t\tthis.emissive = new Color( 0x000000 );\n\t\tthis.emissiveIntensity = 1.0;\n\t\tthis.emissiveMap = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.specularMap = null;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.envMap = null;\n\t\tthis.combine = MultiplyOperation;\n\t\tthis.reflectivity = 1;\n\t\tthis.refractionRatio = 0.98;\n\n\t\tthis.wireframe = false;\n\t\tthis.wireframeLinewidth = 1;\n\t\tthis.wireframeLinecap = 'round';\n\t\tthis.wireframeLinejoin = 'round';\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.map = source.map;\n\n\t\tthis.lightMap = source.lightMap;\n\t\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\t\tthis.aoMap = source.aoMap;\n\t\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\t\tthis.emissive.copy( source.emissive );\n\t\tthis.emissiveMap = source.emissiveMap;\n\t\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.specularMap = source.specularMap;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.envMap = source.envMap;\n\t\tthis.combine = source.combine;\n\t\tthis.reflectivity = source.reflectivity;\n\t\tthis.refractionRatio = source.refractionRatio;\n\n\t\tthis.wireframe = source.wireframe;\n\t\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\t\tthis.wireframeLinecap = source.wireframeLinecap;\n\t\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass MeshMatcapMaterial extends Material {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isMeshMatcapMaterial = true;\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.type = 'MeshMatcapMaterial';\n\n\t\tthis.color = new Color( 0xffffff ); // diffuse\n\n\t\tthis.matcap = null;\n\n\t\tthis.map = null;\n\n\t\tthis.bumpMap = null;\n\t\tthis.bumpScale = 1;\n\n\t\tthis.normalMap = null;\n\t\tthis.normalMapType = TangentSpaceNormalMap;\n\t\tthis.normalScale = new Vector2( 1, 1 );\n\n\t\tthis.displacementMap = null;\n\t\tthis.displacementScale = 1;\n\t\tthis.displacementBias = 0;\n\n\t\tthis.alphaMap = null;\n\n\t\tthis.flatShading = false;\n\n\t\tthis.fog = true;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.defines = { 'MATCAP': '' };\n\n\t\tthis.color.copy( source.color );\n\n\t\tthis.matcap = source.matcap;\n\n\t\tthis.map = source.map;\n\n\t\tthis.bumpMap = source.bumpMap;\n\t\tthis.bumpScale = source.bumpScale;\n\n\t\tthis.normalMap = source.normalMap;\n\t\tthis.normalMapType = source.normalMapType;\n\t\tthis.normalScale.copy( source.normalScale );\n\n\t\tthis.displacementMap = source.displacementMap;\n\t\tthis.displacementScale = source.displacementScale;\n\t\tthis.displacementBias = source.displacementBias;\n\n\t\tthis.alphaMap = source.alphaMap;\n\n\t\tthis.flatShading = source.flatShading;\n\n\t\tthis.fog = source.fog;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass LineDashedMaterial extends LineBasicMaterial {\n\n\tconstructor( parameters ) {\n\n\t\tsuper();\n\n\t\tthis.isLineDashedMaterial = true;\n\n\t\tthis.type = 'LineDashedMaterial';\n\n\t\tthis.scale = 1;\n\t\tthis.dashSize = 3;\n\t\tthis.gapSize = 1;\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.scale = source.scale;\n\t\tthis.dashSize = source.dashSize;\n\t\tthis.gapSize = source.gapSize;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// converts an array to a specific type\nfunction convertArray( array, type, forceClone ) {\n\n\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t! forceClone && array.constructor === type ) return array;\n\n\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\treturn new type( array ); // create typed array\n\n\t}\n\n\treturn Array.prototype.slice.call( array ); // create Array\n\n}\n\nfunction isTypedArray( object ) {\n\n\treturn ArrayBuffer.isView( object ) &&\n\t\t! ( object instanceof DataView );\n\n}\n\n// returns an array by which times and values can be sorted\nfunction getKeyframeOrder( times ) {\n\n\tfunction compareTime( i, j ) {\n\n\t\treturn times[ i ] - times[ j ];\n\n\t}\n\n\tconst n = times.length;\n\tconst result = new Array( n );\n\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\tresult.sort( compareTime );\n\n\treturn result;\n\n}\n\n// uses the array previously returned by 'getKeyframeOrder' to sort data\nfunction sortedArray( values, stride, order ) {\n\n\tconst nValues = values.length;\n\tconst result = new values.constructor( nValues );\n\n\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\tconst srcOffset = order[ i ] * stride;\n\n\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t}\n\n\t}\n\n\treturn result;\n\n}\n\n// function for parsing AOS keyframe formats\nfunction flattenJSON( jsonKeys, times, values, valuePropertyName ) {\n\n\tlet i = 1, key = jsonKeys[ 0 ];\n\n\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\tkey = jsonKeys[ i ++ ];\n\n\t}\n\n\tif ( key === undefined ) return; // no data\n\n\tlet value = key[ valuePropertyName ];\n\tif ( value === undefined ) return; // no data\n\n\tif ( Array.isArray( value ) ) {\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else if ( value.toArray !== undefined ) {\n\n\t\t// ...assume THREE.Math-ish\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t} else {\n\n\t\t// otherwise push as-is\n\n\t\tdo {\n\n\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\tif ( value !== undefined ) {\n\n\t\t\t\ttimes.push( key.time );\n\t\t\t\tvalues.push( value );\n\n\t\t\t}\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t} while ( key !== undefined );\n\n\t}\n\n}\n\nfunction subclip( sourceClip, name, startFrame, endFrame, fps = 30 ) {\n\n\tconst clip = sourceClip.clone();\n\n\tclip.name = name;\n\n\tconst tracks = [];\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tconst track = clip.tracks[ i ];\n\t\tconst valueSize = track.getValueSize();\n\n\t\tconst times = [];\n\t\tconst values = [];\n\n\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( times.length === 0 ) continue;\n\n\t\ttrack.times = convertArray( times, track.times.constructor );\n\t\ttrack.values = convertArray( values, track.values.constructor );\n\n\t\ttracks.push( track );\n\n\t}\n\n\tclip.tracks = tracks;\n\n\t// find minimum .times value across all tracks in the trimmed clip\n\n\tlet minStartTime = Infinity;\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t}\n\n\t}\n\n\t// shift all tracks such that clip begins at t=0\n\n\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t}\n\n\tclip.resetDuration();\n\n\treturn clip;\n\n}\n\nfunction makeClipAdditive( targetClip, referenceFrame = 0, referenceClip = targetClip, fps = 30 ) {\n\n\tif ( fps <= 0 ) fps = 30;\n\n\tconst numTracks = referenceClip.tracks.length;\n\tconst referenceTime = referenceFrame / fps;\n\n\t// Make each track's values relative to the values at the reference frame\n\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t// Skip this track if it's non-numeric\n\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t} );\n\n\t\tif ( targetTrack === undefined ) continue;\n\n\t\tlet referenceOffset = 0;\n\t\tconst referenceValueSize = referenceTrack.getValueSize();\n\n\t\tif ( referenceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\treferenceOffset = referenceValueSize / 3;\n\n\t\t}\n\n\t\tlet targetOffset = 0;\n\t\tconst targetValueSize = targetTrack.getValueSize();\n\n\t\tif ( targetTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline ) {\n\n\t\t\ttargetOffset = targetValueSize / 3;\n\n\t\t}\n\n\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\tlet referenceValue;\n\n\t\t// Find the value to subtract out of the track\n\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\treferenceValue = referenceTrack.values.slice( startIndex, endIndex );\n\n\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\tconst startIndex = lastIndex * referenceValueSize + referenceOffset;\n\t\t\tconst endIndex = startIndex + referenceValueSize - referenceOffset;\n\t\t\treferenceValue = referenceTrack.values.slice( startIndex, endIndex );\n\n\t\t} else {\n\n\t\t\t// Interpolate to the reference value\n\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\tconst startIndex = referenceOffset;\n\t\t\tconst endIndex = referenceValueSize - referenceOffset;\n\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\treferenceValue = interpolant.resultBuffer.slice( startIndex, endIndex );\n\n\t\t}\n\n\t\t// Conjugate the quaternion\n\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\tconst referenceQuat = new Quaternion().fromArray( referenceValue ).normalize().conjugate();\n\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t}\n\n\t\t// Subtract the reference value from all of the track values\n\n\t\tconst numTimes = targetTrack.times.length;\n\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\tconst valueStart = j * targetValueSize + targetOffset;\n\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart,\n\t\t\t\t\treferenceValue,\n\t\t\t\t\t0,\n\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\tvalueStart\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\tconst valueEnd = targetValueSize - targetOffset * 2;\n\n\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\tfor ( let k = 0; k < valueEnd; ++ k ) {\n\n\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\treturn targetClip;\n\n}\n\nconst AnimationUtils = {\n\tconvertArray: convertArray,\n\tisTypedArray: isTypedArray,\n\tgetKeyframeOrder: getKeyframeOrder,\n\tsortedArray: sortedArray,\n\tflattenJSON: flattenJSON,\n\tsubclip: subclip,\n\tmakeClipAdditive: makeClipAdditive\n};\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n */\n\nclass Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tthis.parameterPositions = parameterPositions;\n\t\tthis._cachedIndex = 0;\n\n\t\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\t\tthis.sampleValues = sampleValues;\n\t\tthis.valueSize = sampleSize;\n\n\t\tthis.settings = null;\n\t\tthis.DefaultSettings_ = {};\n\n\t}\n\n\tevaluate( t ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet i1 = this._cachedIndex,\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.copySampleValue_( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t}\n\n\tgetSettings_() {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t// Template methods for derived classes:\n\n\tinterpolate_( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t}\n\n\tintervalChanged_( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n}\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n */\n\nclass CubicInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t\tthis._weightPrev = - 0;\n\t\tthis._offsetPrev = - 0;\n\t\tthis._weightNext = - 0;\n\t\tthis._offsetNext = - 0;\n\n\t\tthis.DefaultSettings_ = {\n\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\n\t\t};\n\n\t}\n\n\tintervalChanged_( i1, t0, t1 ) {\n\n\t\tconst pp = this.parameterPositions;\n\t\tlet iPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nclass LinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceding\n * the parameter.\n */\n\nclass DiscreteInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n}\n\nclass KeyframeTrack {\n\n\tconstructor( name, times, values, interpolation ) {\n\n\t\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\t\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\t\tthis.name = name;\n\n\t\tthis.times = convertArray( times, this.TimeBufferType );\n\t\tthis.values = convertArray( values, this.ValueBufferType );\n\n\t\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n\t}\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\tstatic toJSON( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== this.toJSON ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': convertArray( track.times, Array ),\n\t\t\t\t'values': convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n\tInterpolantFactoryMethodDiscrete( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tInterpolantFactoryMethodSmooth( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n\tsetInterpolation( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = 'unsupported interpolation for ' +\n\t\t\t\tthis.ValueTypeName + ' keyframe track named ' + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t}\n\n\tgetInterpolation() {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t}\n\n\tgetValueSize() {\n\n\t\treturn this.values.length / this.times.length;\n\n\t}\n\n\t// move all keyframes either forwards or backwards in time\n\tshift( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = times.slice( from, to );\n\t\t\tthis.values = this.values.slice( from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize() {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = this.times.slice(),\n\t\t\tvalues = this.values.slice(),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== times[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = times.slice( 0, writeIndex );\n\t\t\tthis.values = values.slice( 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst times = this.times.slice();\n\t\tconst values = this.values.slice();\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n}\n\nKeyframeTrack.prototype.TimeBufferType = Float32Array;\nKeyframeTrack.prototype.ValueBufferType = Float32Array;\nKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\n\n/**\n * A Track of Boolean keyframe values.\n */\nclass BooleanKeyframeTrack extends KeyframeTrack {}\n\nBooleanKeyframeTrack.prototype.ValueTypeName = 'bool';\nBooleanKeyframeTrack.prototype.ValueBufferType = Array;\nBooleanKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nBooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of keyframe values that represent color.\n */\nclass ColorKeyframeTrack extends KeyframeTrack {}\n\nColorKeyframeTrack.prototype.ValueTypeName = 'color';\n\n/**\n * A Track of numeric keyframe values.\n */\nclass NumberKeyframeTrack extends KeyframeTrack {}\n\nNumberKeyframeTrack.prototype.ValueTypeName = 'number';\n\n/**\n * Spherical linear unit quaternion interpolant.\n */\n\nclass QuaternionLinearInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\n/**\n * A Track of quaternion keyframe values.\n */\nclass QuaternionKeyframeTrack extends KeyframeTrack {\n\n\tInterpolantFactoryMethodLinear( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t}\n\n}\n\nQuaternionKeyframeTrack.prototype.ValueTypeName = 'quaternion';\n// ValueBufferType is inherited\nQuaternionKeyframeTrack.prototype.DefaultInterpolation = InterpolateLinear;\nQuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track that interpolates Strings\n */\nclass StringKeyframeTrack extends KeyframeTrack {}\n\nStringKeyframeTrack.prototype.ValueTypeName = 'string';\nStringKeyframeTrack.prototype.ValueBufferType = Array;\nStringKeyframeTrack.prototype.DefaultInterpolation = InterpolateDiscrete;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodLinear = undefined;\nStringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth = undefined;\n\n/**\n * A Track of vectored keyframe values.\n */\nclass VectorKeyframeTrack extends KeyframeTrack {}\n\nVectorKeyframeTrack.prototype.ValueTypeName = 'vector';\n\nclass AnimationClip {\n\n\tconstructor( name, duration = - 1, tracks, blendMode = NormalAnimationBlendMode ) {\n\n\t\tthis.name = name;\n\t\tthis.tracks = tracks;\n\t\tthis.duration = duration;\n\t\tthis.blendMode = blendMode;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// this means it should figure out its duration by scanning the tracks\n\t\tif ( this.duration < 0 ) {\n\n\t\t\tthis.resetDuration();\n\n\t\t}\n\n\t}\n\n\n\tstatic parse( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\tconst clip = new this( json.name, json.duration, tracks, json.blendMode );\n\t\tclip.uuid = json.uuid;\n\n\t\treturn clip;\n\n\t}\n\n\tstatic toJSON( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t}\n\n\tstatic CreateFromMorphTargetSequence( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = getKeyframeOrder( times );\n\t\t\ttimes = sortedArray( times, 1, order );\n\t\t\tvalues = sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new this( name, - 1, tracks );\n\n\t}\n\n\tstatic findByName( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\tstatic CreateClipsFromMorphTargetSequences( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( this.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t}\n\n\t// parse the animation.hierarchy format\n\tstatic parseAnimation( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tflattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * fps;\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new this( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n\tresetDuration() {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t}\n\n\ttrim() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tvalidate() {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t}\n\n\toptimize() {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new this.constructor( this.name, this.duration, tracks, this.blendMode );\n\n\t}\n\n\ttoJSON() {\n\n\t\treturn this.constructor.toJSON( this );\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tflattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nconst Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\nclass LoadingManager {\n\n\tconstructor( onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet isLoading = false;\n\t\tlet itemsLoaded = 0;\n\t\tlet itemsTotal = 0;\n\t\tlet urlModifier = undefined;\n\t\tconst handlers = [];\n\n\t\t// Refer to #5689 for the reason why we don't set .onStart\n\t\t// in the constructor\n\n\t\tthis.onStart = undefined;\n\t\tthis.onLoad = onLoad;\n\t\tthis.onProgress = onProgress;\n\t\tthis.onError = onError;\n\n\t\tthis.itemStart = function ( url ) {\n\n\t\t\titemsTotal ++;\n\n\t\t\tif ( isLoading === false ) {\n\n\t\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tisLoading = true;\n\n\t\t};\n\n\t\tthis.itemEnd = function ( url ) {\n\n\t\t\titemsLoaded ++;\n\n\t\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\t\tisLoading = false;\n\n\t\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\t\tscope.onLoad();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.itemError = function ( url ) {\n\n\t\t\tif ( scope.onError !== undefined ) {\n\n\t\t\t\tscope.onError( url );\n\n\t\t\t}\n\n\t\t};\n\n\t\tthis.resolveURL = function ( url ) {\n\n\t\t\tif ( urlModifier ) {\n\n\t\t\t\treturn urlModifier( url );\n\n\t\t\t}\n\n\t\t\treturn url;\n\n\t\t};\n\n\t\tthis.setURLModifier = function ( transform ) {\n\n\t\t\turlModifier = transform;\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.addHandler = function ( regex, loader ) {\n\n\t\t\thandlers.push( regex, loader );\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.removeHandler = function ( regex ) {\n\n\t\t\tconst index = handlers.indexOf( regex );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\thandlers.splice( index, 2 );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t};\n\n\t\tthis.getHandler = function ( file ) {\n\n\t\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\t\tconst regex = handlers[ i ];\n\t\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\t\treturn loader;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn null;\n\n\t\t};\n\n\t}\n\n}\n\nconst DefaultLoadingManager = /*@__PURE__*/ new LoadingManager();\n\nclass Loader {\n\n\tconstructor( manager ) {\n\n\t\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\t\tthis.crossOrigin = 'anonymous';\n\t\tthis.withCredentials = false;\n\t\tthis.path = '';\n\t\tthis.resourcePath = '';\n\t\tthis.requestHeader = {};\n\n\t}\n\n\tload( /* url, onLoad, onProgress, onError */ ) {}\n\n\tloadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t}\n\n\tparse( /* data */ ) {}\n\n\tsetCrossOrigin( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t}\n\n\tsetWithCredentials( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t}\n\n\tsetPath( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t}\n\n\tsetResourcePath( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t}\n\n\tsetRequestHeader( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n}\n\nLoader.DEFAULT_MATERIAL_NAME = '__DEFAULT';\n\nconst loading = {};\n\nclass HttpError extends Error {\n\n\tconstructor( message, response ) {\n\n\t\tsuper( message );\n\t\tthis.response = response;\n\n\t}\n\n}\n\nclass FileLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tthis.manager.itemStart( url );\n\n\t\t\tsetTimeout( () => {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Initialise array for duplicate requests\n\t\tloading[ url ] = [];\n\n\t\tloading[ url ].push( {\n\t\t\tonLoad: onLoad,\n\t\t\tonProgress: onProgress,\n\t\t\tonError: onError,\n\t\t} );\n\n\t\t// create request\n\t\tconst req = new Request( url, {\n\t\t\theaders: new Headers( this.requestHeader ),\n\t\t\tcredentials: this.withCredentials ? 'include' : 'same-origin',\n\t\t\t// An abort controller could be added within a future PR\n\t\t} );\n\n\t\t// record states ( avoid data race )\n\t\tconst mimeType = this.mimeType;\n\t\tconst responseType = this.responseType;\n\n\t\t// start the fetch\n\t\tfetch( req )\n\t\t\t.then( response => {\n\n\t\t\t\tif ( response.status === 200 || response.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( response.status === 0 ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Workaround: Checking if response.body === undefined for Alipay browser #23548\n\n\t\t\t\t\tif ( typeof ReadableStream === 'undefined' || response.body === undefined || response.body.getReader === undefined ) {\n\n\t\t\t\t\t\treturn response;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\t\tconst reader = response.body.getReader();\n\n\t\t\t\t\t// Nginx needs X-File-Size check\n\t\t\t\t\t// https://serverfault.com/questions/482875/why-does-nginx-remove-content-length-header-for-chunked-content\n\t\t\t\t\tconst contentLength = response.headers.get( 'Content-Length' ) || response.headers.get( 'X-File-Size' );\n\t\t\t\t\tconst total = contentLength ? parseInt( contentLength ) : 0;\n\t\t\t\t\tconst lengthComputable = total !== 0;\n\t\t\t\t\tlet loaded = 0;\n\n\t\t\t\t\t// periodically read data into the new stream tracking while download progress\n\t\t\t\t\tconst stream = new ReadableStream( {\n\t\t\t\t\t\tstart( controller ) {\n\n\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\tfunction readData() {\n\n\t\t\t\t\t\t\t\treader.read().then( ( { done, value } ) => {\n\n\t\t\t\t\t\t\t\t\tif ( done ) {\n\n\t\t\t\t\t\t\t\t\t\tcontroller.close();\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tloaded += value.byteLength;\n\n\t\t\t\t\t\t\t\t\t\tconst event = new ProgressEvent( 'progress', { lengthComputable, loaded, total } );\n\t\t\t\t\t\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\t\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tcontroller.enqueue( value );\n\t\t\t\t\t\t\t\t\t\treadData();\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\treturn new Response( stream );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new HttpError( `fetch for \"${response.url}\" responded with ${response.status}: ${response.statusText}`, response );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( response => {\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\n\t\t\t\t\t\treturn response.arrayBuffer();\n\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\treturn response.blob();\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\treturn response.text()\n\t\t\t\t\t\t\t.then( text => {\n\n\t\t\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\t\t\treturn parser.parseFromString( text, mimeType );\n\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\treturn response.json();\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( mimeType === undefined ) {\n\n\t\t\t\t\t\t\treturn response.text();\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// sniff encoding\n\t\t\t\t\t\t\tconst re = /charset=\"?([^;\"\\s]*)\"?/i;\n\t\t\t\t\t\t\tconst exec = re.exec( mimeType );\n\t\t\t\t\t\t\tconst label = exec && exec[ 1 ] ? exec[ 1 ].toLowerCase() : undefined;\n\t\t\t\t\t\t\tconst decoder = new TextDecoder( label );\n\t\t\t\t\t\t\treturn response.arrayBuffer().then( ab => decoder.decode( ab ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.then( data => {\n\n\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\tCache.add( url, data );\n\n\t\t\t\tconst callbacks = loading[ url ];\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( data );\n\n\t\t\t\t}\n\n\t\t\t} )\n\t\t\t.catch( err => {\n\n\t\t\t\t// Abort errors and other errors are handled the same\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tif ( callbacks === undefined ) {\n\n\t\t\t\t\t// When onLoad was called and url was deleted in `loading`\n\t\t\t\t\tthis.manager.itemError( url );\n\t\t\t\t\tthrow err;\n\n\t\t\t\t}\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( err );\n\n\t\t\t\t}\n\n\t\t\t\tthis.manager.itemError( url );\n\n\t\t\t} )\n\t\t\t.finally( () => {\n\n\t\t\t\tthis.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\tthis.manager.itemStart( url );\n\n\t}\n\n\tsetResponseType( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t}\n\n\tsetMimeType( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n}\n\nclass AnimationLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass CompressedTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 ) texture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.image = images;\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttexture.image = images;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass ImageLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = createElementNS( 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\tremoveEventListeners();\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction removeEventListeners() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.slice( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n}\n\nclass CubeTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\t\ttexture.colorSpace = SRGBColorSpace;\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nclass DataTextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setPath( this.path );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tlet texData;\n\n\t\t\ttry {\n\n\t\t\t\ttexData = scope.parse( buffer );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) {\n\n\t\t\t\t\tonError( error );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.colorSpace !== undefined ) {\n\n\t\t\t\ttexture.colorSpace = texData.colorSpace;\n\n\t\t\t} else if ( texData.encoding !== undefined ) { // @deprecated, r152\n\n\t\t\t\ttexture.encoding = texData.encoding;\n\n\t\t\t}\n\n\t\t\tif ( texData.flipY !== undefined ) {\n\n\t\t\t\ttexture.flipY = texData.flipY;\n\n\t\t\t}\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\tif ( texData.generateMipmaps !== undefined ) {\n\n\t\t\t\ttexture.generateMipmaps = texData.generateMipmaps;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass TextureLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n}\n\nclass Light extends Object3D {\n\n\tconstructor( color, intensity = 1 ) {\n\n\t\tsuper();\n\n\t\tthis.isLight = true;\n\n\t\tthis.type = 'Light';\n\n\t\tthis.color = new Color( color );\n\t\tthis.intensity = intensity;\n\n\t}\n\n\tdispose() {\n\n\t\t// Empty here in base class; some subclasses override.\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass HemisphereLight extends Light {\n\n\tconstructor( skyColor, groundColor, intensity ) {\n\n\t\tsuper( skyColor, intensity );\n\n\t\tthis.isHemisphereLight = true;\n\n\t\tthis.type = 'HemisphereLight';\n\n\t\tthis.position.copy( Object3D.DEFAULT_UP );\n\t\tthis.updateMatrix();\n\n\t\tthis.groundColor = new Color( groundColor );\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix$1 = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld$1 = /*@__PURE__*/ new Vector3();\nconst _lookTarget$1 = /*@__PURE__*/ new Vector3();\n\nclass LightShadow {\n\n\tconstructor( camera ) {\n\n\t\tthis.camera = camera;\n\n\t\tthis.bias = 0;\n\t\tthis.normalBias = 0;\n\t\tthis.radius = 1;\n\t\tthis.blurSamples = 8;\n\n\t\tthis.mapSize = new Vector2( 512, 512 );\n\n\t\tthis.map = null;\n\t\tthis.mapPass = null;\n\t\tthis.matrix = new Matrix4();\n\n\t\tthis.autoUpdate = true;\n\t\tthis.needsUpdate = false;\n\n\t\tthis._frustum = new Frustum();\n\t\tthis._frameExtents = new Vector2( 1, 1 );\n\n\t\tthis._viewportCount = 1;\n\n\t\tthis._viewports = [\n\n\t\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t\t];\n\n\t}\n\n\tgetViewportCount() {\n\n\t\treturn this._viewportCount;\n\n\t}\n\n\tgetFrustum() {\n\n\t\treturn this._frustum;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst shadowCamera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\t_lightPositionWorld$1.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( _lightPositionWorld$1 );\n\n\t\t_lookTarget$1.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( _lookTarget$1 );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\t_projScreenMatrix$1.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix$1 );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( _projScreenMatrix$1 );\n\n\t}\n\n\tgetViewport( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t}\n\n\tgetFrameExtents() {\n\n\t\treturn this._frameExtents;\n\n\t}\n\n\tdispose() {\n\n\t\tif ( this.map ) {\n\n\t\t\tthis.map.dispose();\n\n\t\t}\n\n\t\tif ( this.mapPass ) {\n\n\t\t\tthis.mapPass.dispose();\n\n\t\t}\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n}\n\nclass SpotLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n\t\tthis.isSpotLightShadow = true;\n\n\t\tthis.focus = 1;\n\n\t}\n\n\tupdateMatrices( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = RAD2DEG * 2 * light.angle * this.focus;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tsuper.updateMatrices( light );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.focus = source.focus;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass SpotLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, angle = Math.PI / 3, penumbra = 0, decay = 2 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isSpotLight = true;\n\n\t\tthis.type = 'SpotLight';\n\n\t\tthis.position.copy( Object3D.DEFAULT_UP );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.distance = distance;\n\t\tthis.angle = angle;\n\t\tthis.penumbra = penumbra;\n\t\tthis.decay = decay;\n\n\t\tthis.map = null;\n\n\t\tthis.shadow = new SpotLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// by convention for a spotlight, luminous power (lm) = π * luminous intensity (cd)\n\t\treturn this.intensity * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / Math.PI;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _projScreenMatrix = /*@__PURE__*/ new Matrix4();\nconst _lightPositionWorld = /*@__PURE__*/ new Vector3();\nconst _lookTarget = /*@__PURE__*/ new Vector3();\n\nclass PointLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\t\tthis.isPointLightShadow = true;\n\n\t\tthis._frameExtents = new Vector2( 4, 2 );\n\n\t\tthis._viewportCount = 6;\n\n\t\tthis._viewports = [\n\t\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t\t// following orientation:\n\t\t\t//\n\t\t\t//  xzXZ\n\t\t\t//   y Y\n\t\t\t//\n\t\t\t// X - Positive x direction\n\t\t\t// x - Negative x direction\n\t\t\t// Y - Positive y direction\n\t\t\t// y - Negative y direction\n\t\t\t// Z - Positive z direction\n\t\t\t// z - Negative z direction\n\n\t\t\t// positive X\n\t\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t\t// negative X\n\t\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t\t// positive Z\n\t\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t\t// negative Z\n\t\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t\t// positive Y\n\t\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t\t// negative Y\n\t\t\tnew Vector4( 1, 0, 1, 1 )\n\t\t];\n\n\t\tthis._cubeDirections = [\n\t\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t\t];\n\n\t\tthis._cubeUps = [\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t\t];\n\n\t}\n\n\tupdateMatrices( light, viewportIndex = 0 ) {\n\n\t\tconst camera = this.camera;\n\t\tconst shadowMatrix = this.matrix;\n\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( far !== camera.far ) {\n\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\t_lightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( _lightPositionWorld );\n\n\t\t_lookTarget.copy( camera.position );\n\t\t_lookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( _lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - _lightPositionWorld.x, - _lightPositionWorld.y, - _lightPositionWorld.z );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t}\n\n}\n\nclass PointLight extends Light {\n\n\tconstructor( color, intensity, distance = 0, decay = 2 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isPointLight = true;\n\n\t\tthis.type = 'PointLight';\n\n\t\tthis.distance = distance;\n\t\tthis.decay = decay;\n\n\t\tthis.shadow = new PointLightShadow();\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in candela)\n\t\t// for an isotropic light source, luminous power (lm) = 4 π luminous intensity (cd)\n\t\treturn this.intensity * 4 * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in candela) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass DirectionalLightShadow extends LightShadow {\n\n\tconstructor() {\n\n\t\tsuper( new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n\t\tthis.isDirectionalLightShadow = true;\n\n\t}\n\n}\n\nclass DirectionalLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isDirectionalLight = true;\n\n\t\tthis.type = 'DirectionalLight';\n\n\t\tthis.position.copy( Object3D.DEFAULT_UP );\n\t\tthis.updateMatrix();\n\n\t\tthis.target = new Object3D();\n\n\t\tthis.shadow = new DirectionalLightShadow();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.shadow.dispose();\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.target = source.target.clone();\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass AmbientLight extends Light {\n\n\tconstructor( color, intensity ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isAmbientLight = true;\n\n\t\tthis.type = 'AmbientLight';\n\n\t}\n\n}\n\nclass RectAreaLight extends Light {\n\n\tconstructor( color, intensity, width = 10, height = 10 ) {\n\n\t\tsuper( color, intensity );\n\n\t\tthis.isRectAreaLight = true;\n\n\t\tthis.type = 'RectAreaLight';\n\n\t\tthis.width = width;\n\t\tthis.height = height;\n\n\t}\n\n\tget power() {\n\n\t\t// compute the light's luminous power (in lumens) from its intensity (in nits)\n\t\treturn this.intensity * this.width * this.height * Math.PI;\n\n\t}\n\n\tset power( power ) {\n\n\t\t// set the light's intensity (in nits) from the desired luminous power (in lumens)\n\t\tthis.intensity = power / ( this.width * this.height * Math.PI );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n}\n\n/**\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nclass SphericalHarmonics3 {\n\n\tconstructor() {\n\n\t\tthis.isSphericalHarmonics3 = true;\n\n\t\tthis.coefficients = [];\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients.push( new Vector3() );\n\n\t\t}\n\n\t}\n\n\tset( coefficients ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tzero() {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t}\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); // π * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 * π / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // ( π / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // ( π / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // ( π / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t}\n\n\tadd( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\taddScaledSH( sh, s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tscale( s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tlerp( sh, alpha ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tequals( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tcopy( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tfromArray( array, offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\ttoArray( array = [], offset = 0 ) {\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tstatic getBasisAt( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n}\n\nclass LightProbe extends Light {\n\n\tconstructor( sh = new SphericalHarmonics3(), intensity = 1 ) {\n\n\t\tsuper( undefined, intensity );\n\n\t\tthis.isLightProbe = true;\n\n\t\tthis.sh = sh;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.sh.copy( source.sh );\n\n\t\treturn this;\n\n\t}\n\n\tfromJSON( json ) {\n\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\t\tthis.sh.fromArray( json.sh );\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON( meta ) {\n\n\t\tconst data = super.toJSON( meta );\n\n\t\tdata.object.sh = this.sh.toArray();\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass MaterialLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\t\tthis.textures = {};\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tconst material = MaterialLoader.createMaterialFromType( json.type );\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined && material.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = json.sheen;\n\t\tif ( json.sheenColor !== undefined ) material.sheenColor = new Color().setHex( json.sheenColor );\n\t\tif ( json.sheenRoughness !== undefined ) material.sheenRoughness = json.sheenRoughness;\n\t\tif ( json.emissive !== undefined && material.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined && material.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.specularIntensity !== undefined ) material.specularIntensity = json.specularIntensity;\n\t\tif ( json.specularColor !== undefined && material.specularColor !== undefined ) material.specularColor.setHex( json.specularColor );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.iridescence !== undefined ) material.iridescence = json.iridescence;\n\t\tif ( json.iridescenceIOR !== undefined ) material.iridescenceIOR = json.iridescenceIOR;\n\t\tif ( json.iridescenceThicknessRange !== undefined ) material.iridescenceThicknessRange = json.iridescenceThicknessRange;\n\t\tif ( json.transmission !== undefined ) material.transmission = json.transmission;\n\t\tif ( json.thickness !== undefined ) material.thickness = json.thickness;\n\t\tif ( json.attenuationDistance !== undefined ) material.attenuationDistance = json.attenuationDistance;\n\t\tif ( json.attenuationColor !== undefined && material.attenuationColor !== undefined ) material.attenuationColor.setHex( json.attenuationColor );\n\t\tif ( json.anisotropy !== undefined ) material.anisotropy = json.anisotropy;\n\t\tif ( json.anisotropyRotation !== undefined ) material.anisotropyRotation = json.anisotropyRotation;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.shadowSide !== undefined ) material.shadowSide = json.shadowSide;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.alphaHash !== undefined ) material.alphaHash = json.alphaHash;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== undefined ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.alphaToCoverage !== undefined ) material.alphaToCoverage = json.alphaToCoverage;\n\t\tif ( json.premultipliedAlpha !== undefined ) material.premultipliedAlpha = json.premultipliedAlpha;\n\t\tif ( json.forceSinglePass !== undefined ) material.forceSinglePass = json.forceSinglePass;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( const name in json.uniforms ) {\n\n\t\t\t\tconst uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\t\tif ( json.glslVersion !== undefined ) material.glslVersion = json.glslVersion;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( const key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.lights !== undefined ) material.lights = json.lights;\n\t\tif ( json.clipping !== undefined ) material.clipping = json.clipping;\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tlet normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\t\tif ( json.specularIntensityMap !== undefined ) material.specularIntensityMap = getTexture( json.specularIntensityMap );\n\t\tif ( json.specularColorMap !== undefined ) material.specularColorMap = getTexture( json.specularColorMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\tif ( json.iridescenceMap !== undefined ) material.iridescenceMap = getTexture( json.iridescenceMap );\n\t\tif ( json.iridescenceThicknessMap !== undefined ) material.iridescenceThicknessMap = getTexture( json.iridescenceThicknessMap );\n\n\t\tif ( json.transmissionMap !== undefined ) material.transmissionMap = getTexture( json.transmissionMap );\n\t\tif ( json.thicknessMap !== undefined ) material.thicknessMap = getTexture( json.thicknessMap );\n\n\t\tif ( json.anisotropyMap !== undefined ) material.anisotropyMap = getTexture( json.anisotropyMap );\n\n\t\tif ( json.sheenColorMap !== undefined ) material.sheenColorMap = getTexture( json.sheenColorMap );\n\t\tif ( json.sheenRoughnessMap !== undefined ) material.sheenRoughnessMap = getTexture( json.sheenRoughnessMap );\n\n\t\treturn material;\n\n\t}\n\n\tsetTextures( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n\tstatic createMaterialFromType( type ) {\n\n\t\tconst materialLib = {\n\t\t\tShadowMaterial,\n\t\t\tSpriteMaterial,\n\t\t\tRawShaderMaterial,\n\t\t\tShaderMaterial,\n\t\t\tPointsMaterial,\n\t\t\tMeshPhysicalMaterial,\n\t\t\tMeshStandardMaterial,\n\t\t\tMeshPhongMaterial,\n\t\t\tMeshToonMaterial,\n\t\t\tMeshNormalMaterial,\n\t\t\tMeshLambertMaterial,\n\t\t\tMeshDepthMaterial,\n\t\t\tMeshDistanceMaterial,\n\t\t\tMeshBasicMaterial,\n\t\t\tMeshMatcapMaterial,\n\t\t\tLineDashedMaterial,\n\t\t\tLineBasicMaterial,\n\t\t\tMaterial\n\t\t};\n\n\t\treturn new materialLib[ type ]();\n\n\t}\n\n}\n\nclass LoaderUtils {\n\n\tstatic decodeText( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t}\n\n\tstatic extractUrlBase( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.slice( 0, index + 1 );\n\n\t}\n\n\tstatic resolveURL( url, path ) {\n\n\t\t// Invalid URL\n\t\tif ( typeof url !== 'string' || url === '' ) return '';\n\n\t\t// Host Relative URL\n\t\tif ( /^https?:\\/\\//i.test( path ) && /^\\//.test( url ) ) {\n\n\t\t\tpath = path.replace( /(^https?:\\/\\/[^\\/]+).*/i, '$1' );\n\n\t\t}\n\n\t\t// Absolute URL http://,https://,//\n\t\tif ( /^(https?:)?\\/\\//i.test( url ) ) return url;\n\n\t\t// Data URI\n\t\tif ( /^data:.*,.*$/i.test( url ) ) return url;\n\n\t\t// Blob URL\n\t\tif ( /^blob:.*$/i.test( url ) ) return url;\n\n\t\t// Relative URL\n\t\treturn path + url;\n\n\t}\n\n}\n\nclass InstancedBufferGeometry extends BufferGeometry {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isInstancedBufferGeometry = true;\n\n\t\tthis.type = 'InstancedBufferGeometry';\n\t\tthis.instanceCount = Infinity;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = super.toJSON();\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n}\n\nclass BufferGeometryLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( json ) {\n\n\t\tconst interleavedBufferMap = {};\n\t\tconst arrayBufferMap = {};\n\n\t\tfunction getInterleavedBuffer( json, uuid ) {\n\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\n\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\n\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\n\n\t\t\tconst array = getTypedArray( interleavedBuffer.type, buffer );\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\n\t\t\tib.uuid = interleavedBuffer.uuid;\n\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\n\n\t\t\treturn ib;\n\n\t\t}\n\n\t\tfunction getArrayBuffer( json, uuid ) {\n\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\n\n\t\t\tconst arrayBuffers = json.arrayBuffers;\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\n\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\n\n\t\t\tarrayBufferMap[ uuid ] = ab;\n\n\t\t\treturn ab;\n\n\t\t}\n\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tconst index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst typedArray = getTypedArray( index.type, index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tconst attributes = json.data.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\t\t\tlet bufferAttribute;\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t} else {\n\n\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tif ( attribute.usage !== undefined ) bufferAttribute.setUsage( attribute.usage );\n\n\t\t\tif ( attribute.updateRange !== undefined ) {\n\n\t\t\t\tbufferAttribute.updateRange.offset = attribute.updateRange.offset;\n\t\t\t\tbufferAttribute.updateRange.count = attribute.updateRange.count;\n\n\t\t\t}\n\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tconst morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( const key in morphAttributes ) {\n\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst attribute = attributeArray[ i ];\n\t\t\t\t\tlet bufferAttribute;\n\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst typedArray = getTypedArray( attribute.type, attribute.array );\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tconst center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n}\n\nclass ObjectLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( new Error( 'THREE.ObjectLoader: Can\\'t load ' + url ) );\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tasync loadAsync( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tconst text = await loader.loadAsync( url, onProgress );\n\n\t\tconst json = JSON.parse( text );\n\n\t\tconst metadata = json.metadata;\n\n\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\tthrow new Error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\n\t\t}\n\n\t\treturn await scope.parseAsync( json );\n\n\t}\n\n\tparse( json, onLoad ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\t//\n\n\t\tif ( onLoad !== undefined ) {\n\n\t\t\tlet hasImages = false;\n\n\t\t\tfor ( const uuid in images ) {\n\n\t\t\t\tif ( images[ uuid ].data instanceof HTMLImageElement ) {\n\n\t\t\t\t\thasImages = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasImages === false ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tasync parseAsync( json ) {\n\n\t\tconst animations = this.parseAnimations( json.animations );\n\t\tconst shapes = this.parseShapes( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = await this.parseImagesAsync( json.images );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials, textures, animations );\n\t\tconst skeletons = this.parseSkeletons( json.skeletons, object );\n\n\t\tthis.bindSkeletons( object, skeletons );\n\n\t\treturn object;\n\n\t}\n\n\tparseShapes( json ) {\n\n\t\tconst shapes = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\n\n\t\t\t\tshapes[ shape.uuid ] = shape;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n\tparseSkeletons( json, object ) {\n\n\t\tconst skeletons = {};\n\t\tconst bones = {};\n\n\t\t// generate bone lookup table\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isBone ) bones[ child.uuid ] = child;\n\n\t\t} );\n\n\t\t// create skeletons\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst skeleton = new Skeleton().fromJSON( json[ i ], bones );\n\n\t\t\t\tskeletons[ skeleton.uuid ] = skeleton;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn skeletons;\n\n\t}\n\n\tparseGeometries( json, shapes ) {\n\n\t\tconst geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tlet geometry;\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'BufferGeometry':\n\t\t\t\t\tcase 'InstancedBufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( data.type in Geometries ) {\n\n\t\t\t\t\t\t\tgeometry = Geometries[ data.type ].fromJSON( data, shapes );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn( `THREE.ObjectLoader: Unsupported geometry type \"${ data.type }\"` );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\t\t\t\tif ( data.userData !== undefined ) geometry.userData = data.userData;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t}\n\n\tparseMaterials( json, textures ) {\n\n\t\tconst cache = {}; // MultiMaterial\n\t\tconst materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\n\n\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t}\n\n\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t}\n\n\tparseAnimations( json ) {\n\n\t\tconst animations = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tconst clip = AnimationClip.parse( data );\n\n\t\t\t\tanimations[ clip.uuid ] = clip;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n\tparseImages( json, onLoad ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tfunction deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn loadImage( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tconst manager = new LoadingManager( onLoad );\n\n\t\t\tloader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tasync parseImagesAsync( json ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tasync function deserializeImage( image ) {\n\n\t\t\tif ( typeof image === 'string' ) {\n\n\t\t\t\tconst url = image;\n\n\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( url ) ? url : scope.resourcePath + url;\n\n\t\t\t\treturn await loader.loadAsync( path );\n\n\t\t\t} else {\n\n\t\t\t\tif ( image.data ) {\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: getTypedArray( image.type, image.data ),\n\t\t\t\t\t\twidth: image.width,\n\t\t\t\t\t\theight: image.height\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tloader = new ImageLoader( this.manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\tconst imageArray = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst deserializedImage = await deserializeImage( currentUrl );\n\n\t\t\t\t\t\tif ( deserializedImage !== null ) {\n\n\t\t\t\t\t\t\tif ( deserializedImage instanceof HTMLImageElement ) {\n\n\t\t\t\t\t\t\t\timageArray.push( deserializedImage );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// special case: handle array of data textures for cube textures\n\n\t\t\t\t\t\t\t\timageArray.push( new DataTexture( deserializedImage.data, deserializedImage.width, deserializedImage.height ) );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\timages[ image.uuid ] = new Source( imageArray );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst deserializedImage = await deserializeImage( image.url );\n\t\t\t\t\timages[ image.uuid ] = new Source( deserializedImage );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\tparseTextures( json, images ) {\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof value === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tconst textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tconst source = images[ data.image ];\n\t\t\t\tconst image = source.data;\n\n\t\t\t\tlet texture;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\ttexture = new CubeTexture();\n\n\t\t\t\t\tif ( image.length === 6 ) texture.needsUpdate = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( image && image.data ) {\n\n\t\t\t\t\t\ttexture = new DataTexture();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttexture = new Texture();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( image ) texture.needsUpdate = true; // textures can have undefined image data\n\n\t\t\t\t}\n\n\t\t\t\ttexture.source = source;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\t\t\t\tif ( data.channel !== undefined ) texture.channel = data.channel;\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\n\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\n\t\t\t\tif ( data.internalFormat !== undefined ) texture.internalFormat = data.internalFormat;\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\n\t\t\t\tif ( data.colorSpace !== undefined ) texture.colorSpace = data.colorSpace;\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding; // @deprecated, r152\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\tif ( data.generateMipmaps !== undefined ) texture.generateMipmaps = data.generateMipmaps;\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\n\t\t\t\tif ( data.compareFunction !== undefined ) texture.compareFunction = data.compareFunction;\n\n\t\t\t\tif ( data.userData !== undefined ) texture.userData = data.userData;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t}\n\n\tparseObject( data, geometries, materials, textures, animations ) {\n\n\t\tlet object;\n\n\t\tfunction getGeometry( name ) {\n\n\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t}\n\n\t\t\treturn geometries[ name ];\n\n\t\t}\n\n\t\tfunction getMaterial( name ) {\n\n\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst uuid = name[ i ];\n\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t}\n\n\t\t\treturn materials[ name ];\n\n\t\t}\n\n\t\tfunction getTexture( uuid ) {\n\n\t\t\tif ( textures[ uuid ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined texture', uuid );\n\n\t\t\t}\n\n\t\t\treturn textures[ uuid ];\n\n\t\t}\n\n\t\tlet geometry, material;\n\n\t\tswitch ( data.type ) {\n\n\t\t\tcase 'Scene':\n\n\t\t\t\tobject = new Scene();\n\n\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tobject.background = getTexture( data.background );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.environment !== undefined ) {\n\n\t\t\t\t\tobject.environment = getTexture( data.environment );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( data.fog.name !== '' ) {\n\n\t\t\t\t\t\tobject.fog.name = data.fog.name;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.backgroundBlurriness !== undefined ) object.backgroundBlurriness = data.backgroundBlurriness;\n\t\t\t\tif ( data.backgroundIntensity !== undefined ) object.backgroundIntensity = data.backgroundIntensity;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'AmbientLight':\n\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'DirectionalLight':\n\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'RectAreaLight':\n\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LightProbe':\n\n\t\t\t\tobject = new LightProbe().fromJSON( data );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t \tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new SkinnedMesh( geometry, material );\n\n\t\t\t\tif ( data.bindMode !== undefined ) object.bindMode = data.bindMode;\n\t\t\t\tif ( data.bindMatrix !== undefined ) object.bindMatrix.fromArray( data.bindMatrix );\n\t\t\t\tif ( data.skeleton !== undefined ) object.skeleton = data.skeleton;\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Mesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'InstancedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\t\t\t\tconst count = data.count;\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\n\t\t\t\tconst instanceColor = data.instanceColor;\n\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\n\t\t\t\tobject.instanceMatrix = new InstancedBufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\n\t\t\t\tif ( instanceColor !== undefined ) object.instanceColor = new InstancedBufferAttribute( new Float32Array( instanceColor.array ), instanceColor.itemSize );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LOD':\n\n\t\t\t\tobject = new LOD();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Line':\n\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineLoop':\n\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineSegments':\n\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointCloud':\n\t\t\tcase 'Points':\n\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Sprite':\n\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Group':\n\n\t\t\t\tobject = new Group();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Bone':\n\n\t\t\t\tobject = new Bone();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tobject = new Object3D();\n\n\t\t}\n\n\t\tobject.uuid = data.uuid;\n\n\t\tif ( data.name !== undefined ) object.name = data.name;\n\n\t\tif ( data.matrix !== undefined ) {\n\n\t\t\tobject.matrix.fromArray( data.matrix );\n\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t} else {\n\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t}\n\n\t\tif ( data.up !== undefined ) object.up.fromArray( data.up );\n\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\tif ( data.shadow ) {\n\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t}\n\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\n\n\t\tif ( data.children !== undefined ) {\n\n\t\t\tconst children = data.children;\n\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials, textures, animations ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.animations !== undefined ) {\n\n\t\t\tconst objectAnimations = data.animations;\n\n\t\t\tfor ( let i = 0; i < objectAnimations.length; i ++ ) {\n\n\t\t\t\tconst uuid = objectAnimations[ i ];\n\n\t\t\t\tobject.animations.push( animations[ uuid ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.type === 'LOD' ) {\n\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\n\n\t\t\tconst levels = data.levels;\n\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tconst level = levels[ l ];\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\tobject.addLevel( child, level.distance, level.hysteresis );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n\tbindSkeletons( object, skeletons ) {\n\n\t\tif ( Object.keys( skeletons ).length === 0 ) return;\n\n\t\tobject.traverse( function ( child ) {\n\n\t\t\tif ( child.isSkinnedMesh === true && child.skeleton !== undefined ) {\n\n\t\t\t\tconst skeleton = skeletons[ child.skeleton ];\n\n\t\t\t\tif ( skeleton === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No skeleton found with UUID:', child.skeleton );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tchild.bind( skeleton, child.bindMatrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n}\n\nconst TEXTURE_MAPPING = {\n\tUVMapping: UVMapping,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping\n};\n\nconst TEXTURE_WRAPPING = {\n\tRepeatWrapping: RepeatWrapping,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\n};\n\nconst TEXTURE_FILTER = {\n\tNearestFilter: NearestFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tLinearFilter: LinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\n};\n\nclass ImageBitmapLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.isImageBitmapLoader = true;\n\n\t\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t\t}\n\n\t\tif ( typeof fetch === 'undefined' ) {\n\n\t\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t\t}\n\n\t\tthis.options = { premultiplyAlpha: 'none' };\n\n\t}\n\n\tsetOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst fetchOptions = {};\n\t\tfetchOptions.credentials = ( this.crossOrigin === 'anonymous' ) ? 'same-origin' : 'include';\n\t\tfetchOptions.headers = this.requestHeader;\n\n\t\tfetch( url, fetchOptions ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, Object.assign( scope.options, { colorSpaceConversion: 'none' } ) );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n}\n\nlet _context;\n\nclass AudioContext {\n\n\tstatic getContext() {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t}\n\n\tstatic setContext( value ) {\n\n\t\t_context = value;\n\n\t}\n\n}\n\nclass AudioLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t}, handleError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\thandleError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\tfunction handleError( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\n\t\t}\n\n\t}\n\n}\n\nconst _eyeRight = /*@__PURE__*/ new Matrix4();\nconst _eyeLeft = /*@__PURE__*/ new Matrix4();\nconst _projectionMatrix = /*@__PURE__*/ new Matrix4();\n\nclass StereoCamera {\n\n\tconstructor() {\n\n\t\tthis.type = 'StereoCamera';\n\n\t\tthis.aspect = 1;\n\n\t\tthis.eyeSep = 0.064;\n\n\t\tthis.cameraL = new PerspectiveCamera();\n\t\tthis.cameraL.layers.enable( 1 );\n\t\tthis.cameraL.matrixAutoUpdate = false;\n\n\t\tthis.cameraR = new PerspectiveCamera();\n\t\tthis.cameraR.layers.enable( 2 );\n\t\tthis.cameraR.matrixAutoUpdate = false;\n\n\t\tthis._cache = {\n\t\t\tfocus: null,\n\t\t\tfov: null,\n\t\t\taspect: null,\n\t\t\tnear: null,\n\t\t\tfar: null,\n\t\t\tzoom: null,\n\t\t\teyeSep: null\n\t\t};\n\n\t}\n\n\tupdate( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\t_projectionMatrix.copy( camera.projectionMatrix );\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( _projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\t_projectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\t_projectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( _projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n}\n\nclass Clock {\n\n\tconstructor( autoStart = true ) {\n\n\t\tthis.autoStart = autoStart;\n\n\t\tthis.startTime = 0;\n\t\tthis.oldTime = 0;\n\t\tthis.elapsedTime = 0;\n\n\t\tthis.running = false;\n\n\t}\n\n\tstart() {\n\n\t\tthis.startTime = now();\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t}\n\n\tstop() {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t}\n\n\tgetElapsedTime() {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t}\n\n\tgetDelta() {\n\n\t\tlet diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tconst newTime = now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n}\n\nfunction now() {\n\n\treturn ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n}\n\nconst _position$1 = /*@__PURE__*/ new Vector3();\nconst _quaternion$1 = /*@__PURE__*/ new Quaternion();\nconst _scale$1 = /*@__PURE__*/ new Vector3();\nconst _orientation$1 = /*@__PURE__*/ new Vector3();\n\nclass AudioListener extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.type = 'AudioListener';\n\n\t\tthis.context = AudioContext.getContext();\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( this.context.destination );\n\n\t\tthis.filter = null;\n\n\t\tthis.timeDelta = 0;\n\n\t\t// private\n\n\t\tthis._clock = new Clock();\n\n\t}\n\n\tgetInput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tremoveFilter() {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.filter;\n\n\t}\n\n\tsetFilter( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t\treturn this;\n\n\t}\n\n\tgetMasterVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetMasterVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tconst listener = this.context.listener;\n\t\tconst up = this.up;\n\n\t\tthis.timeDelta = this._clock.getDelta();\n\n\t\tthis.matrixWorld.decompose( _position$1, _quaternion$1, _scale$1 );\n\n\t\t_orientation$1.set( 0, 0, - 1 ).applyQuaternion( _quaternion$1 );\n\n\t\tif ( listener.positionX ) {\n\n\t\t\t// code path for Chrome (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\n\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$1.x, endTime );\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$1.y, endTime );\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$1.z, endTime );\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation$1.x, endTime );\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation$1.y, endTime );\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation$1.z, endTime );\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\n\n\t\t} else {\n\n\t\t\tlistener.setPosition( _position$1.x, _position$1.y, _position$1.z );\n\t\t\tlistener.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z, up.x, up.y, up.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass Audio extends Object3D {\n\n\tconstructor( listener ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'Audio';\n\n\t\tthis.listener = listener;\n\t\tthis.context = listener.context;\n\n\t\tthis.gain = this.context.createGain();\n\t\tthis.gain.connect( listener.getInput() );\n\n\t\tthis.autoplay = false;\n\n\t\tthis.buffer = null;\n\t\tthis.detune = 0;\n\t\tthis.loop = false;\n\t\tthis.loopStart = 0;\n\t\tthis.loopEnd = 0;\n\t\tthis.offset = 0;\n\t\tthis.duration = undefined;\n\t\tthis.playbackRate = 1;\n\t\tthis.isPlaying = false;\n\t\tthis.hasPlaybackControl = true;\n\t\tthis.source = null;\n\t\tthis.sourceType = 'empty';\n\n\t\tthis._startedAt = 0;\n\t\tthis._progress = 0;\n\t\tthis._connected = false;\n\n\t\tthis.filters = [];\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.gain;\n\n\t}\n\n\tsetNodeSource( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaElementSource( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetMediaStreamSource( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t}\n\n\tsetBuffer( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t}\n\n\tplay( delay = 0 ) {\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t}\n\n\tpause() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tif ( this.source !== null ) {\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t}\n\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t}\n\n\tconnect() {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = true;\n\n\t\treturn this;\n\n\t}\n\n\tdisconnect() {\n\n\t\tif ( this._connected === false ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\tthis._connected = false;\n\n\t\treturn this;\n\n\t}\n\n\tgetFilters() {\n\n\t\treturn this.filters;\n\n\t}\n\n\tsetFilters( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this._connected === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value.slice();\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value.slice();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetDetune( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetDetune() {\n\n\t\treturn this.detune;\n\n\t}\n\n\tgetFilter() {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t}\n\n\tsetFilter( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t}\n\n\tsetPlaybackRate( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tgetPlaybackRate() {\n\n\t\treturn this.playbackRate;\n\n\t}\n\n\tonEnded() {\n\n\t\tthis.isPlaying = false;\n\n\t}\n\n\tgetLoop() {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t}\n\n\tsetLoop( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopStart( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoopEnd( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetVolume() {\n\n\t\treturn this.gain.gain.value;\n\n\t}\n\n\tsetVolume( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _position = /*@__PURE__*/ new Vector3();\nconst _quaternion = /*@__PURE__*/ new Quaternion();\nconst _scale = /*@__PURE__*/ new Vector3();\nconst _orientation = /*@__PURE__*/ new Vector3();\n\nclass PositionalAudio extends Audio {\n\n\tconstructor( listener ) {\n\n\t\tsuper( listener );\n\n\t\tthis.panner = this.context.createPanner();\n\t\tthis.panner.panningModel = 'HRTF';\n\t\tthis.panner.connect( this.gain );\n\n\t}\n\n\tconnect() {\n\n\t\tsuper.connect();\n\n\t\tthis.panner.connect( this.gain );\n\n\t}\n\n\tdisconnect() {\n\n\t\tsuper.disconnect();\n\n\t\tthis.panner.disconnect( this.gain );\n\n\t}\n\n\tgetOutput() {\n\n\t\treturn this.panner;\n\n\t}\n\n\tgetRefDistance() {\n\n\t\treturn this.panner.refDistance;\n\n\t}\n\n\tsetRefDistance( value ) {\n\n\t\tthis.panner.refDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetRolloffFactor() {\n\n\t\treturn this.panner.rolloffFactor;\n\n\t}\n\n\tsetRolloffFactor( value ) {\n\n\t\tthis.panner.rolloffFactor = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetDistanceModel() {\n\n\t\treturn this.panner.distanceModel;\n\n\t}\n\n\tsetDistanceModel( value ) {\n\n\t\tthis.panner.distanceModel = value;\n\n\t\treturn this;\n\n\t}\n\n\tgetMaxDistance() {\n\n\t\treturn this.panner.maxDistance;\n\n\t}\n\n\tsetMaxDistance( value ) {\n\n\t\tthis.panner.maxDistance = value;\n\n\t\treturn this;\n\n\t}\n\n\tsetDirectionalCone( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\n\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\n\t\tthis.panner.coneOuterGain = coneOuterGain;\n\n\t\treturn this;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, _scale );\n\n\t\t_orientation.set( 0, 0, 1 ).applyQuaternion( _quaternion );\n\n\t\tconst panner = this.panner;\n\n\t\tif ( panner.positionX ) {\n\n\t\t\t// code path for Chrome and Firefox (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.listener.timeDelta;\n\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position.x, endTime );\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position.y, endTime );\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position.z, endTime );\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation.x, endTime );\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation.y, endTime );\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation.z, endTime );\n\n\t\t} else {\n\n\t\t\tpanner.setPosition( _position.x, _position.y, _position.z );\n\t\t\tpanner.setOrientation( _orientation.x, _orientation.y, _orientation.z );\n\n\t\t}\n\n\t}\n\n}\n\nclass AudioAnalyser {\n\n\tconstructor( audio, fftSize = 2048 ) {\n\n\t\tthis.analyser = audio.context.createAnalyser();\n\t\tthis.analyser.fftSize = fftSize;\n\n\t\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\t\taudio.getOutput().connect( this.analyser );\n\n\t}\n\n\n\tgetFrequencyData() {\n\n\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\treturn this.data;\n\n\t}\n\n\tgetAverageFrequency() {\n\n\t\tlet value = 0;\n\t\tconst data = this.getFrequencyData();\n\n\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\tvalue += data[ i ];\n\n\t\t}\n\n\t\treturn value / data.length;\n\n\t}\n\n}\n\nclass PropertyMixer {\n\n\tconstructor( binding, typeName, valueSize ) {\n\n\t\tthis.binding = binding;\n\t\tthis.valueSize = valueSize;\n\n\t\tlet mixFunction,\n\t\t\tmixFunctionAdditive,\n\t\t\tsetIdentity;\n\n\t\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t\t//\n\t\t// interpolators can use .buffer as their .result\n\t\t// the data then goes to 'incoming'\n\t\t//\n\t\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t\t// the cumulative result and are compared to detect\n\t\t// changes\n\t\t//\n\t\t// 'orig' stores the original state of the property\n\t\t//\n\t\t// 'add' is used for additive cumulative results\n\t\t//\n\t\t// 'work' is optional and is only present for quaternion types. It is used\n\t\t// to store intermediate quaternion multiplication results\n\n\t\tswitch ( typeName ) {\n\n\t\t\tcase 'quaternion':\n\t\t\t\tmixFunction = this._slerp;\n\t\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\t\tthis._workIndex = 5;\n\t\t\t\tbreak;\n\n\t\t\tcase 'string':\n\t\t\tcase 'bool':\n\t\t\t\tmixFunction = this._select;\n\n\t\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t\t// additive is not relevant for non-numeric types\n\t\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tmixFunction = this._lerp;\n\t\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t\t}\n\n\t\tthis._mixBufferRegion = mixFunction;\n\t\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\t\tthis._setIdentity = setIdentity;\n\t\tthis._origIndex = 3;\n\t\tthis._addIndex = 4;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tthis.useCount = 0;\n\t\tthis.referenceCount = 0;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t}\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t}\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState() {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t}\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState() {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t}\n\n\t_setAdditiveIdentityNumeric() {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\t_setAdditiveIdentityQuaternion() {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * this.valueSize + 3 ] = 1;\n\n\t}\n\n\t_setAdditiveIdentityOther() {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t}\n\n\n\t// mix functions\n\n\t_select( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_slerp( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t}\n\n\t_slerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t}\n\n\t_lerp( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n\t_lerpAdditive( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n}\n\n// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /*@__PURE__*/ /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /*@__PURE__*/ /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /*@__PURE__*/ /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /*@__PURE__*/ /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones', 'map' ];\n\nclass Composite {\n\n\tconstructor( targetGroup, path, optionalParsedPath ) {\n\n\t\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis._targetGroup = targetGroup;\n\t\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n\t}\n\n\tgetValue( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t}\n\n\tsetValue( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t}\n\n\tbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t}\n\n\tunbind() {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n}\n\n// Note: This class uses a State pattern on a per-method basis:\n// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n// prototype version of these methods with one that represents\n// the bound state. When the property is not found, the methods\n// become no-ops.\nclass PropertyBinding {\n\n\tconstructor( rootNode, path, parsedPath ) {\n\n\t\tthis.path = path;\n\t\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\t\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName );\n\n\t\tthis.rootNode = rootNode;\n\n\t\t// initial state of these methods that calls 'bind'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n\n\tstatic create( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tstatic sanitizeNodeName( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t}\n\n\tstatic parseTrackName( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( matches === null ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t}\n\n\tstatic findNode( root, nodeName ) {\n\n\t\tif ( nodeName === undefined || nodeName === '' || nodeName === '.' || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable() {}\n\t_setValue_unavailable() {}\n\n\t// Getters\n\n\t_getValue_direct( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.targetObject[ this.propertyName ];\n\n\t}\n\n\t_getValue_array( buffer, offset ) {\n\n\t\tconst source = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t}\n\n\t}\n\n\t_getValue_arrayElement( buffer, offset ) {\n\n\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t}\n\n\t_getValue_toArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t}\n\n\t// Direct\n\n\t_setValue_direct( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// EntireArray\n\n\t_setValue_array( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t}\n\n\t_setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tconst dest = this.resolvedProperty;\n\n\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t}\n\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// ArrayElement\n\n\t_setValue_arrayElement( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t}\n\n\t_setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t// HasToFromArray\n\n\t_setValue_fromArray( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t}\n\n\t_setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.needsUpdate = true;\n\n\t}\n\n\t_setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t}\n\n\t_getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t}\n\n\t_setValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t}\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind() {\n\n\t\tlet targetObject = this.node;\n\t\tconst parsedPath = this.parsedPath;\n\n\t\tconst objectName = parsedPath.objectName;\n\t\tconst propertyName = parsedPath.propertyName;\n\t\tlet propertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName );\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.warn( 'THREE.PropertyBinding: No target node found for track: ' + this.path + '.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'map':\n\n\t\t\t\t\tif ( 'map' in targetObject ) {\n\n\t\t\t\t\t\ttargetObject = targetObject.map;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.map ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.map;\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === 'morphTargetInfluences' ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t}\n\n\tunbind() {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n}\n\nPropertyBinding.Composite = Composite;\n\nPropertyBinding.prototype.BindingType = {\n\tDirect: 0,\n\tEntireArray: 1,\n\tArrayElement: 2,\n\tHasFromToArray: 3\n};\n\nPropertyBinding.prototype.Versioning = {\n\tNone: 0,\n\tNeedsUpdate: 1,\n\tMatrixWorldNeedsUpdate: 2\n};\n\nPropertyBinding.prototype.GetterByBindingType = [\n\n\tPropertyBinding.prototype._getValue_direct,\n\tPropertyBinding.prototype._getValue_array,\n\tPropertyBinding.prototype._getValue_arrayElement,\n\tPropertyBinding.prototype._getValue_toArray,\n\n];\n\nPropertyBinding.prototype.SetterByBindingTypeAndVersioning = [\n\n\t[\n\t\t// Direct\n\t\tPropertyBinding.prototype._setValue_direct,\n\t\tPropertyBinding.prototype._setValue_direct_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// EntireArray\n\n\t\tPropertyBinding.prototype._setValue_array,\n\t\tPropertyBinding.prototype._setValue_array_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// ArrayElement\n\t\tPropertyBinding.prototype._setValue_arrayElement,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate,\n\n\t], [\n\n\t\t// HasToFromArray\n\t\tPropertyBinding.prototype._setValue_fromArray,\n\t\tPropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,\n\t\tPropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate,\n\n\t]\n\n];\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n *  - Add objects you would otherwise pass as 'root' to the\n *    constructor or the .clipAction method of AnimationMixer.\n *\n *  - Instead pass this object as 'root'.\n *\n *  - You can also add and remove objects later when the mixer\n *    is running.\n *\n * Note:\n *\n *    Objects of this class appear as one object to the mixer,\n *    so cache control of the individual objects must be done\n *    on the group.\n *\n * Limitation:\n *\n *  - The animated properties must be compatible among the\n *    all objects in the group.\n *\n *  - A single property can either be controlled through a\n *    target group or directly, but not both.\n */\n\nclass AnimationObjectGroup {\n\n\tconstructor() {\n\n\t\tthis.isAnimationObjectGroup = true;\n\n\t\tthis.uuid = generateUUID();\n\n\t\t// cached objects followed by the active ones\n\t\tthis._objects = Array.prototype.slice.call( arguments );\n\n\t\tthis.nCachedObjects_ = 0; // threshold\n\t\t// note: read by PropertyBinding.Composite\n\n\t\tconst indices = {};\n\t\tthis._indicesByUUID = indices; // for bookkeeping\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t\t}\n\n\t\tthis._paths = []; // inside: string\n\t\tthis._parsedPaths = []; // inside: { we don't care, here }\n\t\tthis._bindings = []; // inside: Array< PropertyBinding >\n\t\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tobjects: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._objects.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn this.total - scope.nCachedObjects_;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tget bindingsPerObject() {\n\n\t\t\t\treturn scope._bindings.length;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tadd() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet knownObject = undefined,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid;\n\t\t\tlet index = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\n\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\tremove() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// remove & forget\n\tuncache() {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_,\n\t\t\tnObjects = objects.length;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tconst lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tif ( lastIndex > 0 ) {\n\n\t\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t}\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_( path, parsedPath ) {\n\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath;\n\t\tlet index = indicesByPath[ path ];\n\t\tconst bindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tconst paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\tconst object = objects[ i ];\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t}\n\n\tunsubscribe_( path ) {\n\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n}\n\nclass AnimationAction {\n\n\tconstructor( mixer, clip, localRoot = null, blendMode = clip.blendMode ) {\n\n\t\tthis._mixer = mixer;\n\t\tthis._clip = clip;\n\t\tthis._localRoot = localRoot;\n\t\tthis.blendMode = blendMode;\n\n\t\tconst tracks = clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tinterpolants = new Array( nTracks );\n\n\t\tconst interpolantSettings = {\n\t\t\tendingStart: ZeroCurvatureEnding,\n\t\t\tendingEnd: ZeroCurvatureEnding\n\t\t};\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\t\tinterpolants[ i ] = interpolant;\n\t\t\tinterpolant.settings = interpolantSettings;\n\n\t\t}\n\n\t\tthis._interpolantSettings = interpolantSettings;\n\n\t\tthis._interpolants = interpolants; // bound by the mixer\n\n\t\t// inside: PropertyMixer (managed by the mixer)\n\t\tthis._propertyBindings = new Array( nTracks );\n\n\t\tthis._cacheIndex = null; // for the memory manager\n\t\tthis._byClipCacheIndex = null; // for the memory manager\n\n\t\tthis._timeScaleInterpolant = null;\n\t\tthis._weightInterpolant = null;\n\n\t\tthis.loop = LoopRepeat;\n\t\tthis._loopCount = - 1;\n\n\t\t// global mixer time when the action is to be started\n\t\t// it's set back to 'null' upon start of the action\n\t\tthis._startTime = null;\n\n\t\t// scaled local time of the action\n\t\t// gets clamped or wrapped to 0..clip.duration according to loop\n\t\tthis.time = 0;\n\n\t\tthis.timeScale = 1;\n\t\tthis._effectiveTimeScale = 1;\n\n\t\tthis.weight = 1;\n\t\tthis._effectiveWeight = 1;\n\n\t\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\t\tthis.paused = false; // true -> zero effective time scale\n\t\tthis.enabled = true; // false -> zero effective weight\n\n\t\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\t\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\t\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n\t}\n\n\t// State & Scheduling\n\n\tplay() {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t}\n\n\tstop() {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t}\n\n\treset() {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t}\n\n\tisRunning() {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t}\n\n\t// return true when play has been called\n\tisScheduled() {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t}\n\n\tstartAt( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t}\n\n\tsetLoop( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t}\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t}\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight() {\n\n\t\treturn this._effectiveWeight;\n\n\t}\n\n\tfadeIn( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t}\n\n\tfadeOut( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t}\n\n\tcrossFadeFrom( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcrossFadeTo( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t}\n\n\tstopFading() {\n\n\t\tconst weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale() {\n\n\t\treturn this._effectiveTimeScale;\n\n\t}\n\n\tsetDuration( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\tsyncWith( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t}\n\n\thalt( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t}\n\n\twarp( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t}\n\n\tstopWarping() {\n\n\t\tconst timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Object Accessors\n\n\tgetMixer() {\n\n\t\treturn this._mixer;\n\n\t}\n\n\tgetClip() {\n\n\t\treturn this._clip;\n\n\t}\n\n\tgetRoot() {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t}\n\n\t// Interna\n\n\t_update( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\tdeltaTime = 0;\n\n\t\t\t} else {\n\n\n\t\t\t\tthis._startTime = null; // unschedule\n\t\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_updateWeight( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t}\n\n\t_updateTimeScale( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t}\n\n\t_updateTime( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t}\n\n\t_setEndings( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_scheduleFading( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n}\n\nconst _controlInterpolantsResultBuffer = new Float32Array( 1 );\n\n\nclass AnimationMixer extends EventDispatcher {\n\n\tconstructor( root ) {\n\n\t\tsuper();\n\n\t\tthis._root = root;\n\t\tthis._initMemoryManager();\n\t\tthis._accuIndex = 0;\n\t\tthis.time = 0;\n\t\tthis.timeScale = 1.0;\n\n\t}\n\n\t_bindAction( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t}\n\n\t_activateAction( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t}\n\n\t_deactivateAction( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t}\n\n\t// Memory manager\n\n\t_initMemoryManager() {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t}\n\n\t_addInactiveAction( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t}\n\n\t_removeInactiveAction( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t}\n\n\t_removeInactiveBindingsForAction( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_lendAction( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t}\n\n\t_takeBackAction( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t}\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t}\n\n\t_removeInactiveBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t}\n\n\t_lendBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t}\n\n\t_takeBackBinding( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t}\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant() {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, _controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t}\n\n\t_takeBackControlInterpolant( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t}\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tconst actionsForClip = this._actionsByClip[ clipUuid ];\n\t\tlet prototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t}\n\n\t// get an existing action\n\texistingAction( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction() {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// advance the time and update apply the animation\n\tupdate( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t}\n\n\t// return this mixer's root target object\n\tgetRoot() {\n\n\t\treturn this._root;\n\n\t}\n\n\t// free all resources specific to a particular clip\n\tuncacheClip( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t}\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// remove a targeted clip from the cache\n\tuncacheAction( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n}\n\nclass Uniform {\n\n\tconstructor( value ) {\n\n\t\tthis.value = value;\n\n\t}\n\n\tclone() {\n\n\t\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n\t}\n\n}\n\nlet _id = 0;\n\nclass UniformsGroup extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.isUniformsGroup = true;\n\n\t\tObject.defineProperty( this, 'id', { value: _id ++ } );\n\n\t\tthis.name = '';\n\n\t\tthis.usage = StaticDrawUsage;\n\t\tthis.uniforms = [];\n\n\t}\n\n\tadd( uniform ) {\n\n\t\tthis.uniforms.push( uniform );\n\n\t\treturn this;\n\n\t}\n\n\tremove( uniform ) {\n\n\t\tconst index = this.uniforms.indexOf( uniform );\n\n\t\tif ( index !== - 1 ) this.uniforms.splice( index, 1 );\n\n\t\treturn this;\n\n\t}\n\n\tsetName( name ) {\n\n\t\tthis.name = name;\n\n\t\treturn this;\n\n\t}\n\n\tsetUsage( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.usage = source.usage;\n\n\t\tconst uniformsSource = source.uniforms;\n\n\t\tthis.uniforms.length = 0;\n\n\t\tfor ( let i = 0, l = uniformsSource.length; i < l; i ++ ) {\n\n\t\t\tthis.uniforms.push( uniformsSource[ i ].clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nclass InstancedInterleavedBuffer extends InterleavedBuffer {\n\n\tconstructor( array, stride, meshPerAttribute = 1 ) {\n\n\t\tsuper( array, stride );\n\n\t\tthis.isInstancedInterleavedBuffer = true;\n\n\t\tthis.meshPerAttribute = meshPerAttribute;\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t}\n\n\tclone( data ) {\n\n\t\tconst ib = super.clone( data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t}\n\n\ttoJSON( data ) {\n\n\t\tconst json = super.toJSON( data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n}\n\nclass GLBufferAttribute {\n\n\tconstructor( buffer, type, itemSize, elementSize, count ) {\n\n\t\tthis.isGLBufferAttribute = true;\n\n\t\tthis.name = '';\n\n\t\tthis.buffer = buffer;\n\t\tthis.type = type;\n\t\tthis.itemSize = itemSize;\n\t\tthis.elementSize = elementSize;\n\t\tthis.count = count;\n\n\t\tthis.version = 0;\n\n\t}\n\n\tset needsUpdate( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n\tsetBuffer( buffer ) {\n\n\t\tthis.buffer = buffer;\n\n\t\treturn this;\n\n\t}\n\n\tsetType( type, elementSize ) {\n\n\t\tthis.type = type;\n\t\tthis.elementSize = elementSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetItemSize( itemSize ) {\n\n\t\tthis.itemSize = itemSize;\n\n\t\treturn this;\n\n\t}\n\n\tsetCount( count ) {\n\n\t\tthis.count = count;\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Raycaster {\n\n\tconstructor( origin, direction, near = 0, far = Infinity ) {\n\n\t\tthis.ray = new Ray( origin, direction );\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.near = near;\n\t\tthis.far = far;\n\t\tthis.camera = null;\n\t\tthis.layers = new Layers();\n\n\t\tthis.params = {\n\t\t\tMesh: {},\n\t\t\tLine: { threshold: 1 },\n\t\t\tLOD: {},\n\t\t\tPoints: { threshold: 1 },\n\t\t\tSprite: {}\n\t\t};\n\n\t}\n\n\tset( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t}\n\n\tsetFromCamera( coords, camera ) {\n\n\t\tif ( camera.isPerspectiveCamera ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( camera.isOrthographicCamera ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type: ' + camera.type );\n\n\t\t}\n\n\t}\n\n\tintersectObject( object, recursive = true, intersects = [] ) {\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n\tintersectObjects( objects, recursive = true, intersects = [] ) {\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\n\nclass Spherical {\n\n\tconstructor( radius = 1, phi = 0, theta = 0 ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi; // polar angle\n\t\tthis.theta = theta; // azimuthal angle\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t}\n\n\t// restrict phi to be between EPS and PI-EPS\n\tmakeSafe() {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\n/**\n * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\n */\n\nclass Cylindrical {\n\n\tconstructor( radius = 1, theta = 0, y = 0 ) {\n\n\t\tthis.radius = radius; // distance from the origin to a point in the x-z plane\n\t\tthis.theta = theta; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\n\t\tthis.y = y; // height above the x-z plane\n\n\t\treturn this;\n\n\t}\n\n\tset( radius, theta, y ) {\n\n\t\tthis.radius = radius;\n\t\tthis.theta = theta;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tcopy( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.theta = other.theta;\n\t\tthis.y = other.y;\n\n\t\treturn this;\n\n\t}\n\n\tsetFromVector3( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t}\n\n\tsetFromCartesianCoords( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + z * z );\n\t\tthis.theta = Math.atan2( x, z );\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$4 = /*@__PURE__*/ new Vector2();\n\nclass Box2 {\n\n\tconstructor( min = new Vector2( + Infinity, + Infinity ), max = new Vector2( - Infinity, - Infinity ) ) {\n\n\t\tthis.isBox2 = true;\n\n\t\tthis.min = min;\n\t\tthis.max = max;\n\n\t}\n\n\tset( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromCenterAndSize( center, size ) {\n\n\t\tconst halfSize = _vector$4.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t}\n\n\tgetSize( target ) {\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t}\n\n\texpandByPoint( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t}\n\n\texpandByVector( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t}\n\n\texpandByScalar( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t}\n\n\tcontainsBox( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t}\n\n\tgetParameter( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t}\n\n\tintersectsBox( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t}\n\n\tclampPoint( point, target ) {\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.clampPoint( point, _vector$4 ).distanceTo( point );\n\n\t}\n\n\tintersect( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t}\n\n\tunion( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t}\n\n\tequals( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n}\n\nconst _startP = /*@__PURE__*/ new Vector3();\nconst _startEnd = /*@__PURE__*/ new Vector3();\n\nclass Line3 {\n\n\tconstructor( start = new Vector3(), end = new Vector3() ) {\n\n\t\tthis.start = start;\n\t\tthis.end = end;\n\n\t}\n\n\tset( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t}\n\n\tcopy( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t}\n\n\tgetCenter( target ) {\n\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t}\n\n\tdelta( target ) {\n\n\t\treturn target.subVectors( this.end, this.start );\n\n\t}\n\n\tdistanceSq() {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t}\n\n\tdistance() {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t}\n\n\tat( t, target ) {\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tclosestPointToPointParameter( point, clampToLine ) {\n\n\t\t_startP.subVectors( point, this.start );\n\t\t_startEnd.subVectors( this.end, this.start );\n\n\t\tconst startEnd2 = _startEnd.dot( _startEnd );\n\t\tconst startEnd_startP = _startEnd.dot( _startP );\n\n\t\tlet t = startEnd_startP / startEnd2;\n\n\t\tif ( clampToLine ) {\n\n\t\t\tt = clamp( t, 0, 1 );\n\n\t\t}\n\n\t\treturn t;\n\n\t}\n\n\tclosestPointToPoint( point, clampToLine, target ) {\n\n\t\tconst t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t}\n\n\tequals( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n}\n\nconst _vector$3 = /*@__PURE__*/ new Vector3();\n\nclass SpotLightHelper extends Object3D {\n\n\tconstructor( light, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'SpotLightHelper';\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst positions = [\n\t\t\t0, 0, 0, \t0, 0, 1,\n\t\t\t0, 0, 0, \t1, 0, 1,\n\t\t\t0, 0, 0,\t- 1, 0, 1,\n\t\t\t0, 0, 0, \t0, 1, 1,\n\t\t\t0, 0, 0, \t0, - 1, 1\n\t\t];\n\n\t\tfor ( let i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\n\n\t\t\tconst p1 = ( i / l ) * Math.PI * 2;\n\t\t\tconst p2 = ( j / l ) * Math.PI * 2;\n\n\t\t\tpositions.push(\n\t\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\n\t\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\n\t\t\t);\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.cone = new LineSegments( geometry, material );\n\t\tthis.add( this.cone );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\t\tthis.light.target.updateWorldMatrix( true, false );\n\n\t\tconst coneLength = this.light.distance ? this.light.distance : 1000;\n\t\tconst coneWidth = coneLength * Math.tan( this.light.angle );\n\n\t\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t\t_vector$3.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\t\tthis.cone.lookAt( _vector$3 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.cone.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.cone.material.color.copy( this.light.color );\n\n\t\t}\n\n\t}\n\n}\n\nconst _vector$2 = /*@__PURE__*/ new Vector3();\nconst _boneMatrix = /*@__PURE__*/ new Matrix4();\nconst _matrixWorldInv = /*@__PURE__*/ new Matrix4();\n\n\nclass SkeletonHelper extends LineSegments {\n\n\tconstructor( object ) {\n\n\t\tconst bones = getBoneList( object );\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst color1 = new Color( 0, 0, 1 );\n\t\tconst color2 = new Color( 0, 1, 0 );\n\n\t\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.isSkeletonHelper = true;\n\n\t\tthis.type = 'SkeletonHelper';\n\n\t\tthis.root = object;\n\t\tthis.bones = bones;\n\n\t\tthis.matrix = object.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst bones = this.bones;\n\n\t\tconst geometry = this.geometry;\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\t_matrixWorldInv.copy( this.root.matrixWorld ).invert();\n\n\t\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\t\tconst bone = bones[ i ];\n\n\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t\t_vector$2.setFromMatrixPosition( _boneMatrix );\n\t\t\t\tposition.setXYZ( j + 1, _vector$2.x, _vector$2.y, _vector$2.z );\n\n\t\t\t\tj += 2;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object.isBone === true ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\nclass PointLightHelper extends Mesh {\n\n\tconstructor( light, sphereSize, color ) {\n\n\t\tconst geometry = new SphereGeometry( sphereSize, 4, 2 );\n\t\tconst material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.light = light;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'PointLightHelper';\n\n\t\tthis.matrix = this.light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\n\t\t/*\n\t// TODO: delete this comment?\n\tconst distanceGeometry = new THREE.IcosahedronGeometry( 1, 2 );\n\tconst distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tconst d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\t/*\n\t\tconst d = this.light.distance;\n\n\t\tif ( d === 0.0 ) {\n\n\t\t\tthis.lightDistance.visible = false;\n\n\t\t} else {\n\n\t\t\tthis.lightDistance.visible = true;\n\t\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t\t}\n\t\t*/\n\n\t}\n\n}\n\nconst _vector$1 = /*@__PURE__*/ new Vector3();\nconst _color1 = /*@__PURE__*/ new Color();\nconst _color2 = /*@__PURE__*/ new Color();\n\nclass HemisphereLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'HemisphereLightHelper';\n\n\t\tconst geometry = new OctahedronGeometry( size );\n\t\tgeometry.rotateY( Math.PI * 0.5 );\n\n\t\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\t\tif ( this.color === undefined ) this.material.vertexColors = true;\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\t\tconst colors = new Float32Array( position.count * 3 );\n\n\t\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\t\tthis.add( new Mesh( geometry, this.material ) );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tconst mesh = this.children[ 0 ];\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tconst colors = mesh.geometry.getAttribute( 'color' );\n\n\t\t\t_color1.copy( this.light.color );\n\t\t\t_color2.copy( this.light.groundColor );\n\n\t\t\tfor ( let i = 0, l = colors.count; i < l; i ++ ) {\n\n\t\t\t\tconst color = ( i < ( l / 2 ) ) ? _color1 : _color2;\n\n\t\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t\tcolors.needsUpdate = true;\n\n\t\t}\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\n\t\tmesh.lookAt( _vector$1.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\n\t}\n\n}\n\nclass GridHelper extends LineSegments {\n\n\tconstructor( size = 10, divisions = 10, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst center = divisions / 2;\n\t\tconst step = size / divisions;\n\t\tconst halfSize = size / 2;\n\n\t\tconst vertices = [], colors = [];\n\n\t\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\n\n\t\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\n\t\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\n\n\t\t\tconst color = i === center ? color1 : color2;\n\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\t\t\tcolor.toArray( colors, j ); j += 3;\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'GridHelper';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass PolarGridHelper extends LineSegments {\n\n\tconstructor( radius = 10, sectors = 16, rings = 8, divisions = 64, color1 = 0x444444, color2 = 0x888888 ) {\n\n\t\tcolor1 = new Color( color1 );\n\t\tcolor2 = new Color( color2 );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\t// create the sectors\n\n\t\tif ( sectors > 1 ) {\n\n\t\t\tfor ( let i = 0; i < sectors; i ++ ) {\n\n\t\t\t\tconst v = ( i / sectors ) * ( Math.PI * 2 );\n\n\t\t\t\tconst x = Math.sin( v ) * radius;\n\t\t\t\tconst z = Math.cos( v ) * radius;\n\n\t\t\t\tvertices.push( 0, 0, 0 );\n\t\t\t\tvertices.push( x, 0, z );\n\n\t\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// create the rings\n\n\t\tfor ( let i = 0; i < rings; i ++ ) {\n\n\t\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\t\tconst r = radius - ( radius / rings * i );\n\n\t\t\tfor ( let j = 0; j < divisions; j ++ ) {\n\n\t\t\t\t// first vertex\n\n\t\t\t\tlet v = ( j / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tlet x = Math.sin( v ) * r;\n\t\t\t\tlet z = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t\t// second vertex\n\n\t\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\n\n\t\t\t\tx = Math.sin( v ) * r;\n\t\t\t\tz = Math.cos( v ) * r;\n\n\t\t\t\tvertices.push( x, 0, z );\n\t\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'PolarGridHelper';\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nconst _v1 = /*@__PURE__*/ new Vector3();\nconst _v2 = /*@__PURE__*/ new Vector3();\nconst _v3 = /*@__PURE__*/ new Vector3();\n\nclass DirectionalLightHelper extends Object3D {\n\n\tconstructor( light, size, color ) {\n\n\t\tsuper();\n\n\t\tthis.light = light;\n\n\t\tthis.matrix = light.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.color = color;\n\n\t\tthis.type = 'DirectionalLightHelper';\n\n\t\tif ( size === undefined ) size = 1;\n\n\t\tlet geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [\n\t\t\t- size, size, 0,\n\t\t\tsize, size, 0,\n\t\t\tsize, - size, 0,\n\t\t\t- size, - size, 0,\n\t\t\t- size, size, 0\n\t\t], 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\t\tthis.lightPlane = new Line( geometry, material );\n\t\tthis.add( this.lightPlane );\n\n\t\tgeometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\n\n\t\tthis.targetLine = new Line( geometry, material );\n\t\tthis.add( this.targetLine );\n\n\t\tthis.update();\n\n\t}\n\n\tdispose() {\n\n\t\tthis.lightPlane.geometry.dispose();\n\t\tthis.lightPlane.material.dispose();\n\t\tthis.targetLine.geometry.dispose();\n\t\tthis.targetLine.material.dispose();\n\n\t}\n\n\tupdate() {\n\n\t\tthis.light.updateWorldMatrix( true, false );\n\t\tthis.light.target.updateWorldMatrix( true, false );\n\n\t\t_v1.setFromMatrixPosition( this.light.matrixWorld );\n\t\t_v2.setFromMatrixPosition( this.light.target.matrixWorld );\n\t\t_v3.subVectors( _v2, _v1 );\n\n\t\tthis.lightPlane.lookAt( _v2 );\n\n\t\tif ( this.color !== undefined ) {\n\n\t\t\tthis.lightPlane.material.color.set( this.color );\n\t\t\tthis.targetLine.material.color.set( this.color );\n\n\t\t} else {\n\n\t\t\tthis.lightPlane.material.color.copy( this.light.color );\n\t\t\tthis.targetLine.material.color.copy( this.light.color );\n\n\t\t}\n\n\t\tthis.targetLine.lookAt( _v2 );\n\t\tthis.targetLine.scale.z = _v3.length();\n\n\t}\n\n}\n\nconst _vector = /*@__PURE__*/ new Vector3();\nconst _camera = /*@__PURE__*/ new Camera();\n\n/**\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttps://github.com/evanw/lightgl.js/blob/master/tests/shadowmap.html\n */\n\nclass CameraHelper extends LineSegments {\n\n\tconstructor( camera ) {\n\n\t\tconst geometry = new BufferGeometry();\n\t\tconst material = new LineBasicMaterial( { color: 0xffffff, vertexColors: true, toneMapped: false } );\n\n\t\tconst vertices = [];\n\t\tconst colors = [];\n\n\t\tconst pointMap = {};\n\n\t\t// near\n\n\t\taddLine( 'n1', 'n2' );\n\t\taddLine( 'n2', 'n4' );\n\t\taddLine( 'n4', 'n3' );\n\t\taddLine( 'n3', 'n1' );\n\n\t\t// far\n\n\t\taddLine( 'f1', 'f2' );\n\t\taddLine( 'f2', 'f4' );\n\t\taddLine( 'f4', 'f3' );\n\t\taddLine( 'f3', 'f1' );\n\n\t\t// sides\n\n\t\taddLine( 'n1', 'f1' );\n\t\taddLine( 'n2', 'f2' );\n\t\taddLine( 'n3', 'f3' );\n\t\taddLine( 'n4', 'f4' );\n\n\t\t// cone\n\n\t\taddLine( 'p', 'n1' );\n\t\taddLine( 'p', 'n2' );\n\t\taddLine( 'p', 'n3' );\n\t\taddLine( 'p', 'n4' );\n\n\t\t// up\n\n\t\taddLine( 'u1', 'u2' );\n\t\taddLine( 'u2', 'u3' );\n\t\taddLine( 'u3', 'u1' );\n\n\t\t// target\n\n\t\taddLine( 'c', 't' );\n\t\taddLine( 'p', 'c' );\n\n\t\t// cross\n\n\t\taddLine( 'cn1', 'cn2' );\n\t\taddLine( 'cn3', 'cn4' );\n\n\t\taddLine( 'cf1', 'cf2' );\n\t\taddLine( 'cf3', 'cf4' );\n\n\t\tfunction addLine( a, b ) {\n\n\t\t\taddPoint( a );\n\t\t\taddPoint( b );\n\n\t\t}\n\n\t\tfunction addPoint( id ) {\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tcolors.push( 0, 0, 0 );\n\n\t\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\t\tpointMap[ id ] = [];\n\n\t\t\t}\n\n\t\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\n\n\t\t}\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'CameraHelper';\n\n\t\tthis.camera = camera;\n\t\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\t\tthis.matrix = camera.matrixWorld;\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.pointMap = pointMap;\n\n\t\tthis.update();\n\n\t\t// colors\n\n\t\tconst colorFrustum = new Color( 0xffaa00 );\n\t\tconst colorCone = new Color( 0xff0000 );\n\t\tconst colorUp = new Color( 0x00aaff );\n\t\tconst colorTarget = new Color( 0xffffff );\n\t\tconst colorCross = new Color( 0x333333 );\n\n\t\tthis.setColors( colorFrustum, colorCone, colorUp, colorTarget, colorCross );\n\n\t}\n\n\tsetColors( frustum, cone, up, target, cross ) {\n\n\t\tconst geometry = this.geometry;\n\n\t\tconst colorAttribute = geometry.getAttribute( 'color' );\n\n\t\t// near\n\n\t\tcolorAttribute.setXYZ( 0, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 1, frustum.r, frustum.g, frustum.b ); // n1, n2\n\t\tcolorAttribute.setXYZ( 2, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 3, frustum.r, frustum.g, frustum.b ); // n2, n4\n\t\tcolorAttribute.setXYZ( 4, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 5, frustum.r, frustum.g, frustum.b ); // n4, n3\n\t\tcolorAttribute.setXYZ( 6, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 7, frustum.r, frustum.g, frustum.b ); // n3, n1\n\n\t\t// far\n\n\t\tcolorAttribute.setXYZ( 8, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 9, frustum.r, frustum.g, frustum.b ); // f1, f2\n\t\tcolorAttribute.setXYZ( 10, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 11, frustum.r, frustum.g, frustum.b ); // f2, f4\n\t\tcolorAttribute.setXYZ( 12, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 13, frustum.r, frustum.g, frustum.b ); // f4, f3\n\t\tcolorAttribute.setXYZ( 14, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 15, frustum.r, frustum.g, frustum.b ); // f3, f1\n\n\t\t// sides\n\n\t\tcolorAttribute.setXYZ( 16, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 17, frustum.r, frustum.g, frustum.b ); // n1, f1\n\t\tcolorAttribute.setXYZ( 18, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 19, frustum.r, frustum.g, frustum.b ); // n2, f2\n\t\tcolorAttribute.setXYZ( 20, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 21, frustum.r, frustum.g, frustum.b ); // n3, f3\n\t\tcolorAttribute.setXYZ( 22, frustum.r, frustum.g, frustum.b ); colorAttribute.setXYZ( 23, frustum.r, frustum.g, frustum.b ); // n4, f4\n\n\t\t// cone\n\n\t\tcolorAttribute.setXYZ( 24, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 25, cone.r, cone.g, cone.b ); // p, n1\n\t\tcolorAttribute.setXYZ( 26, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 27, cone.r, cone.g, cone.b ); // p, n2\n\t\tcolorAttribute.setXYZ( 28, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 29, cone.r, cone.g, cone.b ); // p, n3\n\t\tcolorAttribute.setXYZ( 30, cone.r, cone.g, cone.b ); colorAttribute.setXYZ( 31, cone.r, cone.g, cone.b ); // p, n4\n\n\t\t// up\n\n\t\tcolorAttribute.setXYZ( 32, up.r, up.g, up.b ); colorAttribute.setXYZ( 33, up.r, up.g, up.b ); // u1, u2\n\t\tcolorAttribute.setXYZ( 34, up.r, up.g, up.b ); colorAttribute.setXYZ( 35, up.r, up.g, up.b ); // u2, u3\n\t\tcolorAttribute.setXYZ( 36, up.r, up.g, up.b ); colorAttribute.setXYZ( 37, up.r, up.g, up.b ); // u3, u1\n\n\t\t// target\n\n\t\tcolorAttribute.setXYZ( 38, target.r, target.g, target.b ); colorAttribute.setXYZ( 39, target.r, target.g, target.b ); // c, t\n\t\tcolorAttribute.setXYZ( 40, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 41, cross.r, cross.g, cross.b ); // p, c\n\n\t\t// cross\n\n\t\tcolorAttribute.setXYZ( 42, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 43, cross.r, cross.g, cross.b ); // cn1, cn2\n\t\tcolorAttribute.setXYZ( 44, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 45, cross.r, cross.g, cross.b ); // cn3, cn4\n\n\t\tcolorAttribute.setXYZ( 46, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 47, cross.r, cross.g, cross.b ); // cf1, cf2\n\t\tcolorAttribute.setXYZ( 48, cross.r, cross.g, cross.b ); colorAttribute.setXYZ( 49, cross.r, cross.g, cross.b ); // cf3, cf4\n\n\t\tcolorAttribute.needsUpdate = true;\n\n\t}\n\n\tupdate() {\n\n\t\tconst geometry = this.geometry;\n\t\tconst pointMap = this.pointMap;\n\n\t\tconst w = 1, h = 1;\n\n\t\t// we need just camera projection matrix inverse\n\t\t// world matrix must be identity\n\n\t\t_camera.projectionMatrixInverse.copy( this.camera.projectionMatrixInverse );\n\n\t\t// center / target\n\n\t\tsetPoint( 'c', pointMap, geometry, _camera, 0, 0, - 1 );\n\t\tsetPoint( 't', pointMap, geometry, _camera, 0, 0, 1 );\n\n\t\t// near\n\n\t\tsetPoint( 'n1', pointMap, geometry, _camera, - w, - h, - 1 );\n\t\tsetPoint( 'n2', pointMap, geometry, _camera, w, - h, - 1 );\n\t\tsetPoint( 'n3', pointMap, geometry, _camera, - w, h, - 1 );\n\t\tsetPoint( 'n4', pointMap, geometry, _camera, w, h, - 1 );\n\n\t\t// far\n\n\t\tsetPoint( 'f1', pointMap, geometry, _camera, - w, - h, 1 );\n\t\tsetPoint( 'f2', pointMap, geometry, _camera, w, - h, 1 );\n\t\tsetPoint( 'f3', pointMap, geometry, _camera, - w, h, 1 );\n\t\tsetPoint( 'f4', pointMap, geometry, _camera, w, h, 1 );\n\n\t\t// up\n\n\t\tsetPoint( 'u1', pointMap, geometry, _camera, w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u2', pointMap, geometry, _camera, - w * 0.7, h * 1.1, - 1 );\n\t\tsetPoint( 'u3', pointMap, geometry, _camera, 0, h * 2, - 1 );\n\n\t\t// cross\n\n\t\tsetPoint( 'cf1', pointMap, geometry, _camera, - w, 0, 1 );\n\t\tsetPoint( 'cf2', pointMap, geometry, _camera, w, 0, 1 );\n\t\tsetPoint( 'cf3', pointMap, geometry, _camera, 0, - h, 1 );\n\t\tsetPoint( 'cf4', pointMap, geometry, _camera, 0, h, 1 );\n\n\t\tsetPoint( 'cn1', pointMap, geometry, _camera, - w, 0, - 1 );\n\t\tsetPoint( 'cn2', pointMap, geometry, _camera, w, 0, - 1 );\n\t\tsetPoint( 'cn3', pointMap, geometry, _camera, 0, - h, - 1 );\n\t\tsetPoint( 'cn4', pointMap, geometry, _camera, 0, h, - 1 );\n\n\t\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\n\nfunction setPoint( point, pointMap, geometry, camera, x, y, z ) {\n\n\t_vector.set( x, y, z ).unproject( camera );\n\n\tconst points = pointMap[ point ];\n\n\tif ( points !== undefined ) {\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tposition.setXYZ( points[ i ], _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t}\n\n}\n\nconst _box = /*@__PURE__*/ new Box3();\n\nclass BoxHelper extends LineSegments {\n\n\tconstructor( object, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\t\tconst positions = new Float32Array( 8 * 3 );\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\t\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.object = object;\n\t\tthis.type = 'BoxHelper';\n\n\t\tthis.matrixAutoUpdate = false;\n\n\t\tthis.update();\n\n\t}\n\n\tupdate( object ) {\n\n\t\tif ( object !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\n\n\t\t}\n\n\t\tif ( this.object !== undefined ) {\n\n\t\t\t_box.setFromObject( this.object );\n\n\t\t}\n\n\t\tif ( _box.isEmpty() ) return;\n\n\t\tconst min = _box.min;\n\t\tconst max = _box.max;\n\n\t\t/*\n\t\t\t5____4\n\t\t1/___0/|\n\t\t| 6__|_7\n\t\t2/___3/\n\n\t\t0: max.x, max.y, max.z\n\t\t1: min.x, max.y, max.z\n\t\t2: min.x, min.y, max.z\n\t\t3: max.x, min.y, max.z\n\t\t4: max.x, max.y, min.z\n\t\t5: min.x, max.y, min.z\n\t\t6: min.x, min.y, min.z\n\t\t7: max.x, min.y, min.z\n\t\t*/\n\n\t\tconst position = this.geometry.attributes.position;\n\t\tconst array = position.array;\n\n\t\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\n\t\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\n\t\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\n\t\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\t\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\t\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\t\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\t\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\t\tposition.needsUpdate = true;\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tthis.object = object;\n\t\tthis.update();\n\n\t\treturn this;\n\n\t}\n\n\tcopy( source, recursive ) {\n\n\t\tsuper.copy( source, recursive );\n\n\t\tthis.object = source.object;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass Box3Helper extends LineSegments {\n\n\tconstructor( box, color = 0xffff00 ) {\n\n\t\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\n\t\tconst positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\n\n\t\tconst geometry = new BufferGeometry();\n\n\t\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.box = box;\n\n\t\tthis.type = 'Box3Helper';\n\n\t\tthis.geometry.computeBoundingSphere();\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tconst box = this.box;\n\n\t\tif ( box.isEmpty() ) return;\n\n\t\tbox.getCenter( this.position );\n\n\t\tbox.getSize( this.scale );\n\n\t\tthis.scale.multiplyScalar( 0.5 );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass PlaneHelper extends Line {\n\n\tconstructor( plane, size = 1, hex = 0xffff00 ) {\n\n\t\tconst color = hex;\n\n\t\tconst positions = [ 1, - 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, - 1, 0, 1, 1, 0 ];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\t\tgeometry.computeBoundingSphere();\n\n\t\tsuper( geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\t\tthis.type = 'PlaneHelper';\n\n\t\tthis.plane = plane;\n\n\t\tthis.size = size;\n\n\t\tconst positions2 = [ 1, 1, 0, - 1, 1, 0, - 1, - 1, 0, 1, 1, 0, - 1, - 1, 0, 1, - 1, 0 ];\n\n\t\tconst geometry2 = new BufferGeometry();\n\t\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\n\t\tgeometry2.computeBoundingSphere();\n\n\t\tthis.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false, toneMapped: false } ) ) );\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tthis.position.set( 0, 0, 0 );\n\n\t\tthis.scale.set( 0.5 * this.size, 0.5 * this.size, 1 );\n\n\t\tthis.lookAt( this.plane.normal );\n\n\t\tthis.translateZ( - this.plane.constant );\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\t\tthis.children[ 0 ].geometry.dispose();\n\t\tthis.children[ 0 ].material.dispose();\n\n\t}\n\n}\n\nconst _axis = /*@__PURE__*/ new Vector3();\nlet _lineGeometry, _coneGeometry;\n\nclass ArrowHelper extends Object3D {\n\n\t// dir is assumed to be normalized\n\n\tconstructor( dir = new Vector3( 0, 0, 1 ), origin = new Vector3( 0, 0, 0 ), length = 1, color = 0xffff00, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'ArrowHelper';\n\n\t\tif ( _lineGeometry === undefined ) {\n\n\t\t\t_lineGeometry = new BufferGeometry();\n\t\t\t_lineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\t\t_coneGeometry = new CylinderGeometry( 0, 0.5, 1, 5, 1 );\n\t\t\t_coneGeometry.translate( 0, - 0.5, 0 );\n\n\t\t}\n\n\t\tthis.position.copy( origin );\n\n\t\tthis.line = new Line( _lineGeometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.line.matrixAutoUpdate = false;\n\t\tthis.add( this.line );\n\n\t\tthis.cone = new Mesh( _coneGeometry, new MeshBasicMaterial( { color: color, toneMapped: false } ) );\n\t\tthis.cone.matrixAutoUpdate = false;\n\t\tthis.add( this.cone );\n\n\t\tthis.setDirection( dir );\n\t\tthis.setLength( length, headLength, headWidth );\n\n\t}\n\n\tsetDirection( dir ) {\n\n\t\t// dir is assumed to be normalized\n\n\t\tif ( dir.y > 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t\t} else if ( dir.y < - 0.99999 ) {\n\n\t\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t\t} else {\n\n\t\t\t_axis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\t\tconst radians = Math.acos( dir.y );\n\n\t\t\tthis.quaternion.setFromAxisAngle( _axis, radians );\n\n\t\t}\n\n\t}\n\n\tsetLength( length, headLength = length * 0.2, headWidth = headLength * 0.2 ) {\n\n\t\tthis.line.scale.set( 1, Math.max( 0.0001, length - headLength ), 1 ); // see #17458\n\t\tthis.line.updateMatrix();\n\n\t\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\t\tthis.cone.position.y = length;\n\t\tthis.cone.updateMatrix();\n\n\t}\n\n\tsetColor( color ) {\n\n\t\tthis.line.material.color.set( color );\n\t\tthis.cone.material.color.set( color );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source, false );\n\n\t\tthis.line.copy( source.line );\n\t\tthis.cone.copy( source.cone );\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.line.geometry.dispose();\n\t\tthis.line.material.dispose();\n\t\tthis.cone.geometry.dispose();\n\t\tthis.cone.material.dispose();\n\n\t}\n\n}\n\nclass AxesHelper extends LineSegments {\n\n\tconstructor( size = 1 ) {\n\n\t\tconst vertices = [\n\t\t\t0, 0, 0,\tsize, 0, 0,\n\t\t\t0, 0, 0,\t0, size, 0,\n\t\t\t0, 0, 0,\t0, 0, size\n\t\t];\n\n\t\tconst colors = [\n\t\t\t1, 0, 0,\t1, 0.6, 0,\n\t\t\t0, 1, 0,\t0.6, 1, 0,\n\t\t\t0, 0, 1,\t0, 0.6, 1\n\t\t];\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\t\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\t\tsuper( geometry, material );\n\n\t\tthis.type = 'AxesHelper';\n\n\t}\n\n\tsetColors( xAxisColor, yAxisColor, zAxisColor ) {\n\n\t\tconst color = new Color();\n\t\tconst array = this.geometry.attributes.color.array;\n\n\t\tcolor.set( xAxisColor );\n\t\tcolor.toArray( array, 0 );\n\t\tcolor.toArray( array, 3 );\n\n\t\tcolor.set( yAxisColor );\n\t\tcolor.toArray( array, 6 );\n\t\tcolor.toArray( array, 9 );\n\n\t\tcolor.set( zAxisColor );\n\t\tcolor.toArray( array, 12 );\n\t\tcolor.toArray( array, 15 );\n\n\t\tthis.geometry.attributes.color.needsUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\tdispose() {\n\n\t\tthis.geometry.dispose();\n\t\tthis.material.dispose();\n\n\t}\n\n}\n\nclass ShapePath {\n\n\tconstructor() {\n\n\t\tthis.type = 'ShapePath';\n\n\t\tthis.color = new Color();\n\n\t\tthis.subPaths = [];\n\t\tthis.currentPath = null;\n\n\t}\n\n\tmoveTo( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tlineTo( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t}\n\n\tquadraticCurveTo( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tbezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t}\n\n\tsplineThru( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t}\n\n\ttoShapes( isCCW ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tconst shapes = [];\n\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\n\n\t\t\t\tconst tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tconst polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tlet inside = false;\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tconst isClockWise = ShapeUtils.isClockWise;\n\n\t\tconst subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tlet solid, tmpPath, tmpShape;\n\t\tconst shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tconst betterShapeHoles = [];\n\t\tconst newShapes = [];\n\t\tlet newShapeHoles = [];\n\t\tlet mainIdx = 0;\n\t\tlet tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tlet ambiguous = false;\n\t\t\tlet toChange = 0;\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tconst ho = sho[ hIdx ];\n\t\t\t\t\tlet hole_unassigned = true;\n\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange ++;\n\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( toChange > 0 && ambiguous === false ) {\n\n\t\t\t\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet tmpHoles;\n\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n}\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\n}\n\nif ( typeof window !== 'undefined' ) {\n\n\tif ( window.__THREE__ ) {\n\n\t\tconsole.warn( 'WARNING: Multiple instances of Three.js being imported.' );\n\n\t} else {\n\n\t\twindow.__THREE__ = REVISION;\n\n\t}\n\n}\n\nexport { ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveAnimationBlendMode, AdditiveBlending, AlphaFormat, AlwaysCompare, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AnimationAction, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, BackSide, BasicDepthPacking, BasicShadowMap, Bone, BooleanKeyframeTrack, Box2, Box3, Box3Helper, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasTexture, CapsuleGeometry, CatmullRomCurve3, CineonToneMapping, CircleGeometry, ClampToEdgeWrapping, Clock, Color, ColorKeyframeTrack, ColorManagement, CompressedArrayTexture, CompressedCubeTexture, CompressedTexture, CompressedTextureLoader, ConeGeometry, CubeCamera, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CustomToneMapping, CylinderGeometry, Cylindrical, Data3DTexture, DataArrayTexture, DataTexture, DataTextureLoader, DataUtils, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DirectionalLight, DirectionalLightHelper, DiscreteInterpolant, DisplayP3ColorSpace, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EllipseCurve, EqualCompare, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeGeometry, FileLoader, Float16BufferAttribute, Float32BufferAttribute, Float64BufferAttribute, FloatType, Fog, FogExp2, FramebufferTexture, FrontSide, Frustum, GLBufferAttribute, GLSL1, GLSL3, GreaterCompare, GreaterDepth, GreaterEqualCompare, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16BufferAttribute, Int32BufferAttribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, KeepStencilOp, KeyframeTrack, LOD, LatheGeometry, Layers, LessCompare, LessDepth, LessEqualCompare, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LineSegments, LinearDisplayP3ColorSpace, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearSRGBColorSpace, LinearToneMapping, LinearTransfer, Loader, LoaderUtils, LoadingManager, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverCompare, NeverDepth, NeverStencilFunc, NoBlending, NoColorSpace, NoToneMapping, NormalAnimationBlendMode, NormalBlending, NotEqualCompare, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronGeometry, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, P3Primaries, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, Path, PerspectiveCamera, Plane, PlaneGeometry, PlaneHelper, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, RED_GREEN_RGTC2_Format, RED_RGTC1_Format, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGB_BPTC_SIGNED_Format, RGB_BPTC_UNSIGNED_Format, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, Rec709Primaries, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RenderTarget, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingGeometry, SIGNED_RED_GREEN_RGTC2_Format, SIGNED_RED_RGTC1_Format, SRGBColorSpace, SRGBTransfer, Scene, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, Source, Sphere, SphereGeometry, Spherical, SphericalHarmonics3, SplineCurve, SpotLight, SpotLightHelper, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronGeometry, Texture, TextureLoader, TorusGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeGeometry, TwoPassDoubleSide, UVMapping, Uint16BufferAttribute, Uint32BufferAttribute, Uint8BufferAttribute, Uint8ClampedBufferAttribute, Uniform, UniformsGroup, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, VideoTexture, WebGL1Renderer, WebGL3DRenderTarget, WebGLArrayRenderTarget, WebGLCoordinateSystem, WebGLCubeRenderTarget, WebGLMultipleRenderTargets, WebGLRenderTarget, WebGLRenderer, WebGLUtils, WebGPUCoordinateSystem, WireframeGeometry, WrapAroundEnding, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, _SRGBAFormat, createCanvasElement, sRGBEncoding };\n","// Main entry point for webpack\r\nimport * as THREE from 'three';\r\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\r\n\r\n// Make THREE available globally\r\nwindow.THREE = THREE;\r\nwindow.OrbitControls = OrbitControls;\r\n\r\n// Import game modules\r\nimport '../flask_app/static/js/game.js';\r\nimport '../flask_app/static/js/ui.js';\r\nimport '../flask_app/static/js/buildMenu.js';\r\nimport '../flask_app/static/js/shipBuilder.js';\r\nimport '../flask_app/static/js/objects/planet.js';\r\nimport '../flask_app/static/js/objects/star.js';\r\nimport '../flask_app/static/js/materials/atmosphere.js';\r\nimport '../flask_app/static/js/materials/noise.js';\r\nimport '../flask_app/static/js/materials/planetMaterial.js';\r\nimport '../flask_app/static/js/shaders/atmosphere.js';\r\nimport '../flask_app/static/js/shaders/noise.js';\r\n\r\nconsole.log('Game modules loaded successfully');"],"sourceRoot":""}